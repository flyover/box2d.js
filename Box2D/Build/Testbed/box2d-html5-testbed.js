var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,c,b){a=a.split(".");b=b||goog.global;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(c)?b[d]=c:b=b[d]?b[d]:b[d]={}};
goog.define=function(a,c){var b=c;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?b=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(b=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,b)};goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.provide=function(a){if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,c){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a,c)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED)return goog.isProvided_(a)?a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,c){for(var b=a.split("."),d=c||goog.global,e;e=b.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,c){var b=c||goog.global,d;for(d in a)b[d]=a[d]};goog.addDependency=function(a,c,b,d){if(goog.DEPENDENCIES_ENABLED){var e;a=a.replace(/\\/g,"/");for(var f=goog.dependencies_,g=0;e=c[g];g++)f.nameToPath[e]=a,f.pathIsModule[a]=!!d;for(d=0;c=b[d];d++)a in f.requires||(f.requires[a]={}),f.requires[a][c]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(a);if(goog.isProvided_(a))return goog.isInModuleLoader_()?goog.module.getInternal_(a):null;if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c)return goog.included_[c]=!0,goog.writeScripts_(),null}a="goog.require could not find: "+a;goog.logToConsole_(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var b=a[c].src,d=b.lastIndexOf("?"),
d=-1==d?b.length:d;if("base.js"==b.substr(d-7,7)){goog.basePath=b.substr(0,d-7);break}}},goog.importScript_=function(a,c){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(a,c)&&(goog.dependencies_.written[a]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(a){goog.importScript_("",'goog.retrieveAndExecModule_("'+a+'");')&&(goog.dependencies_.written[a]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(a,c){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(c+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+c+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(0<a){var c=goog.queuedModules_;goog.queuedModules_=[];for(var b=0;b<a;b++)goog.maybeProcessDeferredPath_(c[b])}},goog.maybeProcessDeferredDep_=function(a){goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)&&(a=goog.getPathFromDeps_(a),
goog.maybeProcessDeferredPath_(goog.basePath+a))},goog.isDeferredModule_=function(a){return(a=goog.getPathFromDeps_(a))&&goog.dependencies_.pathIsModule[a]?goog.basePath+a in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(a){if((a=goog.getPathFromDeps_(a))&&a in goog.dependencies_.requires)for(var c in goog.dependencies_.requires[a])if(!goog.isProvided_(c)&&!goog.isDeferredModule_(c))return!1;return!0},goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var c=
goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(c)}},goog.loadModule=function(a){var c=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var b;if(goog.isFunction(a))b=a.call(goog.global,{});else if(goog.isString(a))b=goog.loadModuleFromSource_.call(goog.global,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(d,b):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(b);goog.loadedModules_[d]=b;if(goog.moduleLoaderState_.declareTestMethods)for(var e in b)if(0===e.indexOf("test",0)||"tearDown"==e||"setUp"==e||"setUpPage"==e||"tearDownPage"==e)goog.global[e]=b[e]}finally{goog.moduleLoaderState_=c}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptTag_=function(a,c){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;
throw Error('Cannot write "'+a+'" after document load');}var d=goog.IS_OLD_IE_;void 0===c?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",b.write('<script type="text/javascript" src="'+a+'"'+d+">\x3c/script>")):b.write('<script type="text/javascript" src="'+a+'">\x3c/script>'):b.write('<script type="text/javascript">'+c+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(a,c){"complete"==a.readyState&&goog.lastNonModuleScriptIndex_==
c&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in b||(b[e]=!0,c.push(e))}}var c=[],b={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(var f=0;f<c.length;f++)e=c[f],goog.dependencies_.written[e]=!0;var g=goog.moduleLoaderState_;
goog.moduleLoaderState_=null;for(f=0;f<c.length;f++)if(e=c[f])d.pathIsModule[e]?goog.importModule_(goog.basePath+e):goog.importScript_(goog.basePath+e);else throw goog.moduleLoaderState_=g,Error("Undefined script input");goog.moduleLoaderState_=g},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.normalizePath_=function(a){a=a.split("/");for(var c=0;c<a.length;)"."==a[c]?a.splice(c,1):c&&".."==a[c]&&a[c-1]&&".."!=a[c-1]?a.splice(--c,2):c++;return a.join("/")};
goog.retrieveAndExecModule_=function(a){if(!COMPILED){var c=a;a=goog.normalizePath_(a);var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=null,e=new goog.global.XMLHttpRequest;e.onload=function(){d=this.responseText};e.open("get",a,!1);e.send();d=e.responseText;if(null!=d)e=goog.wrapModule_(a,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[c]=e,goog.queuedModules_.push(c)):b(a,e);else throw Error("load of "+a+"failed");}};
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},b;for(b in a)c[b]=goog.cloneObject(a[b]);return c}return a};goog.bindNative_=function(a,c,b){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,b){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}};goog.mixin=function(a,c){for(var b in c)a[b]=c[b]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,b=c.createElement("script");b.type="text/javascript";b.defer=!1;b.appendChild(c.createTextNode(a));c.body.appendChild(b);
c.body.removeChild(b)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var b=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?b:d:function(a){return a};return c?a+"-"+d(c):d(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){c&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return d in c?c[d]:a}));return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,b){goog.exportPath_(a,c,b)};goog.exportProperty=function(a,c,b){a[c]=b};
goog.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new b;a.prototype.constructor=a;a.base=function(a,b,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return c.prototype[b].apply(a,g)}};
goog.base=function(a,c,b){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];for(var f=!1,g=a.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[c]===d)f=!0;else if(f)return g.prototype[c].apply(a,e);if(a[c]===d)return a.constructor.prototype[c].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,c){var b=c.constructor,d=c.statics;b&&b!=Object.prototype.constructor||(b=function(){throw Error("cannot instantiate an interface (no constructor defined).");});b=goog.defineClass.createSealingConstructor_(b,a);a&&goog.inherits(b,a);delete c.constructor;delete c.statics;goog.defineClass.applyProperties_(b.prototype,c);null!=d&&(d instanceof Function?d(b):goog.defineClass.applyProperties_(b,d));return b};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,c){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(c&&c.prototype&&c.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return a;var b=function(){var c=a.apply(this,arguments)||this;c[goog.UID_PROPERTY_]=c[goog.UID_PROPERTY_];this.constructor===b&&Object.seal(c);return c};return b}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)b=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";var box2d={Testbed:{}};box2d.Testbed.FullScreenUI=function(){this.Reset()};box2d.Testbed.FullScreenUI.prototype.m_particleParameterSelectionEnabled=!1;box2d.Testbed.FullScreenUI.prototype.Reset=function(){this.m_particleParameterSelectionEnabled=!1};box2d.Testbed.FullScreenUI.prototype.SetParticleParameterSelectionEnabled=function(a){this.m_particleParameterSelectionEnabled=a};box2d.Testbed.FullScreenUI.prototype.GetParticleParameterSelectionEnabled=function(){return this.m_particleParameterSelectionEnabled};box2d.b2Settings={};Object.defineProperty||(Object.defineProperty=function(a,c,b){Object.__defineGetter__&&("get"in b?a.__defineGetter__(c,b.get):"value"in b&&a.__defineGetter__(c,b.value));Object.__defineSetter__&&("set"in b?a.__defineSetter__(c,b.set):"value"in b&&a.__defineSetter__(c,b.value))});box2d.DEBUG=!1;goog.exportSymbol("box2d.DEBUG",box2d.DEBUG);box2d.ENABLE_ASSERTS=box2d.DEBUG;goog.exportSymbol("box2d.ENABLE_ASSERTS",box2d.ENABLE_ASSERTS);
box2d.b2Assert=function(a,c,b){if(box2d.DEBUG&&!a)debugger};goog.exportSymbol("box2d.b2Assert",box2d.b2Assert);box2d.b2_maxFloat=1E37;goog.exportSymbol("box2d.b2_maxFloat",box2d.b2_maxFloat);box2d.b2_epsilon=1E-5;goog.exportSymbol("box2d.b2_epsilon",box2d.b2_epsilon);box2d.b2_epsilon_sq=box2d.b2_epsilon*box2d.b2_epsilon;goog.exportSymbol("box2d.b2_epsilon_sq",box2d.b2_epsilon_sq);box2d.b2_pi=Math.PI;goog.exportSymbol("box2d.b2_pi",box2d.b2_pi);box2d.b2_maxManifoldPoints=2;
goog.exportSymbol("box2d.b2_maxManifoldPoints",box2d.b2_maxManifoldPoints);box2d.b2_maxPolygonVertices=8;goog.exportSymbol("box2d.b2_maxPolygonVertices",box2d.b2_maxPolygonVertices);box2d.b2_aabbExtension=.1;goog.exportSymbol("box2d.b2_aabbExtension",box2d.b2_aabbExtension);box2d.b2_aabbMultiplier=2;goog.exportSymbol("box2d.b2_aabbMultiplier",box2d.b2_aabbMultiplier);box2d.b2_linearSlop=.008;goog.exportSymbol("box2d.b2_linearSlop",box2d.b2_linearSlop);box2d.b2_angularSlop=2/180*box2d.b2_pi;
goog.exportSymbol("box2d.b2_angularSlop",box2d.b2_angularSlop);box2d.b2_polygonRadius=2*box2d.b2_linearSlop;goog.exportSymbol("box2d.b2_polygonRadius",box2d.b2_polygonRadius);box2d.b2_maxSubSteps=8;goog.exportSymbol("box2d.b2_maxSubSteps",box2d.b2_maxSubSteps);box2d.b2_maxTOIContacts=32;goog.exportSymbol("box2d.b2_maxTOIContacts",box2d.b2_maxTOIContacts);box2d.b2_velocityThreshold=1;goog.exportSymbol("box2d.b2_velocityThreshold",box2d.b2_velocityThreshold);box2d.b2_maxLinearCorrection=.2;
goog.exportSymbol("box2d.b2_maxLinearCorrection",box2d.b2_maxLinearCorrection);box2d.b2_maxAngularCorrection=8/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_maxAngularCorrection",box2d.b2_maxAngularCorrection);box2d.b2_maxTranslation=2;goog.exportSymbol("box2d.b2_maxTranslation",box2d.b2_maxTranslation);box2d.b2_maxTranslationSquared=box2d.b2_maxTranslation*box2d.b2_maxTranslation;goog.exportSymbol("box2d.b2_maxTranslationSquared",box2d.b2_maxTranslationSquared);box2d.b2_maxRotation=.5*box2d.b2_pi;
goog.exportSymbol("box2d.b2_maxRotation",box2d.b2_maxRotation);box2d.b2_maxRotationSquared=box2d.b2_maxRotation*box2d.b2_maxRotation;goog.exportSymbol("box2d.b2_maxRotationSquared",box2d.b2_maxRotationSquared);box2d.b2_baumgarte=.2;goog.exportSymbol("box2d.b2_baumgarte",box2d.b2_baumgarte);box2d.b2_toiBaumgarte=.75;goog.exportSymbol("box2d.b2_toiBaumgarte",box2d.b2_toiBaumgarte);box2d.b2_invalidParticleIndex=-1;goog.exportSymbol("box2d.b2_invalidParticleIndex",box2d.b2_invalidParticleIndex);
box2d.b2_maxParticleIndex=2147483647;goog.exportSymbol("box2d.b2_maxParticleIndex",box2d.b2_maxParticleIndex);box2d.b2_particleStride=.75;goog.exportSymbol("box2d.b2_particleStride",box2d.b2_particleStride);box2d.b2_minParticleWeight=1;goog.exportSymbol("box2d.b2_minParticleWeight",box2d.b2_minParticleWeight);box2d.b2_maxParticlePressure=.25;goog.exportSymbol("box2d.b2_maxParticlePressure",box2d.b2_maxParticlePressure);box2d.b2_maxParticleForce=.5;goog.exportSymbol("box2d.b2_maxParticleForce",box2d.b2_maxParticleForce);
box2d.b2_maxTriadDistance=2;goog.exportSymbol("box2d.b2_maxTriadDistance",box2d.b2_maxTriadDistance);box2d.b2_maxTriadDistanceSquared=box2d.b2_maxTriadDistance*box2d.b2_maxTriadDistance;goog.exportSymbol("box2d.b2_maxTriadDistanceSquared",box2d.b2_maxTriadDistanceSquared);box2d.b2_minParticleSystemBufferCapacity=256;goog.exportSymbol("box2d.b2_minParticleSystemBufferCapacity",box2d.b2_minParticleSystemBufferCapacity);box2d.b2_barrierCollisionTime=2.5;
goog.exportSymbol("box2d.b2_barrierCollisionTime",box2d.b2_barrierCollisionTime);box2d.b2_timeToSleep=.5;goog.exportSymbol("box2d.b2_timeToSleep",box2d.b2_timeToSleep);box2d.b2_linearSleepTolerance=.01;goog.exportSymbol("box2d.b2_linearSleepTolerance",box2d.b2_linearSleepTolerance);box2d.b2_angularSleepTolerance=2/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_angularSleepTolerance",box2d.b2_angularSleepTolerance);box2d.b2Alloc=function(a){return null};goog.exportSymbol("box2d.b2Alloc",box2d.b2Alloc);
box2d.b2Free=function(a){};goog.exportSymbol("box2d.b2Free",box2d.b2Free);box2d.b2Log=function(a){goog.global.console.log.apply(null,arguments)};goog.exportSymbol("box2d.b2Log",box2d.b2Log);box2d.b2Version=function(a,c,b){this.major=a||0;this.minor=c||0;this.revision=b||0};goog.exportSymbol("box2d.b2Version",box2d.b2Version);box2d.b2Version.prototype.major=0;goog.exportProperty(box2d.b2Version.prototype,"major",box2d.b2Version.prototype.major);box2d.b2Version.prototype.minor=0;
goog.exportProperty(box2d.b2Version.prototype,"minor",box2d.b2Version.prototype.minor);box2d.b2Version.prototype.revision=0;goog.exportProperty(box2d.b2Version.prototype,"revision",box2d.b2Version.prototype.revision);box2d.b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};goog.exportProperty(box2d.b2Version.prototype,"toString",box2d.b2Version.prototype.toString);box2d.b2_version=new box2d.b2Version(2,3,2);goog.exportSymbol("box2d.b2_version",box2d.b2_version);
box2d.b2_changelist=313;goog.exportSymbol("box2d.b2_changelist",box2d.b2_changelist);box2d.b2ParseInt=function(a){return parseInt(a,10)};goog.exportSymbol("box2d.b2ParseInt",box2d.b2ParseInt);box2d.b2ParseUInt=function(a){return box2d.b2Abs(parseInt(a,10))};goog.exportSymbol("box2d.b2ParseUInt",box2d.b2ParseUInt);box2d.b2MakeArray=function(a,c){a="number"===typeof a?a:0;var b=[];if("function"===typeof c)for(var d=0;d<a;++d)b.push(c(d));else for(d=0;d<a;++d)b.push(null);return b};
goog.exportSymbol("box2d.b2MakeArray",box2d.b2MakeArray);box2d.b2MakeNumberArray=function(a){return box2d.b2MakeArray(a,function(a){return 0})};goog.exportSymbol("box2d.b2MakeNumberArray",box2d.b2MakeNumberArray);box2d.b2ControllerEdge=function(){};goog.exportSymbol("box2d.b2ControllerEdge",box2d.b2ControllerEdge);box2d.b2ControllerEdge.prototype.controller=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"controller",box2d.b2ControllerEdge.prototype.controller);box2d.b2ControllerEdge.prototype.body=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"body",box2d.b2ControllerEdge.prototype.body);box2d.b2ControllerEdge.prototype.prevBody=null;
goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevBody",box2d.b2ControllerEdge.prototype.prevBody);box2d.b2ControllerEdge.prototype.nextBody=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextBody",box2d.b2ControllerEdge.prototype.nextBody);box2d.b2ControllerEdge.prototype.prevController=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevController",box2d.b2ControllerEdge.prototype.prevController);box2d.b2ControllerEdge.prototype.nextController=null;
goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextController",box2d.b2ControllerEdge.prototype.nextController);box2d.b2Controller=function(){};goog.exportSymbol("box2d.b2Controller",box2d.b2Controller);box2d.b2Controller.prototype.m_world=null;goog.exportProperty(box2d.b2Controller.prototype,"m_world",box2d.b2Controller.prototype.m_world);box2d.b2Controller.prototype.m_bodyList=null;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyList",box2d.b2Controller.prototype.m_bodyList);
box2d.b2Controller.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyCount",box2d.b2Controller.prototype.m_bodyCount);box2d.b2Controller.prototype.m_prev=null;goog.exportProperty(box2d.b2Controller.prototype,"m_prev",box2d.b2Controller.prototype.m_prev);box2d.b2Controller.prototype.m_next=null;goog.exportProperty(box2d.b2Controller.prototype,"m_next",box2d.b2Controller.prototype.m_next);box2d.b2Controller.prototype.Step=function(a){};
goog.exportProperty(box2d.b2Controller.prototype,"Step",box2d.b2Controller.prototype.Step);box2d.b2Controller.prototype.Draw=function(a){};goog.exportProperty(box2d.b2Controller.prototype,"Draw",box2d.b2Controller.prototype.Draw);box2d.b2Controller.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Controller.prototype,"GetNext",box2d.b2Controller.prototype.GetNext);box2d.b2Controller.prototype.GetPrev=function(){return this.m_prev};
goog.exportProperty(box2d.b2Controller.prototype,"GetPrev",box2d.b2Controller.prototype.GetPrev);box2d.b2Controller.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Controller.prototype,"GetWorld",box2d.b2Controller.prototype.GetWorld);box2d.b2Controller.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2Controller.prototype,"GetBodyList",box2d.b2Controller.prototype.GetBodyList);
box2d.b2Controller.prototype.AddBody=function(a){var c=new box2d.b2ControllerEdge;c.body=a;c.controller=this;c.nextBody=this.m_bodyList;c.prevBody=null;this.m_bodyList&&(this.m_bodyList.prevBody=c);this.m_bodyList=c;++this.m_bodyCount;c.nextController=a.m_controllerList;c.prevController=null;a.m_controllerList&&(a.m_controllerList.prevController=c);a.m_controllerList=c;++a.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"AddBody",box2d.b2Controller.prototype.AddBody);
box2d.b2Controller.prototype.RemoveBody=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);for(var c=this.m_bodyList;c&&c.body!==a;)c=c.nextBody;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==c);c.prevBody&&(c.prevBody.nextBody=c.nextBody);c.nextBody&&(c.nextBody.prevBody=c.prevBody);this.m_bodyList===c&&(this.m_bodyList=c.nextBody);--this.m_bodyCount;c.nextController&&(c.nextController.prevController=c.prevController);c.prevController&&(c.prevController.nextController=c.nextController);
a.m_controllerList===c&&(a.m_controllerList=c.nextController);--a.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"RemoveBody",box2d.b2Controller.prototype.RemoveBody);box2d.b2Controller.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0};goog.exportProperty(box2d.b2Controller.prototype,"Clear",box2d.b2Controller.prototype.Clear);box2d.b2Color=function(a,c,b,d){this.r=a;this.g=c;this.b=b;this.a="number"===typeof d?d:1};goog.exportSymbol("box2d.b2Color",box2d.b2Color);box2d.b2Color.prototype.r=.5;goog.exportProperty(box2d.b2Color.prototype,"r",box2d.b2Color.prototype.r);box2d.b2Color.prototype.g=.5;goog.exportProperty(box2d.b2Color.prototype,"g",box2d.b2Color.prototype.g);box2d.b2Color.prototype.b=.5;goog.exportProperty(box2d.b2Color.prototype,"b",box2d.b2Color.prototype.b);box2d.b2Color.prototype.a=1;
goog.exportProperty(box2d.b2Color.prototype,"a",box2d.b2Color.prototype.a);box2d.b2Color.prototype.SetRGB=function(a,c,b){this.r=a;this.g=c;this.b=b;return this};goog.exportProperty(box2d.b2Color.prototype,"SetRGB",box2d.b2Color.prototype.SetRGB);
box2d.b2Color.prototype.MakeStyleString=function(a){var c=Math.round(Math.max(0,Math.min(255,255*this.r))),b=Math.round(Math.max(0,Math.min(255,255*this.g))),d=Math.round(Math.max(0,Math.min(255,255*this.b)));a="undefined"===typeof a?this.a:Math.max(0,Math.min(1,a));return box2d.b2Color.MakeStyleString(c,b,d,a)};goog.exportProperty(box2d.b2Color.prototype,"MakeStyleString",box2d.b2Color.prototype.MakeStyleString);
box2d.b2Color.MakeStyleString=function(a,c,b,d){return 1>d?"rgba("+a+","+c+","+b+","+d+")":"rgb("+a+","+c+","+b+")"};goog.exportProperty(box2d.b2Color,"MakeStyleString",box2d.b2Color.MakeStyleString);box2d.b2Color.RED=new box2d.b2Color(1,0,0);goog.exportProperty(box2d.b2Color,"RED",box2d.b2Color.RED);box2d.b2Color.GREEN=new box2d.b2Color(0,1,0);goog.exportProperty(box2d.b2Color,"GREEN",box2d.b2Color.GREEN);box2d.b2Color.BLUE=new box2d.b2Color(0,0,1);goog.exportProperty(box2d.b2Color,"BLUE",box2d.b2Color.BLUE);
box2d.b2DrawFlags={e_none:0,e_shapeBit:1,e_jointBit:2,e_aabbBit:4,e_pairBit:8,e_centerOfMassBit:16,e_controllerBit:32,e_particleBit:64,e_all:65535};goog.exportSymbol("box2d.b2DrawFlags",box2d.b2DrawFlags);goog.exportProperty(box2d.b2DrawFlags,"e_none",box2d.b2DrawFlags.e_none);goog.exportProperty(box2d.b2DrawFlags,"e_shapeBit",box2d.b2DrawFlags.e_shapeBit);goog.exportProperty(box2d.b2DrawFlags,"e_jointBit",box2d.b2DrawFlags.e_jointBit);goog.exportProperty(box2d.b2DrawFlags,"e_aabbBit",box2d.b2DrawFlags.e_aabbBit);
goog.exportProperty(box2d.b2DrawFlags,"e_pairBit",box2d.b2DrawFlags.e_pairBit);goog.exportProperty(box2d.b2DrawFlags,"e_centerOfMassBit",box2d.b2DrawFlags.e_centerOfMassBit);goog.exportProperty(box2d.b2DrawFlags,"e_controllerBit",box2d.b2DrawFlags.e_controllerBit);goog.exportProperty(box2d.b2DrawFlags,"e_particleBit",box2d.b2DrawFlags.e_particleBit);goog.exportProperty(box2d.b2DrawFlags,"e_all",box2d.b2DrawFlags.e_all);box2d.b2Draw=function(){};goog.exportSymbol("box2d.b2Draw",box2d.b2Draw);
box2d.b2Draw.prototype.m_drawFlags=box2d.b2DrawFlags.e_none;goog.exportProperty(box2d.b2Draw.prototype,"m_drawFlags",box2d.b2Draw.prototype.m_drawFlags);box2d.b2Draw.prototype.SetFlags=function(a){this.m_drawFlags=a};goog.exportProperty(box2d.b2Draw.prototype,"SetFlags",box2d.b2Draw.prototype.SetFlags);box2d.b2Draw.prototype.GetFlags=function(){return this.m_drawFlags};goog.exportProperty(box2d.b2Draw.prototype,"GetFlags",box2d.b2Draw.prototype.GetFlags);
box2d.b2Draw.prototype.AppendFlags=function(a){this.m_drawFlags|=a};goog.exportProperty(box2d.b2Draw.prototype,"AppendFlags",box2d.b2Draw.prototype.AppendFlags);box2d.b2Draw.prototype.ClearFlags=function(a){this.m_drawFlags&=~a};goog.exportProperty(box2d.b2Draw.prototype,"ClearFlags",box2d.b2Draw.prototype.ClearFlags);box2d.b2Draw.prototype.PushTransform=function(a){};goog.exportProperty(box2d.b2Draw.prototype,"PushTransform",box2d.b2Draw.prototype.PushTransform);
box2d.b2Draw.prototype.PopTransform=function(a){};goog.exportProperty(box2d.b2Draw.prototype,"PopTransform",box2d.b2Draw.prototype.PopTransform);box2d.b2Draw.prototype.DrawPolygon=function(a,c,b){};goog.exportProperty(box2d.b2Draw.prototype,"DrawPolygon",box2d.b2Draw.prototype.DrawPolygon);box2d.b2Draw.prototype.DrawSolidPolygon=function(a,c,b){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidPolygon",box2d.b2Draw.prototype.DrawSolidPolygon);box2d.b2Draw.prototype.DrawCircle=function(a,c,b){};
goog.exportProperty(box2d.b2Draw.prototype,"DrawCircle",box2d.b2Draw.prototype.DrawCircle);box2d.b2Draw.prototype.DrawSolidCircle=function(a,c,b,d){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidCircle",box2d.b2Draw.prototype.DrawSolidCircle);box2d.b2Draw.prototype.DrawParticles=function(a,c,b,d){};goog.exportProperty(box2d.b2Draw.prototype,"DrawParticles",box2d.b2Draw.prototype.DrawParticles);box2d.b2Draw.prototype.DrawSegment=function(a,c,b){};
goog.exportProperty(box2d.b2Draw.prototype,"DrawSegment",box2d.b2Draw.prototype.DrawSegment);box2d.b2Draw.prototype.DrawTransform=function(a){};goog.exportProperty(box2d.b2Draw.prototype,"DrawTransform",box2d.b2Draw.prototype.DrawTransform);box2d.b2GrowableStack=function(a){this.m_stack=Array(a)};goog.exportSymbol("box2d.b2GrowableStack",box2d.b2GrowableStack);box2d.b2GrowableStack.prototype.m_stack=null;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_stack",box2d.b2GrowableStack.prototype.m_stack);box2d.b2GrowableStack.prototype.m_count=0;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_count",box2d.b2GrowableStack.prototype.m_count);box2d.b2GrowableStack.prototype.Reset=function(){this.m_count=0;return this};
goog.exportProperty(box2d.b2GrowableStack.prototype,"Reset",box2d.b2GrowableStack.prototype.Reset);box2d.b2GrowableStack.prototype.Push=function(a){this.m_stack[this.m_count]=a;++this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"Push",box2d.b2GrowableStack.prototype.Push);box2d.b2GrowableStack.prototype.Pop=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_count);--this.m_count;var a=this.m_stack[this.m_count];this.m_stack[this.m_count]=null;return a};
goog.exportProperty(box2d.b2GrowableStack.prototype,"Pop",box2d.b2GrowableStack.prototype.Pop);box2d.b2GrowableStack.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"GetCount",box2d.b2GrowableStack.prototype.GetCount);box2d.b2Math={};box2d.b2_pi_over_180=box2d.b2_pi/180;goog.exportSymbol("box2d.b2_pi_over_180",box2d.b2_pi_over_180);box2d.b2_180_over_pi=180/box2d.b2_pi;goog.exportSymbol("box2d.b2_180_over_pi",box2d.b2_180_over_pi);box2d.b2_two_pi=2*box2d.b2_pi;goog.exportSymbol("box2d.b2_two_pi",box2d.b2_two_pi);box2d.b2Abs=Math.abs;goog.exportSymbol("box2d.b2Abs",box2d.b2Abs);box2d.b2Min=Math.min;goog.exportSymbol("box2d.b2Min",box2d.b2Min);box2d.b2Max=Math.max;goog.exportSymbol("box2d.b2Max",box2d.b2Max);
box2d.b2Clamp=function(a,c,b){return Math.min(Math.max(a,c),b)};goog.exportSymbol("box2d.b2Clamp",box2d.b2Clamp);box2d.b2Wrap=function(a,c,b){return c<b?a<c?b-(c-a)%(b-c):c+(a-c)%(b-c):c===b?c:a};goog.exportSymbol("box2d.b2Wrap",box2d.b2Wrap);box2d.b2WrapAngle=function(a){return 0>a?(a-box2d.b2_pi)%box2d.b2_two_pi+box2d.b2_pi:(a+box2d.b2_pi)%box2d.b2_two_pi-box2d.b2_pi};goog.exportSymbol("box2d.b2WrapAngle",box2d.b2WrapAngle);
box2d.b2Swap=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);var b=a[0];a[0]=c[0];c[0]=b};goog.exportSymbol("box2d.b2Swap",box2d.b2Swap);box2d.b2IsValid=function(a){return isFinite(a)};goog.exportSymbol("box2d.b2IsValid",box2d.b2IsValid);box2d.b2Sq=function(a){return a*a};goog.exportSymbol("box2d.b2Sq",box2d.b2Sq);box2d.b2InvSqrt=function(a){return 1/Math.sqrt(a)};goog.exportSymbol("box2d.b2InvSqrt",box2d.b2InvSqrt);box2d.b2Sqrt=function(a){return Math.sqrt(a)};
goog.exportSymbol("box2d.b2Sqrt",box2d.b2Sqrt);box2d.b2Pow=function(a,c){return Math.pow(a,c)};goog.exportSymbol("box2d.b2Pow",box2d.b2Pow);box2d.b2DegToRad=function(a){return a*box2d.b2_pi_over_180};goog.exportSymbol("box2d.b2DegToRad",box2d.b2DegToRad);box2d.b2RadToDeg=function(a){return a*box2d.b2_180_over_pi};goog.exportSymbol("box2d.b2RadToDeg",box2d.b2RadToDeg);box2d.b2Cos=function(a){return Math.cos(a)};goog.exportSymbol("box2d.b2Cos",box2d.b2Cos);box2d.b2Sin=function(a){return Math.sin(a)};
goog.exportSymbol("box2d.b2Sin",box2d.b2Sin);box2d.b2Acos=function(a){return Math.acos(a)};goog.exportSymbol("box2d.b2Acos",box2d.b2Acos);box2d.b2Asin=function(a){return Math.asin(a)};goog.exportSymbol("box2d.b2Asin",box2d.b2Asin);box2d.b2Atan2=function(a,c){return Math.atan2(a,c)};goog.exportSymbol("box2d.b2Atan2",box2d.b2Atan2);box2d.b2NextPowerOfTwo=function(a){a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;return(a|a>>16&65535)+1};
goog.exportSymbol("box2d.b2NextPowerOfTwo",box2d.b2NextPowerOfTwo);box2d.b2IsPowerOfTwo=function(a){return 0<a&&0===(a&a-1)};goog.exportSymbol("box2d.b2IsPowerOfTwo",box2d.b2IsPowerOfTwo);box2d.b2Random=function(){return 2*Math.random()-1};goog.exportSymbol("box2d.b2Random",box2d.b2Random);box2d.b2RandomRange=function(a,c){return(c-a)*Math.random()+a};goog.exportSymbol("box2d.b2RandomRange",box2d.b2RandomRange);box2d.b2Vec2=function(a,c){this.x=a||0;this.y=c||0};goog.exportSymbol("box2d.b2Vec2",box2d.b2Vec2);
box2d.b2Vec2.prototype.x=0;goog.exportProperty(box2d.b2Vec2.prototype,"x",box2d.b2Vec2.prototype.x);box2d.b2Vec2.prototype.y=0;goog.exportProperty(box2d.b2Vec2.prototype,"y",box2d.b2Vec2.prototype.y);box2d.b2Vec2_zero=new box2d.b2Vec2;goog.exportSymbol("box2d.b2Vec2_zero",box2d.b2Vec2_zero);box2d.b2Vec2.ZERO=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"ZERO",box2d.b2Vec2.ZERO);box2d.b2Vec2.UNITX=new box2d.b2Vec2(1,0);goog.exportProperty(box2d.b2Vec2,"UNITX",box2d.b2Vec2.UNITX);
box2d.b2Vec2.UNITY=new box2d.b2Vec2(0,1);goog.exportProperty(box2d.b2Vec2,"UNITY",box2d.b2Vec2.UNITY);box2d.b2Vec2.s_t0=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t0",box2d.b2Vec2.s_t0);box2d.b2Vec2.s_t1=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t1",box2d.b2Vec2.s_t1);box2d.b2Vec2.s_t2=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t2",box2d.b2Vec2.s_t2);box2d.b2Vec2.s_t3=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t3",box2d.b2Vec2.s_t3);
box2d.b2Vec2.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2Vec2})};goog.exportProperty(box2d.b2Vec2,"MakeArray",box2d.b2Vec2.MakeArray);box2d.b2Vec2.prototype.Clone=function(){return new box2d.b2Vec2(this.x,this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"Clone",box2d.b2Vec2.prototype.Clone);box2d.b2Vec2.prototype.SetZero=function(){this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SetZero",box2d.b2Vec2.prototype.SetZero);
box2d.b2Vec2.prototype.Set=function(a,c){this.x=a;this.y=c;return this};goog.exportProperty(box2d.b2Vec2.prototype,"Set",box2d.b2Vec2.prototype.Set);box2d.b2Vec2.prototype.Copy=function(a){this.x=a.x;this.y=a.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"Copy",box2d.b2Vec2.prototype.Copy);box2d.b2Vec2.prototype.SelfAdd=function(a){this.x+=a.x;this.y+=a.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAdd",box2d.b2Vec2.prototype.SelfAdd);
box2d.b2Vec2.prototype.SelfAddXY=function(a,c){this.x+=a;this.y+=c;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAddXY",box2d.b2Vec2.prototype.SelfAddXY);box2d.b2Vec2.prototype.SelfSub=function(a){this.x-=a.x;this.y-=a.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSub",box2d.b2Vec2.prototype.SelfSub);box2d.b2Vec2.prototype.SelfSubXY=function(a,c){this.x-=a;this.y-=c;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSubXY",box2d.b2Vec2.prototype.SelfSubXY);
box2d.b2Vec2.prototype.SelfMul=function(a){this.x*=a;this.y*=a;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMul",box2d.b2Vec2.prototype.SelfMul);box2d.b2Vec2.prototype.SelfMulAdd=function(a,c){this.x+=a*c.x;this.y+=a*c.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulAdd",box2d.b2Vec2.prototype.SelfMulAdd);box2d.b2Vec2.prototype.SelfMulSub=function(a,c){this.x-=a*c.x;this.y-=a*c.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulSub",box2d.b2Vec2.prototype.SelfMulSub);
box2d.b2Vec2.prototype.Dot=function(a){return this.x*a.x+this.y*a.y};goog.exportProperty(box2d.b2Vec2.prototype,"Dot",box2d.b2Vec2.prototype.Dot);box2d.b2Vec2.prototype.Cross=function(a){return this.x*a.y-this.y*a.x};goog.exportProperty(box2d.b2Vec2.prototype,"Cross",box2d.b2Vec2.prototype.Cross);box2d.b2Vec2.prototype.Length=function(){var a=this.x,c=this.y;return Math.sqrt(a*a+c*c)};goog.exportProperty(box2d.b2Vec2.prototype,"Length",box2d.b2Vec2.prototype.Length);
box2d.b2Vec2.prototype.LengthSquared=function(){var a=this.x,c=this.y;return a*a+c*c};goog.exportProperty(box2d.b2Vec2.prototype,"LengthSquared",box2d.b2Vec2.prototype.LengthSquared);box2d.b2Vec2.prototype.Normalize=function(){var a=this.Length();if(a>=box2d.b2_epsilon){var c=1/a;this.x*=c;this.y*=c}return a};goog.exportProperty(box2d.b2Vec2.prototype,"Normalize",box2d.b2Vec2.prototype.Normalize);box2d.b2Vec2.prototype.SelfNormalize=function(){this.Normalize();return this};
goog.exportProperty(box2d.b2Vec2.prototype,"SelfNormalize",box2d.b2Vec2.prototype.SelfNormalize);box2d.b2Vec2.prototype.SelfRotate=function(a,c){var b=this.x,d=this.y;this.x=a*b-c*d;this.y=c*b+a*d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotate",box2d.b2Vec2.prototype.SelfRotate);box2d.b2Vec2.prototype.SelfRotateAngle=function(a){return this.SelfRotate(Math.cos(a),Math.sin(a))};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateAngle",box2d.b2Vec2.prototype.SelfRotateAngle);
box2d.b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"IsValid",box2d.b2Vec2.prototype.IsValid);box2d.b2Vec2.prototype.SelfMin=function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMin",box2d.b2Vec2.prototype.SelfMin);box2d.b2Vec2.prototype.SelfMax=function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this};
goog.exportProperty(box2d.b2Vec2.prototype,"SelfMax",box2d.b2Vec2.prototype.SelfMax);box2d.b2Vec2.prototype.SelfAbs=function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAbs",box2d.b2Vec2.prototype.SelfAbs);box2d.b2Vec2.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfNeg",box2d.b2Vec2.prototype.SelfNeg);
box2d.b2Vec2.prototype.SelfSkew=function(){var a=this.x;this.x=-this.y;this.y=a;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSkew",box2d.b2Vec2.prototype.SelfSkew);box2d.b2Abs_V2=function(a,c){c.x=Math.abs(a.x);c.y=Math.abs(a.y);return c};goog.exportSymbol("box2d.b2Abs_V2",box2d.b2Abs_V2);box2d.b2Min_V2_V2=function(a,c,b){b.x=Math.min(a.x,c.x);b.y=Math.min(a.y,c.y);return b};goog.exportSymbol("box2d.b2Min_V2_V2",box2d.b2Min_V2_V2);
box2d.b2Max_V2_V2=function(a,c,b){b.x=Math.max(a.x,c.x);b.y=Math.max(a.y,c.y);return b};goog.exportSymbol("box2d.b2Max_V2_V2",box2d.b2Max_V2_V2);box2d.b2Clamp_V2_V2_V2=function(a,c,b,d){d.x=Math.min(Math.max(a.x,c.x),b.x);d.y=Math.min(Math.max(a.y,c.y),b.y);return d};goog.exportSymbol("box2d.b2Clamp_V2_V2_V2",box2d.b2Clamp_V2_V2_V2);box2d.b2Dot_V2_V2=function(a,c){return a.x*c.x+a.y*c.y};goog.exportSymbol("box2d.b2Dot_V2_V2",box2d.b2Dot_V2_V2);
box2d.b2Cross_V2_V2=function(a,c){return a.x*c.y-a.y*c.x};goog.exportSymbol("box2d.b2Cross_V2_V2",box2d.b2Cross_V2_V2);box2d.b2Cross_V2_S=function(a,c,b){var d=a.x;b.x=c*a.y;b.y=-c*d;return b};goog.exportSymbol("box2d.b2Cross_V2_S",box2d.b2Cross_V2_S);box2d.b2Cross_S_V2=function(a,c,b){var d=c.x;b.x=-a*c.y;b.y=a*d;return b};goog.exportSymbol("box2d.b2Cross_S_V2",box2d.b2Cross_S_V2);box2d.b2Add_V2_V2=function(a,c,b){b.x=a.x+c.x;b.y=a.y+c.y;return b};goog.exportSymbol("box2d.b2Add_V2_V2",box2d.b2Add_V2_V2);
box2d.b2Sub_V2_V2=function(a,c,b){b.x=a.x-c.x;b.y=a.y-c.y;return b};goog.exportSymbol("box2d.b2Sub_V2_V2",box2d.b2Sub_V2_V2);box2d.b2Add_V2_S=function(a,c,b){b.x=a.x+c;b.y=a.y+c;return b};goog.exportSymbol("box2d.b2Add_V2_S",box2d.b2Add_V2_S);box2d.b2Sub_V2_S=function(a,c,b){b.x=a.x-c;b.y=a.y-c;return b};goog.exportSymbol("box2d.b2Sub_V2_S",box2d.b2Sub_V2_S);box2d.b2Mul_S_V2=function(a,c,b){b.x=c.x*a;b.y=c.y*a;return b};goog.exportSymbol("box2d.b2Mul_S_V2",box2d.b2Mul_S_V2);
box2d.b2Mul_V2_S=function(a,c,b){b.x=a.x*c;b.y=a.y*c;return b};goog.exportSymbol("box2d.b2Mul_V2_S",box2d.b2Mul_V2_S);box2d.b2Div_V2_S=function(a,c,b){b.x=a.x/c;b.y=a.y/c;return b};goog.exportSymbol("box2d.b2Div_V2_S",box2d.b2Div_V2_S);box2d.b2AddMul_V2_S_V2=function(a,c,b,d){d.x=a.x+c*b.x;d.y=a.y+c*b.y;return d};goog.exportSymbol("box2d.b2AddMul_V2_S_V2",box2d.b2AddMul_V2_S_V2);box2d.b2SubMul_V2_S_V2=function(a,c,b,d){d.x=a.x-c*b.x;d.y=a.y-c*b.y;return d};
goog.exportSymbol("box2d.b2SubMul_V2_S_V2",box2d.b2SubMul_V2_S_V2);box2d.b2AddCross_V2_S_V2=function(a,c,b,d){var e=b.x;d.x=a.x-c*b.y;d.y=a.y+c*e;return d};goog.exportSymbol("box2d.b2AddCross_V2_S_V2",box2d.b2AddCross_V2_S_V2);box2d.b2Mid_V2_V2=function(a,c,b){b.x=.5*(a.x+c.x);b.y=.5*(a.y+c.y);return b};goog.exportSymbol("box2d.b2Mid_V2_V2",box2d.b2Mid_V2_V2);box2d.b2Ext_V2_V2=function(a,c,b){b.x=.5*(c.x-a.x);b.y=.5*(c.y-a.y);return b};goog.exportSymbol("box2d.b2Ext_V2_V2",box2d.b2Ext_V2_V2);
box2d.b2Distance=function(a,c){var b=a.x-c.x,d=a.y-c.y;return Math.sqrt(b*b+d*d)};goog.exportSymbol("box2d.b2Distance",box2d.b2Distance);box2d.b2DistanceSquared=function(a,c){var b=a.x-c.x,d=a.y-c.y;return b*b+d*d};goog.exportSymbol("box2d.b2DistanceSquared",box2d.b2DistanceSquared);box2d.b2Vec3=function(a,c,b){this.x=a||0;this.y=c||0;this.z=b||0};goog.exportSymbol("box2d.b2Vec3",box2d.b2Vec3);box2d.b2Vec3.prototype.x=0;goog.exportProperty(box2d.b2Vec3.prototype,"x",box2d.b2Vec3.prototype.x);
box2d.b2Vec3.prototype.y=0;goog.exportProperty(box2d.b2Vec3.prototype,"y",box2d.b2Vec3.prototype.y);box2d.b2Vec3.prototype.z=0;goog.exportProperty(box2d.b2Vec3.prototype,"z",box2d.b2Vec3.prototype.z);box2d.b2Vec3.ZERO=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"ZERO",box2d.b2Vec3.ZERO);box2d.b2Vec3.s_t0=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"s_t0",box2d.b2Vec3.s_t0);box2d.b2Vec3.prototype.Clone=function(){return new box2d.b2Vec3(this.x,this.y,this.z)};
goog.exportProperty(box2d.b2Vec3.prototype,"Clone",box2d.b2Vec3.prototype.Clone);box2d.b2Vec3.prototype.SetZero=function(){this.z=this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SetZero",box2d.b2Vec3.prototype.SetZero);box2d.b2Vec3.prototype.Set=function(a,c,b){this.x=a;this.y=c;this.z=b;return this};goog.exportProperty(box2d.b2Vec3.prototype,"Set",box2d.b2Vec3.prototype.Set);box2d.b2Vec3.prototype.Copy=function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this};
goog.exportProperty(box2d.b2Vec3.prototype,"Copy",box2d.b2Vec3.prototype.Copy);box2d.b2Vec3.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfNeg",box2d.b2Vec3.prototype.SelfNeg);box2d.b2Vec3.prototype.SelfAdd=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAdd",box2d.b2Vec3.prototype.SelfAdd);
box2d.b2Vec3.prototype.SelfAddV2=function(a,c){this.x+=a.x;this.y+=a.y;this.z+=c;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddV2",box2d.b2Vec3.prototype.SelfAddV2);box2d.b2Vec3.prototype.SelfAddXYZ=function(a,c,b){this.x+=a;this.y+=c;this.z+=b;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddXYZ",box2d.b2Vec3.prototype.SelfAddXYZ);box2d.b2Vec3.prototype.SelfSub=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};
goog.exportProperty(box2d.b2Vec3.prototype,"SelfSub",box2d.b2Vec3.prototype.SelfSub);box2d.b2Vec3.prototype.SelfSubV2=function(a,c){this.x-=a.x;this.y-=a.y;this.z-=c;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubV2",box2d.b2Vec3.prototype.SelfSubV2);box2d.b2Vec3.prototype.SelfSubXYZ=function(a,c,b){this.x-=a;this.y-=c;this.z-=b;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubXYZ",box2d.b2Vec3.prototype.SelfSubXYZ);
box2d.b2Vec3.prototype.SelfMul=function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfMul",box2d.b2Vec3.prototype.SelfMul);box2d.b2Vec3.prototype.SelfMulV2=function(a,c){this.x*=a.x;this.y*=a.y;this.z*=c;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulV2",box2d.b2Vec3.prototype.SelfMulV2);box2d.b2Vec3.prototype.SelfMulXYZ=function(a,c,b){this.x*=a;this.y*=c;this.z*=b;return this};
goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulXYZ",box2d.b2Vec3.prototype.SelfMulXYZ);box2d.b2Vec3.prototype.SelfMulScalar=function(a){this.x*=a;this.y*=a;this.z*=a;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulScalar",box2d.b2Vec3.prototype.SelfMulScalar);box2d.b2Vec3.prototype.Length=function(){var a=this.x,c=this.y,b=this.z;return Math.sqrt(a*a+c*c+b*b)};goog.exportProperty(box2d.b2Vec3.prototype,"Length",box2d.b2Vec3.prototype.Length);
box2d.b2Vec3.prototype.LengthSquared=function(){var a=this.x,c=this.y,b=this.z;return a*a+c*c+b*b};goog.exportProperty(box2d.b2Vec3.prototype,"LengthSquared",box2d.b2Vec3.prototype.LengthSquared);box2d.b2Vec3.prototype.Normalize=function(){var a=this.Length();if(a>=box2d.b2_epsilon){var c=1/a;this.x*=c;this.y*=c;this.z*=c}return a};goog.exportProperty(box2d.b2Vec3.prototype,"Normalize",box2d.b2Vec3.prototype.Normalize);box2d.b2Vec3.prototype.SelfNormalize=function(){this.Normalize();return this};
goog.exportProperty(box2d.b2Vec3.prototype,"SelfNormalize",box2d.b2Vec3.prototype.SelfNormalize);box2d.b2Add_V3_V3=function(a,c,b){b.x=a.x+c.x;b.y=a.y+c.y;b.z=a.z+c.z;return b};goog.exportSymbol("box2d.b2Add_V3_V3",box2d.b2Add_V3_V3);box2d.b2Sub_V3_V3=function(a,c,b){b.x=a.x+c.x;b.y=a.y+c.y;b.z=a.z+c.z;return b};goog.exportSymbol("box2d.b2Sub_V3_V3",box2d.b2Sub_V3_V3);box2d.b2Dot_V3_V3=function(a,c){return a.x*c.x+a.y*c.y+a.z*c.z};goog.exportSymbol("box2d.b2Dot_V3_V3",box2d.b2Dot_V3_V3);
box2d.b2Cross_V3_V3=function(a,c,b){var d=a.x,e=a.y;a=a.z;var f=c.x,g=c.y;c=c.z;b.x=e*c-a*g;b.y=a*f-d*c;b.z=d*g-e*f;return b};goog.exportSymbol("box2d.b2Cross_V3_V3",box2d.b2Cross_V3_V3);box2d.b2Vec4=function(a,c,b,d){this.x=a||0;this.y=c||0;this.z=b||0;this.w=d||0};goog.exportSymbol("box2d.b2Vec4",box2d.b2Vec4);box2d.b2Vec4.prototype.x=0;goog.exportProperty(box2d.b2Vec4.prototype,"x",box2d.b2Vec4.prototype.x);box2d.b2Vec4.prototype.y=0;goog.exportProperty(box2d.b2Vec4.prototype,"y",box2d.b2Vec4.prototype.y);
box2d.b2Vec4.prototype.z=0;goog.exportProperty(box2d.b2Vec4.prototype,"z",box2d.b2Vec4.prototype.z);box2d.b2Vec4.prototype.w=0;goog.exportProperty(box2d.b2Vec4.prototype,"w",box2d.b2Vec4.prototype.w);box2d.b2Vec4.ZERO=new box2d.b2Vec4(0,0,0,0);goog.exportProperty(box2d.b2Vec4,"ZERO",box2d.b2Vec4.ZERO);box2d.b2Vec4.s_t0=new box2d.b2Vec4;goog.exportProperty(box2d.b2Vec4,"s_t0",box2d.b2Vec4.s_t0);box2d.b2Vec4.prototype.Clone=function(){return new box2d.b2Vec4(this.x,this.y,this.z,this.w)};
goog.exportProperty(box2d.b2Vec4.prototype,"Clone",box2d.b2Vec4.prototype.Clone);box2d.b2Vec4.prototype.SetZero=function(){this.w=this.z=this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec4.prototype,"SetZero",box2d.b2Vec4.prototype.SetZero);box2d.b2Vec4.prototype.Set=function(a,c,b,d){this.x=a;this.y=c;this.z=b;this.w=d;return this};goog.exportProperty(box2d.b2Vec4.prototype,"Set",box2d.b2Vec4.prototype.Set);
box2d.b2Vec4.prototype.Copy=function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this};goog.exportProperty(box2d.b2Vec4.prototype,"Copy",box2d.b2Vec4.prototype.Copy);box2d.b2Mat22=function(){this.ex=new box2d.b2Vec2(1,0);this.ey=new box2d.b2Vec2(0,1)};goog.exportSymbol("box2d.b2Mat22",box2d.b2Mat22);box2d.b2Mat22.prototype.ex=null;goog.exportProperty(box2d.b2Mat22.prototype,"ex",box2d.b2Mat22.prototype.ex);box2d.b2Mat22.prototype.ey=null;
goog.exportProperty(box2d.b2Mat22.prototype,"ey",box2d.b2Mat22.prototype.ey);box2d.b2Mat22.IDENTITY=new box2d.b2Mat22;goog.exportProperty(box2d.b2Mat22,"IDENTITY",box2d.b2Mat22.IDENTITY);box2d.b2Mat22.prototype.Clone=function(){return(new box2d.b2Mat22).Copy(this)};goog.exportProperty(box2d.b2Mat22.prototype,"Clone",box2d.b2Mat22.prototype.Clone);box2d.b2Mat22.prototype.SetAngle=function(a){var c=Math.cos(a);a=Math.sin(a);this.ex.Set(c,a);this.ey.Set(-a,c);return this};
goog.exportProperty(box2d.b2Mat22.prototype,"SetAngle",box2d.b2Mat22.prototype.SetAngle);box2d.b2Mat22.prototype.Copy=function(a){this.ex.Copy(a.ex);this.ey.Copy(a.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"Copy",box2d.b2Mat22.prototype.Copy);box2d.b2Mat22.prototype.SetIdentity=function(){this.ex.Set(1,0);this.ey.Set(0,1);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetIdentity",box2d.b2Mat22.prototype.SetIdentity);
box2d.b2Mat22.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetZero",box2d.b2Mat22.prototype.SetZero);box2d.b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)};goog.exportProperty(box2d.b2Mat22.prototype,"GetAngle",box2d.b2Mat22.prototype.GetAngle);
box2d.b2Mat22.prototype.GetInverse=function(a){var c=this.ex.x,b=this.ey.x,d=this.ex.y,e=this.ey.y,f=c*e-b*d;0!==f&&(f=1/f);a.ex.x=f*e;a.ey.x=-f*b;a.ex.y=-f*d;a.ey.y=f*c;return a};goog.exportProperty(box2d.b2Mat22.prototype,"GetInverse",box2d.b2Mat22.prototype.GetInverse);box2d.b2Mat22.prototype.Solve=function(a,c,b){var d=this.ex.x,e=this.ey.x,f=this.ex.y,g=this.ey.y,h=d*g-e*f;0!==h&&(h=1/h);b.x=h*(g*a-e*c);b.y=h*(d*c-f*a);return b};goog.exportProperty(box2d.b2Mat22.prototype,"Solve",box2d.b2Mat22.prototype.Solve);
box2d.b2Mat22.prototype.SelfAbs=function(){this.ex.SelfAbs();this.ey.SelfAbs();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAbs",box2d.b2Mat22.prototype.SelfAbs);box2d.b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this)};goog.exportProperty(box2d.b2Mat22.prototype,"SelfInv",box2d.b2Mat22.prototype.SelfInv);box2d.b2Mat22.prototype.SelfAdd=function(a){this.ex.SelfAdd(a.ex);this.ey.SelfAdd(a.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAdd",box2d.b2Mat22.prototype.SelfAdd);
box2d.b2Mat22.prototype.SelfSub=function(a){this.ex.SelfSub(a.ex);this.ey.SelfSub(a.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfSub",box2d.b2Mat22.prototype.SelfSub);box2d.b2Abs_M22=function(a,c){var b=a.ex,d=a.ey;c.ex.x=box2d.b2Abs(b.x);c.ex.y=box2d.b2Abs(b.y);c.ey.x=box2d.b2Abs(d.x);c.ey.y=box2d.b2Abs(d.y);return c};goog.exportSymbol("box2d.b2Abs_M22",box2d.b2Abs_M22);box2d.b2Mul_M22_V2=function(a,c,b){var d=a.ex;a=a.ey;var e=c.x;c=c.y;b.x=d.x*e+a.x*c;b.y=d.y*e+a.y*c;return b};
goog.exportSymbol("box2d.b2Mul_M22_V2",box2d.b2Mul_M22_V2);box2d.b2MulT_M22_V2=function(a,c,b){var d=a.ex;a=a.ey;var e=c.x;c=c.y;b.x=d.x*e+d.y*c;b.y=a.x*e+a.y*c;return b};goog.exportSymbol("box2d.b2MulT_M22_V2",box2d.b2MulT_M22_V2);box2d.b2Add_M22_M22=function(a,c,b){var d=a.ex;a=a.ey;var e=c.ex;c=c.ey;b.ex.x=d.x+e.x;b.ex.y=d.y+e.y;b.ey.x=a.x+c.x;b.ey.y=a.y+c.y;return b};goog.exportSymbol("box2d.b2Add_M22_M22",box2d.b2Add_M22_M22);
box2d.b2Mul_M22_M22=function(a,c,b){var d=a.ex.x,e=a.ex.y,f=a.ey.x;a=a.ey.y;var g=c.ex.x,h=c.ex.y,k=c.ey.x;c=c.ey.y;b.ex.x=d*g+f*h;b.ex.y=e*g+a*h;b.ey.x=d*k+f*c;b.ey.y=e*k+a*c;return b};goog.exportSymbol("box2d.b2Mul_M22_M22",box2d.b2Mul_M22_M22);box2d.b2MulT_M22_M22=function(a,c,b){var d=a.ex.x,e=a.ex.y,f=a.ey.x;a=a.ey.y;var g=c.ex.x,h=c.ex.y,k=c.ey.x;c=c.ey.y;b.ex.x=d*g+e*h;b.ex.y=f*g+a*h;b.ey.x=d*k+e*c;b.ey.y=f*k+a*c;return b};goog.exportSymbol("box2d.b2MulT_M22_M22",box2d.b2MulT_M22_M22);
box2d.b2Mat33=function(){this.ex=new box2d.b2Vec3(1,0,0);this.ey=new box2d.b2Vec3(0,1,0);this.ez=new box2d.b2Vec3(0,0,1)};goog.exportSymbol("box2d.b2Mat33",box2d.b2Mat33);box2d.b2Mat33.prototype.ex=null;goog.exportProperty(box2d.b2Mat33.prototype,"ex",box2d.b2Mat33.prototype.ex);box2d.b2Mat33.prototype.ey=null;goog.exportProperty(box2d.b2Mat33.prototype,"ey",box2d.b2Mat33.prototype.ey);box2d.b2Mat33.prototype.ez=null;goog.exportProperty(box2d.b2Mat33.prototype,"ez",box2d.b2Mat33.prototype.ez);
box2d.b2Mat33.IDENTITY=new box2d.b2Mat33;goog.exportProperty(box2d.b2Mat33,"IDENTITY",box2d.b2Mat33.IDENTITY);box2d.b2Mat33.prototype.Clone=function(){return(new box2d.b2Mat33).Copy(this)};goog.exportProperty(box2d.b2Mat33.prototype,"Clone",box2d.b2Mat33.prototype.Clone);box2d.b2Mat33.prototype.Copy=function(a){this.ex.Copy(a.ex);this.ey.Copy(a.ey);this.ez.Copy(a.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"Copy",box2d.b2Mat33.prototype.Copy);
box2d.b2Mat33.prototype.SetIdentity=function(){this.ex.Set(1,0,0);this.ey.Set(0,1,0);this.ez.Set(0,0,1);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetIdentity",box2d.b2Mat33.prototype.SetIdentity);box2d.b2Mat33.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();this.ez.SetZero();return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetZero",box2d.b2Mat33.prototype.SetZero);
box2d.b2Mat33.prototype.SelfAdd=function(a){this.ex.SelfAdd(a.ex);this.ey.SelfAdd(a.ey);this.ez.SelfAdd(a.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SelfAdd",box2d.b2Mat33.prototype.SelfAdd);
box2d.b2Mat33.prototype.Solve33=function(a,c,b,d){var e=this.ex.x,f=this.ex.y,g=this.ex.z,h=this.ey.x,k=this.ey.y,l=this.ey.z,m=this.ez.x,n=this.ez.y,p=this.ez.z,q=e*(k*p-l*n)+f*(l*m-h*p)+g*(h*n-k*m);0!==q&&(q=1/q);d.x=q*(a*(k*p-l*n)+c*(l*m-h*p)+b*(h*n-k*m));d.y=q*(e*(c*p-b*n)+f*(b*m-a*p)+g*(a*n-c*m));d.z=q*(e*(k*b-l*c)+f*(l*a-h*b)+g*(h*c-k*a));return d};goog.exportProperty(box2d.b2Mat33.prototype,"Solve33",box2d.b2Mat33.prototype.Solve33);
box2d.b2Mat33.prototype.Solve22=function(a,c,b){var d=this.ex.x,e=this.ey.x,f=this.ex.y,g=this.ey.y,h=d*g-e*f;0!==h&&(h=1/h);b.x=h*(g*a-e*c);b.y=h*(d*c-f*a);return b};goog.exportProperty(box2d.b2Mat33.prototype,"Solve22",box2d.b2Mat33.prototype.Solve22);box2d.b2Mat33.prototype.GetInverse22=function(a){var c=this.ex.x,b=this.ey.x,d=this.ex.y,e=this.ey.y,f=c*e-b*d;0!==f&&(f=1/f);a.ex.x=f*e;a.ey.x=-f*b;a.ex.z=0;a.ex.y=-f*d;a.ey.y=f*c;a.ey.z=0;a.ez.x=0;a.ez.y=0;a.ez.z=0};
goog.exportProperty(box2d.b2Mat33.prototype,"GetInverse22",box2d.b2Mat33.prototype.GetInverse22);box2d.b2Mat33.prototype.GetSymInverse33=function(a){var c=box2d.b2Dot_V3_V3(this.ex,box2d.b2Cross_V3_V3(this.ey,this.ez,box2d.b2Vec3.s_t0));0!==c&&(c=1/c);var b=this.ex.x,d=this.ey.x,e=this.ez.x,f=this.ey.y,g=this.ez.y,h=this.ez.z;a.ex.x=c*(f*h-g*g);a.ex.y=c*(e*g-d*h);a.ex.z=c*(d*g-e*f);a.ey.x=a.ex.y;a.ey.y=c*(b*h-e*e);a.ey.z=c*(e*d-b*g);a.ez.x=a.ex.z;a.ez.y=a.ey.z;a.ez.z=c*(b*f-d*d)};
goog.exportProperty(box2d.b2Mat33.prototype,"GetSymInverse33",box2d.b2Mat33.prototype.GetSymInverse33);box2d.b2Mul_M33_V3=function(a,c,b){var d=c.x,e=c.y;c=c.z;b.x=a.ex.x*d+a.ey.x*e+a.ez.x*c;b.y=a.ex.y*d+a.ey.y*e+a.ez.y*c;b.z=a.ex.z*d+a.ey.z*e+a.ez.z*c;return b};goog.exportSymbol("box2d.b2Mul_M33_V3",box2d.b2Mul_M33_V3);box2d.b2Mul_M33_X_Y_Z=function(a,c,b,d,e){e.x=a.ex.x*c+a.ey.x*b+a.ez.x*d;e.y=a.ex.y*c+a.ey.y*b+a.ez.y*d;e.z=a.ex.z*c+a.ey.z*b+a.ez.z*d;return e};
goog.exportSymbol("box2d.b2Mul_M33_X_Y_Z",box2d.b2Mul_M33_X_Y_Z);box2d.b2Mul22_M33_V2=function(a,c,b){var d=c.x;c=c.y;b.x=a.ex.x*d+a.ey.x*c;b.y=a.ex.y*d+a.ey.y*c;return b};goog.exportSymbol("box2d.b2Mul22_M33_V2",box2d.b2Mul22_M33_V2);box2d.b2Mul_M33_X_Y=function(a,c,b,d){d.x=a.ex.x*c+a.ey.x*b;d.y=a.ex.y*c+a.ey.y*b;return d};goog.exportSymbol("box2d.b2Mul_M33_X_Y",box2d.b2Mul_M33_X_Y);box2d.b2Rot=function(a){a&&(this.angle=a,this.s=Math.sin(a),this.c=Math.cos(a))};
goog.exportSymbol("box2d.b2Rot",box2d.b2Rot);box2d.b2Rot.prototype.angle=0;goog.exportProperty(box2d.b2Rot.prototype,"angle",box2d.b2Rot.prototype.angle);box2d.b2Rot.prototype.s=0;goog.exportProperty(box2d.b2Rot.prototype,"s",box2d.b2Rot.prototype.s);box2d.b2Rot.prototype.c=1;goog.exportProperty(box2d.b2Rot.prototype,"c",box2d.b2Rot.prototype.c);box2d.b2Rot.IDENTITY=new box2d.b2Rot;goog.exportProperty(box2d.b2Rot,"IDENTITY",box2d.b2Rot.IDENTITY);box2d.b2Rot.prototype.Clone=function(){return(new box2d.b2Rot).Copy(this)};
goog.exportProperty(box2d.b2Rot.prototype,"Clone",box2d.b2Rot.prototype.Clone);box2d.b2Rot.prototype.Copy=function(a){this.angle=a.angle;this.s=a.s;this.c=a.c;return this};goog.exportProperty(box2d.b2Rot.prototype,"Copy",box2d.b2Rot.prototype.Copy);box2d.b2Rot.prototype.Set=function(a){Math.abs(this.angle-a)>=box2d.b2_epsilon&&(this.angle=a,this.s=Math.sin(a),this.c=Math.cos(a));return this};goog.exportProperty(box2d.b2Rot.prototype,"Set",box2d.b2Rot.prototype.Set);
box2d.b2Rot.prototype.SetAngle=box2d.b2Rot.prototype.Set;goog.exportProperty(box2d.b2Rot.prototype,"SetAngle",box2d.b2Rot.prototype.SetAngle);box2d.b2Rot.prototype.SetIdentity=function(){this.s=this.angle=0;this.c=1;return this};goog.exportProperty(box2d.b2Rot.prototype,"SetIdentity",box2d.b2Rot.prototype.SetIdentity);box2d.b2Rot.prototype.GetAngle=function(){return this.angle};goog.exportProperty(box2d.b2Rot.prototype,"GetAngle",box2d.b2Rot.prototype.GetAngle);
box2d.b2Rot.prototype.GetXAxis=function(a){a.x=this.c;a.y=this.s;return a};goog.exportProperty(box2d.b2Rot.prototype,"GetXAxis",box2d.b2Rot.prototype.GetXAxis);box2d.b2Rot.prototype.GetYAxis=function(a){a.x=-this.s;a.y=this.c;return a};goog.exportProperty(box2d.b2Rot.prototype,"GetYAxis",box2d.b2Rot.prototype.GetYAxis);box2d.b2Mul_R_R=function(a,c,b){var d=a.c,e=a.s,f=c.c,g=c.s;b.s=e*f+d*g;b.c=d*f-e*g;b.angle=box2d.b2WrapAngle(a.angle+c.angle);return b};goog.exportSymbol("box2d.b2Mul_R_R",box2d.b2Mul_R_R);
box2d.b2MulT_R_R=function(a,c,b){var d=a.c,e=a.s,f=c.c,g=c.s;b.s=d*g-e*f;b.c=d*f+e*g;b.angle=box2d.b2WrapAngle(a.angle-c.angle);return b};goog.exportSymbol("box2d.b2MulT_R_R",box2d.b2MulT_R_R);box2d.b2Mul_R_V2=function(a,c,b){var d=a.c;a=a.s;var e=c.x;c=c.y;b.x=d*e-a*c;b.y=a*e+d*c;return b};goog.exportSymbol("box2d.b2Mul_R_V2",box2d.b2Mul_R_V2);box2d.b2MulT_R_V2=function(a,c,b){var d=a.c;a=a.s;var e=c.x;c=c.y;b.x=d*e+a*c;b.y=-a*e+d*c;return b};goog.exportSymbol("box2d.b2MulT_R_V2",box2d.b2MulT_R_V2);
box2d.b2Transform=function(){this.p=new box2d.b2Vec2;this.q=new box2d.b2Rot};goog.exportSymbol("box2d.b2Transform",box2d.b2Transform);box2d.b2Transform.prototype.p=null;goog.exportProperty(box2d.b2Transform.prototype,"p",box2d.b2Transform.prototype.p);box2d.b2Transform.prototype.q=null;goog.exportProperty(box2d.b2Transform.prototype,"q",box2d.b2Transform.prototype.q);box2d.b2Transform.IDENTITY=new box2d.b2Transform;goog.exportProperty(box2d.b2Transform,"IDENTITY",box2d.b2Transform.IDENTITY);
box2d.b2Transform.prototype.Clone=function(){return(new box2d.b2Transform).Copy(this)};goog.exportProperty(box2d.b2Transform.prototype,"Clone",box2d.b2Transform.prototype.Clone);box2d.b2Transform.prototype.Copy=function(a){this.p.Copy(a.p);this.q.Copy(a.q);return this};goog.exportProperty(box2d.b2Transform.prototype,"Copy",box2d.b2Transform.prototype.Copy);box2d.b2Transform.prototype.SetIdentity=function(){this.p.SetZero();this.q.SetIdentity();return this};
goog.exportProperty(box2d.b2Transform.prototype,"SetIdentity",box2d.b2Transform.prototype.SetIdentity);box2d.b2Transform.prototype.Set=function(a,c){return this.SetPositionRotationAngle(a,c)};box2d.b2Transform.prototype.SetPositionRotation=function(a,c){this.p.Copy(a);this.q.Copy(c);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotation",box2d.b2Transform.prototype.SetPositionRotation);
box2d.b2Transform.prototype.SetPositionRotationAngle=function(a,c){this.p.Copy(a);this.q.SetAngle(c);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotationAngle",box2d.b2Transform.prototype.SetPositionRotationAngle);box2d.b2Transform.prototype.SetPosition=function(a){this.p.Copy(a);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPosition",box2d.b2Transform.prototype.SetPosition);box2d.b2Transform.prototype.SetPositionXY=function(a,c){this.p.Set(a,c);return this};
goog.exportProperty(box2d.b2Transform.prototype,"SetPositionXY",box2d.b2Transform.prototype.SetPositionXY);box2d.b2Transform.prototype.SetRotation=function(a){this.q.Copy(a);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotation",box2d.b2Transform.prototype.SetRotation);box2d.b2Transform.prototype.SetRotationAngle=function(a){this.q.SetAngle(a);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotationAngle",box2d.b2Transform.prototype.SetRotationAngle);
box2d.b2Transform.prototype.GetPosition=function(){return this.p};goog.exportProperty(box2d.b2Transform.prototype,"GetPosition",box2d.b2Transform.prototype.GetPosition);box2d.b2Transform.prototype.GetRotation=function(){return this.q};goog.exportProperty(box2d.b2Transform.prototype,"GetRotation",box2d.b2Transform.prototype.GetRotation);box2d.b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetRotationAngle",box2d.b2Transform.prototype.GetRotationAngle);
box2d.b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetAngle",box2d.b2Transform.prototype.GetAngle);box2d.b2Mul_X_V2=function(a,c,b){var d=a.q.c,e=a.q.s,f=c.x;c=c.y;b.x=d*f-e*c+a.p.x;b.y=e*f+d*c+a.p.y;return b};goog.exportSymbol("box2d.b2Mul_X_V2",box2d.b2Mul_X_V2);box2d.b2MulT_X_V2=function(a,c,b){var d=a.q.c,e=a.q.s,f=c.x-a.p.x;a=c.y-a.p.y;b.x=d*f+e*a;b.y=-e*f+d*a;return b};goog.exportSymbol("box2d.b2MulT_X_V2",box2d.b2MulT_X_V2);
box2d.b2Mul_X_X=function(a,c,b){box2d.b2Mul_R_R(a.q,c.q,b.q);box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(a.q,c.p,b.p),a.p,b.p);return b};goog.exportSymbol("box2d.b2Mul_X_X",box2d.b2Mul_X_X);box2d.b2MulT_X_X=function(a,c,b){box2d.b2MulT_R_R(a.q,c.q,b.q);box2d.b2MulT_R_V2(a.q,box2d.b2Sub_V2_V2(c.p,a.p,b.p),b.p);return b};goog.exportSymbol("box2d.b2MulT_X_X",box2d.b2MulT_X_X);box2d.b2Sweep=function(){this.localCenter=new box2d.b2Vec2;this.c0=new box2d.b2Vec2;this.c=new box2d.b2Vec2};
goog.exportSymbol("box2d.b2Sweep",box2d.b2Sweep);box2d.b2Sweep.prototype.localCenter=null;goog.exportProperty(box2d.b2Sweep.prototype,"localCenter",box2d.b2Sweep.prototype.localCenter);box2d.b2Sweep.prototype.c0=null;goog.exportProperty(box2d.b2Sweep.prototype,"c0",box2d.b2Sweep.prototype.c0);box2d.b2Sweep.prototype.c=null;goog.exportProperty(box2d.b2Sweep.prototype,"c",box2d.b2Sweep.prototype.c);box2d.b2Sweep.prototype.a0=0;goog.exportProperty(box2d.b2Sweep.prototype,"a0",box2d.b2Sweep.prototype.a0);
box2d.b2Sweep.prototype.a=0;goog.exportProperty(box2d.b2Sweep.prototype,"a",box2d.b2Sweep.prototype.a);box2d.b2Sweep.prototype.alpha0=0;goog.exportProperty(box2d.b2Sweep.prototype,"alpha0",box2d.b2Sweep.prototype.alpha0);box2d.b2Sweep.prototype.Clone=function(){return(new box2d.b2Sweep).Copy(this)};goog.exportProperty(box2d.b2Sweep.prototype,"Clone",box2d.b2Sweep.prototype.Clone);
box2d.b2Sweep.prototype.Copy=function(a){this.localCenter.Copy(a.localCenter);this.c0.Copy(a.c0);this.c.Copy(a.c);this.a0=a.a0;this.a=a.a;this.alpha0=a.alpha0;return this};goog.exportProperty(box2d.b2Sweep.prototype,"Copy",box2d.b2Sweep.prototype.Copy);box2d.b2Sweep.prototype.GetTransform=function(a,c){var b=1-c;a.p.x=b*this.c0.x+c*this.c.x;a.p.y=b*this.c0.y+c*this.c.y;a.q.SetAngle(b*this.a0+c*this.a);a.p.SelfSub(box2d.b2Mul_R_V2(a.q,this.localCenter,box2d.b2Vec2.s_t0));return a};
goog.exportProperty(box2d.b2Sweep.prototype,"GetTransform",box2d.b2Sweep.prototype.GetTransform);box2d.b2Sweep.prototype.Advance=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>this.alpha0);var c=(a-this.alpha0)/(1-this.alpha0);this.c0.x+=c*(this.c.x-this.c0.x);this.c0.y+=c*(this.c.y-this.c0.y);this.a0+=c*(this.a-this.a0);this.alpha0=a};goog.exportProperty(box2d.b2Sweep.prototype,"Advance",box2d.b2Sweep.prototype.Advance);
box2d.b2Sweep.prototype.Normalize=function(){this.a0=box2d.b2WrapAngle(this.a0);this.a=box2d.b2WrapAngle(this.a)};goog.exportProperty(box2d.b2Sweep.prototype,"Normalize",box2d.b2Sweep.prototype.Normalize);box2d.b2Dot=function(a,c){if(a instanceof box2d.b2Vec2&&c instanceof box2d.b2Vec2)return box2d.b2Dot_V2_V2(a,c);if(a instanceof box2d.b2Vec3&&c instanceof box2d.b2Vec3)return box2d.b2Dot_V3_V3(a,c);throw Error();};goog.exportSymbol("box2d.b2Dot",box2d.b2Dot);
box2d.b2Cross=function(a,c,b){if(a instanceof box2d.b2Vec2&&c instanceof box2d.b2Vec2)return box2d.b2Cross_V2_V2(a,c);if(a instanceof box2d.b2Vec2&&"number"===typeof c&&b instanceof box2d.b2Vec2)return box2d.b2Cross_V2_S(a,c,b);if("number"===typeof a&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Cross_S_V2(a,c,b);if(a instanceof box2d.b2Vec3&&c instanceof box2d.b2Vec3&&b instanceof box2d.b2Vec3)return box2d.b2Cross_V3_V3(a,c,b);throw Error();};
goog.exportSymbol("box2d.b2Cross",box2d.b2Cross);box2d.b2Add=function(a,c,b){if(a instanceof box2d.b2Vec2&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Add_V2_V2(a,c,b);if(a instanceof box2d.b2Vec3&&c instanceof box2d.b2Vec3&&b instanceof box2d.b2Vec3)return box2d.b2Add_V3_V3(a,c,b);throw Error();};goog.exportSymbol("box2d.b2Add",box2d.b2Add);
box2d.b2Sub=function(a,c,b){if(a instanceof box2d.b2Vec2&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Sub_V2_V2(a,c,b);if(a instanceof box2d.b2Vec3&&c instanceof box2d.b2Vec3&&b instanceof box2d.b2Vec3)return box2d.b2Sub_V3_V3(a,c,b);throw Error();};goog.exportSymbol("box2d.b2Sub",box2d.b2Sub);
box2d.b2Mul=function(a,c,b){if(a instanceof box2d.b2Mat22&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Mul_M22_V2(a,c,b);if(a instanceof box2d.b2Mat22&&c instanceof box2d.b2Mat22&&b instanceof box2d.b2Mat22)return box2d.b2Mul_M22_M22(a,c,b);if(a instanceof box2d.b2Mat33&&c instanceof box2d.b2Vec3&&b instanceof box2d.b2Vec3)return box2d.b2Mul_M33_V3(a,c,b);if(a instanceof box2d.b2Rot&&c instanceof box2d.b2Rot&&b instanceof box2d.b2Rot)return box2d.b2Mul_R_R(a,c,b);if(a instanceof
box2d.b2Rot&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Mul_R_V2(a,c,b);if(a instanceof box2d.b2Transform&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2Mul_X_V2(a,c,b);if(a instanceof box2d.b2Transform&&c instanceof box2d.b2Transform&&b instanceof box2d.b2Transform)return box2d.b2Mul_X_X(a,c,b);throw Error();};goog.exportSymbol("box2d.b2Mul",box2d.b2Mul);
box2d.b2Mul22=function(a,c,b){if(a instanceof box2d.b2Mat33&&c instanceof box2d.b2Vec2)return box2d.b2Mul22_M33_V2(a,c,b);throw Error();};goog.exportSymbol("box2d.b2Mul22",box2d.b2Mul22);
box2d.b2MulT=function(a,c,b){if(a instanceof box2d.b2Mat22&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2MulT_M22_V2(a,c,b);if(a instanceof box2d.b2Mat22&&c instanceof box2d.b2Mat22&&b instanceof box2d.b2Mat22)return box2d.b2MulT_M22_M22(a,c,b);if(a instanceof box2d.b2Rot&&c instanceof box2d.b2Rot&&b instanceof box2d.b2Rot)return box2d.b2MulT_R_R(a,c,b);if(a instanceof box2d.b2Rot&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2MulT_R_V2(a,c,b);if(a instanceof
box2d.b2Transform&&c instanceof box2d.b2Vec2&&b instanceof box2d.b2Vec2)return box2d.b2MulT_X_V2(a,c,b);if(a instanceof box2d.b2Transform&&c instanceof box2d.b2Transform&&b instanceof box2d.b2Transform)return box2d.b2MulT_X_X(a,c,b);throw Error();};goog.exportSymbol("box2d.b2MulT",box2d.b2MulT);box2d.b2ConstantAccelController=function(){box2d.b2Controller.call(this);this.A=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantAccelController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantAccelController",box2d.b2ConstantAccelController);box2d.b2ConstantAccelController.prototype.A=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"A",box2d.b2ConstantAccelController.prototype.A);
box2d.b2ConstantAccelController.prototype.Step=function(a){a=box2d.b2Mul_S_V2(a.dt,this.A,box2d.b2ConstantAccelController.prototype.Step.s_dtA);for(var c=this.m_bodyList;c;c=c.nextBody){var b=c.body;b.IsAwake()&&b.SetLinearVelocity(box2d.b2Add_V2_V2(b.GetLinearVelocity(),a,box2d.b2Vec2.s_t0))}};goog.exportProperty(box2d.b2ConstantAccelController.prototype,"Step",box2d.b2ConstantAccelController.prototype.Step);box2d.b2ConstantAccelController.prototype.Step.s_dtA=new box2d.b2Vec2;box2d.b2ConstantForceController=function(){box2d.b2Controller.call(this);this.F=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantForceController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantForceController",box2d.b2ConstantForceController);box2d.b2ConstantAccelController.prototype.F=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"F",box2d.b2ConstantAccelController.prototype.F);
box2d.b2ConstantForceController.prototype.Step=function(a){for(a=this.m_bodyList;a;a=a.nextBody){var c=a.body;c.IsAwake()&&c.ApplyForce(this.F,c.GetWorldCenter())}};goog.exportProperty(box2d.b2ConstantForceController.prototype,"Step",box2d.b2ConstantForceController.prototype.Step);box2d.b2GravityController=function(){box2d.b2Controller.call(this)};goog.inherits(box2d.b2GravityController,box2d.b2Controller);goog.exportSymbol("box2d.b2GravityController",box2d.b2GravityController);box2d.b2GravityController.prototype.G=1;goog.exportProperty(box2d.b2GravityController.prototype,"G",box2d.b2GravityController.prototype.G);box2d.b2GravityController.prototype.invSqr=!0;goog.exportProperty(box2d.b2GravityController.prototype,"invSqr",box2d.b2GravityController.prototype.invSqr);
box2d.b2GravityController.prototype.Step=function(a){if(this.invSqr)for(a=this.m_bodyList;a;a=a.nextBody)for(var c=a.body,b=c.GetWorldCenter(),d=c.GetMass(),e=this.m_bodyList;e!==a;e=e.nextBody){var f=e.body,g=f.GetWorldCenter(),h=f.GetMass(),k=g.x-b.x,l=g.y-b.y,m=k*k+l*l;m<box2d.b2_epsilon||(k=box2d.b2GravityController.prototype.Step.s_f.Set(k,l),k.SelfMul(this.G/m/box2d.b2Sqrt(m)*d*h),c.IsAwake()&&c.ApplyForce(k,b),f.IsAwake()&&f.ApplyForce(k.SelfMul(-1),g))}else for(a=this.m_bodyList;a;a=a.nextBody)for(c=
a.body,b=c.GetWorldCenter(),d=c.GetMass(),e=this.m_bodyList;e!==a;e=e.nextBody)f=e.body,g=f.GetWorldCenter(),h=f.GetMass(),k=g.x-b.x,l=g.y-b.y,m=k*k+l*l,m<box2d.b2_epsilon||(k=box2d.b2GravityController.prototype.Step.s_f.Set(k,l),k.SelfMul(this.G/m*d*h),c.IsAwake()&&c.ApplyForce(k,b),f.IsAwake()&&f.ApplyForce(k.SelfMul(-1),g))};goog.exportProperty(box2d.b2GravityController.prototype,"Step",box2d.b2GravityController.prototype.Step);box2d.b2GravityController.prototype.Step.s_f=new box2d.b2Vec2;box2d.b2TensorDampingController=function(){box2d.b2Controller.call(this);this.T=new box2d.b2Mat22;this.maxTimestep=0};goog.inherits(box2d.b2TensorDampingController,box2d.b2Controller);goog.exportSymbol("box2d.b2TensorDampingController",box2d.b2TensorDampingController);box2d.b2TensorDampingController.prototype.T=new box2d.b2Mat22;goog.exportProperty(box2d.b2TensorDampingController.prototype,"T",box2d.b2TensorDampingController.prototype.T);box2d.b2TensorDampingController.prototype.maxTimestep=0;
goog.exportProperty(box2d.b2TensorDampingController.prototype,"maxTimestep",box2d.b2TensorDampingController.prototype.maxTimestep);
box2d.b2TensorDampingController.prototype.Step=function(a){a=a.dt;if(!(a<=box2d.b2_epsilon)){a>this.maxTimestep&&0<this.maxTimestep&&(a=this.maxTimestep);for(var c=this.m_bodyList;c;c=c.nextBody){var b=c.body;if(b.IsAwake()){var d=b.GetWorldVector(box2d.b2Mul_M22_V2(this.T,b.GetLocalVector(b.GetLinearVelocity(),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1),box2d.b2TensorDampingController.prototype.Step.s_damping);b.SetLinearVelocity(box2d.b2Add_V2_V2(b.GetLinearVelocity(),box2d.b2Mul_S_V2(a,d,box2d.b2Vec2.s_t0),
box2d.b2Vec2.s_t1))}}}};box2d.b2TensorDampingController.prototype.Step.s_damping=new box2d.b2Vec2;box2d.b2TensorDampingController.prototype.SetAxisAligned=function(a,c){this.T.ex.x=-a;this.T.ex.y=0;this.T.ey.x=0;this.T.ey.y=-c;this.maxTimestep=0<a||0<c?1/box2d.b2Max(a,c):0};box2d.b2DistanceProxy=function(){this.m_buffer=box2d.b2Vec2.MakeArray(2)};goog.exportSymbol("box2d.b2DistanceProxy",box2d.b2DistanceProxy);box2d.b2DistanceProxy.prototype.m_buffer=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_buffer",box2d.b2DistanceProxy.prototype.m_buffer);box2d.b2DistanceProxy.prototype.m_vertices=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_vertices",box2d.b2DistanceProxy.prototype.m_vertices);box2d.b2DistanceProxy.prototype.m_count=0;
goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_count",box2d.b2DistanceProxy.prototype.m_count);box2d.b2DistanceProxy.prototype.m_radius=0;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_radius",box2d.b2DistanceProxy.prototype.m_radius);box2d.b2DistanceProxy.prototype.Reset=function(){this.m_vertices=null;this.m_radius=this.m_count=0;return this};goog.exportProperty(box2d.b2DistanceProxy.prototype,"Reset",box2d.b2DistanceProxy.prototype.Reset);
box2d.b2DistanceProxy.prototype.SetShape=function(a,c){a.SetupDistanceProxy(this,c)};goog.exportProperty(box2d.b2DistanceProxy.prototype,"SetShape",box2d.b2DistanceProxy.prototype.SetShape);box2d.b2DistanceProxy.prototype.GetSupport=function(a){for(var c=0,b=box2d.b2Dot_V2_V2(this.m_vertices[0],a),d=1;d<this.m_count;++d){var e=box2d.b2Dot_V2_V2(this.m_vertices[d],a);e>b&&(c=d,b=e)}return c};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupport",box2d.b2DistanceProxy.prototype.GetSupport);
box2d.b2DistanceProxy.prototype.GetSupportVertex=function(a,c){for(var b=0,d=box2d.b2Dot_V2_V2(this.m_vertices[0],a),e=1;e<this.m_count;++e){var f=box2d.b2Dot_V2_V2(this.m_vertices[e],a);f>d&&(b=e,d=f)}return c.Copy(this.m_vertices[b])};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupportVertex",box2d.b2DistanceProxy.prototype.GetSupportVertex);box2d.b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count};
goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertexCount",box2d.b2DistanceProxy.prototype.GetVertexCount);box2d.b2DistanceProxy.prototype.GetVertex=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=a&&a<this.m_count);return this.m_vertices[a]};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertex",box2d.b2DistanceProxy.prototype.GetVertex);box2d.b2SimplexCache=function(){this.indexA=box2d.b2MakeNumberArray(3);this.indexB=box2d.b2MakeNumberArray(3)};
goog.exportSymbol("box2d.b2SimplexCache",box2d.b2SimplexCache);box2d.b2SimplexCache.prototype.metric=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"metric",box2d.b2SimplexCache.prototype.metric);box2d.b2SimplexCache.prototype.count=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"count",box2d.b2SimplexCache.prototype.count);box2d.b2SimplexCache.prototype.indexA=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexA",box2d.b2SimplexCache.prototype.indexA);
box2d.b2SimplexCache.prototype.indexB=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexB",box2d.b2SimplexCache.prototype.indexB);box2d.b2SimplexCache.prototype.Reset=function(){this.count=this.metric=0;return this};goog.exportProperty(box2d.b2SimplexCache.prototype,"Reset",box2d.b2SimplexCache.prototype.Reset);box2d.b2DistanceInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.transformA=new box2d.b2Transform;this.transformB=new box2d.b2Transform};
goog.exportSymbol("box2d.b2DistanceInput",box2d.b2DistanceInput);box2d.b2DistanceInput.prototype.proxyA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyA",box2d.b2DistanceInput.prototype.proxyA);box2d.b2DistanceInput.prototype.proxyB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyB",box2d.b2DistanceInput.prototype.proxyB);box2d.b2DistanceInput.prototype.transformA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformA",box2d.b2DistanceInput.prototype.transformA);
box2d.b2DistanceInput.prototype.transformB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformB",box2d.b2DistanceInput.prototype.transformB);box2d.b2DistanceInput.prototype.useRadii=!1;goog.exportProperty(box2d.b2DistanceInput.prototype,"useRadii",box2d.b2DistanceInput.prototype.useRadii);box2d.b2DistanceInput.prototype.Reset=function(){this.proxyA.Reset();this.proxyB.Reset();this.transformA.SetIdentity();this.transformB.SetIdentity();this.useRadii=!1;return this};
goog.exportProperty(box2d.b2DistanceInput.prototype,"Reset",box2d.b2DistanceInput.prototype.Reset);box2d.b2DistanceOutput=function(){this.pointA=new box2d.b2Vec2;this.pointB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2DistanceOutput",box2d.b2DistanceOutput);box2d.b2DistanceOutput.prototype.pointA=null;goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointA",box2d.b2DistanceOutput.prototype.pointA);box2d.b2DistanceOutput.prototype.pointB=null;
goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointB",box2d.b2DistanceOutput.prototype.pointB);box2d.b2DistanceOutput.prototype.distance=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"distance",box2d.b2DistanceOutput.prototype.distance);box2d.b2DistanceOutput.prototype.iterations=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"iterations",box2d.b2DistanceOutput.prototype.iterations);
box2d.b2DistanceOutput.prototype.Reset=function(){this.pointA.SetZero();this.pointB.SetZero();this.iterations=this.distance=0;return this};goog.exportProperty(box2d.b2DistanceOutput.prototype,"Reset",box2d.b2DistanceOutput.prototype.Reset);box2d.b2_gjkCalls=0;goog.exportSymbol("box2d.b2_gjkCalls",box2d.b2_gjkCalls);box2d.b2_gjkIters=0;goog.exportSymbol("box2d.b2_gjkIters",box2d.b2_gjkIters);box2d.b2_gjkMaxIters=0;goog.exportSymbol("box2d.b2_gjkMaxIters",box2d.b2_gjkMaxIters);
box2d.b2SimplexVertex=function(){this.wA=new box2d.b2Vec2;this.wB=new box2d.b2Vec2;this.w=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SimplexVertex",box2d.b2SimplexVertex);box2d.b2SimplexVertex.prototype.wA=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wA",box2d.b2SimplexVertex.prototype.wA);box2d.b2SimplexVertex.prototype.wB=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wB",box2d.b2SimplexVertex.prototype.wB);box2d.b2SimplexVertex.prototype.w=null;
goog.exportProperty(box2d.b2SimplexVertex.prototype,"w",box2d.b2SimplexVertex.prototype.w);box2d.b2SimplexVertex.prototype.a=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"a",box2d.b2SimplexVertex.prototype.a);box2d.b2SimplexVertex.prototype.indexA=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexA",box2d.b2SimplexVertex.prototype.indexA);box2d.b2SimplexVertex.prototype.indexB=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexB",box2d.b2SimplexVertex.prototype.indexB);
box2d.b2SimplexVertex.prototype.Copy=function(a){this.wA.Copy(a.wA);this.wB.Copy(a.wB);this.w.Copy(a.w);this.a=a.a;this.indexA=a.indexA;this.indexB=a.indexB;return this};goog.exportProperty(box2d.b2SimplexVertex.prototype,"Copy",box2d.b2SimplexVertex.prototype.Copy);
box2d.b2Simplex=function(){this.m_v1=new box2d.b2SimplexVertex;this.m_v2=new box2d.b2SimplexVertex;this.m_v3=new box2d.b2SimplexVertex;this.m_vertices=Array(3);this.m_vertices[0]=this.m_v1;this.m_vertices[1]=this.m_v2;this.m_vertices[2]=this.m_v3};goog.exportSymbol("box2d.b2Simplex",box2d.b2Simplex);box2d.b2Simplex.prototype.m_v1=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v1",box2d.b2Simplex.prototype.m_v1);box2d.b2Simplex.prototype.m_v2=null;
goog.exportProperty(box2d.b2Simplex.prototype,"m_v2",box2d.b2Simplex.prototype.m_v2);box2d.b2Simplex.prototype.m_v3=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v3",box2d.b2Simplex.prototype.m_v3);box2d.b2Simplex.prototype.m_vertices=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_vertices",box2d.b2Simplex.prototype.m_vertices);box2d.b2Simplex.prototype.m_count=0;goog.exportProperty(box2d.b2Simplex.prototype,"m_count",box2d.b2Simplex.prototype.m_count);
box2d.b2Simplex.prototype.ReadCache=function(a,c,b,d,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=a.count&&3>=a.count);this.m_count=a.count;for(var f=this.m_vertices,g=0;g<this.m_count;++g){var h=f[g];h.indexA=a.indexA[g];h.indexB=a.indexB[g];var k=c.GetVertex(h.indexA),l=d.GetVertex(h.indexB);box2d.b2Mul_X_V2(b,k,h.wA);box2d.b2Mul_X_V2(e,l,h.wB);box2d.b2Sub_V2_V2(h.wB,h.wA,h.w);h.a=0}1<this.m_count&&(a=a.metric,g=this.GetMetric(),g<.5*a||2*a<g||g<box2d.b2_epsilon)&&(this.m_count=0);0===this.m_count&&
(h=f[0],h.indexA=0,h.indexB=0,k=c.GetVertex(0),l=d.GetVertex(0),box2d.b2Mul_X_V2(b,k,h.wA),box2d.b2Mul_X_V2(e,l,h.wB),box2d.b2Sub_V2_V2(h.wB,h.wA,h.w),this.m_count=h.a=1)};goog.exportProperty(box2d.b2Simplex.prototype,"ReadCache",box2d.b2Simplex.prototype.ReadCache);box2d.b2Simplex.prototype.WriteCache=function(a){a.metric=this.GetMetric();a.count=this.m_count;for(var c=this.m_vertices,b=0;b<this.m_count;++b)a.indexA[b]=c[b].indexA,a.indexB[b]=c[b].indexB};
goog.exportProperty(box2d.b2Simplex.prototype,"WriteCache",box2d.b2Simplex.prototype.WriteCache);box2d.b2Simplex.prototype.GetSearchDirection=function(a){switch(this.m_count){case 1:return a.Copy(this.m_v1.w).SelfNeg();case 2:var c=box2d.b2Sub_V2_V2(this.m_v2.w,this.m_v1.w,a);return 0<box2d.b2Cross_V2_V2(c,box2d.b2Vec2.s_t0.Copy(this.m_v1.w).SelfNeg())?box2d.b2Cross_S_V2(1,c,a):box2d.b2Cross_V2_S(c,1,a);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),a.SetZero()}};
goog.exportProperty(box2d.b2Simplex.prototype,"GetSearchDirection",box2d.b2Simplex.prototype.GetSearchDirection);box2d.b2Simplex.prototype.GetClosestPoint=function(a){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),a.SetZero();case 1:return a.Copy(this.m_v1.w);case 2:return a.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:return a.SetZero();default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),a.SetZero()}};
goog.exportProperty(box2d.b2Simplex.prototype,"GetClosestPoint",box2d.b2Simplex.prototype.GetClosestPoint);
box2d.b2Simplex.prototype.GetWitnessPoints=function(a,c){switch(this.m_count){case 0:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);break;case 1:a.Copy(this.m_v1.wA);c.Copy(this.m_v1.wB);break;case 2:a.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x;a.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y;c.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x;c.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:c.x=a.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+
this.m_v3.a*this.m_v3.wA.x;c.y=a.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}};goog.exportProperty(box2d.b2Simplex.prototype,"GetWitnessPoints",box2d.b2Simplex.prototype.GetWitnessPoints);
box2d.b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0;case 1:return 0;case 2:return box2d.b2Distance(this.m_v1.w,this.m_v2.w);case 3:return box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(this.m_v2.w,this.m_v1.w,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(this.m_v3.w,this.m_v1.w,box2d.b2Vec2.s_t1));default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2Simplex.prototype,"GetMetric",box2d.b2Simplex.prototype.GetMetric);
box2d.b2Simplex.prototype.Solve2=function(){var a=this.m_v1.w,c=this.m_v2.w,b=box2d.b2Sub_V2_V2(c,a,box2d.b2Simplex.s_e12),a=-box2d.b2Dot_V2_V2(a,b);0>=a?this.m_count=this.m_v1.a=1:(c=box2d.b2Dot_V2_V2(c,b),0>=c?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):(b=1/(c+a),this.m_v1.a=c*b,this.m_v2.a=a*b,this.m_count=2))};goog.exportProperty(box2d.b2Simplex.prototype,"Solve2",box2d.b2Simplex.prototype.Solve2);
box2d.b2Simplex.prototype.Solve3=function(){var a=this.m_v1.w,c=this.m_v2.w,b=this.m_v3.w,d=box2d.b2Sub_V2_V2(c,a,box2d.b2Simplex.s_e12),e=box2d.b2Dot_V2_V2(a,d),f=box2d.b2Dot_V2_V2(c,d),e=-e,g=box2d.b2Sub_V2_V2(b,a,box2d.b2Simplex.s_e13),h=box2d.b2Dot_V2_V2(a,g),k=box2d.b2Dot_V2_V2(b,g),h=-h,l=box2d.b2Sub_V2_V2(b,c,box2d.b2Simplex.s_e23),m=box2d.b2Dot_V2_V2(c,l),l=box2d.b2Dot_V2_V2(b,l),m=-m,g=box2d.b2Cross_V2_V2(d,g),d=g*box2d.b2Cross_V2_V2(c,b),b=g*box2d.b2Cross_V2_V2(b,a),a=g*box2d.b2Cross_V2_V2(a,
c);0>=e&&0>=h?this.m_count=this.m_v1.a=1:0<f&&0<e&&0>=a?(k=1/(f+e),this.m_v1.a=f*k,this.m_v2.a=e*k,this.m_count=2):0<k&&0<h&&0>=b?(f=1/(k+h),this.m_v1.a=k*f,this.m_v3.a=h*f,this.m_count=2,this.m_v2.Copy(this.m_v3)):0>=f&&0>=m?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):0>=k&&0>=l?(this.m_count=this.m_v3.a=1,this.m_v1.Copy(this.m_v3)):0<l&&0<m&&0>=d?(f=1/(l+m),this.m_v2.a=l*f,this.m_v3.a=m*f,this.m_count=2,this.m_v1.Copy(this.m_v3)):(f=1/(d+b+a),this.m_v1.a=d*f,this.m_v2.a=b*f,this.m_v3.a=
a*f,this.m_count=3)};goog.exportProperty(box2d.b2Simplex.prototype,"Solve3",box2d.b2Simplex.prototype.Solve3);box2d.b2Simplex.s_e12=new box2d.b2Vec2;box2d.b2Simplex.s_e13=new box2d.b2Vec2;box2d.b2Simplex.s_e23=new box2d.b2Vec2;
box2d.b2ShapeDistance=function(a,c,b){++box2d.b2_gjkCalls;var d=b.proxyA,e=b.proxyB,f=b.transformA,g=b.transformB,h=box2d.b2Distance.s_simplex;h.ReadCache(c,d,f,e,g);for(var k=h.m_vertices,l=box2d.b2Distance.s_saveA,m=box2d.b2Distance.s_saveB,n=0,p=0;20>p;){for(var n=h.m_count,q=0;q<n;++q)l[q]=k[q].indexA,m[q]=k[q].indexB;switch(h.m_count){case 1:break;case 2:h.Solve2();break;case 3:h.Solve3();break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}if(3===h.m_count)break;var r=h.GetClosestPoint(box2d.b2Distance.s_p);
r.LengthSquared();q=h.GetSearchDirection(box2d.b2Distance.s_d);if(q.LengthSquared()<box2d.b2_epsilon_sq)break;r=k[h.m_count];r.indexA=d.GetSupport(box2d.b2MulT_R_V2(f.q,box2d.b2Vec2.s_t0.Copy(q).SelfNeg(),box2d.b2Distance.s_supportA));box2d.b2Mul_X_V2(f,d.GetVertex(r.indexA),r.wA);r.indexB=e.GetSupport(box2d.b2MulT_R_V2(g.q,q,box2d.b2Distance.s_supportB));box2d.b2Mul_X_V2(g,e.GetVertex(r.indexB),r.wB);box2d.b2Sub_V2_V2(r.wB,r.wA,r.w);++p;++box2d.b2_gjkIters;for(var u=!1,q=0;q<n;++q)if(r.indexA===
l[q]&&r.indexB===m[q]){u=!0;break}if(u)break;++h.m_count}box2d.b2_gjkMaxIters=box2d.b2Max(box2d.b2_gjkMaxIters,p);h.GetWitnessPoints(a.pointA,a.pointB);a.distance=box2d.b2Distance(a.pointA,a.pointB);a.iterations=p;h.WriteCache(c);b.useRadii&&(c=d.m_radius,e=e.m_radius,a.distance>c+e&&a.distance>box2d.b2_epsilon?(a.distance-=c+e,b=box2d.b2Sub_V2_V2(a.pointB,a.pointA,box2d.b2Distance.s_normal),b.Normalize(),a.pointA.SelfMulAdd(c,b),a.pointB.SelfMulSub(e,b)):(r=box2d.b2Mid_V2_V2(a.pointA,a.pointB,box2d.b2Distance.s_p),
a.pointA.Copy(r),a.pointB.Copy(r),a.distance=0))};goog.exportSymbol("box2d.b2ShapeDistance",box2d.b2ShapeDistance);box2d.b2Distance.s_simplex=new box2d.b2Simplex;box2d.b2Distance.s_saveA=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_saveB=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_p=new box2d.b2Vec2;box2d.b2Distance.s_d=new box2d.b2Vec2;box2d.b2Distance.s_normal=new box2d.b2Vec2;box2d.b2Distance.s_supportA=new box2d.b2Vec2;box2d.b2Distance.s_supportB=new box2d.b2Vec2;box2d.b2Collision={};box2d.b2ContactFeatureType={e_vertex:0,e_face:1};goog.exportSymbol("box2d.b2ContactFeatureType",box2d.b2ContactFeatureType);goog.exportProperty(box2d.b2ContactFeatureType,"e_vertex",box2d.b2ContactFeatureType.e_vertex);goog.exportProperty(box2d.b2ContactFeatureType,"e_face",box2d.b2ContactFeatureType.e_face);box2d.b2ContactFeature=function(a){this._id=a};goog.exportSymbol("box2d.b2ContactFeature",box2d.b2ContactFeature);box2d.b2ContactFeature.prototype._id=null;
goog.exportProperty(box2d.b2ContactFeature.prototype,"_id",box2d.b2ContactFeature.prototype._id);box2d.b2ContactFeature.prototype._indexA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexA",box2d.b2ContactFeature.prototype._indexA);box2d.b2ContactFeature.prototype._indexB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexB",box2d.b2ContactFeature.prototype._indexB);box2d.b2ContactFeature.prototype._typeA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeA",box2d.b2ContactFeature.prototype._typeA);
box2d.b2ContactFeature.prototype._typeB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeB",box2d.b2ContactFeature.prototype._typeB);Object.defineProperty(box2d.b2ContactFeature.prototype,"indexA",{enumerable:!1,configurable:!0,get:function(){return this._indexA},set:function(a){this._indexA=a;this._id._key=this._id._key&4294967040|this._indexA&255}});
Object.defineProperty(box2d.b2ContactFeature.prototype,"indexB",{enumerable:!1,configurable:!0,get:function(){return this._indexB},set:function(a){this._indexB=a;this._id._key=this._id._key&4294902015|this._indexB<<8&65280}});Object.defineProperty(box2d.b2ContactFeature.prototype,"typeA",{enumerable:!1,configurable:!0,get:function(){return this._typeA},set:function(a){this._typeA=a;this._id._key=this._id._key&4278255615|this._typeA<<16&16711680}});
Object.defineProperty(box2d.b2ContactFeature.prototype,"typeB",{enumerable:!1,configurable:!0,get:function(){return this._typeB},set:function(a){this._typeB=a;this._id._key=this._id._key&16777215|this._typeB<<24&4278190080}});box2d.b2ContactID=function(){this.cf=new box2d.b2ContactFeature(this)};goog.exportSymbol("box2d.b2ContactID",box2d.b2ContactID);box2d.b2ContactID.prototype.cf=null;goog.exportProperty(box2d.b2ContactID.prototype,"cf",box2d.b2ContactID.prototype.cf);
box2d.b2ContactID.prototype.key=0;goog.exportProperty(box2d.b2ContactID.prototype,"key",box2d.b2ContactID.prototype.key);box2d.b2ContactID.prototype.Copy=function(a){this.key=a.key;return this};goog.exportProperty(box2d.b2ContactID.prototype,"Copy",box2d.b2ContactID.prototype.Copy);box2d.b2ContactID.prototype.Clone=function(){return(new box2d.b2ContactID).Copy(this)};goog.exportProperty(box2d.b2ContactID.prototype,"Clone",box2d.b2ContactID.prototype.Clone);
Object.defineProperty(box2d.b2ContactID.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(a){this._key=a;this.cf._indexA=this._key&255;this.cf._indexB=this._key>>8&255;this.cf._typeA=this._key>>16&255;this.cf._typeB=this._key>>24&255}});box2d.b2ManifoldPoint=function(){this.localPoint=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ManifoldPoint",box2d.b2ManifoldPoint);box2d.b2ManifoldPoint.prototype.localPoint=null;
goog.exportProperty(box2d.b2ManifoldPoint.prototype,"localPoint",box2d.b2ManifoldPoint.prototype.localPoint);box2d.b2ManifoldPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"normalImpulse",box2d.b2ManifoldPoint.prototype.normalImpulse);box2d.b2ManifoldPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"tangentImpulse",box2d.b2ManifoldPoint.prototype.tangentImpulse);box2d.b2ManifoldPoint.prototype.id=null;
goog.exportProperty(box2d.b2ManifoldPoint.prototype,"id",box2d.b2ManifoldPoint.prototype.id);box2d.b2ManifoldPoint.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2ManifoldPoint})};goog.exportProperty(box2d.b2ManifoldPoint,"MakeArray",box2d.b2ManifoldPoint.MakeArray);box2d.b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero();this.tangentImpulse=this.normalImpulse=0;this.id.key=0};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Reset",box2d.b2ManifoldPoint.prototype.Reset);
box2d.b2ManifoldPoint.prototype.Copy=function(a){this.localPoint.Copy(a.localPoint);this.normalImpulse=a.normalImpulse;this.tangentImpulse=a.tangentImpulse;this.id.Copy(a.id);return this};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Copy",box2d.b2ManifoldPoint.prototype.Copy);box2d.b2ManifoldType={e_unknown:-1,e_circles:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2ManifoldType",box2d.b2ManifoldType);goog.exportProperty(box2d.b2ManifoldType,"e_unknown",box2d.b2ManifoldType.e_unknown);
goog.exportProperty(box2d.b2ManifoldType,"e_circles",box2d.b2ManifoldType.e_circles);goog.exportProperty(box2d.b2ManifoldType,"e_faceA",box2d.b2ManifoldType.e_faceA);goog.exportProperty(box2d.b2ManifoldType,"e_faceB",box2d.b2ManifoldType.e_faceB);box2d.b2Manifold=function(){this.points=box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};
goog.exportSymbol("box2d.b2Manifold",box2d.b2Manifold);box2d.b2Manifold.prototype.points=null;goog.exportProperty(box2d.b2Manifold.prototype,"points",box2d.b2Manifold.prototype.points);box2d.b2Manifold.prototype.localNormal=null;goog.exportProperty(box2d.b2Manifold.prototype,"localNormal",box2d.b2Manifold.prototype.localNormal);box2d.b2Manifold.prototype.localPoint=null;goog.exportProperty(box2d.b2Manifold.prototype,"localPoint",box2d.b2Manifold.prototype.localPoint);
box2d.b2Manifold.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2Manifold.prototype,"type",box2d.b2Manifold.prototype.type);box2d.b2Manifold.prototype.pointCount=0;goog.exportProperty(box2d.b2Manifold.prototype,"pointCount",box2d.b2Manifold.prototype.pointCount);
box2d.b2Manifold.prototype.Reset=function(){for(var a=0,c=box2d.b2_maxManifoldPoints;a<c;++a)this.points[a].Reset();this.localNormal.SetZero();this.localPoint.SetZero();this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};goog.exportProperty(box2d.b2Manifold.prototype,"Reset",box2d.b2Manifold.prototype.Reset);
box2d.b2Manifold.prototype.Copy=function(a){this.pointCount=a.pointCount;for(var c=0,b=box2d.b2_maxManifoldPoints;c<b;++c)this.points[c].Copy(a.points[c]);this.localNormal.Copy(a.localNormal);this.localPoint.Copy(a.localPoint);this.type=a.type;return this};goog.exportProperty(box2d.b2Manifold.prototype,"Copy",box2d.b2Manifold.prototype.Copy);box2d.b2Manifold.prototype.Clone=function(){return(new box2d.b2Manifold).Copy(this)};goog.exportProperty(box2d.b2Manifold.prototype,"Clone",box2d.b2Manifold.prototype.Clone);
box2d.b2WorldManifold=function(){this.normal=new box2d.b2Vec2;this.points=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints);this.separations=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2WorldManifold",box2d.b2WorldManifold);box2d.b2WorldManifold.prototype.normal=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"normal",box2d.b2WorldManifold.prototype.normal);box2d.b2WorldManifold.prototype.points=null;
goog.exportProperty(box2d.b2WorldManifold.prototype,"points",box2d.b2WorldManifold.prototype.points);box2d.b2WorldManifold.prototype.separations=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"separations",box2d.b2WorldManifold.prototype.separations);
box2d.b2WorldManifold.prototype.Initialize=function(a,c,b,d,e){if(0!==a.pointCount)switch(a.type){case box2d.b2ManifoldType.e_circles:this.normal.Set(1,0);c=box2d.b2Mul_X_V2(c,a.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointA);a=box2d.b2Mul_X_V2(d,a.points[0].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointB);box2d.b2DistanceSquared(c,a)>box2d.b2_epsilon_sq&&box2d.b2Sub_V2_V2(a,c,this.normal).SelfNormalize();var f=box2d.b2AddMul_V2_S_V2(c,b,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),
g=box2d.b2SubMul_V2_S_V2(a,e,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2Mid_V2_V2(f,g,this.points[0]);this.separations[0]=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(g,f,box2d.b2Vec2.s_t0),this.normal);break;case box2d.b2ManifoldType.e_faceA:box2d.b2Mul_R_V2(c.q,a.localNormal,this.normal);for(var h=box2d.b2Mul_X_V2(c,a.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),k=0,l=a.pointCount;k<l;++k){var m=box2d.b2Mul_X_V2(d,a.points[k].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),
f=b-box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(m,h,box2d.b2Vec2.s_t0),this.normal),f=box2d.b2AddMul_V2_S_V2(m,f,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),g=box2d.b2SubMul_V2_S_V2(m,e,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2Mid_V2_V2(f,g,this.points[k]);this.separations[k]=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(g,f,box2d.b2Vec2.s_t0),this.normal)}break;case box2d.b2ManifoldType.e_faceB:box2d.b2Mul_R_V2(d.q,a.localNormal,this.normal);h=box2d.b2Mul_X_V2(d,a.localPoint,
box2d.b2WorldManifold.prototype.Initialize.s_planePoint);k=0;for(l=a.pointCount;k<l;++k)m=box2d.b2Mul_X_V2(c,a.points[k].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),f=e-box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(m,h,box2d.b2Vec2.s_t0),this.normal),g=box2d.b2AddMul_V2_S_V2(m,f,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB),f=box2d.b2SubMul_V2_S_V2(m,b,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),box2d.b2Mid_V2_V2(f,g,this.points[k]),this.separations[k]=
box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(f,g,box2d.b2Vec2.s_t0),this.normal);this.normal.SelfNeg()}};goog.exportProperty(box2d.b2WorldManifold.prototype,"Initialize",box2d.b2WorldManifold.prototype.Initialize);box2d.b2WorldManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cB=new box2d.b2Vec2;
box2d.b2WorldManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;box2d.b2PointState={b2_nullState:0,b2_addState:1,b2_persistState:2,b2_removeState:3};goog.exportSymbol("box2d.b2PointState",box2d.b2PointState);goog.exportProperty(box2d.b2PointState,"b2_nullState   ",box2d.b2PointState.b2_nullState);goog.exportProperty(box2d.b2PointState,"b2_addState    ",box2d.b2PointState.b2_addState);
goog.exportProperty(box2d.b2PointState,"b2_persistState",box2d.b2PointState.b2_persistState);goog.exportProperty(box2d.b2PointState,"b2_removeState ",box2d.b2PointState.b2_removeState);
box2d.b2GetPointStates=function(a,c,b,d){for(var e=0,f=b.pointCount;e<f;++e){var g=b.points[e].id,g=g.key;a[e]=box2d.b2PointState.b2_removeState;for(var h=0,k=d.pointCount;h<k;++h)if(d.points[h].id.key===g){a[e]=box2d.b2PointState.b2_persistState;break}}for(f=box2d.b2_maxManifoldPoints;e<f;++e)a[e]=box2d.b2PointState.b2_nullState;e=0;for(f=d.pointCount;e<f;++e)for(g=d.points[e].id,g=g.key,c[e]=box2d.b2PointState.b2_addState,h=0,k=b.pointCount;h<k;++h)if(b.points[h].id.key===g){c[e]=box2d.b2PointState.b2_persistState;
break}for(f=box2d.b2_maxManifoldPoints;e<f;++e)c[e]=box2d.b2PointState.b2_nullState};goog.exportSymbol("box2d.b2GetPointStates",box2d.b2GetPointStates);box2d.b2ClipVertex=function(){this.v=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ClipVertex",box2d.b2ClipVertex);box2d.b2ClipVertex.prototype.v=null;goog.exportProperty(box2d.b2ClipVertex.prototype,"v",box2d.b2ClipVertex.prototype.v);box2d.b2ClipVertex.prototype.id=null;
goog.exportProperty(box2d.b2ClipVertex.prototype,"id",box2d.b2ClipVertex.prototype.id);box2d.b2ClipVertex.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2ClipVertex})};goog.exportProperty(box2d.b2ClipVertex,"MakeArray",box2d.b2ClipVertex.MakeArray);box2d.b2ClipVertex.prototype.Copy=function(a){this.v.Copy(a.v);this.id.Copy(a.id);return this};goog.exportProperty(box2d.b2ClipVertex.prototype,"Copy",box2d.b2ClipVertex.prototype.Copy);
box2d.b2RayCastInput=function(){this.p1=new box2d.b2Vec2;this.p2=new box2d.b2Vec2;this.maxFraction=1};goog.exportSymbol("box2d.b2RayCastInput",box2d.b2RayCastInput);box2d.b2RayCastInput.prototype.p1=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p1",box2d.b2RayCastInput.prototype.p1);box2d.b2RayCastInput.prototype.p2=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p2",box2d.b2RayCastInput.prototype.p2);box2d.b2RayCastInput.prototype.maxFraction=1;
goog.exportProperty(box2d.b2RayCastInput.prototype,"maxFraction",box2d.b2RayCastInput.prototype.maxFraction);box2d.b2RayCastInput.prototype.Copy=function(a){this.p1.Copy(a.p1);this.p2.Copy(a.p2);this.maxFraction=a.maxFraction;return this};goog.exportProperty(box2d.b2RayCastInput.prototype,"Copy",box2d.b2RayCastInput.prototype.Copy);box2d.b2RayCastOutput=function(){this.normal=new box2d.b2Vec2;this.fraction=0};goog.exportSymbol("box2d.b2RayCastOutput",box2d.b2RayCastOutput);
box2d.b2RayCastOutput.prototype.normal=null;goog.exportProperty(box2d.b2RayCastOutput.prototype,"normal",box2d.b2RayCastOutput.prototype.normal);box2d.b2RayCastOutput.prototype.fraction=0;goog.exportProperty(box2d.b2RayCastOutput.prototype,"fraction",box2d.b2RayCastOutput.prototype.fraction);box2d.b2RayCastOutput.prototype.Copy=function(a){this.normal.Copy(a.normal);this.fraction=a.fraction;return this};goog.exportProperty(box2d.b2RayCastOutput.prototype,"Copy",box2d.b2RayCastOutput.prototype.Copy);
box2d.b2AABB=function(){this.lowerBound=new box2d.b2Vec2;this.upperBound=new box2d.b2Vec2;this.m_out_center=new box2d.b2Vec2;this.m_out_extent=new box2d.b2Vec2};goog.exportSymbol("box2d.b2AABB",box2d.b2AABB);box2d.b2AABB.prototype.lowerBound=null;goog.exportProperty(box2d.b2AABB.prototype,"lowerBound",box2d.b2AABB.prototype.lowerBound);box2d.b2AABB.prototype.upperBound=null;goog.exportProperty(box2d.b2AABB.prototype,"upperBound",box2d.b2AABB.prototype.upperBound);
box2d.b2AABB.prototype.m_out_center=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_center",box2d.b2AABB.prototype.m_out_center);box2d.b2AABB.prototype.m_out_extent=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_extent",box2d.b2AABB.prototype.m_out_extent);box2d.b2AABB.prototype.Clone=function(){return(new box2d.b2AABB).Copy(this)};goog.exportProperty(box2d.b2AABB.prototype,"Clone",box2d.b2AABB.prototype.Clone);
box2d.b2AABB.prototype.Copy=function(a){this.lowerBound.Copy(a.lowerBound);this.upperBound.Copy(a.upperBound);return this};goog.exportProperty(box2d.b2AABB.prototype,"Copy",box2d.b2AABB.prototype.Copy);box2d.b2AABB.prototype.IsValid=function(){var a=this.upperBound.y-this.lowerBound.y;return a=(a=0<=this.upperBound.x-this.lowerBound.x&&0<=a)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()};goog.exportProperty(box2d.b2AABB.prototype,"IsValid",box2d.b2AABB.prototype.IsValid);
box2d.b2AABB.prototype.GetCenter=function(){return box2d.b2Mid_V2_V2(this.lowerBound,this.upperBound,this.m_out_center)};goog.exportProperty(box2d.b2AABB.prototype,"GetCenter",box2d.b2AABB.prototype.GetCenter);box2d.b2AABB.prototype.GetExtents=function(){return box2d.b2Ext_V2_V2(this.lowerBound,this.upperBound,this.m_out_extent)};goog.exportProperty(box2d.b2AABB.prototype,"GetExtents",box2d.b2AABB.prototype.GetExtents);
box2d.b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))};goog.exportProperty(box2d.b2AABB.prototype,"GetPerimeter",box2d.b2AABB.prototype.GetPerimeter);box2d.b2AABB.prototype.Combine=function(a,c){switch(arguments.length){case 1:return this.Combine1(a);case 2:return this.Combine2(a,c||new box2d.b2AABB);default:throw Error();}};
box2d.b2AABB.prototype.Combine1=function(a){this.lowerBound.x=box2d.b2Min(this.lowerBound.x,a.lowerBound.x);this.lowerBound.y=box2d.b2Min(this.lowerBound.y,a.lowerBound.y);this.upperBound.x=box2d.b2Max(this.upperBound.x,a.upperBound.x);this.upperBound.y=box2d.b2Max(this.upperBound.y,a.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine1",box2d.b2AABB.prototype.Combine1);
box2d.b2AABB.prototype.Combine2=function(a,c){this.lowerBound.x=box2d.b2Min(a.lowerBound.x,c.lowerBound.x);this.lowerBound.y=box2d.b2Min(a.lowerBound.y,c.lowerBound.y);this.upperBound.x=box2d.b2Max(a.upperBound.x,c.upperBound.x);this.upperBound.y=box2d.b2Max(a.upperBound.y,c.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine2",box2d.b2AABB.prototype.Combine2);box2d.b2AABB.Combine=function(a,c,b){b.Combine2(a,c);return b};goog.exportProperty(box2d.b2AABB,"Combine",box2d.b2AABB.Combine);
box2d.b2AABB.prototype.Contains=function(a){var c;return c=(c=(c=(c=this.lowerBound.x<=a.lowerBound.x)&&this.lowerBound.y<=a.lowerBound.y)&&a.upperBound.x<=this.upperBound.x)&&a.upperBound.y<=this.upperBound.y};goog.exportProperty(box2d.b2AABB.prototype,"Contains",box2d.b2AABB.prototype.Contains);
box2d.b2AABB.prototype.RayCast=function(a,c){var b=-box2d.b2_maxFloat,d=box2d.b2_maxFloat,e=c.p1.x,f=c.p1.y,g=c.p2.x-c.p1.x,h=c.p2.y-c.p1.y,k=box2d.b2Abs(g),l=box2d.b2Abs(h),m=a.normal;if(k<box2d.b2_epsilon){if(e<this.lowerBound.x||this.upperBound.x<e)return!1}else if(k=1/g,g=(this.lowerBound.x-e)*k,e=(this.upperBound.x-e)*k,k=-1,g>e&&(k=g,g=e,e=k,k=1),g>b&&(m.x=k,m.y=0,b=g),d=box2d.b2Min(d,e),b>d)return!1;if(l<box2d.b2_epsilon){if(f<this.lowerBound.y||this.upperBound.y<f)return!1}else if(k=1/h,g=
(this.lowerBound.y-f)*k,e=(this.upperBound.y-f)*k,k=-1,g>e&&(k=g,g=e,e=k,k=1),g>b&&(m.x=0,m.y=k,b=g),d=box2d.b2Min(d,e),b>d)return!1;if(0>b||c.maxFraction<b)return!1;a.fraction=b;return!0};goog.exportProperty(box2d.b2AABB.prototype,"RayCast",box2d.b2AABB.prototype.RayCast);box2d.b2AABB.prototype.TestOverlap=function(a){var c=a.lowerBound.y-this.upperBound.y,b=this.lowerBound.y-a.upperBound.y;return 0<a.lowerBound.x-this.upperBound.x||0<c||0<this.lowerBound.x-a.upperBound.x||0<b?!1:!0};
goog.exportProperty(box2d.b2AABB.prototype,"TestOverlap",box2d.b2AABB.prototype.TestOverlap);box2d.b2TestOverlapAABB=function(a,c){var b=c.lowerBound.y-a.upperBound.y,d=a.lowerBound.y-c.upperBound.y;return 0<c.lowerBound.x-a.upperBound.x||0<b||0<a.lowerBound.x-c.upperBound.x||0<d?!1:!0};goog.exportSymbol("box2d.b2TestOverlapAABB",box2d.b2TestOverlapAABB);
box2d.b2ClipSegmentToLine=function(a,c,b,d,e){var f=0,g=c[0];c=c[1];var h=box2d.b2Dot_V2_V2(b,g.v)-d;b=box2d.b2Dot_V2_V2(b,c.v)-d;0>=h&&a[f++].Copy(g);0>=b&&a[f++].Copy(c);0>h*b&&(b=h/(h-b),d=a[f].v,d.x=g.v.x+b*(c.v.x-g.v.x),d.y=g.v.y+b*(c.v.y-g.v.y),a=a[f].id,a.cf.indexA=e,a.cf.indexB=g.id.cf.indexB,a.cf.typeA=box2d.b2ContactFeatureType.e_vertex,a.cf.typeB=box2d.b2ContactFeatureType.e_face,++f);return f};goog.exportSymbol("box2d.b2ClipSegmentToLine",box2d.b2ClipSegmentToLine);
box2d.b2TestOverlapShape=function(a,c,b,d,e,f){var g=box2d.b2TestOverlapShape.s_input.Reset();g.proxyA.SetShape(a,c);g.proxyB.SetShape(b,d);g.transformA.Copy(e);g.transformB.Copy(f);g.useRadii=!0;a=box2d.b2TestOverlapShape.s_simplexCache.Reset();a.count=0;c=box2d.b2TestOverlapShape.s_output.Reset();box2d.b2ShapeDistance(c,a,g);return c.distance<10*box2d.b2_epsilon};goog.exportSymbol("box2d.b2TestOverlapShape",box2d.b2TestOverlapShape);box2d.b2TestOverlapShape.s_input=new box2d.b2DistanceInput;
box2d.b2TestOverlapShape.s_simplexCache=new box2d.b2SimplexCache;box2d.b2TestOverlapShape.s_output=new box2d.b2DistanceOutput;box2d.b2CollideCircle={};box2d.b2CollideCircles=function(a,c,b,d,e){a.pointCount=0;b=box2d.b2Mul_X_V2(b,c.m_p,box2d.b2CollideCircles.s_pA);e=box2d.b2Mul_X_V2(e,d.m_p,box2d.b2CollideCircles.s_pB);e=box2d.b2DistanceSquared(b,e);b=c.m_radius+d.m_radius;e>b*b||(a.type=box2d.b2ManifoldType.e_circles,a.localPoint.Copy(c.m_p),a.localNormal.SetZero(),a.pointCount=1,a.points[0].localPoint.Copy(d.m_p),a.points[0].id.key=0)};goog.exportSymbol("box2d.b2CollideCircles",box2d.b2CollideCircles);
box2d.b2CollideCircles.s_pA=new box2d.b2Vec2;box2d.b2CollideCircles.s_pB=new box2d.b2Vec2;
box2d.b2CollidePolygonAndCircle=function(a,c,b,d,e){a.pointCount=0;e=box2d.b2Mul_X_V2(e,d.m_p,box2d.b2CollidePolygonAndCircle.s_c);b=box2d.b2MulT_X_V2(b,e,box2d.b2CollidePolygonAndCircle.s_cLocal);var f=0,g=-box2d.b2_maxFloat;e=c.m_radius+d.m_radius;var h=c.m_count,k=c.m_vertices;c=c.m_normals;for(var l=0;l<h;++l){var m=box2d.b2Dot_V2_V2(c[l],box2d.b2Sub_V2_V2(b,k[l],box2d.b2Vec2.s_t0));if(m>e)return;m>g&&(g=m,f=l)}l=f;m=k[l];h=k[(l+1)%h];g<box2d.b2_epsilon?(a.pointCount=1,a.type=box2d.b2ManifoldType.e_faceA,
a.localNormal.Copy(c[f]),box2d.b2Mid_V2_V2(m,h,a.localPoint),a.points[0].localPoint.Copy(d.m_p),a.points[0].id.key=0):(g=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,m,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(h,m,box2d.b2Vec2.s_t1)),f=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,h,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(m,h,box2d.b2Vec2.s_t1)),0>=g?box2d.b2DistanceSquared(b,m)>e*e||(a.pointCount=1,a.type=box2d.b2ManifoldType.e_faceA,box2d.b2Sub_V2_V2(b,m,a.localNormal).SelfNormalize(),a.localPoint.Copy(m),a.points[0].localPoint.Copy(d.m_p),
a.points[0].id.key=0):0>=f?box2d.b2DistanceSquared(b,h)>e*e||(a.pointCount=1,a.type=box2d.b2ManifoldType.e_faceA,box2d.b2Sub_V2_V2(b,h,a.localNormal).SelfNormalize(),a.localPoint.Copy(h),a.points[0].localPoint.Copy(d.m_p),a.points[0].id.key=0):(f=box2d.b2Mid_V2_V2(m,h,box2d.b2CollidePolygonAndCircle.s_faceCenter),g=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,f,box2d.b2Vec2.s_t1),c[l]),g>e||(a.pointCount=1,a.type=box2d.b2ManifoldType.e_faceA,a.localNormal.Copy(c[l]).SelfNormalize(),a.localPoint.Copy(f),
a.points[0].localPoint.Copy(d.m_p),a.points[0].id.key=0)))};goog.exportSymbol("box2d.b2CollidePolygonAndCircle",box2d.b2CollidePolygonAndCircle);box2d.b2CollidePolygonAndCircle.s_c=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_cLocal=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_faceCenter=new box2d.b2Vec2;box2d.b2CollideEdge={};
box2d.b2CollideEdgeAndCircle=function(a,c,b,d,e){a.pointCount=0;b=box2d.b2MulT_X_V2(b,box2d.b2Mul_X_V2(e,d.m_p,box2d.b2Vec2.s_t0),box2d.b2CollideEdgeAndCircle.s_Q);var f=c.m_vertex1,g=c.m_vertex2,h=box2d.b2Sub_V2_V2(g,f,box2d.b2CollideEdgeAndCircle.s_e),k=box2d.b2Dot_V2_V2(h,box2d.b2Sub_V2_V2(g,b,box2d.b2Vec2.s_t0)),l=box2d.b2Dot_V2_V2(h,box2d.b2Sub_V2_V2(b,f,box2d.b2Vec2.s_t0)),m=c.m_radius+d.m_radius;e=box2d.b2CollideEdgeAndCircle.s_id;e.cf.indexB=0;e.cf.typeB=box2d.b2ContactFeatureType.e_vertex;if(0>=
l){var n=f,k=box2d.b2Sub_V2_V2(b,n,box2d.b2CollideEdgeAndCircle.s_d),k=box2d.b2Dot_V2_V2(k,k);if(!(k>m*m)){if(c.m_hasVertex0&&(c=box2d.b2Sub_V2_V2(f,c.m_vertex0,box2d.b2CollideEdgeAndCircle.s_e1),0<box2d.b2Dot_V2_V2(c,box2d.b2Sub_V2_V2(f,b,box2d.b2Vec2.s_t0))))return;e.cf.indexA=0;e.cf.typeA=box2d.b2ContactFeatureType.e_vertex;a.pointCount=1;a.type=box2d.b2ManifoldType.e_circles;a.localNormal.SetZero();a.localPoint.Copy(n);a.points[0].id.Copy(e);a.points[0].localPoint.Copy(d.m_p)}}else if(0>=k){if(n=
g,k=box2d.b2Sub_V2_V2(b,n,box2d.b2CollideEdgeAndCircle.s_d),k=box2d.b2Dot_V2_V2(k,k),!(k>m*m)){if(c.m_hasVertex3&&(f=box2d.b2Sub_V2_V2(c.m_vertex3,g,box2d.b2CollideEdgeAndCircle.s_e2),0<box2d.b2Dot_V2_V2(f,box2d.b2Sub_V2_V2(b,g,box2d.b2Vec2.s_t0))))return;e.cf.indexA=1;e.cf.typeA=box2d.b2ContactFeatureType.e_vertex;a.pointCount=1;a.type=box2d.b2ManifoldType.e_circles;a.localNormal.SetZero();a.localPoint.Copy(n);a.points[0].id.Copy(e);a.points[0].localPoint.Copy(d.m_p)}}else c=box2d.b2Dot_V2_V2(h,
h),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<c),n=box2d.b2CollideEdgeAndCircle.s_P,n.x=1/c*(k*f.x+l*g.x),n.y=1/c*(k*f.y+l*g.y),k=box2d.b2Sub_V2_V2(b,n,box2d.b2CollideEdgeAndCircle.s_d),k=box2d.b2Dot_V2_V2(k,k),k>m*m||(n=box2d.b2CollideEdgeAndCircle.s_n.Set(-h.y,h.x),0>box2d.b2Dot_V2_V2(n,box2d.b2Sub_V2_V2(b,f,box2d.b2Vec2.s_t0))&&n.Set(-n.x,-n.y),n.Normalize(),e.cf.indexA=0,e.cf.typeA=box2d.b2ContactFeatureType.e_face,a.pointCount=1,a.type=box2d.b2ManifoldType.e_faceA,a.localNormal.Copy(n),a.localPoint.Copy(f),
a.points[0].id.Copy(e),a.points[0].localPoint.Copy(d.m_p))};goog.exportSymbol("box2d.b2CollideEdgeAndCircle",box2d.b2CollideEdgeAndCircle);box2d.b2CollideEdgeAndCircle.s_Q=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_d=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e1=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e2=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_P=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_n=new box2d.b2Vec2;
box2d.b2CollideEdgeAndCircle.s_id=new box2d.b2ContactID;box2d.b2EPAxisType={e_unknown:0,e_edgeA:1,e_edgeB:2};goog.exportSymbol("box2d.b2EPAxisType",box2d.b2EPAxisType);goog.exportProperty(box2d.b2EPAxisType,"e_unknown",box2d.b2EPAxisType.e_unknown);goog.exportProperty(box2d.b2EPAxisType,"e_edgeA",box2d.b2EPAxisType.e_edgeA);goog.exportProperty(box2d.b2EPAxisType,"e_edgeB",box2d.b2EPAxisType.e_edgeB);box2d.b2EPAxis=function(){};goog.exportSymbol("box2d.b2EPAxis",box2d.b2EPAxis);
box2d.b2EPAxis.prototype.type=box2d.b2EPAxisType.e_unknown;goog.exportProperty(box2d.b2EPAxis.prototype,"type",box2d.b2EPAxis.prototype.type);box2d.b2EPAxis.prototype.index=0;goog.exportProperty(box2d.b2EPAxis.prototype,"index",box2d.b2EPAxis.prototype.index);box2d.b2EPAxis.prototype.separation=0;goog.exportProperty(box2d.b2EPAxis.prototype,"separation",box2d.b2EPAxis.prototype.separation);
box2d.b2TempPolygon=function(){this.vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.count=0};goog.exportSymbol("box2d.b2TempPolygon",box2d.b2TempPolygon);box2d.b2TempPolygon.prototype.vertices=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"vertices",box2d.b2TempPolygon.prototype.vertices);box2d.b2TempPolygon.prototype.normals=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"normals",box2d.b2TempPolygon.prototype.normals);
box2d.b2TempPolygon.prototype.count=0;goog.exportProperty(box2d.b2TempPolygon.prototype,"count",box2d.b2TempPolygon.prototype.count);box2d.b2ReferenceFace=function(){this.i2=this.i1=0;this.v1=new box2d.b2Vec2;this.v2=new box2d.b2Vec2;this.normal=new box2d.b2Vec2;this.sideNormal1=new box2d.b2Vec2;this.sideOffset1=0;this.sideNormal2=new box2d.b2Vec2;this.sideOffset2=0};goog.exportSymbol("box2d.b2ReferenceFace",box2d.b2ReferenceFace);box2d.b2ReferenceFace.prototype.i1=0;
goog.exportProperty(box2d.b2ReferenceFace.prototype,"i1",box2d.b2ReferenceFace.prototype.i1);box2d.b2ReferenceFace.prototype.i2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"i2",box2d.b2ReferenceFace.prototype.i2);box2d.b2ReferenceFace.prototype.v1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v1",box2d.b2ReferenceFace.prototype.v1);box2d.b2ReferenceFace.prototype.v2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v2",box2d.b2ReferenceFace.prototype.v2);
box2d.b2ReferenceFace.prototype.normal=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"normal",box2d.b2ReferenceFace.prototype.normal);box2d.b2ReferenceFace.prototype.sideNormal1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal1",box2d.b2ReferenceFace.prototype.sideNormal1);box2d.b2ReferenceFace.prototype.sideOffset1=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset1",box2d.b2ReferenceFace.prototype.sideOffset1);
box2d.b2ReferenceFace.prototype.sideNormal2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal2",box2d.b2ReferenceFace.prototype.sideNormal2);box2d.b2ReferenceFace.prototype.sideOffset2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset2",box2d.b2ReferenceFace.prototype.sideOffset2);box2d.b2EPColliderVertexType={e_isolated:0,e_concave:1,e_convex:2};goog.exportSymbol("box2d.b2EPColliderVertexType",box2d.b2EPColliderVertexType);
goog.exportProperty(box2d.b2EPColliderVertexType,"e_isolated",box2d.b2EPColliderVertexType.e_isolated);goog.exportProperty(box2d.b2EPColliderVertexType,"e_concave",box2d.b2EPColliderVertexType.e_concave);goog.exportProperty(box2d.b2EPColliderVertexType,"e_convex",box2d.b2EPColliderVertexType.e_convex);
box2d.b2EPCollider=function(){this.m_polygonB=new box2d.b2TempPolygon;this.m_xf=new box2d.b2Transform;this.m_centroidB=new box2d.b2Vec2;this.m_v0=new box2d.b2Vec2;this.m_v1=new box2d.b2Vec2;this.m_v2=new box2d.b2Vec2;this.m_v3=new box2d.b2Vec2;this.m_normal0=new box2d.b2Vec2;this.m_normal1=new box2d.b2Vec2;this.m_normal2=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2;this.m_type2=this.m_type1=box2d.b2EPColliderVertexType.e_isolated;this.m_lowerLimit=new box2d.b2Vec2;this.m_upperLimit=new box2d.b2Vec2;
this.m_radius=0;this.m_front=!1};goog.exportSymbol("box2d.b2EPCollider",box2d.b2EPCollider);box2d.b2EPCollider.prototype.m_polygonB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_polygonB",box2d.b2EPCollider.prototype.m_polygonB);box2d.b2EPCollider.prototype.m_xf=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_xf",box2d.b2EPCollider.prototype.m_xf);box2d.b2EPCollider.prototype.m_centroidB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_centroidB",box2d.b2EPCollider.prototype.m_centroidB);
box2d.b2EPCollider.prototype.m_v0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v0",box2d.b2EPCollider.prototype.m_v0);box2d.b2EPCollider.prototype.m_v1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v1",box2d.b2EPCollider.prototype.m_v1);box2d.b2EPCollider.prototype.m_v2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v2",box2d.b2EPCollider.prototype.m_v2);box2d.b2EPCollider.prototype.m_v3=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v3",box2d.b2EPCollider.prototype.m_v3);
box2d.b2EPCollider.prototype.m_normal0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal0",box2d.b2EPCollider.prototype.m_normal0);box2d.b2EPCollider.prototype.m_normal1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal1",box2d.b2EPCollider.prototype.m_normal1);box2d.b2EPCollider.prototype.m_normal2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal2",box2d.b2EPCollider.prototype.m_normal2);box2d.b2EPCollider.prototype.m_normal=null;
goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal",box2d.b2EPCollider.prototype.m_normal);box2d.b2EPCollider.prototype.m_type1=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type1",box2d.b2EPCollider.prototype.m_type1);box2d.b2EPCollider.prototype.m_type2=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type2",box2d.b2EPCollider.prototype.m_type2);box2d.b2EPCollider.prototype.m_lowerLimit=null;
goog.exportProperty(box2d.b2EPCollider.prototype,"m_lowerLimit",box2d.b2EPCollider.prototype.m_lowerLimit);box2d.b2EPCollider.prototype.m_upperLimit=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_upperLimit",box2d.b2EPCollider.prototype.m_upperLimit);box2d.b2EPCollider.prototype.m_radius=0;goog.exportProperty(box2d.b2EPCollider.prototype,"m_radius",box2d.b2EPCollider.prototype.m_radius);box2d.b2EPCollider.prototype.m_front=!1;goog.exportProperty(box2d.b2EPCollider.prototype,"m_front",box2d.b2EPCollider.prototype.m_front);
box2d.b2EPCollider.prototype.Collide=function(a,c,b,d,e){box2d.b2MulT_X_X(b,e,this.m_xf);box2d.b2Mul_X_V2(this.m_xf,d.m_centroid,this.m_centroidB);this.m_v0.Copy(c.m_vertex0);this.m_v1.Copy(c.m_vertex1);this.m_v2.Copy(c.m_vertex2);this.m_v3.Copy(c.m_vertex3);b=c.m_hasVertex0;c=c.m_hasVertex3;e=box2d.b2Sub_V2_V2(this.m_v2,this.m_v1,box2d.b2EPCollider.s_edge1);e.Normalize();this.m_normal1.Set(e.y,-e.x);var f=box2d.b2Dot_V2_V2(this.m_normal1,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v1,box2d.b2Vec2.s_t0)),
g=0,h=0,k=!1,l=!1;b&&(g=box2d.b2Sub_V2_V2(this.m_v1,this.m_v0,box2d.b2EPCollider.s_edge0),g.Normalize(),this.m_normal0.Set(g.y,-g.x),k=0<=box2d.b2Cross_V2_V2(g,e),g=box2d.b2Dot_V2_V2(this.m_normal0,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v0,box2d.b2Vec2.s_t0)));c&&(h=box2d.b2Sub_V2_V2(this.m_v3,this.m_v2,box2d.b2EPCollider.s_edge2),h.Normalize(),this.m_normal2.Set(h.y,-h.x),l=0<box2d.b2Cross_V2_V2(e,h),h=box2d.b2Dot_V2_V2(this.m_normal2,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v2,box2d.b2Vec2.s_t0)));
b&&c?k&&l?(this.m_front=0<=g||0<=f||0<=h)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):k?(this.m_front=0<=g||0<=f&&0<=h)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),
this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):l?(this.m_front=0<=h||0<=g&&0<=f)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):(this.m_front=0<=g&&0<=f&&0<=h)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),
this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):b?k?((this.m_front=0<=g||0<=f)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=g&&0<=f)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),
this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):c?l?(this.m_front=0<=f||0<=h)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):((this.m_front=0<=f&&0<=h)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),
this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=f)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1));this.m_polygonB.count=d.m_count;f=0;for(g=d.m_count;f<g;++f)box2d.b2Mul_X_V2(this.m_xf,d.m_vertices[f],this.m_polygonB.vertices[f]),
box2d.b2Mul_R_V2(this.m_xf.q,d.m_normals[f],this.m_polygonB.normals[f]);this.m_radius=2*box2d.b2_polygonRadius;a.pointCount=0;b=this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis);if(!(b.type===box2d.b2EPAxisType.e_unknown||b.separation>this.m_radius||(c=this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis),c.type!==box2d.b2EPAxisType.e_unknown&&c.separation>this.m_radius))){b=c.type===box2d.b2EPAxisType.e_unknown?b:c.separation>.98*b.separation+.001?c:b;e=box2d.b2EPCollider.s_ie;
c=box2d.b2EPCollider.s_rf;if(b.type===box2d.b2EPAxisType.e_edgeA){a.type=box2d.b2ManifoldType.e_faceA;h=0;k=box2d.b2Dot_V2_V2(this.m_normal,this.m_polygonB.normals[0]);f=1;for(g=this.m_polygonB.count;f<g;++f)l=box2d.b2Dot_V2_V2(this.m_normal,this.m_polygonB.normals[f]),l<k&&(k=l,h=f);g=h;f=(g+1)%this.m_polygonB.count;h=e[0];h.v.Copy(this.m_polygonB.vertices[g]);h.id.cf.indexA=0;h.id.cf.indexB=g;h.id.cf.typeA=box2d.b2ContactFeatureType.e_face;h.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;g=e[1];
g.v.Copy(this.m_polygonB.vertices[f]);g.id.cf.indexA=0;g.id.cf.indexB=f;g.id.cf.typeA=box2d.b2ContactFeatureType.e_face;g.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;this.m_front?(c.i1=0,c.i2=1,c.v1.Copy(this.m_v1),c.v2.Copy(this.m_v2),c.normal.Copy(this.m_normal1)):(c.i1=1,c.i2=0,c.v1.Copy(this.m_v2),c.v2.Copy(this.m_v1),c.normal.Copy(this.m_normal1).SelfNeg())}else a.type=box2d.b2ManifoldType.e_faceB,h=e[0],h.v.Copy(this.m_v1),h.id.cf.indexA=0,h.id.cf.indexB=b.index,h.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,
h.id.cf.typeB=box2d.b2ContactFeatureType.e_face,g=e[1],g.v.Copy(this.m_v2),g.id.cf.indexA=0,g.id.cf.indexB=b.index,g.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,g.id.cf.typeB=box2d.b2ContactFeatureType.e_face,c.i1=b.index,c.i2=(c.i1+1)%this.m_polygonB.count,c.v1.Copy(this.m_polygonB.vertices[c.i1]),c.v2.Copy(this.m_polygonB.vertices[c.i2]),c.normal.Copy(this.m_polygonB.normals[c.i1]);c.sideNormal1.Set(c.normal.y,-c.normal.x);c.sideNormal2.Copy(c.sideNormal1).SelfNeg();c.sideOffset1=box2d.b2Dot_V2_V2(c.sideNormal1,
c.v1);c.sideOffset2=box2d.b2Dot_V2_V2(c.sideNormal2,c.v2);f=box2d.b2EPCollider.s_clipPoints1;h=box2d.b2EPCollider.s_clipPoints2;g=0;g=box2d.b2ClipSegmentToLine(f,e,c.sideNormal1,c.sideOffset1,c.i1);if(!(g<box2d.b2_maxManifoldPoints||(g=box2d.b2ClipSegmentToLine(h,f,c.sideNormal2,c.sideOffset2,c.i2),g<box2d.b2_maxManifoldPoints))){b.type===box2d.b2EPAxisType.e_edgeA?(a.localNormal.Copy(c.normal),a.localPoint.Copy(c.v1)):(a.localNormal.Copy(d.m_normals[c.i1]),a.localPoint.Copy(d.m_vertices[c.i1]));
f=d=0;for(g=box2d.b2_maxManifoldPoints;f<g;++f)box2d.b2Dot_V2_V2(c.normal,box2d.b2Sub_V2_V2(h[f].v,c.v1,box2d.b2Vec2.s_t0))<=this.m_radius&&(e=a.points[d],b.type===box2d.b2EPAxisType.e_edgeA?(box2d.b2MulT_X_V2(this.m_xf,h[f].v,e.localPoint),e.id=h[f].id):(e.localPoint.Copy(h[f].v),e.id.cf.typeA=h[f].id.cf.typeB,e.id.cf.typeB=h[f].id.cf.typeA,e.id.cf.indexA=h[f].id.cf.indexB,e.id.cf.indexB=h[f].id.cf.indexA),++d);a.pointCount=d}}};goog.exportProperty(box2d.b2EPCollider.prototype,"Collide",box2d.b2EPCollider.prototype.Collide);
box2d.b2EPCollider.s_edge1=new box2d.b2Vec2;box2d.b2EPCollider.s_edge0=new box2d.b2Vec2;box2d.b2EPCollider.s_edge2=new box2d.b2Vec2;box2d.b2EPCollider.s_ie=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_rf=new box2d.b2ReferenceFace;box2d.b2EPCollider.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_edgeAxis=new box2d.b2EPAxis;box2d.b2EPCollider.s_polygonAxis=new box2d.b2EPAxis;
box2d.b2EPCollider.prototype.ComputeEdgeSeparation=function(a){a.type=box2d.b2EPAxisType.e_edgeA;a.index=this.m_front?0:1;a.separation=box2d.b2_maxFloat;for(var c=0,b=this.m_polygonB.count;c<b;++c){var d=box2d.b2Dot_V2_V2(this.m_normal,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[c],this.m_v1,box2d.b2Vec2.s_t0));d<a.separation&&(a.separation=d)}return a};goog.exportProperty(box2d.b2EPCollider.prototype,"ComputeEdgeSeparation",box2d.b2EPCollider.prototype.ComputeEdgeSeparation);
box2d.b2EPCollider.prototype.ComputePolygonSeparation=function(a){a.type=box2d.b2EPAxisType.e_unknown;a.index=-1;a.separation=-box2d.b2_maxFloat;for(var c=box2d.b2EPCollider.s_perp.Set(-this.m_normal.y,this.m_normal.x),b=0,d=this.m_polygonB.count;b<d;++b){var e=box2d.b2EPCollider.s_n.Copy(this.m_polygonB.normals[b]).SelfNeg(),f=box2d.b2Dot_V2_V2(e,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[b],this.m_v1,box2d.b2Vec2.s_t0)),g=box2d.b2Dot_V2_V2(e,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[b],this.m_v2,
box2d.b2Vec2.s_t0)),f=box2d.b2Min(f,g);if(f>this.m_radius){a.type=box2d.b2EPAxisType.e_edgeB;a.index=b;a.separation=f;break}if(0<=box2d.b2Dot_V2_V2(e,c)){if(box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,this.m_upperLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue}else if(box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,this.m_lowerLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue;f>a.separation&&(a.type=box2d.b2EPAxisType.e_edgeB,a.index=b,a.separation=f)}return a};
goog.exportProperty(box2d.b2EPCollider.prototype,"ComputePolygonSeparation",box2d.b2EPCollider.prototype.ComputePolygonSeparation);box2d.b2EPCollider.s_n=new box2d.b2Vec2;box2d.b2EPCollider.s_perp=new box2d.b2Vec2;box2d.b2CollideEdgeAndPolygon=function(a,c,b,d,e){box2d.b2CollideEdgeAndPolygon.s_collider.Collide(a,c,b,d,e)};goog.exportSymbol("box2d.b2CollideEdgeAndPolygon",box2d.b2CollideEdgeAndPolygon);box2d.b2CollideEdgeAndPolygon.s_collider=new box2d.b2EPCollider;box2d.b2CollidePolygon={};
box2d.b2FindMaxSeparation=function(a,c,b,d,e){var f=c.m_count,g=d.m_count,h=c.m_normals;c=c.m_vertices;d=d.m_vertices;b=box2d.b2MulT_X_X(e,b,box2d.b2FindMaxSeparation.s_xf);e=0;for(var k=-box2d.b2_maxFloat,l=0;l<f;++l){for(var m=box2d.b2Mul_R_V2(b.q,h[l],box2d.b2FindMaxSeparation.s_n),n=box2d.b2Mul_X_V2(b,c[l],box2d.b2FindMaxSeparation.s_v1),p=box2d.b2_maxFloat,q=0;q<g;++q){var r=box2d.b2Dot_V2_V2(m,box2d.b2Sub_V2_V2(d[q],n,box2d.b2Vec2.s_t0));r<p&&(p=r)}p>k&&(k=p,e=l)}a[0]=e;return k};
goog.exportSymbol("box2d.b2FindMaxSeparation",box2d.b2FindMaxSeparation);box2d.b2FindMaxSeparation.s_xf=new box2d.b2Transform;box2d.b2FindMaxSeparation.s_n=new box2d.b2Vec2;box2d.b2FindMaxSeparation.s_v1=new box2d.b2Vec2;
box2d.b2FindIncidentEdge=function(a,c,b,d,e,f){var g=c.m_count,h=c.m_normals,k=e.m_count;c=e.m_vertices;e=e.m_normals;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&d<g);b=box2d.b2MulT_R_V2(f.q,box2d.b2Mul_R_V2(b.q,h[d],box2d.b2Vec2.s_t0),box2d.b2FindIncidentEdge.s_normal1);for(var g=0,h=box2d.b2_maxFloat,l=0;l<k;++l){var m=box2d.b2Dot_V2_V2(b,e[l]);m<h&&(h=m,g=l)}e=g;k=(e+1)%k;b=a[0];box2d.b2Mul_X_V2(f,c[e],b.v);b=b.id.cf;b.indexA=d;b.indexB=e;b.typeA=box2d.b2ContactFeatureType.e_face;b.typeB=box2d.b2ContactFeatureType.e_vertex;
a=a[1];box2d.b2Mul_X_V2(f,c[k],a.v);f=a.id.cf;f.indexA=d;f.indexB=k;f.typeA=box2d.b2ContactFeatureType.e_face;f.typeB=box2d.b2ContactFeatureType.e_vertex};goog.exportSymbol("box2d.b2FindIncidentEdge",box2d.b2FindIncidentEdge);box2d.b2FindIncidentEdge.s_normal1=new box2d.b2Vec2;
box2d.b2CollidePolygons=function(a,c,b,d,e){a.pointCount=0;var f=c.m_radius+d.m_radius,g=box2d.b2CollidePolygons.s_edgeA;g[0]=0;var h=box2d.b2FindMaxSeparation(g,c,b,d,e);if(!(h>f)){var k=box2d.b2CollidePolygons.s_edgeB;k[0]=0;var l=box2d.b2FindMaxSeparation(k,d,e,c,b);if(!(l>f)){var m=0,n=0;l>.98*h+.001?(h=d,d=c,c=e,m=k[0],a.type=box2d.b2ManifoldType.e_faceB,n=1):(h=c,c=b,b=e,m=g[0],a.type=box2d.b2ManifoldType.e_faceA,n=0);g=box2d.b2CollidePolygons.s_incidentEdge;box2d.b2FindIncidentEdge(g,h,c,m,
d,b);e=h.m_vertices;var k=m,h=(m+1)%h.m_count,p=e[k],q=e[h],m=box2d.b2Sub_V2_V2(q,p,box2d.b2CollidePolygons.s_localTangent);m.Normalize();e=box2d.b2Cross_V2_S(m,1,box2d.b2CollidePolygons.s_localNormal);d=box2d.b2Mid_V2_V2(p,q,box2d.b2CollidePolygons.s_planePoint);var l=box2d.b2Mul_R_V2(c.q,m,box2d.b2CollidePolygons.s_tangent),m=box2d.b2Cross_V2_S(l,1,box2d.b2CollidePolygons.s_normal),p=box2d.b2Mul_X_V2(c,p,box2d.b2CollidePolygons.s_v11),r=box2d.b2Mul_X_V2(c,q,box2d.b2CollidePolygons.s_v12);c=box2d.b2Dot_V2_V2(m,
p);var q=-box2d.b2Dot_V2_V2(l,p)+f,r=box2d.b2Dot_V2_V2(l,r)+f,u=box2d.b2CollidePolygons.s_clipPoints1,p=box2d.b2CollidePolygons.s_clipPoints2,t=box2d.b2CollidePolygons.s_ntangent.Copy(l).SelfNeg(),g=box2d.b2ClipSegmentToLine(u,g,t,q,k);if(!(2>g||(g=box2d.b2ClipSegmentToLine(p,u,l,r,h),2>g))){a.localNormal.Copy(e);a.localPoint.Copy(d);for(k=g=0;k<box2d.b2_maxManifoldPoints;++k)e=p[k],box2d.b2Dot_V2_V2(m,e.v)-c<=f&&(h=a.points[g],box2d.b2MulT_X_V2(b,e.v,h.localPoint),h.id.Copy(e.id),n&&(e=h.id.cf,h.id.cf.indexA=
e.indexB,h.id.cf.indexB=e.indexA,h.id.cf.typeA=e.typeB,h.id.cf.typeB=e.typeA),++g);a.pointCount=g}}}};goog.exportSymbol("box2d.b2CollidePolygons",box2d.b2CollidePolygons);box2d.b2CollidePolygons.s_incidentEdge=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_edgeA=box2d.b2MakeNumberArray(1);box2d.b2CollidePolygons.s_edgeB=box2d.b2MakeNumberArray(1);
box2d.b2CollidePolygons.s_localTangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_localNormal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_planePoint=new box2d.b2Vec2;box2d.b2CollidePolygons.s_normal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_tangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_ntangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v11=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v12=new box2d.b2Vec2;box2d.b2TreeNode=function(a){this.m_id=a||0;this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2TreeNode",box2d.b2TreeNode);box2d.b2TreeNode.prototype.m_id=0;goog.exportProperty(box2d.b2TreeNode.prototype,"m_id",box2d.b2TreeNode.prototype.m_id);box2d.b2TreeNode.prototype.aabb=null;goog.exportProperty(box2d.b2TreeNode.prototype,"aabb",box2d.b2TreeNode.prototype.aabb);box2d.b2TreeNode.prototype.userData=null;goog.exportProperty(box2d.b2TreeNode.prototype,"userData",box2d.b2TreeNode.prototype.userData);
box2d.b2TreeNode.prototype.parent=null;goog.exportProperty(box2d.b2TreeNode.prototype,"parent",box2d.b2TreeNode.prototype.parent);box2d.b2TreeNode.prototype.child1=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child1",box2d.b2TreeNode.prototype.child1);box2d.b2TreeNode.prototype.child2=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child2",box2d.b2TreeNode.prototype.child2);box2d.b2TreeNode.prototype.height=0;goog.exportProperty(box2d.b2TreeNode.prototype,"height",box2d.b2TreeNode.prototype.height);
box2d.b2TreeNode.prototype.IsLeaf=function(){return null===this.child1};goog.exportProperty(box2d.b2TreeNode.prototype,"IsLeaf",box2d.b2TreeNode.prototype.IsLeaf);box2d.b2DynamicTree=function(){};goog.exportSymbol("box2d.b2DynamicTree",box2d.b2DynamicTree);box2d.b2DynamicTree.prototype.m_root=null;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_root",box2d.b2DynamicTree.prototype.m_root);box2d.b2DynamicTree.prototype.m_freeList=null;
goog.exportProperty(box2d.b2DynamicTree.prototype,"m_freeList",box2d.b2DynamicTree.prototype.m_freeList);box2d.b2DynamicTree.prototype.m_path=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_path",box2d.b2DynamicTree.prototype.m_path);box2d.b2DynamicTree.prototype.m_insertionCount=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_insertionCount",box2d.b2DynamicTree.prototype.m_insertionCount);box2d.b2DynamicTree.s_stack=new box2d.b2GrowableStack(256);box2d.b2DynamicTree.s_r=new box2d.b2Vec2;
box2d.b2DynamicTree.s_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_abs_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_segmentAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_subInput=new box2d.b2RayCastInput;box2d.b2DynamicTree.s_combinedAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_aabb=new box2d.b2AABB;box2d.b2DynamicTree.prototype.GetUserData=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==a);return a.userData};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetUserData",box2d.b2DynamicTree.prototype.GetUserData);
box2d.b2DynamicTree.prototype.GetFatAABB=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==a);return a.aabb};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetFatAABB",box2d.b2DynamicTree.prototype.GetFatAABB);box2d.b2DynamicTree.prototype.Query=function(a,c){if(null!==this.m_root){var b=box2d.b2DynamicTree.s_stack.Reset();for(b.Push(this.m_root);0<b.GetCount();){var d=b.Pop();if(null!==d&&d.aabb.TestOverlap(c))if(d.IsLeaf()){if(!a(d))break}else b.Push(d.child1),b.Push(d.child2)}}};
goog.exportProperty(box2d.b2DynamicTree.prototype,"Query",box2d.b2DynamicTree.prototype.Query);
box2d.b2DynamicTree.prototype.RayCast=function(a,c){if(null!==this.m_root){var b=c.p1,d=c.p2,e=box2d.b2Sub_V2_V2(d,b,box2d.b2DynamicTree.s_r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<e.LengthSquared());e.Normalize();var e=box2d.b2Cross_S_V2(1,e,box2d.b2DynamicTree.s_v),f=box2d.b2Abs_V2(e,box2d.b2DynamicTree.s_abs_v),g=c.maxFraction,h=box2d.b2DynamicTree.s_segmentAABB,k=b.x+g*(d.x-b.x),l=b.y+g*(d.y-b.y);h.lowerBound.x=box2d.b2Min(b.x,k);h.lowerBound.y=box2d.b2Min(b.y,l);h.upperBound.x=box2d.b2Max(b.x,
k);h.upperBound.y=box2d.b2Max(b.y,l);var m=box2d.b2DynamicTree.s_stack.Reset();for(m.Push(this.m_root);0<m.GetCount();)if(k=m.Pop(),null!==k&&box2d.b2TestOverlapAABB(k.aabb,h)){var l=k.aabb.GetCenter(),n=k.aabb.GetExtents();if(!(0<box2d.b2Abs(box2d.b2Dot_V2_V2(e,box2d.b2Sub_V2_V2(b,l,box2d.b2Vec2.s_t0)))-box2d.b2Dot_V2_V2(f,n)))if(k.IsLeaf()){l=box2d.b2DynamicTree.s_subInput;l.p1.Copy(c.p1);l.p2.Copy(c.p2);l.maxFraction=g;k=a(l,k);if(0===k)break;0<k&&(g=k,k=b.x+g*(d.x-b.x),l=b.y+g*(d.y-b.y),h.lowerBound.x=
box2d.b2Min(b.x,k),h.lowerBound.y=box2d.b2Min(b.y,l),h.upperBound.x=box2d.b2Max(b.x,k),h.upperBound.y=box2d.b2Max(b.y,l))}else m.Push(k.child1),m.Push(k.child2)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RayCast",box2d.b2DynamicTree.prototype.RayCast);box2d.b2DynamicTree.prototype.AllocateNode=function(){if(this.m_freeList){var a=this.m_freeList;this.m_freeList=a.parent;a.parent=null;a.child1=null;a.child2=null;a.height=0;a.userData=null;return a}return new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++)};
goog.exportProperty(box2d.b2DynamicTree.prototype,"AllocateNode",box2d.b2DynamicTree.prototype.AllocateNode);box2d.b2DynamicTree.prototype.s_node_id=0;box2d.b2DynamicTree.prototype.FreeNode=function(a){a.parent=this.m_freeList;a.height=-1;this.m_freeList=a};goog.exportProperty(box2d.b2DynamicTree.prototype,"FreeNode",box2d.b2DynamicTree.prototype.FreeNode);
box2d.b2DynamicTree.prototype.CreateProxy=function(a,c){var b=this.AllocateNode(),d=box2d.b2_aabbExtension,e=box2d.b2_aabbExtension;b.aabb.lowerBound.x=a.lowerBound.x-d;b.aabb.lowerBound.y=a.lowerBound.y-e;b.aabb.upperBound.x=a.upperBound.x+d;b.aabb.upperBound.y=a.upperBound.y+e;b.userData=c;b.height=0;this.InsertLeaf(b);return b};goog.exportProperty(box2d.b2DynamicTree.prototype,"CreateProxy",box2d.b2DynamicTree.prototype.CreateProxy);
box2d.b2DynamicTree.prototype.DestroyProxy=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.IsLeaf());this.RemoveLeaf(a);this.FreeNode(a)};goog.exportProperty(box2d.b2DynamicTree.prototype,"DestroyProxy",box2d.b2DynamicTree.prototype.DestroyProxy);
box2d.b2DynamicTree.prototype.MoveProxy=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.IsLeaf());if(a.aabb.Contains(c))return!1;this.RemoveLeaf(a);var d=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<b.x?b.x:-b.x);b=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<b.y?b.y:-b.y);a.aabb.lowerBound.x=c.lowerBound.x-d;a.aabb.lowerBound.y=c.lowerBound.y-b;a.aabb.upperBound.x=c.upperBound.x+d;a.aabb.upperBound.y=c.upperBound.y+b;this.InsertLeaf(a);return!0};
goog.exportProperty(box2d.b2DynamicTree.prototype,"MoveProxy",box2d.b2DynamicTree.prototype.MoveProxy);
box2d.b2DynamicTree.prototype.InsertLeaf=function(a){++this.m_insertionCount;if(null===this.m_root)this.m_root=a,this.m_root.parent=null;else{var c=a.aabb;c.GetCenter();for(var b=this.m_root,d,e;!b.IsLeaf();){d=b.child1;e=b.child2;var f=b.aabb.GetPerimeter(),g=box2d.b2DynamicTree.s_combinedAABB;g.Combine2(b.aabb,c);var h=g.GetPerimeter(),g=2*h,h=2*(h-f),k=box2d.b2DynamicTree.s_aabb,l,m;d.IsLeaf()?(k.Combine2(c,d.aabb),f=k.GetPerimeter()+h):(k.Combine2(c,d.aabb),l=d.aabb.GetPerimeter(),m=k.GetPerimeter(),
f=m-l+h);e.IsLeaf()?(k.Combine2(c,e.aabb),h=k.GetPerimeter()+h):(k.Combine2(c,e.aabb),l=e.aabb.GetPerimeter(),m=k.GetPerimeter(),h=m-l+h);if(g<f&&g<h)break;b=f<h?d:e}d=b.parent;e=this.AllocateNode();e.parent=d;e.userData=null;e.aabb.Combine2(c,b.aabb);e.height=b.height+1;d?(d.child1===b?d.child1=e:d.child2=e,e.child1=b,e.child2=a,b.parent=e,a.parent=e):(e.child1=b,e.child2=a,b.parent=e,this.m_root=a.parent=e);for(b=a.parent;null!==b;)b=this.Balance(b),d=b.child1,e=b.child2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==
d),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==e),b.height=1+box2d.b2Max(d.height,e.height),b.aabb.Combine2(d.aabb,e.aabb),b=b.parent}};goog.exportProperty(box2d.b2DynamicTree.prototype,"InsertLeaf",box2d.b2DynamicTree.prototype.InsertLeaf);
box2d.b2DynamicTree.prototype.RemoveLeaf=function(a){if(a===this.m_root)this.m_root=null;else{var c=a.parent,b=c.parent;a=c.child1===a?c.child2:c.child1;if(b)for(b.child1===c?b.child1=a:b.child2=a,a.parent=b,this.FreeNode(c),c=b;c;)c=this.Balance(c),b=c.child1,a=c.child2,c.aabb.Combine2(b.aabb,a.aabb),c.height=1+box2d.b2Max(b.height,a.height),c=c.parent;else this.m_root=a,a.parent=null,this.FreeNode(c)}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RemoveLeaf",box2d.b2DynamicTree.prototype.RemoveLeaf);
box2d.b2DynamicTree.prototype.Balance=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==a);if(a.IsLeaf()||2>a.height)return a;var c=a.child1,b=a.child2,d=b.height-c.height;if(1<d){var d=b.child1,e=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!==b.parent?b.parent.child1===a?b.parent.child1=b:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.parent.child2===a),b.parent.child2=b):this.m_root=b;d.height>e.height?(b.child2=d,a.child2=e,e.parent=a,a.aabb.Combine2(c.aabb,e.aabb),b.aabb.Combine2(a.aabb,
d.aabb),a.height=1+box2d.b2Max(c.height,e.height),b.height=1+box2d.b2Max(a.height,d.height)):(b.child2=e,a.child2=d,d.parent=a,a.aabb.Combine2(c.aabb,d.aabb),b.aabb.Combine2(a.aabb,e.aabb),a.height=1+box2d.b2Max(c.height,d.height),b.height=1+box2d.b2Max(a.height,e.height));return b}return-1>d?(d=c.child1,e=c.child2,c.child1=a,c.parent=a.parent,a.parent=c,null!==c.parent?c.parent.child1===a?c.parent.child1=c:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(c.parent.child2===a),c.parent.child2=c):this.m_root=
c,d.height>e.height?(c.child2=d,a.child1=e,e.parent=a,a.aabb.Combine2(b.aabb,e.aabb),c.aabb.Combine2(a.aabb,d.aabb),a.height=1+box2d.b2Max(b.height,e.height),c.height=1+box2d.b2Max(a.height,d.height)):(c.child2=e,a.child1=d,d.parent=a,a.aabb.Combine2(b.aabb,d.aabb),c.aabb.Combine2(a.aabb,e.aabb),a.height=1+box2d.b2Max(b.height,d.height),c.height=1+box2d.b2Max(a.height,e.height)),c):a};goog.exportProperty(box2d.b2DynamicTree.prototype,"Balance",box2d.b2DynamicTree.prototype.Balance);
box2d.b2DynamicTree.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetHeight",box2d.b2DynamicTree.prototype.GetHeight);box2d.b2DynamicTree.prototype.GetAreaRatio=function(){if(null===this.m_root)return 0;var a=this.m_root.aabb.GetPerimeter(),c=function(a){if(null===a||a.IsLeaf())return 0;var d=a.aabb.GetPerimeter(),d=d+c(a.child1);return d+=c(a.child2)};return c(this.m_root)/a};
goog.exportProperty(box2d.b2DynamicTree.prototype,"GetAreaRatio",box2d.b2DynamicTree.prototype.GetAreaRatio);box2d.b2DynamicTree.prototype.ComputeHeightNode=function(a){if(a.IsLeaf())return 0;var c=this.ComputeHeightNode(a.child1);a=this.ComputeHeightNode(a.child2);return 1+box2d.b2Max(c,a)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeightNode",box2d.b2DynamicTree.prototype.ComputeHeightNode);box2d.b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)};
goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeight",box2d.b2DynamicTree.prototype.ComputeHeight);
box2d.b2DynamicTree.prototype.ValidateStructure=function(a){if(null!==a){a===this.m_root&&box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===a.parent);var c=a.child1,b=a.child2;a.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===c),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===b),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===a.height)):(box2d.ENABLE_ASSERTS&&box2d.b2Assert(c.parent===a),box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.parent===a),this.ValidateStructure(c),this.ValidateStructure(b))}};
goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateStructure",box2d.b2DynamicTree.prototype.ValidateStructure);
box2d.b2DynamicTree.prototype.ValidateMetrics=function(a){if(null!==a){var c=a.child1,b=a.child2;if(a.IsLeaf())box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===c),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===b),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===a.height);else{var d;d=1+box2d.b2Max(c.height,b.height);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.height===d);d=box2d.b2DynamicTree.s_aabb;d.Combine2(c.aabb,b.aabb);box2d.ENABLE_ASSERTS&&box2d.b2Assert(d.lowerBound===a.aabb.lowerBound);box2d.ENABLE_ASSERTS&&
box2d.b2Assert(d.upperBound===a.aabb.upperBound);this.ValidateMetrics(c);this.ValidateMetrics(b)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateMetrics",box2d.b2DynamicTree.prototype.ValidateMetrics);box2d.b2DynamicTree.prototype.Validate=function(){this.ValidateStructure(this.m_root);this.ValidateMetrics(this.m_root);for(var a=0,c=this.m_freeList;null!==c;)c=c.parent,++a;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.GetHeight()===this.ComputeHeight())};
goog.exportProperty(box2d.b2DynamicTree.prototype,"Validate",box2d.b2DynamicTree.prototype.Validate);box2d.b2DynamicTree.prototype.GetMaxBalance=function(){var a;a=this.m_root;null===a?a=0:1>=a.height?a=0:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!a.IsLeaf()),a=box2d.b2Abs(a.child2.height-a.child1.height),a=box2d.b2Max(0,a));return a};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetMaxBalance",box2d.b2DynamicTree.prototype.GetMaxBalance);box2d.b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()};
goog.exportProperty(box2d.b2DynamicTree.prototype,"RebuildBottomUp",box2d.b2DynamicTree.prototype.RebuildBottomUp);box2d.b2DynamicTree.prototype.ShiftOrigin=function(a){var c=function(a,d){if(null!==a&&!(1>=a.height)){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!a.IsLeaf());var e=a.child2;c(a.child1,d);c(e,d);a.aabb.lowerBound.SelfSub(d);a.aabb.upperBound.SelfSub(d)}};c(this.m_root,a)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ShiftOrigin",box2d.b2DynamicTree.prototype.ShiftOrigin);box2d.b2Pair=function(){};goog.exportSymbol("box2d.b2Pair",box2d.b2Pair);box2d.b2Pair.prototype.proxyA=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyA",box2d.b2Pair.prototype.proxyA);box2d.b2Pair.prototype.proxyB=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyB",box2d.b2Pair.prototype.proxyB);box2d.b2BroadPhase=function(){this.m_tree=new box2d.b2DynamicTree;this.m_moveBuffer=[];this.m_pairBuffer=[]};goog.exportSymbol("box2d.b2BroadPhase",box2d.b2BroadPhase);
box2d.b2BroadPhase.prototype.m_tree=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_tree",box2d.b2BroadPhase.prototype.m_tree);box2d.b2BroadPhase.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_proxyCount",box2d.b2BroadPhase.prototype.m_proxyCount);box2d.b2BroadPhase.prototype.m_moveCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveCount",box2d.b2BroadPhase.prototype.m_moveCount);box2d.b2BroadPhase.prototype.m_moveBuffer=null;
goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveBuffer",box2d.b2BroadPhase.prototype.m_moveBuffer);box2d.b2BroadPhase.prototype.m_pairCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairCount",box2d.b2BroadPhase.prototype.m_pairCount);box2d.b2BroadPhase.prototype.m_pairBuffer=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairBuffer",box2d.b2BroadPhase.prototype.m_pairBuffer);
box2d.b2BroadPhase.prototype.CreateProxy=function(a,c){var b=this.m_tree.CreateProxy(a,c);++this.m_proxyCount;this.BufferMove(b);return b};goog.exportProperty(box2d.b2BroadPhase.prototype,"CreateProxy",box2d.b2BroadPhase.prototype.CreateProxy);box2d.b2BroadPhase.prototype.DestroyProxy=function(a){this.UnBufferMove(a);--this.m_proxyCount;this.m_tree.DestroyProxy(a)};goog.exportProperty(box2d.b2BroadPhase.prototype,"DestroyProxy",box2d.b2BroadPhase.prototype.DestroyProxy);
box2d.b2BroadPhase.prototype.MoveProxy=function(a,c,b){this.m_tree.MoveProxy(a,c,b)&&this.BufferMove(a)};goog.exportProperty(box2d.b2BroadPhase.prototype,"MoveProxy",box2d.b2BroadPhase.prototype.MoveProxy);box2d.b2BroadPhase.prototype.TouchProxy=function(a){this.BufferMove(a)};goog.exportProperty(box2d.b2BroadPhase.prototype,"TouchProxy",box2d.b2BroadPhase.prototype.TouchProxy);box2d.b2BroadPhase.prototype.GetFatAABB=function(a){return this.m_tree.GetFatAABB(a)};
goog.exportProperty(box2d.b2BroadPhase.prototype,"GetFatAABB",box2d.b2BroadPhase.prototype.GetFatAABB);box2d.b2BroadPhase.prototype.GetUserData=function(a){return this.m_tree.GetUserData(a)};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetUserData",box2d.b2BroadPhase.prototype.GetUserData);box2d.b2BroadPhase.prototype.TestOverlap=function(a,c){var b=this.m_tree.GetFatAABB(a),d=this.m_tree.GetFatAABB(c);return box2d.b2TestOverlapAABB(b,d)};
goog.exportProperty(box2d.b2BroadPhase.prototype,"TestOverlap",box2d.b2BroadPhase.prototype.TestOverlap);box2d.b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetProxyCount",box2d.b2BroadPhase.prototype.GetProxyCount);box2d.b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeHeight",box2d.b2BroadPhase.prototype.GetTreeHeight);
box2d.b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeBalance",box2d.b2BroadPhase.prototype.GetTreeBalance);box2d.b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeQuality",box2d.b2BroadPhase.prototype.GetTreeQuality);box2d.b2BroadPhase.prototype.ShiftOrigin=function(a){this.m_tree.ShiftOrigin(a)};
goog.exportProperty(box2d.b2BroadPhase.prototype,"ShiftOrigin",box2d.b2BroadPhase.prototype.ShiftOrigin);
box2d.b2BroadPhase.prototype.UpdatePairs=function(a){for(var c=this.m_pairCount=0;c<this.m_moveCount;++c){var b=this.m_moveBuffer[c];if(null!==b){var d=this,e=this.m_tree.GetFatAABB(b);this.m_tree.Query(function(a){if(a.m_id===b.m_id)return!0;d.m_pairCount===d.m_pairBuffer.length&&(d.m_pairBuffer[d.m_pairCount]=new box2d.b2Pair);var c=d.m_pairBuffer[d.m_pairCount];a.m_id<b.m_id?(c.proxyA=a,c.proxyB=b):(c.proxyA=b,c.proxyB=a);++d.m_pairCount;return!0},e)}}this.m_moveCount=0;this.m_pairBuffer.length=
this.m_pairCount;this.m_pairBuffer.sort(box2d.b2PairLessThan);for(c=0;c<this.m_pairCount;){var e=this.m_pairBuffer[c],f=this.m_tree.GetUserData(e.proxyA),g=this.m_tree.GetUserData(e.proxyB);a.AddPair(f,g);for(++c;c<this.m_pairCount;){f=this.m_pairBuffer[c];if(f.proxyA.m_id!==e.proxyA.m_id||f.proxyB.m_id!==e.proxyB.m_id)break;++c}}};goog.exportProperty(box2d.b2BroadPhase.prototype,"UpdatePairs",box2d.b2BroadPhase.prototype.UpdatePairs);
box2d.b2BroadPhase.prototype.Query=function(a,c){this.m_tree.Query(a,c)};goog.exportProperty(box2d.b2BroadPhase.prototype,"Query",box2d.b2BroadPhase.prototype.Query);box2d.b2BroadPhase.prototype.RayCast=function(a,c){this.m_tree.RayCast(a,c)};goog.exportProperty(box2d.b2BroadPhase.prototype,"RayCast",box2d.b2BroadPhase.prototype.RayCast);box2d.b2BroadPhase.prototype.BufferMove=function(a){this.m_moveBuffer[this.m_moveCount]=a;++this.m_moveCount};
goog.exportProperty(box2d.b2BroadPhase.prototype,"BufferMove",box2d.b2BroadPhase.prototype.BufferMove);box2d.b2BroadPhase.prototype.UnBufferMove=function(a){a=this.m_moveBuffer.indexOf(a);this.m_moveBuffer[a]=null};goog.exportProperty(box2d.b2BroadPhase.prototype,"UnBufferMove",box2d.b2BroadPhase.prototype.UnBufferMove);box2d.b2PairLessThan=function(a,c){return a.proxyA.m_id===c.proxyA.m_id?a.proxyB.m_id-c.proxyB.m_id:a.proxyA.m_id-c.proxyA.m_id};box2d.b2MassData=function(){this.center=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2MassData",box2d.b2MassData);box2d.b2MassData.prototype.mass=0;goog.exportProperty(box2d.b2MassData.prototype,"mass",box2d.b2MassData.prototype.mass);box2d.b2MassData.prototype.center=null;goog.exportProperty(box2d.b2MassData.prototype,"center",box2d.b2MassData.prototype.center);box2d.b2MassData.prototype.I=0;goog.exportProperty(box2d.b2MassData.prototype,"I",box2d.b2MassData.prototype.I);
box2d.b2ShapeType={e_unknown:-1,e_circleShape:0,e_edgeShape:1,e_polygonShape:2,e_chainShape:3,e_shapeTypeCount:4};goog.exportSymbol("box2d.b2ShapeType",box2d.b2ShapeType);goog.exportProperty(box2d.b2ShapeType,"e_unknown",box2d.b2ShapeType.e_unknown);goog.exportProperty(box2d.b2ShapeType,"e_circleShape",box2d.b2ShapeType.e_circleShape);goog.exportProperty(box2d.b2ShapeType,"e_edgeShape",box2d.b2ShapeType.e_edgeShape);goog.exportProperty(box2d.b2ShapeType,"e_polygonShape",box2d.b2ShapeType.e_polygonShape);
goog.exportProperty(box2d.b2ShapeType,"e_chainShape",box2d.b2ShapeType.e_chainShape);goog.exportProperty(box2d.b2ShapeType,"e_shapeTypeCount",box2d.b2ShapeType.e_shapeTypeCount);box2d.b2Shape=function(a,c){this.m_type=a;this.m_radius=c};goog.exportSymbol("box2d.b2Shape",box2d.b2Shape);box2d.b2Shape.prototype.m_type=box2d.b2ShapeType.e_unknown;goog.exportProperty(box2d.b2Shape.prototype,"m_type",box2d.b2Shape.prototype.m_type);box2d.b2Shape.prototype.m_radius=0;
goog.exportProperty(box2d.b2Shape.prototype,"m_radius",box2d.b2Shape.prototype.m_radius);box2d.b2Shape.prototype.Clone=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return null};goog.exportProperty(box2d.b2Shape.prototype,"Clone",box2d.b2Shape.prototype.Clone);box2d.b2Shape.prototype.Copy=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===a.m_type);this.m_radius=a.m_radius;return this};goog.exportProperty(box2d.b2Shape.prototype,"Copy",box2d.b2Shape.prototype.Copy);
box2d.b2Shape.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Shape.prototype,"GetType",box2d.b2Shape.prototype.GetType);box2d.b2Shape.prototype.GetChildCount=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"GetChildCount",box2d.b2Shape.prototype.GetChildCount);box2d.b2Shape.prototype.TestPoint=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return!1};
goog.exportProperty(box2d.b2Shape.prototype,"TestPoint",box2d.b2Shape.prototype.TestPoint);box2d.b2Shape.prototype.ComputeDistance=function(a,c,b,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"ComputeDistance",box2d.b2Shape.prototype.ComputeDistance);box2d.b2Shape.prototype.RayCast=function(a,c,b,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return!1};goog.exportProperty(box2d.b2Shape.prototype,"RayCast",box2d.b2Shape.prototype.RayCast);
box2d.b2Shape.prototype.ComputeAABB=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeAABB",box2d.b2Shape.prototype.ComputeAABB);box2d.b2Shape.prototype.ComputeMass=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeMass",box2d.b2Shape.prototype.ComputeMass);
box2d.b2Shape.prototype.SetupDistanceProxy=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};box2d.b2Shape.prototype.ComputeSubmergedArea=function(a,c,b,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"ComputeSubmergedArea",box2d.b2Shape.prototype.ComputeSubmergedArea);box2d.b2Shape.prototype.Dump=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};
goog.exportProperty(box2d.b2Shape.prototype,"Dump",box2d.b2Shape.prototype.Dump);box2d.b2CircleShape=function(a){box2d.b2Shape.call(this,box2d.b2ShapeType.e_circleShape,a||0);this.m_p=new box2d.b2Vec2};goog.inherits(box2d.b2CircleShape,box2d.b2Shape);goog.exportSymbol("box2d.b2CircleShape",box2d.b2CircleShape);box2d.b2CircleShape.prototype.m_p=null;goog.exportProperty(box2d.b2CircleShape.prototype,"m_p",box2d.b2CircleShape.prototype.m_p);box2d.b2CircleShape.prototype.Clone=function(){return(new box2d.b2CircleShape).Copy(this)};
goog.exportProperty(box2d.b2CircleShape.prototype,"Clone",box2d.b2CircleShape.prototype.Clone);box2d.b2CircleShape.prototype.Copy=function(a){box2d.b2Shape.prototype.Copy.call(this,a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2CircleShape);this.m_p.Copy(a.m_p);return this};goog.exportProperty(box2d.b2CircleShape.prototype,"Copy",box2d.b2CircleShape.prototype.Copy);box2d.b2CircleShape.prototype.GetChildCount=function(){return 1};
goog.exportProperty(box2d.b2CircleShape.prototype,"GetChildCount",box2d.b2CircleShape.prototype.GetChildCount);box2d.b2CircleShape.prototype.TestPoint=function(a,c){var b=box2d.b2Mul_X_V2(a,this.m_p,box2d.b2CircleShape.prototype.TestPoint.s_center),b=box2d.b2Sub_V2_V2(c,b,box2d.b2CircleShape.prototype.TestPoint.s_d);return box2d.b2Dot_V2_V2(b,b)<=box2d.b2Sq(this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"TestPoint",box2d.b2CircleShape.prototype.TestPoint);
box2d.b2CircleShape.prototype.TestPoint.s_center=new box2d.b2Vec2;box2d.b2CircleShape.prototype.TestPoint.s_d=new box2d.b2Vec2;box2d.b2CircleShape.prototype.ComputeDistance=function(a,c,b,d){a=box2d.b2Mul_X_V2(a,this.m_p,box2d.b2CircleShape.prototype.ComputeDistance.s_center);box2d.b2Sub_V2_V2(c,a,b);return b.Normalize()-this.m_radius};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeDistance",box2d.b2CircleShape.prototype.ComputeDistance);
box2d.b2CircleShape.prototype.ComputeDistance.s_center=new box2d.b2Vec2;
box2d.b2CircleShape.prototype.RayCast=function(a,c,b,d){b=box2d.b2Mul_X_V2(b,this.m_p,box2d.b2CircleShape.prototype.RayCast.s_position);b=box2d.b2Sub_V2_V2(c.p1,b,box2d.b2CircleShape.prototype.RayCast.s_s);var e=box2d.b2Dot_V2_V2(b,b)-box2d.b2Sq(this.m_radius);d=box2d.b2Sub_V2_V2(c.p2,c.p1,box2d.b2CircleShape.prototype.RayCast.s_r);var f=box2d.b2Dot_V2_V2(b,d),g=box2d.b2Dot_V2_V2(d,d),e=f*f-g*e;if(0>e||g<box2d.b2_epsilon)return!1;f=-(f+box2d.b2Sqrt(e));return 0<=f&&f<=c.maxFraction*g?(f/=g,a.fraction=
f,box2d.b2AddMul_V2_S_V2(b,f,d,a.normal).SelfNormalize(),!0):!1};goog.exportProperty(box2d.b2CircleShape.prototype,"RayCast",box2d.b2CircleShape.prototype.RayCast);box2d.b2CircleShape.prototype.RayCast.s_position=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_s=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_r=new box2d.b2Vec2;
box2d.b2CircleShape.prototype.ComputeAABB=function(a,c,b){c=box2d.b2Mul_X_V2(c,this.m_p,box2d.b2CircleShape.prototype.ComputeAABB.s_p);a.lowerBound.Set(c.x-this.m_radius,c.y-this.m_radius);a.upperBound.Set(c.x+this.m_radius,c.y+this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeAABB",box2d.b2CircleShape.prototype.ComputeAABB);box2d.b2CircleShape.prototype.ComputeAABB.s_p=new box2d.b2Vec2;
box2d.b2CircleShape.prototype.ComputeMass=function(a,c){var b=box2d.b2Sq(this.m_radius);a.mass=c*box2d.b2_pi*b;a.center.Copy(this.m_p);a.I=a.mass*(.5*b+box2d.b2Dot_V2_V2(this.m_p,this.m_p))};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeMass",box2d.b2CircleShape.prototype.ComputeMass);box2d.b2CircleShape.prototype.SetupDistanceProxy=function(a,c){a.m_vertices=a.m_buffer;a.m_vertices[0].Copy(this.m_p);a.m_count=1;a.m_radius=this.m_radius};
box2d.b2CircleShape.prototype.ComputeSubmergedArea=function(a,c,b,d){b=box2d.b2Mul_X_V2(b,this.m_p,new box2d.b2Vec2);var e=-(box2d.b2Dot_V2_V2(a,b)-c);if(e<-this.m_radius+box2d.b2_epsilon)return 0;if(e>this.m_radius)return d.Copy(b),box2d.b2_pi*this.m_radius*this.m_radius;c=this.m_radius*this.m_radius;var f=e*e,e=c*(box2d.b2Asin(e/this.m_radius)+box2d.b2_pi/2)+e*box2d.b2Sqrt(c-f);c=-2/3*box2d.b2Pow(c-f,1.5)/e;d.x=b.x+a.x*c;d.y=b.y+a.y*c;return e};
goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeSubmergedArea",box2d.b2CircleShape.prototype.ComputeSubmergedArea);box2d.b2CircleShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)};goog.exportProperty(box2d.b2CircleShape.prototype,"Dump",box2d.b2CircleShape.prototype.Dump);box2d.b2EdgeShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_edgeShape,box2d.b2_polygonRadius);this.m_vertex1=new box2d.b2Vec2;this.m_vertex2=new box2d.b2Vec2;this.m_vertex0=new box2d.b2Vec2;this.m_vertex3=new box2d.b2Vec2};goog.inherits(box2d.b2EdgeShape,box2d.b2Shape);goog.exportSymbol("box2d.b2EdgeShape",box2d.b2EdgeShape);box2d.b2EdgeShape.prototype.m_vertex1=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex1",box2d.b2EdgeShape.prototype.m_vertex1);
box2d.b2EdgeShape.prototype.m_vertex2=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex2",box2d.b2EdgeShape.prototype.m_vertex2);box2d.b2EdgeShape.prototype.m_vertex0=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex0",box2d.b2EdgeShape.prototype.m_vertex0);box2d.b2EdgeShape.prototype.m_vertex3=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex3",box2d.b2EdgeShape.prototype.m_vertex3);box2d.b2EdgeShape.prototype.m_hasVertex0=!1;
goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex0",box2d.b2EdgeShape.prototype.m_hasVertex0);box2d.b2EdgeShape.prototype.m_hasVertex3=!1;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex3",box2d.b2EdgeShape.prototype.m_hasVertex3);box2d.b2EdgeShape.prototype.Set=function(a,c){this.m_vertex1.Copy(a);this.m_vertex2.Copy(c);this.m_hasVertex3=this.m_hasVertex0=!1;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Set",box2d.b2EdgeShape.prototype.Set);
box2d.b2EdgeShape.prototype.SetAsEdge=box2d.b2EdgeShape.prototype.Set;box2d.b2EdgeShape.prototype.Clone=function(){return(new box2d.b2EdgeShape).Copy(this)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Clone",box2d.b2EdgeShape.prototype.Clone);
box2d.b2EdgeShape.prototype.Copy=function(a){box2d.b2Shape.prototype.Copy.call(this,a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2EdgeShape);this.m_vertex1.Copy(a.m_vertex1);this.m_vertex2.Copy(a.m_vertex2);this.m_vertex0.Copy(a.m_vertex0);this.m_vertex3.Copy(a.m_vertex3);this.m_hasVertex0=a.m_hasVertex0;this.m_hasVertex3=a.m_hasVertex3;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Copy",box2d.b2EdgeShape.prototype.Copy);box2d.b2EdgeShape.prototype.GetChildCount=function(){return 1};
goog.exportProperty(box2d.b2EdgeShape.prototype,"GetChildCount",box2d.b2EdgeShape.prototype.GetChildCount);box2d.b2EdgeShape.prototype.TestPoint=function(a,c){return!1};goog.exportProperty(box2d.b2EdgeShape.prototype,"TestPoint",box2d.b2EdgeShape.prototype.TestPoint);
box2d.b2EdgeShape.prototype.ComputeDistance=function(a,c,b,d){var e=box2d.b2Mul_X_V2(a,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeDistance.s_v1);a=box2d.b2Mul_X_V2(a,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeDistance.s_v2);d=box2d.b2Sub_V2_V2(c,e,box2d.b2EdgeShape.prototype.ComputeDistance.s_d);var e=box2d.b2Sub_V2_V2(a,e,box2d.b2EdgeShape.prototype.ComputeDistance.s_s),f=box2d.b2Dot_V2_V2(d,e);if(0<f){var g=box2d.b2Dot_V2_V2(e,e);f>g?box2d.b2Sub_V2_V2(c,a,d):d.SelfMulSub(f/g,e)}b.Copy(d);
return b.Normalize()};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeDistance",box2d.b2EdgeShape.prototype.ComputeDistance);box2d.b2EdgeShape.prototype.ComputeDistance.s_v1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeDistance.s_v2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeDistance.s_d=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeDistance.s_s=new box2d.b2Vec2;
box2d.b2EdgeShape.prototype.RayCast=function(a,c,b,d){var e=box2d.b2MulT_X_V2(b,c.p1,box2d.b2EdgeShape.prototype.RayCast.s_p1);d=box2d.b2MulT_X_V2(b,c.p2,box2d.b2EdgeShape.prototype.RayCast.s_p2);var f=box2d.b2Sub_V2_V2(d,e,box2d.b2EdgeShape.prototype.RayCast.s_d);d=this.m_vertex1;var g=this.m_vertex2,h=box2d.b2Sub_V2_V2(g,d,box2d.b2EdgeShape.prototype.RayCast.s_e),k=a.normal.Set(h.y,-h.x).SelfNormalize(),h=box2d.b2Dot_V2_V2(k,box2d.b2Sub_V2_V2(d,e,box2d.b2Vec2.s_t0)),k=box2d.b2Dot_V2_V2(k,f);if(0===
k)return!1;k=h/k;if(0>k||c.maxFraction<k)return!1;c=box2d.b2AddMul_V2_S_V2(e,k,f,box2d.b2EdgeShape.prototype.RayCast.s_q);e=box2d.b2Sub_V2_V2(g,d,box2d.b2EdgeShape.prototype.RayCast.s_r);g=box2d.b2Dot_V2_V2(e,e);if(0===g)return!1;d=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(c,d,box2d.b2Vec2.s_t0),e)/g;if(0>d||1<d)return!1;a.fraction=k;box2d.b2Mul_R_V2(b.q,a.normal,a.normal);0<h&&a.normal.SelfNeg();return!0};goog.exportProperty(box2d.b2EdgeShape.prototype,"RayCast",box2d.b2EdgeShape.prototype.RayCast);
box2d.b2EdgeShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_d=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_e=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_q=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_r=new box2d.b2Vec2;
box2d.b2EdgeShape.prototype.ComputeAABB=function(a,c,b){b=box2d.b2Mul_X_V2(c,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeAABB.s_v1);c=box2d.b2Mul_X_V2(c,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2);box2d.b2Min_V2_V2(b,c,a.lowerBound);box2d.b2Max_V2_V2(b,c,a.upperBound);c=this.m_radius;a.lowerBound.SelfSubXY(c,c);a.upperBound.SelfAddXY(c,c)};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeAABB",box2d.b2EdgeShape.prototype.ComputeAABB);
box2d.b2EdgeShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeMass=function(a,c){a.mass=0;box2d.b2Mid_V2_V2(this.m_vertex1,this.m_vertex2,a.center);a.I=0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeMass",box2d.b2EdgeShape.prototype.ComputeMass);
box2d.b2EdgeShape.prototype.SetupDistanceProxy=function(a,c){a.m_vertices=a.m_buffer;a.m_vertices[0].Copy(this.m_vertex1);a.m_vertices[1].Copy(this.m_vertex2);a.m_count=2;a.m_radius=this.m_radius};box2d.b2EdgeShape.prototype.ComputeSubmergedArea=function(a,c,b,d){d.SetZero();return 0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeSubmergedArea",box2d.b2EdgeShape.prototype.ComputeSubmergedArea);
box2d.b2EdgeShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y);box2d.b2Log("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y);box2d.b2Log("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y);box2d.b2Log("    shape.m_vertex3.Set(%.15f, %.15f);\n",
this.m_vertex3.x,this.m_vertex3.y);box2d.b2Log("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0);box2d.b2Log("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Dump",box2d.b2EdgeShape.prototype.Dump);box2d.b2ChainShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_chainShape,box2d.b2_polygonRadius);this.m_prevVertex=new box2d.b2Vec2;this.m_nextVertex=new box2d.b2Vec2};goog.inherits(box2d.b2ChainShape,box2d.b2Shape);goog.exportSymbol("box2d.b2ChainShape",box2d.b2ChainShape);box2d.b2ChainShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_vertices",box2d.b2ChainShape.prototype.m_vertices);box2d.b2ChainShape.prototype.m_count=0;
goog.exportProperty(box2d.b2ChainShape.prototype,"m_count",box2d.b2ChainShape.prototype.m_count);box2d.b2ChainShape.prototype.m_prevVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_prevVertex",box2d.b2ChainShape.prototype.m_prevVertex);box2d.b2ChainShape.prototype.m_nextVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_nextVertex",box2d.b2ChainShape.prototype.m_nextVertex);box2d.b2ChainShape.prototype.m_hasPrevVertex=!1;
goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasPrevVertex",box2d.b2ChainShape.prototype.m_hasPrevVertex);box2d.b2ChainShape.prototype.m_hasNextVertex=!1;goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasNextVertex",box2d.b2ChainShape.prototype.m_hasNextVertex);box2d.b2ChainShape.prototype.Clear=function(){this.m_vertices=null;this.m_count=0};goog.exportProperty(box2d.b2ChainShape.prototype,"Clear",box2d.b2ChainShape.prototype.Clear);
box2d.b2ChainShape.prototype.CreateLoop=function(a,c){c=c||a.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=c);if(box2d.ENABLE_ASSERTS)for(var b=1;b<c;++b)box2d.b2Assert(box2d.b2DistanceSquared(a[b-1],a[b])>box2d.b2_linearSlop*box2d.b2_linearSlop);this.m_count=c+1;this.m_vertices=box2d.b2Vec2.MakeArray(this.m_count);for(b=0;b<c;++b)this.m_vertices[b].Copy(a[b]);this.m_vertices[c].Copy(this.m_vertices[0]);this.m_prevVertex.Copy(this.m_vertices[this.m_count-
2]);this.m_nextVertex.Copy(this.m_vertices[1]);this.m_hasNextVertex=this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateLoop",box2d.b2ChainShape.prototype.CreateLoop);
box2d.b2ChainShape.prototype.CreateChain=function(a,c){c=c||a.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(2<=c);if(box2d.ENABLE_ASSERTS)for(var b=1;b<c;++b)box2d.b2Assert(box2d.b2DistanceSquared(a[b-1],a[b])>box2d.b2_linearSlop*box2d.b2_linearSlop);this.m_count=c;this.m_vertices=box2d.b2Vec2.MakeArray(c);for(b=0;b<c;++b)this.m_vertices[b].Copy(a[b]);this.m_hasNextVertex=this.m_hasPrevVertex=!1;this.m_prevVertex.SetZero();
this.m_nextVertex.SetZero();return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateChain",box2d.b2ChainShape.prototype.CreateChain);box2d.b2ChainShape.prototype.SetPrevVertex=function(a){this.m_prevVertex.Copy(a);this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"SetPrevVertex",box2d.b2ChainShape.prototype.SetPrevVertex);box2d.b2ChainShape.prototype.SetNextVertex=function(a){this.m_nextVertex.Copy(a);this.m_hasNextVertex=!0;return this};
goog.exportProperty(box2d.b2ChainShape.prototype,"SetNextVertex",box2d.b2ChainShape.prototype.SetNextVertex);box2d.b2ChainShape.prototype.Clone=function(){return(new box2d.b2ChainShape).Copy(this)};goog.exportProperty(box2d.b2ChainShape.prototype,"Clone",box2d.b2ChainShape.prototype.Clone);
box2d.b2ChainShape.prototype.Copy=function(a){box2d.b2Shape.prototype.Copy.call(this,a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2ChainShape);this.CreateChain(a.m_vertices,a.m_count);this.m_prevVertex.Copy(a.m_prevVertex);this.m_nextVertex.Copy(a.m_nextVertex);this.m_hasPrevVertex=a.m_hasPrevVertex;this.m_hasNextVertex=a.m_hasNextVertex;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"Copy",box2d.b2ChainShape.prototype.Copy);
box2d.b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildCount",box2d.b2ChainShape.prototype.GetChildCount);
box2d.b2ChainShape.prototype.GetChildEdge=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=c&&c<this.m_count-1);a.m_type=box2d.b2ShapeType.e_edgeShape;a.m_radius=this.m_radius;a.m_vertex1.Copy(this.m_vertices[c]);a.m_vertex2.Copy(this.m_vertices[c+1]);0<c?(a.m_vertex0.Copy(this.m_vertices[c-1]),a.m_hasVertex0=!0):(a.m_vertex0.Copy(this.m_prevVertex),a.m_hasVertex0=this.m_hasPrevVertex);c<this.m_count-2?(a.m_vertex3.Copy(this.m_vertices[c+2]),a.m_hasVertex3=!0):(a.m_vertex3.Copy(this.m_nextVertex),
a.m_hasVertex3=this.m_hasNextVertex)};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildEdge",box2d.b2ChainShape.prototype.GetChildEdge);box2d.b2ChainShape.prototype.TestPoint=function(a,c){return!1};goog.exportProperty(box2d.b2ChainShape.prototype,"TestPoint",box2d.b2ChainShape.prototype.TestPoint);box2d.b2ChainShape.prototype.ComputeDistance=function(a,c,b,d){var e=box2d.b2ChainShape.prototype.ComputeDistance.s_edgeShape;this.GetChildEdge(e,d);return e.ComputeDistance(a,c,b,0)};
goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeDistance",box2d.b2ChainShape.prototype.ComputeDistance);box2d.b2ChainShape.prototype.ComputeDistance.s_edgeShape=new box2d.b2EdgeShape;box2d.b2ChainShape.prototype.RayCast=function(a,c,b,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(d<this.m_count);var e=box2d.b2ChainShape.prototype.RayCast.s_edgeShape;e.m_vertex1.Copy(this.m_vertices[d]);e.m_vertex2.Copy(this.m_vertices[(d+1)%this.m_count]);return e.RayCast(a,c,b,0)};
goog.exportProperty(box2d.b2ChainShape.prototype,"RayCast",box2d.b2ChainShape.prototype.RayCast);box2d.b2ChainShape.prototype.RayCast.s_edgeShape=new box2d.b2EdgeShape;
box2d.b2ChainShape.prototype.ComputeAABB=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b<this.m_count);var d=this.m_vertices[(b+1)%this.m_count];b=box2d.b2Mul_X_V2(c,this.m_vertices[b],box2d.b2ChainShape.prototype.ComputeAABB.s_v1);c=box2d.b2Mul_X_V2(c,d,box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2Min_V2_V2(b,c,a.lowerBound);box2d.b2Max_V2_V2(b,c,a.upperBound)};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeAABB",box2d.b2ChainShape.prototype.ComputeAABB);
box2d.b2ChainShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v1",box2d.b2ChainShape.prototype.ComputeAABB.s_v1);box2d.b2ChainShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v2",box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2ChainShape.prototype.ComputeMass=function(a,c){a.mass=0;a.center.SetZero();a.I=0};
goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeMass",box2d.b2ChainShape.prototype.ComputeMass);box2d.b2ChainShape.prototype.SetupDistanceProxy=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=c&&c<this.m_count);a.m_buffer[0].Copy(this.m_vertices[c]);c+1<this.m_count?a.m_buffer[1].Copy(this.m_vertices[c+1]):a.m_buffer[1].Copy(this.m_vertices[0]);a.m_vertices=a.m_buffer;a.m_count=2;a.m_radius=this.m_radius};
box2d.b2ChainShape.prototype.ComputeSubmergedArea=function(a,c,b,d){d.SetZero();return 0};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeSubmergedArea",box2d.b2ChainShape.prototype.ComputeSubmergedArea);
box2d.b2ChainShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var a=0;a<this.m_count;++a)box2d.b2Log("    vs[%d].Set(%.15f, %.15f);\n",a,this.m_vertices[a].x,this.m_vertices[a].y);box2d.b2Log("    shape.CreateChain(vs, %d);\n",this.m_count);box2d.b2Log("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y);
box2d.b2Log("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y);box2d.b2Log("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false");box2d.b2Log("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")};goog.exportProperty(box2d.b2ChainShape.prototype,"Dump",box2d.b2ChainShape.prototype.Dump);box2d.b2PolygonShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_polygonShape,box2d.b2_polygonRadius);this.m_centroid=new box2d.b2Vec2(0,0);this.m_vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.m_normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)};goog.inherits(box2d.b2PolygonShape,box2d.b2Shape);goog.exportSymbol("box2d.b2PolygonShape",box2d.b2PolygonShape);box2d.b2PolygonShape.prototype.m_centroid=null;
goog.exportProperty(box2d.b2PolygonShape.prototype,"m_centroid",box2d.b2PolygonShape.prototype.m_centroid);box2d.b2PolygonShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_vertices",box2d.b2PolygonShape.prototype.m_vertices);box2d.b2PolygonShape.prototype.m_normals=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_normals",box2d.b2PolygonShape.prototype.m_normals);box2d.b2PolygonShape.prototype.m_count=0;
goog.exportProperty(box2d.b2PolygonShape.prototype,"m_count",box2d.b2PolygonShape.prototype.m_count);box2d.b2PolygonShape.prototype.Clone=function(){return(new box2d.b2PolygonShape).Copy(this)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Clone",box2d.b2PolygonShape.prototype.Clone);
box2d.b2PolygonShape.prototype.Copy=function(a){box2d.b2Shape.prototype.Copy.call(this,a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2PolygonShape);this.m_centroid.Copy(a.m_centroid);this.m_count=a.m_count;for(var c=0,b=this.m_count;c<b;++c)this.m_vertices[c].Copy(a.m_vertices[c]),this.m_normals[c].Copy(a.m_normals[c]);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Copy",box2d.b2PolygonShape.prototype.Copy);
box2d.b2PolygonShape.prototype.SetAsBox=function(a,c,b,d){this.m_count=4;this.m_vertices[0].Set(-a,-c);this.m_vertices[1].Set(a,-c);this.m_vertices[2].Set(a,c);this.m_vertices[3].Set(-a,c);this.m_normals[0].Set(0,-1);this.m_normals[1].Set(1,0);this.m_normals[2].Set(0,1);this.m_normals[3].Set(-1,0);this.m_centroid.SetZero();if(b instanceof box2d.b2Vec2)for(d="number"===typeof d?d:0,this.m_centroid.Copy(b),a=new box2d.b2Transform,a.SetPosition(b),a.SetRotationAngle(d),b=0,d=this.m_count;b<d;++b)box2d.b2Mul_X_V2(a,
this.m_vertices[b],this.m_vertices[b]),box2d.b2Mul_R_V2(a.q,this.m_normals[b],this.m_normals[b]);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsBox",box2d.b2PolygonShape.prototype.SetAsBox);
box2d.b2PolygonShape.prototype.Set=function(a,c,b){c="number"===typeof c?c:a.length;b="number"===typeof b?b:0;box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=c&&c<=box2d.b2_maxPolygonVertices);if(3>c)return this.SetAsBox(1,1);c=box2d.b2Min(c,box2d.b2_maxPolygonVertices);for(var d=box2d.b2PolygonShape.prototype.Set.s_ps,e=0,f=0;f<c;++f){for(var g=a[b+f],h=!0,k=0;k<e;++k)if(box2d.b2DistanceSquared(g,d[k])<.25*box2d.b2_linearSlop*box2d.b2_linearSlop){h=!1;break}h&&d[e++].Copy(g)}c=e;if(3>c)return box2d.ENABLE_ASSERTS&&
box2d.b2Assert(!1),this.SetAsBox(1,1);a=0;g=d[0].x;for(f=1;f<c;++f)if(k=d[f].x,k>g||k===g&&d[f].y<d[a].y)a=f,g=k;e=box2d.b2PolygonShape.prototype.Set.s_hull;b=0;for(f=a;;){e[b]=f;h=0;for(k=1;k<c;++k)if(h===f)h=k;else{var l=box2d.b2Sub_V2_V2(d[h],d[e[b]],box2d.b2PolygonShape.prototype.Set.s_r),g=box2d.b2Sub_V2_V2(d[k],d[e[b]],box2d.b2PolygonShape.prototype.Set.s_v),m=box2d.b2Cross_V2_V2(l,g);0>m&&(h=k);0===m&&g.LengthSquared()>l.LengthSquared()&&(h=k)}++b;f=h;if(h===a)break}if(3>b)return box2d.ENABLE_ASSERTS&&
box2d.b2Assert(!1),this.SetAsBox(1,1);this.m_count=b;for(f=0;f<b;++f)this.m_vertices[f].Copy(d[e[f]]);f=0;for(c=b;f<c;++f)d=box2d.b2Sub_V2_V2(this.m_vertices[(f+1)%c],this.m_vertices[f],box2d.b2Vec2.s_t0),box2d.ENABLE_ASSERTS&&box2d.b2Assert(d.LengthSquared()>box2d.b2_epsilon_sq),box2d.b2Cross_V2_S(d,1,this.m_normals[f]).SelfNormalize();box2d.b2PolygonShape.ComputeCentroid(this.m_vertices,b,this.m_centroid);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Set",box2d.b2PolygonShape.prototype.Set);
box2d.b2PolygonShape.prototype.Set.s_ps=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_hull=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_r=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Set.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2PolygonShape.prototype,"GetChildCount",box2d.b2PolygonShape.prototype.GetChildCount);
box2d.b2PolygonShape.prototype.TestPoint=function(a,c){for(var b=box2d.b2MulT_X_V2(a,c,box2d.b2PolygonShape.prototype.TestPoint.s_pLocal),d=0,e=this.m_count;d<e;++d)if(0<box2d.b2Dot_V2_V2(this.m_normals[d],box2d.b2Sub_V2_V2(b,this.m_vertices[d],box2d.b2Vec2.s_t0)))return!1;return!0};goog.exportProperty(box2d.b2PolygonShape.prototype,"TestPoint",box2d.b2PolygonShape.prototype.TestPoint);box2d.b2PolygonShape.prototype.TestPoint.s_pLocal=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.ComputeDistance=function(a,c,b,d){c=box2d.b2MulT_X_V2(a,c,box2d.b2PolygonShape.prototype.ComputeDistance.s_pLocal);var e=-box2d.b2_maxFloat,f=box2d.b2PolygonShape.prototype.ComputeDistance.s_normalForMaxDistance.Copy(c);for(d=0;d<this.m_count;++d){var g=box2d.b2Dot_V2_V2(this.m_normals[d],box2d.b2Sub_V2_V2(c,this.m_vertices[d],box2d.b2Vec2.s_t0));g>e&&(e=g,f.Copy(this.m_normals[d]))}if(0<e){f=box2d.b2PolygonShape.prototype.ComputeDistance.s_minDistance.Copy(f);e*=e;
for(d=0;d<this.m_count;++d){var g=box2d.b2Sub_V2_V2(c,this.m_vertices[d],box2d.b2PolygonShape.prototype.ComputeDistance.s_distance),h=g.LengthSquared();e>h&&(f.Copy(g),e=h)}box2d.b2Mul_R_V2(a.q,f,b);b.Normalize();return Math.sqrt(e)}box2d.b2Mul_R_V2(a.q,f,b);return e};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeDistance",box2d.b2PolygonShape.prototype.ComputeDistance);box2d.b2PolygonShape.prototype.ComputeDistance.s_pLocal=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.ComputeDistance.s_normalForMaxDistance=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeDistance.s_minDistance=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeDistance.s_distance=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.RayCast=function(a,c,b,d){d=box2d.b2MulT_X_V2(b,c.p1,box2d.b2PolygonShape.prototype.RayCast.s_p1);for(var e=box2d.b2MulT_X_V2(b,c.p2,box2d.b2PolygonShape.prototype.RayCast.s_p2),e=box2d.b2Sub_V2_V2(e,d,box2d.b2PolygonShape.prototype.RayCast.s_d),f=0,g=c.maxFraction,h=-1,k=0,l=this.m_count;k<l;++k){var m=box2d.b2Dot_V2_V2(this.m_normals[k],box2d.b2Sub_V2_V2(this.m_vertices[k],d,box2d.b2Vec2.s_t0)),n=box2d.b2Dot_V2_V2(this.m_normals[k],e);if(0===n){if(0>m)return!1}else 0>
n&&m<f*n?(f=m/n,h=k):0<n&&m<g*n&&(g=m/n);if(g<f)return!1}box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=f&&f<=c.maxFraction);return 0<=h?(a.fraction=f,box2d.b2Mul_R_V2(b.q,this.m_normals[h],a.normal),!0):!1};goog.exportProperty(box2d.b2PolygonShape.prototype,"RayCast",box2d.b2PolygonShape.prototype.RayCast);box2d.b2PolygonShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_d=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.ComputeAABB=function(a,c,b){b=box2d.b2Mul_X_V2(c,this.m_vertices[0],a.lowerBound);a=a.upperBound.Copy(b);for(var d=0,e=this.m_count;d<e;++d){var f=box2d.b2Mul_X_V2(c,this.m_vertices[d],box2d.b2PolygonShape.prototype.ComputeAABB.s_v);box2d.b2Min_V2_V2(f,b,b);box2d.b2Max_V2_V2(f,a,a)}c=this.m_radius;b.SelfSubXY(c,c);a.SelfAddXY(c,c)};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeAABB",box2d.b2PolygonShape.prototype.ComputeAABB);
box2d.b2PolygonShape.prototype.ComputeAABB.s_v=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.ComputeMass=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=this.m_count);for(var b=box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(),d=0,e=0,f=box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(),g=0,h=this.m_count;g<h;++g)f.SelfAdd(this.m_vertices[g]);f.SelfMul(1/this.m_count);for(var k=1/3,g=0,h=this.m_count;g<h;++g){var l=box2d.b2Sub_V2_V2(this.m_vertices[g],f,box2d.b2PolygonShape.prototype.ComputeMass.s_e1),m=box2d.b2Sub_V2_V2(this.m_vertices[(g+
1)%h],f,box2d.b2PolygonShape.prototype.ComputeMass.s_e2),n=box2d.b2Cross_V2_V2(l,m),p=.5*n,d=d+p;b.SelfAdd(box2d.b2Mul_S_V2(p*k,box2d.b2Add_V2_V2(l,m,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1));var p=l.x,l=l.y,q=m.x,m=m.y,e=e+.25*k*n*(p*p+q*p+q*q+(l*l+m*l+m*m))}a.mass=c*d;box2d.ENABLE_ASSERTS&&box2d.b2Assert(d>box2d.b2_epsilon);b.SelfMul(1/d);box2d.b2Add_V2_V2(b,f,a.center);a.I=c*e;a.I+=a.mass*(box2d.b2Dot_V2_V2(a.center,a.center)-box2d.b2Dot_V2_V2(b,b))};
goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeMass",box2d.b2PolygonShape.prototype.ComputeMass);box2d.b2PolygonShape.prototype.ComputeMass.s_center=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_s=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e2=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.Validate=function(){for(var a=0;a<this.m_count;++a)for(var c=a,b=(a+1)%this.m_count,d=this.m_vertices[c],e=box2d.b2Sub_V2_V2(this.m_vertices[b],d,box2d.b2PolygonShape.prototype.Validate.s_e),f=0;f<this.m_count;++f)if(f!==c&&f!==b){var g=box2d.b2Sub_V2_V2(this.m_vertices[f],d,box2d.b2PolygonShape.prototype.Validate.s_v);if(0>box2d.b2Cross_V2_V2(e,g))return!1}return!0};goog.exportProperty(box2d.b2PolygonShape.prototype,"Validate",box2d.b2PolygonShape.prototype.Validate);
box2d.b2PolygonShape.prototype.Validate.s_e=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Validate.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.SetupDistanceProxy=function(a,c){a.m_vertices=this.m_vertices;a.m_count=this.m_count;a.m_radius=this.m_radius};
box2d.b2PolygonShape.prototype.ComputeSubmergedArea=function(a,c,b,d){var e=box2d.b2MulT_R_V2(b.q,a,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),f=c-box2d.b2Dot_V2_V2(a,b.p),g=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,h=0,k=-1;c=-1;var l=!1;a=0;for(var m=this.m_count;a<m;++a){g[a]=box2d.b2Dot_V2_V2(e,this.m_vertices[a])-f;var n=g[a]<-box2d.b2_epsilon;0<a&&(n?l||(k=a-1,h++):l&&(c=a-1,h++));l=n}switch(h){case 0:return l?(a=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md,
this.ComputeMass(a,1),box2d.b2Mul_X_V2(b,a.center,d),a.mass):0;case 1:-1===k?k=this.m_count-1:c=this.m_count-1}a=(k+1)%this.m_count;e=(c+1)%this.m_count;f=(0-g[k])/(g[a]-g[k]);g=(0-g[c])/(g[e]-g[c]);k=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.Set(this.m_vertices[k].x*(1-f)+this.m_vertices[a].x*f,this.m_vertices[k].y*(1-f)+this.m_vertices[a].y*f);c=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.Set(this.m_vertices[c].x*(1-g)+this.m_vertices[e].x*g,this.m_vertices[c].y*
(1-g)+this.m_vertices[e].y*g);g=0;f=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero();h=this.m_vertices[a];for(l=null;a!==e;)a=(a+1)%this.m_count,l=a===e?c:this.m_vertices[a],m=.5*((h.x-k.x)*(l.y-k.y)-(h.y-k.y)*(l.x-k.x)),g+=m,f.x+=m*(k.x+h.x+l.x)/3,f.y+=m*(k.y+h.y+l.y)/3,h=l;f.SelfMul(1/g);box2d.b2Mul_X_V2(b,f,d);return g};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeSubmergedArea",box2d.b2PolygonShape.prototype.ComputeSubmergedArea);
box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md=new box2d.b2MassData;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center=new box2d.b2Vec2;
box2d.b2PolygonShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var a=0;a<this.m_count;++a)box2d.b2Log("    vs[%d].Set(%.15f, %.15f);\n",a,this.m_vertices[a].x,this.m_vertices[a].y);box2d.b2Log("    shape.Set(vs, %d);\n",this.m_count)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Dump",box2d.b2PolygonShape.prototype.Dump);
box2d.b2PolygonShape.ComputeCentroid=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=c);b.SetZero();for(var d=0,e=box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(),f=1/3,g=0;g<c;++g){var h=e,k=a[g],l=a[(g+1)%c],m=box2d.b2Sub_V2_V2(k,h,box2d.b2PolygonShape.ComputeCentroid.s_e1),n=box2d.b2Sub_V2_V2(l,h,box2d.b2PolygonShape.ComputeCentroid.s_e2),m=.5*box2d.b2Cross_V2_V2(m,n),d=d+m;b.x+=m*f*(h.x+k.x+l.x);b.y+=m*f*(h.y+k.y+l.y)}box2d.ENABLE_ASSERTS&&box2d.b2Assert(d>box2d.b2_epsilon);b.SelfMul(1/
d);return b};goog.exportProperty(box2d.b2PolygonShape,"ComputeCentroid",box2d.b2PolygonShape.ComputeCentroid);box2d.b2PolygonShape.ComputeCentroid.s_pRef=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e2=new box2d.b2Vec2;box2d.b2Timer=function(){this.m_start=(new Date).getTime()};goog.exportSymbol("box2d.b2Timer",box2d.b2Timer);box2d.b2Timer.prototype.m_start=0;goog.exportProperty(box2d.b2Timer.prototype,"m_start",box2d.b2Timer.prototype.m_start);box2d.b2Timer.prototype.Reset=function(){this.m_start=(new Date).getTime();return this};goog.exportProperty(box2d.b2Timer.prototype,"Reset",box2d.b2Timer.prototype.Reset);box2d.b2Timer.prototype.GetMilliseconds=function(){return(new Date).getTime()-this.m_start};
goog.exportProperty(box2d.b2Timer.prototype,"GetMilliseconds",box2d.b2Timer.prototype.GetMilliseconds);box2d.b2Counter=function(){};goog.exportSymbol("box2d.b2Counter",box2d.b2Counter);box2d.b2Counter.prototype.m_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_count",box2d.b2Counter.prototype.m_count);box2d.b2Counter.prototype.m_min_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_min_count",box2d.b2Counter.prototype.m_min_count);box2d.b2Counter.prototype.m_max_count=0;
goog.exportProperty(box2d.b2Counter.prototype,"m_max_count",box2d.b2Counter.prototype.m_max_count);box2d.b2Counter.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2Counter.prototype,"GetCount",box2d.b2Counter.prototype.GetCount);box2d.b2Counter.prototype.GetMinCount=function(){return this.m_min_count};goog.exportProperty(box2d.b2Counter.prototype,"GetMinCount",box2d.b2Counter.prototype.GetMinCount);box2d.b2Counter.prototype.GetMaxCount=function(){return this.m_max_count};
goog.exportProperty(box2d.b2Counter.prototype,"GetMaxCount",box2d.b2Counter.prototype.GetMaxCount);box2d.b2Counter.prototype.ResetCount=function(){var a=this.m_count;this.m_count=0;return a};goog.exportProperty(box2d.b2Counter.prototype,"ResetCount",box2d.b2Counter.prototype.ResetCount);box2d.b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMinCount",box2d.b2Counter.prototype.ResetMinCount);
box2d.b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMaxCount",box2d.b2Counter.prototype.ResetMaxCount);box2d.b2Counter.prototype.Increment=function(){this.m_count++;this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Increment",box2d.b2Counter.prototype.Increment);
box2d.b2Counter.prototype.Decrement=function(){this.m_count--;this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Decrement",box2d.b2Counter.prototype.Decrement);box2d.b2_toiTime=0;goog.exportSymbol("box2d.b2_toiTime",box2d.b2_toiTime);box2d.b2_toiMaxTime=0;goog.exportSymbol("box2d.b2_toiMaxTime",box2d.b2_toiMaxTime);box2d.b2_toiCalls=0;goog.exportSymbol("box2d.b2_toiCalls",box2d.b2_toiCalls);box2d.b2_toiIters=0;goog.exportSymbol("box2d.b2_toiIters",box2d.b2_toiIters);box2d.b2_toiMaxIters=0;goog.exportSymbol("box2d.b2_toiMaxIters",box2d.b2_toiMaxIters);box2d.b2_toiRootIters=0;goog.exportSymbol("box2d.b2_toiRootIters",box2d.b2_toiRootIters);
box2d.b2_toiMaxRootIters=0;goog.exportSymbol("box2d.b2_toiMaxRootIters",box2d.b2_toiMaxRootIters);box2d.b2TOIInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.sweepA=new box2d.b2Sweep;this.sweepB=new box2d.b2Sweep};goog.exportSymbol("box2d.b2TOIInput",box2d.b2TOIInput);box2d.b2TOIInput.prototype.proxyA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"proxyA",box2d.b2TOIInput.prototype.proxyA);box2d.b2TOIInput.prototype.proxyB=null;
goog.exportProperty(box2d.b2TOIInput.prototype,"proxyB",box2d.b2TOIInput.prototype.proxyB);box2d.b2TOIInput.prototype.sweepA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepA",box2d.b2TOIInput.prototype.sweepA);box2d.b2TOIInput.prototype.sweepB=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepB",box2d.b2TOIInput.prototype.sweepB);box2d.b2TOIInput.prototype.tMax=0;goog.exportProperty(box2d.b2TOIInput.prototype,"tMax",box2d.b2TOIInput.prototype.tMax);
box2d.b2TOIOutputState={e_unknown:0,e_failed:1,e_overlapped:2,e_touching:3,e_separated:4};goog.exportSymbol("box2d.b2TOIOutputState",box2d.b2TOIOutputState);goog.exportProperty(box2d.b2TOIOutputState,"e_unknown",box2d.b2TOIOutputState.e_unknown);goog.exportProperty(box2d.b2TOIOutputState,"e_failed",box2d.b2TOIOutputState.e_failed);goog.exportProperty(box2d.b2TOIOutputState,"e_overlapped",box2d.b2TOIOutputState.e_overlapped);goog.exportProperty(box2d.b2TOIOutputState,"e_touching",box2d.b2TOIOutputState.e_touching);
goog.exportProperty(box2d.b2TOIOutputState,"e_separated",box2d.b2TOIOutputState.e_separated);box2d.b2TOIOutput=function(){};goog.exportSymbol("box2d.b2TOIOutput",box2d.b2TOIOutput);box2d.b2TOIOutput.prototype.state=box2d.b2TOIOutputState.e_unknown;goog.exportProperty(box2d.b2TOIOutput.prototype,"state",box2d.b2TOIOutput.prototype.state);box2d.b2TOIOutput.prototype.t=0;goog.exportProperty(box2d.b2TOIOutput.prototype,"t",box2d.b2TOIOutput.prototype.t);
box2d.b2SeparationFunctionType={e_unknown:-1,e_points:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2SeparationFunctionType",box2d.b2SeparationFunctionType);goog.exportProperty(box2d.b2SeparationFunctionType,"e_unknown",box2d.b2SeparationFunctionType.e_unknown);goog.exportProperty(box2d.b2SeparationFunctionType,"e_points",box2d.b2SeparationFunctionType.e_points);goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceA",box2d.b2SeparationFunctionType.e_faceA);
goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceB",box2d.b2SeparationFunctionType.e_faceB);box2d.b2SeparationFunction=function(){this.m_sweepA=new box2d.b2Sweep;this.m_sweepB=new box2d.b2Sweep;this.m_localPoint=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SeparationFunction",box2d.b2SeparationFunction);box2d.b2SeparationFunction.prototype.m_proxyA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyA",box2d.b2SeparationFunction.prototype.m_proxyA);
box2d.b2SeparationFunction.prototype.m_proxyB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyB",box2d.b2SeparationFunction.prototype.m_proxyB);box2d.b2SeparationFunction.prototype.m_sweepA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepA",box2d.b2SeparationFunction.prototype.m_sweepA);box2d.b2SeparationFunction.prototype.m_sweepB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepB",box2d.b2SeparationFunction.prototype.m_sweepB);
box2d.b2SeparationFunction.prototype.m_type=box2d.b2SeparationFunctionType.e_unknown;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_type",box2d.b2SeparationFunction.prototype.m_type);box2d.b2SeparationFunction.prototype.m_localPoint=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_localPoint",box2d.b2SeparationFunction.prototype.m_localPoint);box2d.b2SeparationFunction.prototype.m_axis=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_axis",box2d.b2SeparationFunction.prototype.m_axis);
box2d.b2SeparationFunction.prototype.Initialize=function(a,c,b,d,e,f){this.m_proxyA=c;this.m_proxyB=d;c=a.count;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<c&&3>c);this.m_sweepA.Copy(b);this.m_sweepB.Copy(e);b=box2d.b2TimeOfImpact.s_xfA;e=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(b,f);this.m_sweepB.GetTransform(e,f);1===c?(this.m_type=box2d.b2SeparationFunctionType.e_points,c=this.m_proxyA.GetVertex(a.indexA[0]),a=this.m_proxyB.GetVertex(a.indexB[0]),b=box2d.b2Mul_X_V2(b,c,box2d.b2TimeOfImpact.s_pointA),
e=box2d.b2Mul_X_V2(e,a,box2d.b2TimeOfImpact.s_pointB),box2d.b2Sub_V2_V2(e,b,this.m_axis),a=this.m_axis.Normalize(),this.m_localPoint.SetZero()):(a.indexA[0]===a.indexA[1]?(this.m_type=box2d.b2SeparationFunctionType.e_faceB,c=this.m_proxyB.GetVertex(a.indexB[0]),d=this.m_proxyB.GetVertex(a.indexB[1]),box2d.b2Cross_V2_S(box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0),1,this.m_axis).SelfNormalize(),f=box2d.b2Mul_R_V2(e.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2Mid_V2_V2(c,d,this.m_localPoint),e=
box2d.b2Mul_X_V2(e,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),c=this.m_proxyA.GetVertex(a.indexA[0]),b=box2d.b2Mul_X_V2(b,c,box2d.b2TimeOfImpact.s_pointA),a=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,e,box2d.b2Vec2.s_t0),f)):(this.m_type=box2d.b2SeparationFunctionType.e_faceA,c=this.m_proxyA.GetVertex(a.indexA[0]),d=this.m_proxyA.GetVertex(a.indexA[1]),box2d.b2Cross_V2_S(box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0),1,this.m_axis).SelfNormalize(),f=box2d.b2Mul_R_V2(b.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),
box2d.b2Mid_V2_V2(c,d,this.m_localPoint),b=box2d.b2Mul_X_V2(b,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),a=this.m_proxyB.GetVertex(a.indexB[0]),e=box2d.b2Mul_X_V2(e,a,box2d.b2TimeOfImpact.s_pointB),a=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,b,box2d.b2Vec2.s_t0),f)),0>a&&(this.m_axis.SelfNeg(),a=-a));return a};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Initialize",box2d.b2SeparationFunction.prototype.Initialize);
box2d.b2SeparationFunction.prototype.FindMinSeparation=function(a,c,b){var d=box2d.b2TimeOfImpact.s_xfA,e=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(d,b);this.m_sweepB.GetTransform(e,b);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:var f=box2d.b2MulT_R_V2(d.q,this.m_axis,box2d.b2TimeOfImpact.s_axisA),g=box2d.b2MulT_R_V2(e.q,box2d.b2Vec2.s_t0.Copy(this.m_axis).SelfNeg(),box2d.b2TimeOfImpact.s_axisB);a[0]=this.m_proxyA.GetSupport(f);c[0]=this.m_proxyB.GetSupport(g);a=this.m_proxyA.GetVertex(a[0]);
c=this.m_proxyB.GetVertex(c[0]);d=box2d.b2Mul_X_V2(d,a,box2d.b2TimeOfImpact.s_pointA);e=box2d.b2Mul_X_V2(e,c,box2d.b2TimeOfImpact.s_pointB);return c=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,d,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return b=box2d.b2Mul_R_V2(d.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),d=box2d.b2Mul_X_V2(d,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),g=box2d.b2MulT_R_V2(e.q,box2d.b2Vec2.s_t0.Copy(b).SelfNeg(),box2d.b2TimeOfImpact.s_axisB),a[0]=
-1,c[0]=this.m_proxyB.GetSupport(g),c=this.m_proxyB.GetVertex(c[0]),e=box2d.b2Mul_X_V2(e,c,box2d.b2TimeOfImpact.s_pointB),c=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,d,box2d.b2Vec2.s_t0),b);case box2d.b2SeparationFunctionType.e_faceB:return b=box2d.b2Mul_R_V2(e.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),e=box2d.b2Mul_X_V2(e,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),f=box2d.b2MulT_R_V2(d.q,box2d.b2Vec2.s_t0.Copy(b).SelfNeg(),box2d.b2TimeOfImpact.s_axisA),c[0]=-1,a[0]=this.m_proxyA.GetSupport(f),
a=this.m_proxyA.GetVertex(a[0]),d=box2d.b2Mul_X_V2(d,a,box2d.b2TimeOfImpact.s_pointA),c=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(d,e,box2d.b2Vec2.s_t0),b);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),a[0]=-1,c[0]=-1,0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"FindMinSeparation",box2d.b2SeparationFunction.prototype.FindMinSeparation);
box2d.b2SeparationFunction.prototype.Evaluate=function(a,c,b){var d=box2d.b2TimeOfImpact.s_xfA,e=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(d,b);this.m_sweepB.GetTransform(e,b);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:return a=this.m_proxyA.GetVertex(a),c=this.m_proxyB.GetVertex(c),d=box2d.b2Mul_X_V2(d,a,box2d.b2TimeOfImpact.s_pointA),e=box2d.b2Mul_X_V2(e,c,box2d.b2TimeOfImpact.s_pointB),d=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,d,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return b=
box2d.b2Mul_R_V2(d.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),d=box2d.b2Mul_X_V2(d,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),c=this.m_proxyB.GetVertex(c),e=box2d.b2Mul_X_V2(e,c,box2d.b2TimeOfImpact.s_pointB),d=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,d,box2d.b2Vec2.s_t0),b);case box2d.b2SeparationFunctionType.e_faceB:return b=box2d.b2Mul_R_V2(e.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),e=box2d.b2Mul_X_V2(e,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),a=this.m_proxyA.GetVertex(a),d=box2d.b2Mul_X_V2(d,
a,box2d.b2TimeOfImpact.s_pointA),d=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(d,e,box2d.b2Vec2.s_t0),b);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Evaluate",box2d.b2SeparationFunction.prototype.Evaluate);
box2d.b2TimeOfImpact=function(a,c){var b=box2d.b2TimeOfImpact.s_timer.Reset();++box2d.b2_toiCalls;a.state=box2d.b2TOIOutputState.e_unknown;a.t=c.tMax;var d=c.proxyA,e=c.proxyB,f=box2d.b2TimeOfImpact.s_sweepA.Copy(c.sweepA),g=box2d.b2TimeOfImpact.s_sweepB.Copy(c.sweepB);f.Normalize();g.Normalize();var h=c.tMax,k=box2d.b2Max(box2d.b2_linearSlop,d.m_radius+e.m_radius-3*box2d.b2_linearSlop),l=.25*box2d.b2_linearSlop;box2d.ENABLE_ASSERTS&&box2d.b2Assert(k>l);var m=0,n=0,p=box2d.b2TimeOfImpact.s_cache;
p.count=0;var q=box2d.b2TimeOfImpact.s_distanceInput;q.proxyA=c.proxyA;q.proxyB=c.proxyB;for(q.useRadii=!1;;){var r=box2d.b2TimeOfImpact.s_xfA,u=box2d.b2TimeOfImpact.s_xfB;f.GetTransform(r,m);g.GetTransform(u,m);q.transformA.Copy(r);q.transformB.Copy(u);r=box2d.b2TimeOfImpact.s_distanceOutput;box2d.b2ShapeDistance(r,p,q);if(0>=r.distance){a.state=box2d.b2TOIOutputState.e_overlapped;a.t=0;break}if(r.distance<k+l){a.state=box2d.b2TOIOutputState.e_touching;a.t=m;break}r=box2d.b2TimeOfImpact.s_fcn;r.Initialize(p,
d,f,e,g,m);for(var u=!1,t=h,w=0;;){var x=box2d.b2TimeOfImpact.s_indexA,v=box2d.b2TimeOfImpact.s_indexB,y=r.FindMinSeparation(x,v,t);if(y>k+l){a.state=box2d.b2TOIOutputState.e_separated;a.t=h;u=!0;break}if(y>k-l){m=t;break}var z=r.Evaluate(x[0],v[0],m);if(z<k-l){a.state=box2d.b2TOIOutputState.e_failed;a.t=m;u=!0;break}if(z<=k+l){a.state=box2d.b2TOIOutputState.e_touching;a.t=m;u=!0;break}for(var B=0,E=m,F=t;;){var G=0,G=B&1?E+(k-z)*(F-E)/(y-z):.5*(E+F);++B;++box2d.b2_toiRootIters;var H=r.Evaluate(x[0],
v[0],G);if(box2d.b2Abs(H-k)<l){t=G;break}H>k?(E=G,z=H):(F=G,y=H);if(50===B)break}box2d.b2_toiMaxRootIters=box2d.b2Max(box2d.b2_toiMaxRootIters,B);++w;if(w===box2d.b2_maxPolygonVertices)break}++n;++box2d.b2_toiIters;if(u)break;if(20===n){a.state=box2d.b2TOIOutputState.e_failed;a.t=m;break}}box2d.b2_toiMaxIters=box2d.b2Max(box2d.b2_toiMaxIters,n);b=b.GetMilliseconds();box2d.b2_toiMaxTime=box2d.b2Max(box2d.b2_toiMaxTime,b);box2d.b2_toiTime+=b};goog.exportSymbol("box2d.b2TimeOfImpact",box2d.b2TimeOfImpact);
box2d.b2TimeOfImpact.s_timer=new box2d.b2Timer;box2d.b2TimeOfImpact.s_cache=new box2d.b2SimplexCache;box2d.b2TimeOfImpact.s_distanceInput=new box2d.b2DistanceInput;box2d.b2TimeOfImpact.s_distanceOutput=new box2d.b2DistanceOutput;box2d.b2TimeOfImpact.s_xfA=new box2d.b2Transform;box2d.b2TimeOfImpact.s_xfB=new box2d.b2Transform;box2d.b2TimeOfImpact.s_indexA=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_indexB=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_fcn=new box2d.b2SeparationFunction;
box2d.b2TimeOfImpact.s_sweepA=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_sweepB=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_pointA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_pointB=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_normal=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisB=new box2d.b2Vec2;box2d.b2Filter=function(){};goog.exportSymbol("box2d.b2Filter",box2d.b2Filter);box2d.b2Filter.prototype.categoryBits=1;goog.exportProperty(box2d.b2Filter.prototype,"categoryBits",box2d.b2Filter.prototype.categoryBits);box2d.b2Filter.prototype.maskBits=65535;goog.exportProperty(box2d.b2Filter.prototype,"maskBits",box2d.b2Filter.prototype.maskBits);box2d.b2Filter.prototype.groupIndex=0;goog.exportProperty(box2d.b2Filter.prototype,"groupIndex",box2d.b2Filter.prototype.groupIndex);
box2d.b2Filter.prototype.Clone=function(){return(new box2d.b2Filter).Copy(this)};goog.exportProperty(box2d.b2Filter.prototype,"Clone",box2d.b2Filter.prototype.Clone);box2d.b2Filter.prototype.Copy=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this!==a);this.categoryBits=a.categoryBits;this.maskBits=a.maskBits;this.groupIndex=a.groupIndex;return this};goog.exportProperty(box2d.b2Filter.prototype,"Copy",box2d.b2Filter.prototype.Copy);box2d.b2FixtureDef=function(){this.filter=new box2d.b2Filter};
goog.exportSymbol("box2d.b2FixtureDef",box2d.b2FixtureDef);box2d.b2FixtureDef.prototype.shape=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"shape",box2d.b2FixtureDef.prototype.shape);box2d.b2FixtureDef.prototype.userData=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"userData",box2d.b2FixtureDef.prototype.userData);box2d.b2FixtureDef.prototype.friction=.2;goog.exportProperty(box2d.b2FixtureDef.prototype,"friction",box2d.b2FixtureDef.prototype.friction);
box2d.b2FixtureDef.prototype.restitution=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"restitution",box2d.b2FixtureDef.prototype.restitution);box2d.b2FixtureDef.prototype.density=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"density",box2d.b2FixtureDef.prototype.density);box2d.b2FixtureDef.prototype.isSensor=!1;goog.exportProperty(box2d.b2FixtureDef.prototype,"isSensor",box2d.b2FixtureDef.prototype.isSensor);box2d.b2FixtureDef.prototype.filter=null;
goog.exportProperty(box2d.b2FixtureDef.prototype,"filter",box2d.b2FixtureDef.prototype.filter);box2d.b2FixtureProxy=function(){this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2FixtureProxy",box2d.b2FixtureProxy);box2d.b2FixtureProxy.prototype.aabb=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"aabb",box2d.b2FixtureProxy.prototype.aabb);box2d.b2FixtureProxy.prototype.fixture=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"fixture",box2d.b2FixtureProxy.prototype.fixture);
box2d.b2FixtureProxy.prototype.childIndex=0;goog.exportProperty(box2d.b2FixtureProxy.prototype,"childIndex",box2d.b2FixtureProxy.prototype.childIndex);box2d.b2FixtureProxy.prototype.proxy=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"proxy",box2d.b2FixtureProxy.prototype.proxy);box2d.b2FixtureProxy.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2FixtureProxy})};goog.exportProperty(box2d.b2FixtureProxy,"MakeArray",box2d.b2FixtureProxy.MakeArray);
box2d.b2Fixture=function(){this.m_proxyCount=0;this.m_filter=new box2d.b2Filter};goog.exportSymbol("box2d.b2Fixture",box2d.b2Fixture);box2d.b2Fixture.prototype.m_density=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_density",box2d.b2Fixture.prototype.m_density);box2d.b2Fixture.prototype.m_next=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_next",box2d.b2Fixture.prototype.m_next);box2d.b2Fixture.prototype.m_body=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_body",box2d.b2Fixture.prototype.m_body);
box2d.b2Fixture.prototype.m_shape=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_shape",box2d.b2Fixture.prototype.m_shape);box2d.b2Fixture.prototype.m_friction=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_friction",box2d.b2Fixture.prototype.m_friction);box2d.b2Fixture.prototype.m_restitution=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_restitution",box2d.b2Fixture.prototype.m_restitution);box2d.b2Fixture.prototype.m_proxies=null;
goog.exportProperty(box2d.b2Fixture.prototype,"m_proxies",box2d.b2Fixture.prototype.m_proxies);box2d.b2Fixture.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_proxyCount",box2d.b2Fixture.prototype.m_proxyCount);box2d.b2Fixture.prototype.m_filter=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_filter",box2d.b2Fixture.prototype.m_filter);box2d.b2Fixture.prototype.m_isSensor=!1;goog.exportProperty(box2d.b2Fixture.prototype,"m_isSensor",box2d.b2Fixture.prototype.m_isSensor);
box2d.b2Fixture.prototype.m_userData=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_userData",box2d.b2Fixture.prototype.m_userData);box2d.b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()};goog.exportProperty(box2d.b2Fixture.prototype,"GetType",box2d.b2Fixture.prototype.GetType);box2d.b2Fixture.prototype.GetShape=function(){return this.m_shape};goog.exportProperty(box2d.b2Fixture.prototype,"GetShape",box2d.b2Fixture.prototype.GetShape);
box2d.b2Fixture.prototype.IsSensor=function(){return this.m_isSensor};goog.exportProperty(box2d.b2Fixture.prototype,"IsSensor",box2d.b2Fixture.prototype.IsSensor);box2d.b2Fixture.prototype.GetFilterData=function(a){a=a||new box2d.b2Filter;return a.Copy(this.m_filter)};goog.exportProperty(box2d.b2Fixture.prototype,"GetFilterData",box2d.b2Fixture.prototype.GetFilterData);box2d.b2Fixture.prototype.GetUserData=function(){return this.m_userData};
goog.exportProperty(box2d.b2Fixture.prototype,"GetUserData",box2d.b2Fixture.prototype.GetUserData);box2d.b2Fixture.prototype.SetUserData=function(a){this.m_userData=a};goog.exportProperty(box2d.b2Fixture.prototype,"SetUserData",box2d.b2Fixture.prototype.SetUserData);box2d.b2Fixture.prototype.GetBody=function(){return this.m_body};goog.exportProperty(box2d.b2Fixture.prototype,"GetBody",box2d.b2Fixture.prototype.GetBody);box2d.b2Fixture.prototype.GetNext=function(){return this.m_next};
goog.exportProperty(box2d.b2Fixture.prototype,"GetNext",box2d.b2Fixture.prototype.GetNext);box2d.b2Fixture.prototype.SetDensity=function(a){this.m_density=a};goog.exportProperty(box2d.b2Fixture.prototype,"SetDensity",box2d.b2Fixture.prototype.SetDensity);box2d.b2Fixture.prototype.GetDensity=function(){return this.m_density};goog.exportProperty(box2d.b2Fixture.prototype,"GetDensity",box2d.b2Fixture.prototype.GetDensity);box2d.b2Fixture.prototype.GetFriction=function(){return this.m_friction};
goog.exportProperty(box2d.b2Fixture.prototype,"GetFriction",box2d.b2Fixture.prototype.GetFriction);box2d.b2Fixture.prototype.SetFriction=function(a){this.m_friction=a};goog.exportProperty(box2d.b2Fixture.prototype,"SetFriction",box2d.b2Fixture.prototype.SetFriction);box2d.b2Fixture.prototype.GetRestitution=function(){return this.m_restitution};goog.exportProperty(box2d.b2Fixture.prototype,"GetRestitution",box2d.b2Fixture.prototype.GetRestitution);
box2d.b2Fixture.prototype.SetRestitution=function(a){this.m_restitution=a};goog.exportProperty(box2d.b2Fixture.prototype,"SetRestitution",box2d.b2Fixture.prototype.SetRestitution);box2d.b2Fixture.prototype.TestPoint=function(a){return this.m_shape.TestPoint(this.m_body.GetTransform(),a)};goog.exportProperty(box2d.b2Fixture.prototype,"TestPoint",box2d.b2Fixture.prototype.TestPoint);
box2d.b2Fixture.prototype.ComputeDistance=function(a,c,b){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),a,c,b)};goog.exportProperty(box2d.b2Fixture.prototype,"ComputeDistance",box2d.b2Fixture.prototype.ComputeDistance);box2d.b2Fixture.prototype.RayCast=function(a,c,b){return this.m_shape.RayCast(a,c,this.m_body.GetTransform(),b)};goog.exportProperty(box2d.b2Fixture.prototype,"RayCast",box2d.b2Fixture.prototype.RayCast);
box2d.b2Fixture.prototype.GetMassData=function(a){a=a||new box2d.b2MassData;this.m_shape.ComputeMass(a,this.m_density);return a};goog.exportProperty(box2d.b2Fixture.prototype,"GetMassData",box2d.b2Fixture.prototype.GetMassData);box2d.b2Fixture.prototype.GetAABB=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=a&&a<this.m_proxyCount);return this.m_proxies[a].aabb};goog.exportProperty(box2d.b2Fixture.prototype,"GetAABB",box2d.b2Fixture.prototype.GetAABB);
box2d.b2Fixture.prototype.Create=function(a,c){this.m_userData=c.userData;this.m_friction=c.friction;this.m_restitution=c.restitution;this.m_body=a;this.m_next=null;this.m_filter.Copy(c.filter);this.m_isSensor=c.isSensor;this.m_shape=c.shape.Clone();this.m_proxies=box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount());this.m_proxyCount=0;this.m_density=c.density};goog.exportProperty(box2d.b2Fixture.prototype,"Create",box2d.b2Fixture.prototype.Create);
box2d.b2Fixture.prototype.Destroy=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount);this.m_shape=null};goog.exportProperty(box2d.b2Fixture.prototype,"Destroy",box2d.b2Fixture.prototype.Destroy);
box2d.b2Fixture.prototype.CreateProxies=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount);this.m_proxyCount=this.m_shape.GetChildCount();for(var b=0;b<this.m_proxyCount;++b){var d=this.m_proxies[b];this.m_shape.ComputeAABB(d.aabb,c,b);d.proxy=a.CreateProxy(d.aabb,d);d.fixture=this;d.childIndex=b}};goog.exportProperty(box2d.b2Fixture.prototype,"CreateProxies",box2d.b2Fixture.prototype.CreateProxies);
box2d.b2Fixture.prototype.DestroyProxies=function(a){for(var c=0;c<this.m_proxyCount;++c){var b=this.m_proxies[c];a.DestroyProxy(b.proxy);b.proxy=null}this.m_proxyCount=0};goog.exportProperty(box2d.b2Fixture.prototype,"DestroyProxies",box2d.b2Fixture.prototype.DestroyProxies);
box2d.b2Fixture.prototype.Synchronize=function(a,c,b){if(0!==this.m_proxyCount)for(var d=0;d<this.m_proxyCount;++d){var e=this.m_proxies[d],f=box2d.b2Fixture.prototype.Synchronize.s_aabb1,g=box2d.b2Fixture.prototype.Synchronize.s_aabb2;this.m_shape.ComputeAABB(f,c,d);this.m_shape.ComputeAABB(g,b,d);e.aabb.Combine2(f,g);f=box2d.b2Sub_V2_V2(b.p,c.p,box2d.b2Fixture.prototype.Synchronize.s_displacement);a.MoveProxy(e.proxy,e.aabb,f)}};goog.exportProperty(box2d.b2Fixture.prototype,"Synchronize",box2d.b2Fixture.prototype.Synchronize);
box2d.b2Fixture.prototype.Synchronize.s_aabb1=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_aabb2=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_displacement=new box2d.b2Vec2;box2d.b2Fixture.prototype.SetFilterData=function(a){this.m_filter.Copy(a);this.Refilter()};goog.exportProperty(box2d.b2Fixture.prototype,"SetFilterData",box2d.b2Fixture.prototype.SetFilterData);
box2d.b2Fixture.prototype.Refilter=function(){if(null!==this.m_body){for(var a=this.m_body.GetContactList();a;){var c=a.contact,b=c.GetFixtureA(),d=c.GetFixtureB();b!==this&&d!==this||c.FlagForFiltering();a=a.next}a=this.m_body.GetWorld();if(null!==a)for(a=a.m_contactManager.m_broadPhase,c=0;c<this.m_proxyCount;++c)a.TouchProxy(this.m_proxies[c].proxy)}};goog.exportProperty(box2d.b2Fixture.prototype,"Refilter",box2d.b2Fixture.prototype.Refilter);
box2d.b2Fixture.prototype.SetSensor=function(a){a!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=a)};goog.exportProperty(box2d.b2Fixture.prototype,"SetSensor",box2d.b2Fixture.prototype.SetSensor);
box2d.b2Fixture.prototype.Dump=function(a){box2d.DEBUG&&(box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),box2d.b2Log("    fd.friction = %.15f;\n",this.m_friction),box2d.b2Log("    fd.restitution = %.15f;\n",this.m_restitution),box2d.b2Log("    fd.density = %.15f;\n",this.m_density),box2d.b2Log("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),box2d.b2Log("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),box2d.b2Log("    fd.filter.maskBits = %d;\n",
this.m_filter.maskBits),box2d.b2Log("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(),box2d.b2Log("\n"),box2d.b2Log("    fd.shape = shape;\n"),box2d.b2Log("\n"),box2d.b2Log("    bodies[%d].CreateFixture(fd);\n",a))};goog.exportProperty(box2d.b2Fixture.prototype,"Dump",box2d.b2Fixture.prototype.Dump);box2d.b2BodyType={b2_unknown:-1,b2_staticBody:0,b2_kinematicBody:1,b2_dynamicBody:2,b2_bulletBody:3};goog.exportSymbol("box2d.b2BodyType",box2d.b2BodyType);goog.exportProperty(box2d.b2BodyType,"b2_unknown",box2d.b2BodyType.b2_unknown);goog.exportProperty(box2d.b2BodyType,"b2_staticBody",box2d.b2BodyType.b2_staticBody);goog.exportProperty(box2d.b2BodyType,"b2_kinematicBody",box2d.b2BodyType.b2_kinematicBody);goog.exportProperty(box2d.b2BodyType,"b2_dynamicBody",box2d.b2BodyType.b2_dynamicBody);
goog.exportProperty(box2d.b2BodyType,"b2_bulletBody",box2d.b2BodyType.b2_bulletBody);box2d.b2BodyDef=function(){this.position=new box2d.b2Vec2(0,0);this.linearVelocity=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2BodyDef",box2d.b2BodyDef);box2d.b2BodyDef.prototype.type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2BodyDef.prototype,"type",box2d.b2BodyDef.prototype.type);box2d.b2BodyDef.prototype.position=null;goog.exportProperty(box2d.b2BodyDef.prototype,"position",box2d.b2BodyDef.prototype.position);
box2d.b2BodyDef.prototype.angle=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angle",box2d.b2BodyDef.prototype.angle);box2d.b2BodyDef.prototype.linearVelocity=null;goog.exportProperty(box2d.b2BodyDef.prototype,"linearVelocity",box2d.b2BodyDef.prototype.linearVelocity);box2d.b2BodyDef.prototype.angularVelocity=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularVelocity",box2d.b2BodyDef.prototype.angularVelocity);box2d.b2BodyDef.prototype.linearDamping=0;
goog.exportProperty(box2d.b2BodyDef.prototype,"linearDamping",box2d.b2BodyDef.prototype.linearDamping);box2d.b2BodyDef.prototype.angularDamping=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularDamping",box2d.b2BodyDef.prototype.angularDamping);box2d.b2BodyDef.prototype.allowSleep=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"allowSleep",box2d.b2BodyDef.prototype.allowSleep);box2d.b2BodyDef.prototype.awake=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"awake",box2d.b2BodyDef.prototype.awake);
box2d.b2BodyDef.prototype.fixedRotation=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"fixedRotation",box2d.b2BodyDef.prototype.fixedRotation);box2d.b2BodyDef.prototype.bullet=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"bullet",box2d.b2BodyDef.prototype.bullet);box2d.b2BodyDef.prototype.active=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"active",box2d.b2BodyDef.prototype.active);box2d.b2BodyDef.prototype.userData=null;goog.exportProperty(box2d.b2BodyDef.prototype,"userData",box2d.b2BodyDef.prototype.userData);
box2d.b2BodyDef.prototype.gravityScale=1;goog.exportProperty(box2d.b2BodyDef.prototype,"gravityScale",box2d.b2BodyDef.prototype.gravityScale);
box2d.b2Body=function(a,c){this.m_xf=new box2d.b2Transform;this.m_out_xf=new box2d.b2Transform;this.m_xf0=new box2d.b2Transform;this.m_sweep=new box2d.b2Sweep;this.m_out_sweep=new box2d.b2Sweep;this.m_linearVelocity=new box2d.b2Vec2;this.m_out_linearVelocity=new box2d.b2Vec2;this.m_force=new box2d.b2Vec2;box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.position.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.linearVelocity.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.angle));box2d.ENABLE_ASSERTS&&
box2d.b2Assert(box2d.b2IsValid(a.angularVelocity));box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.gravityScale)&&0<=a.gravityScale);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.angularDamping)&&0<=a.angularDamping);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.linearDamping)&&0<=a.linearDamping);a.bullet&&(this.m_flag_bulletFlag=!0);a.fixedRotation&&(this.m_flag_fixedRotationFlag=!0);a.allowSleep&&(this.m_flag_autoSleepFlag=!0);a.awake&&(this.m_flag_awakeFlag=!0);a.active&&
(this.m_flag_activeFlag=!0);this.m_world=c;this.m_xf.p.Copy(a.position);this.m_xf.q.SetAngle(a.angle);this.m_xf0.Copy(this.m_xf);this.m_sweep.localCenter.SetZero();this.m_sweep.c0.Copy(this.m_xf.p);this.m_sweep.c.Copy(this.m_xf.p);this.m_sweep.a0=a.angle;this.m_sweep.a=a.angle;this.m_sweep.alpha0=0;this.m_linearVelocity.Copy(a.linearVelocity);this.m_angularVelocity=a.angularVelocity;this.m_linearDamping=a.linearDamping;this.m_angularDamping=a.angularDamping;this.m_gravityScale=a.gravityScale;this.m_force.SetZero();
this.m_sleepTime=this.m_torque=0;this.m_type=a.type;this.m_invMass=a.type===box2d.b2BodyType.b2_dynamicBody?this.m_mass=1:this.m_mass=0;this.m_invI=this.m_I=0;this.m_userData=a.userData;this.m_fixtureList=null;this.m_fixtureCount=0;this.m_controllerList=null;this.m_controllerCount=0};goog.exportSymbol("box2d.b2Body",box2d.b2Body);box2d.b2Body.prototype.m_flag_islandFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_islandFlag",box2d.b2Body.prototype.m_flag_islandFlag);
box2d.b2Body.prototype.m_flag_awakeFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_awakeFlag",box2d.b2Body.prototype.m_flag_awakeFlag);box2d.b2Body.prototype.m_flag_autoSleepFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_autoSleepFlag",box2d.b2Body.prototype.m_flag_autoSleepFlag);box2d.b2Body.prototype.m_flag_bulletFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_bulletFlag",box2d.b2Body.prototype.m_flag_bulletFlag);
box2d.b2Body.prototype.m_flag_fixedRotationFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_fixedRotationFlag",box2d.b2Body.prototype.m_flag_fixedRotationFlag);box2d.b2Body.prototype.m_flag_activeFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_activeFlag",box2d.b2Body.prototype.m_flag_activeFlag);box2d.b2Body.prototype.m_flag_toiFlag=!1;goog.exportProperty(box2d.b2Body.prototype,"m_flag_toiFlag",box2d.b2Body.prototype.m_flag_toiFlag);box2d.b2Body.prototype.m_islandIndex=0;
goog.exportProperty(box2d.b2Body.prototype,"m_islandIndex",box2d.b2Body.prototype.m_islandIndex);box2d.b2Body.prototype.m_world=null;goog.exportProperty(box2d.b2Body.prototype,"m_world",box2d.b2Body.prototype.m_world);box2d.b2Body.prototype.m_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_xf",box2d.b2Body.prototype.m_xf);box2d.b2Body.prototype.m_out_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_xf",box2d.b2Body.prototype.m_out_xf);box2d.b2Body.prototype.m_xf0=null;
goog.exportProperty(box2d.b2Body.prototype,"m_xf0",box2d.b2Body.prototype.m_xf0);box2d.b2Body.prototype.m_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_sweep",box2d.b2Body.prototype.m_sweep);box2d.b2Body.prototype.m_out_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_sweep",box2d.b2Body.prototype.m_out_sweep);box2d.b2Body.prototype.m_jointList=null;goog.exportProperty(box2d.b2Body.prototype,"m_jointList",box2d.b2Body.prototype.m_jointList);
box2d.b2Body.prototype.m_contactList=null;goog.exportProperty(box2d.b2Body.prototype,"m_contactList",box2d.b2Body.prototype.m_contactList);box2d.b2Body.prototype.m_prev=null;goog.exportProperty(box2d.b2Body.prototype,"m_prev",box2d.b2Body.prototype.m_prev);box2d.b2Body.prototype.m_next=null;goog.exportProperty(box2d.b2Body.prototype,"m_next",box2d.b2Body.prototype.m_next);box2d.b2Body.prototype.m_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_linearVelocity",box2d.b2Body.prototype.m_linearVelocity);
box2d.b2Body.prototype.m_out_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_linearVelocity",box2d.b2Body.prototype.m_out_linearVelocity);box2d.b2Body.prototype.m_angularVelocity=0;goog.exportProperty(box2d.b2Body.prototype,"m_angularVelocity",box2d.b2Body.prototype.m_angularVelocity);box2d.b2Body.prototype.m_linearDamping=0;goog.exportProperty(box2d.b2Body.prototype,"m_linearDamping",box2d.b2Body.prototype.m_linearDamping);box2d.b2Body.prototype.m_angularDamping=0;
goog.exportProperty(box2d.b2Body.prototype,"m_angularDamping",box2d.b2Body.prototype.m_angularDamping);box2d.b2Body.prototype.m_gravityScale=1;goog.exportProperty(box2d.b2Body.prototype,"m_gravityScale",box2d.b2Body.prototype.m_gravityScale);box2d.b2Body.prototype.m_force=null;goog.exportProperty(box2d.b2Body.prototype,"m_force",box2d.b2Body.prototype.m_force);box2d.b2Body.prototype.m_torque=0;goog.exportProperty(box2d.b2Body.prototype,"m_torque",box2d.b2Body.prototype.m_torque);
box2d.b2Body.prototype.m_sleepTime=0;goog.exportProperty(box2d.b2Body.prototype,"m_sleepTime",box2d.b2Body.prototype.m_sleepTime);box2d.b2Body.prototype.m_type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2Body.prototype,"m_type",box2d.b2Body.prototype.m_type);box2d.b2Body.prototype.m_mass=1;goog.exportProperty(box2d.b2Body.prototype,"m_mass",box2d.b2Body.prototype.m_mass);box2d.b2Body.prototype.m_invMass=1;goog.exportProperty(box2d.b2Body.prototype,"m_invMass",box2d.b2Body.prototype.m_invMass);
box2d.b2Body.prototype.m_I=0;goog.exportProperty(box2d.b2Body.prototype,"m_I",box2d.b2Body.prototype.m_I);box2d.b2Body.prototype.m_invI=0;goog.exportProperty(box2d.b2Body.prototype,"m_invI",box2d.b2Body.prototype.m_invI);box2d.b2Body.prototype.m_userData=null;goog.exportProperty(box2d.b2Body.prototype,"m_userData",box2d.b2Body.prototype.m_userData);box2d.b2Body.prototype.m_fixtureList=null;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureList",box2d.b2Body.prototype.m_fixtureList);
box2d.b2Body.prototype.m_fixtureCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureCount",box2d.b2Body.prototype.m_fixtureCount);box2d.b2Body.prototype.m_controllerList=null;goog.exportProperty(box2d.b2Body.prototype,"m_controllerList",box2d.b2Body.prototype.m_controllerList);box2d.b2Body.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_controllerCount",box2d.b2Body.prototype.m_controllerCount);
box2d.b2Body.prototype.CreateFixture=function(a,c){if(a instanceof box2d.b2FixtureDef)return this.CreateFixture_Def(a);if(a instanceof box2d.b2Shape&&"number"===typeof c)return this.CreateFixture_Shape_Density(a,c);throw Error();};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture",box2d.b2Body.prototype.CreateFixture);
box2d.b2Body.prototype.CreateFixture_Def=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(this.m_world.IsLocked())return null;var c=new box2d.b2Fixture;c.Create(this,a);this.m_flag_activeFlag&&c.CreateProxies(this.m_world.m_contactManager.m_broadPhase,this.m_xf);c.m_next=this.m_fixtureList;this.m_fixtureList=c;++this.m_fixtureCount;c.m_body=this;0<c.m_density&&this.ResetMassData();this.m_world.m_flag_newFixture=!0;return c};
goog.exportProperty(box2d.b2Body.prototype,"CreateFixture_Def",box2d.b2Body.prototype.CreateFixture_Def);box2d.b2Body.prototype.CreateFixture_Shape_Density=function(a,c){var b=box2d.b2Body.prototype.CreateFixture_Shape_Density.s_def;b.shape=a;b.density="number"===typeof c?c:0;return this.CreateFixture_Def(b)};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture_Shape_Density",box2d.b2Body.prototype.CreateFixture_Shape_Density);box2d.b2Body.prototype.CreateFixture_Shape_Density.s_def=new box2d.b2FixtureDef;
box2d.b2Body.prototype.DestroyFixture=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(!this.m_world.IsLocked()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.m_body===this);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_fixtureCount);for(var c=this.m_fixtureList,b=null,d=!1;null!==c;){if(c===a){b?b.m_next=a.m_next:this.m_fixtureList=a.m_next;d=!0;break}b=c;c=c.m_next}box2d.ENABLE_ASSERTS&&box2d.b2Assert(d);for(c=this.m_contactList;c;){var b=c.contact,c=c.next,d=b.GetFixtureA(),
e=b.GetFixtureB();a!==d&&a!==e||this.m_world.m_contactManager.Destroy(b)}this.m_flag_activeFlag&&a.DestroyProxies(this.m_world.m_contactManager.m_broadPhase);a.Destroy();a.m_body=null;a.m_next=null;--this.m_fixtureCount;this.ResetMassData()}};goog.exportProperty(box2d.b2Body.prototype,"DestroyFixture",box2d.b2Body.prototype.DestroyFixture);
box2d.b2Body.prototype.SetTransform=function(a,c,b){if(a instanceof box2d.b2Vec2&&"number"===typeof c)this.SetTransform_X_Y_A(a.x,a.y,c);else if(a instanceof box2d.b2Transform)this.SetTransform_X_Y_A(a.p.x,a.p.y,a.GetAngle());else if("number"===typeof a&&"number"===typeof c&&"number"===typeof b)this.SetTransform_X_Y_A(a,c,b);else throw Error();};goog.exportProperty(box2d.b2Body.prototype,"SetTransform",box2d.b2Body.prototype.SetTransform);
box2d.b2Body.prototype.SetTransform_V2_A=function(a,c){this.SetTransform_X_Y_A(a.x,a.y,c)};goog.exportProperty(box2d.b2Body.prototype,"SetTransform_V2_A",box2d.b2Body.prototype.SetTransform_V2_A);
box2d.b2Body.prototype.SetTransform_X_Y_A=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(!this.m_world.IsLocked()&&(this.m_xf.p.x!==a||this.m_xf.p.y!==c||this.m_xf.q.GetAngle()!==b))for(this.m_xf.q.SetAngle(b),this.m_xf.p.Set(a,c),this.m_xf0.Copy(this.m_xf),box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=b,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=b,a=this.m_world.m_contactManager.m_broadPhase,c=this.m_fixtureList;c;c=
c.m_next)c.Synchronize(a,this.m_xf,this.m_xf)};goog.exportProperty(box2d.b2Body.prototype,"SetTransform_X_Y_A",box2d.b2Body.prototype.SetTransform_X_Y_A);box2d.b2Body.prototype.SetTransform_X=function(a){this.SetTransform_X_Y_A(a.p.x,a.p.y,a.GetAngle())};goog.exportProperty(box2d.b2Body.prototype,"SetTransform_X",box2d.b2Body.prototype.SetTransform_X);box2d.b2Body.prototype.GetTransform=function(a){a=a||this.m_out_xf;return a.Copy(this.m_xf)};
goog.exportProperty(box2d.b2Body.prototype,"GetTransform",box2d.b2Body.prototype.GetTransform);box2d.b2Body.prototype.GetPosition=function(a){a=a||this.m_out_xf.p;return a.Copy(this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"GetPosition",box2d.b2Body.prototype.GetPosition);box2d.b2Body.prototype.SetPosition=function(a){this.SetTransform_V2_A(a,this.GetAngle())};goog.exportProperty(box2d.b2Body.prototype,"SetPosition",box2d.b2Body.prototype.SetPosition);
box2d.b2Body.prototype.SetPositionXY=function(a,c){this.SetTransform_X_Y_A(a,c,this.GetAngle())};goog.exportProperty(box2d.b2Body.prototype,"SetPositionXY",box2d.b2Body.prototype.SetPositionXY);box2d.b2Body.prototype.GetRotation=function(a){a=a||this.m_out_xf.q;return a.Copy(this.m_xf.q)};goog.exportProperty(box2d.b2Body.prototype,"GetRotation",box2d.b2Body.prototype.GetRotation);box2d.b2Body.prototype.SetRotation=function(a){this.SetTransform_V2_A(this.GetPosition(),a.GetAngle())};
goog.exportProperty(box2d.b2Body.prototype,"SetRotation",box2d.b2Body.prototype.SetRotation);box2d.b2Body.prototype.GetAngle=function(){return this.m_sweep.a};goog.exportProperty(box2d.b2Body.prototype,"GetAngle",box2d.b2Body.prototype.GetAngle);box2d.b2Body.prototype.SetAngle=function(a){this.SetTransform_V2_A(this.GetPosition(),a)};goog.exportProperty(box2d.b2Body.prototype,"SetAngle",box2d.b2Body.prototype.SetAngle);box2d.b2Body.prototype.GetWorldCenter=function(a){a=a||this.m_out_sweep.c;return a.Copy(this.m_sweep.c)};
goog.exportProperty(box2d.b2Body.prototype,"GetWorldCenter",box2d.b2Body.prototype.GetWorldCenter);box2d.b2Body.prototype.GetLocalCenter=function(a){a=a||this.m_out_sweep.localCenter;return a.Copy(this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalCenter",box2d.b2Body.prototype.GetLocalCenter);box2d.b2Body.prototype.SetLinearVelocity=function(a){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<box2d.b2Dot_V2_V2(a,a)&&this.SetAwake(!0),this.m_linearVelocity.Copy(a))};
goog.exportProperty(box2d.b2Body.prototype,"SetLinearVelocity",box2d.b2Body.prototype.SetLinearVelocity);box2d.b2Body.prototype.GetLinearVelocity=function(a){a=a||this.m_out_linearVelocity;return a.Copy(this.m_linearVelocity)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocity",box2d.b2Body.prototype.GetLinearVelocity);box2d.b2Body.prototype.SetAngularVelocity=function(a){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<a*a&&this.SetAwake(!0),this.m_angularVelocity=a)};
goog.exportProperty(box2d.b2Body.prototype,"SetAngularVelocity",box2d.b2Body.prototype.SetAngularVelocity);box2d.b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity};goog.exportProperty(box2d.b2Body.prototype,"GetAngularVelocity",box2d.b2Body.prototype.GetAngularVelocity);
box2d.b2Body.prototype.GetDefinition=function(a){a.type=this.GetType();a.allowSleep=this.m_flag_autoSleepFlag;a.angle=this.GetAngle();a.angularDamping=this.m_angularDamping;a.gravityScale=this.m_gravityScale;a.angularVelocity=this.m_angularVelocity;a.fixedRotation=this.m_flag_fixedRotationFlag;a.bullet=this.m_flag_bulletFlag;a.awake=this.m_flag_awakeFlag;a.linearDamping=this.m_linearDamping;a.linearVelocity.Copy(this.GetLinearVelocity());a.position.Copy(this.GetPosition());a.userData=this.GetUserData();
return a};goog.exportProperty(box2d.b2Body.prototype,"GetDefinition",box2d.b2Body.prototype.GetDefinition);box2d.b2Body.prototype.ApplyForce=function(a,c,b){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_force.x+=a.x,this.m_force.y+=a.y,this.m_torque+=(c.x-this.m_sweep.c.x)*a.y-(c.y-this.m_sweep.c.y)*a.x))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForce",box2d.b2Body.prototype.ApplyForce);
box2d.b2Body.prototype.ApplyForceToCenter=function(a,c){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"===typeof c?c:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_force.x+=a.x,this.m_force.y+=a.y))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForceToCenter",box2d.b2Body.prototype.ApplyForceToCenter);
box2d.b2Body.prototype.ApplyTorque=function(a,c){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"===typeof c?c:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_torque+=a))};goog.exportProperty(box2d.b2Body.prototype,"ApplyTorque",box2d.b2Body.prototype.ApplyTorque);
box2d.b2Body.prototype.ApplyLinearImpulse=function(a,c,b){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"===typeof b?b:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*a.x,this.m_linearVelocity.y+=this.m_invMass*a.y,this.m_angularVelocity+=this.m_invI*((c.x-this.m_sweep.c.x)*a.y-(c.y-this.m_sweep.c.y)*a.x)))};goog.exportProperty(box2d.b2Body.prototype,"ApplyLinearImpulse",box2d.b2Body.prototype.ApplyLinearImpulse);
box2d.b2Body.prototype.ApplyAngularImpulse=function(a,c){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"===typeof c?c:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_angularVelocity+=this.m_invI*a))};goog.exportProperty(box2d.b2Body.prototype,"ApplyAngularImpulse",box2d.b2Body.prototype.ApplyAngularImpulse);box2d.b2Body.prototype.GetMass=function(){return this.m_mass};goog.exportProperty(box2d.b2Body.prototype,"GetMass",box2d.b2Body.prototype.GetMass);
box2d.b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*box2d.b2Dot_V2_V2(this.m_sweep.localCenter,this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetInertia",box2d.b2Body.prototype.GetInertia);box2d.b2Body.prototype.GetMassData=function(a){a.mass=this.m_mass;a.I=this.m_I+this.m_mass*box2d.b2Dot_V2_V2(this.m_sweep.localCenter,this.m_sweep.localCenter);a.center.Copy(this.m_sweep.localCenter);return a};
goog.exportProperty(box2d.b2Body.prototype,"GetMassData",box2d.b2Body.prototype.GetMassData);
box2d.b2Body.prototype.SetMassData=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(!this.m_world.IsLocked()&&this.m_type===box2d.b2BodyType.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0;this.m_mass=a.mass;0>=this.m_mass&&(this.m_mass=1);this.m_invMass=1/this.m_mass;0<a.I&&!this.m_flag_fixedRotationFlag&&(this.m_I=a.I-this.m_mass*box2d.b2Dot_V2_V2(a.center,a.center),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I);var c=box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c);
this.m_sweep.localCenter.Copy(a.center);box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(this.m_sweep.c,c,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"SetMassData",box2d.b2Body.prototype.SetMassData);box2d.b2Body.prototype.SetMassData.s_oldCenter=new box2d.b2Vec2;
box2d.b2Body.prototype.ResetMassData=function(){this.m_invI=this.m_I=this.m_invMass=this.m_mass=0;this.m_sweep.localCenter.SetZero();if(this.m_type===box2d.b2BodyType.b2_staticBody||this.m_type===box2d.b2BodyType.b2_kinematicBody)this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a;else{box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===box2d.b2BodyType.b2_dynamicBody);for(var a=box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(),c=this.m_fixtureList;c;c=
c.m_next)if(0!==c.m_density){var b=c.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData);this.m_mass+=b.mass;a.x+=b.center.x*b.mass;a.y+=b.center.y*b.mass;this.m_I+=b.I}0<this.m_mass?(this.m_invMass=1/this.m_mass,a.x*=this.m_invMass,a.y*=this.m_invMass):this.m_invMass=this.m_mass=1;0<this.m_I&&!this.m_flag_fixedRotationFlag?(this.m_I-=this.m_mass*box2d.b2Dot_V2_V2(a,a),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0;c=box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c);
this.m_sweep.localCenter.Copy(a);box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(this.m_sweep.c,c,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"ResetMassData",box2d.b2Body.prototype.ResetMassData);box2d.b2Body.prototype.ResetMassData.s_localCenter=new box2d.b2Vec2;
box2d.b2Body.prototype.ResetMassData.s_oldCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData.s_massData=new box2d.b2MassData;box2d.b2Body.prototype.GetWorldPoint=function(a,c){return box2d.b2Mul_X_V2(this.m_xf,a,c)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldPoint",box2d.b2Body.prototype.GetWorldPoint);box2d.b2Body.prototype.GetWorldVector=function(a,c){return box2d.b2Mul_R_V2(this.m_xf.q,a,c)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldVector",box2d.b2Body.prototype.GetWorldVector);
box2d.b2Body.prototype.GetLocalPoint=function(a,c){return box2d.b2MulT_X_V2(this.m_xf,a,c)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalPoint",box2d.b2Body.prototype.GetLocalPoint);box2d.b2Body.prototype.GetLocalVector=function(a,c){return box2d.b2MulT_R_V2(this.m_xf.q,a,c)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalVector",box2d.b2Body.prototype.GetLocalVector);
box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint=function(a,c){return box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(a,this.m_sweep.c,box2d.b2Vec2.s_t0),c)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint);box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint=function(a,c){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(a,c),c)};
goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromLocalPoint",box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint);box2d.b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping};goog.exportProperty(box2d.b2Body.prototype,"GetLinearDamping",box2d.b2Body.prototype.GetLinearDamping);box2d.b2Body.prototype.SetLinearDamping=function(a){this.m_linearDamping=a};goog.exportProperty(box2d.b2Body.prototype,"SetLinearDamping",box2d.b2Body.prototype.SetLinearDamping);
box2d.b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping};goog.exportProperty(box2d.b2Body.prototype,"GetAngularDamping",box2d.b2Body.prototype.GetAngularDamping);box2d.b2Body.prototype.SetAngularDamping=function(a){this.m_angularDamping=a};goog.exportProperty(box2d.b2Body.prototype,"SetAngularDamping",box2d.b2Body.prototype.SetAngularDamping);box2d.b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale};
goog.exportProperty(box2d.b2Body.prototype,"GetGravityScale",box2d.b2Body.prototype.GetGravityScale);box2d.b2Body.prototype.SetGravityScale=function(a){this.m_gravityScale=a};goog.exportProperty(box2d.b2Body.prototype,"SetGravityScale",box2d.b2Body.prototype.SetGravityScale);
box2d.b2Body.prototype.SetType=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(!this.m_world.IsLocked()&&this.m_type!==a){this.m_type=a;this.ResetMassData();this.m_type===box2d.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures());this.SetAwake(!0);this.m_force.SetZero();this.m_torque=0;for(a=this.m_contactList;a;){var c=a;a=a.next;this.m_world.m_contactManager.Destroy(c.contact)}this.m_contactList=
null;a=this.m_world.m_contactManager.m_broadPhase;for(c=this.m_fixtureList;c;c=c.m_next)for(var b=c.m_proxyCount,d=0;d<b;++d)a.TouchProxy(c.m_proxies[d].proxy)}};goog.exportProperty(box2d.b2Body.prototype,"SetType",box2d.b2Body.prototype.SetType);box2d.b2Body.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Body.prototype,"GetType",box2d.b2Body.prototype.GetType);box2d.b2Body.prototype.SetBullet=function(a){this.m_flag_bulletFlag=a};
goog.exportProperty(box2d.b2Body.prototype,"SetBullet",box2d.b2Body.prototype.SetBullet);box2d.b2Body.prototype.IsBullet=function(){return this.m_flag_bulletFlag};goog.exportProperty(box2d.b2Body.prototype,"IsBullet",box2d.b2Body.prototype.IsBullet);box2d.b2Body.prototype.SetSleepingAllowed=function(a){a?this.m_flag_autoSleepFlag=!0:(this.m_flag_autoSleepFlag=!1,this.SetAwake(!0))};goog.exportProperty(box2d.b2Body.prototype,"SetSleepingAllowed",box2d.b2Body.prototype.SetSleepingAllowed);
box2d.b2Body.prototype.IsSleepingAllowed=function(){return this.m_flag_autoSleepFlag};goog.exportProperty(box2d.b2Body.prototype,"IsSleepingAllowed",box2d.b2Body.prototype.IsSleepingAllowed);box2d.b2Body.prototype.SetAwake=function(a){a?this.m_flag_awakeFlag||(this.m_flag_awakeFlag=!0,this.m_sleepTime=0):(this.m_flag_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)};
goog.exportProperty(box2d.b2Body.prototype,"SetAwake",box2d.b2Body.prototype.SetAwake);box2d.b2Body.prototype.IsAwake=function(){return this.m_flag_awakeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsAwake",box2d.b2Body.prototype.IsAwake);
box2d.b2Body.prototype.SetActive=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked());if(a!==this.IsActive())if(a){this.m_flag_activeFlag=!0;a=this.m_world.m_contactManager.m_broadPhase;for(var c=this.m_fixtureList;c;c=c.m_next)c.CreateProxies(a,this.m_xf)}else{this.m_flag_activeFlag=!1;a=this.m_world.m_contactManager.m_broadPhase;for(c=this.m_fixtureList;c;c=c.m_next)c.DestroyProxies(a);for(a=this.m_contactList;a;)c=a,a=a.next,this.m_world.m_contactManager.Destroy(c.contact);
this.m_contactList=null}};goog.exportProperty(box2d.b2Body.prototype,"SetActive",box2d.b2Body.prototype.SetActive);box2d.b2Body.prototype.IsActive=function(){return this.m_flag_activeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsActive",box2d.b2Body.prototype.IsActive);box2d.b2Body.prototype.SetFixedRotation=function(a){this.m_flag_fixedRotationFlag!==a&&(this.m_flag_fixedRotationFlag=a,this.m_angularVelocity=0,this.ResetMassData())};
goog.exportProperty(box2d.b2Body.prototype,"SetFixedRotation",box2d.b2Body.prototype.SetFixedRotation);box2d.b2Body.prototype.IsFixedRotation=function(){return this.m_flag_fixedRotationFlag};goog.exportProperty(box2d.b2Body.prototype,"IsFixedRotation",box2d.b2Body.prototype.IsFixedRotation);box2d.b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList};goog.exportProperty(box2d.b2Body.prototype,"GetFixtureList",box2d.b2Body.prototype.GetFixtureList);
box2d.b2Body.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2Body.prototype,"GetJointList",box2d.b2Body.prototype.GetJointList);box2d.b2Body.prototype.GetContactList=function(){return this.m_contactList};goog.exportProperty(box2d.b2Body.prototype,"GetContactList",box2d.b2Body.prototype.GetContactList);box2d.b2Body.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Body.prototype,"GetNext",box2d.b2Body.prototype.GetNext);
box2d.b2Body.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Body.prototype,"GetUserData",box2d.b2Body.prototype.GetUserData);box2d.b2Body.prototype.SetUserData=function(a){this.m_userData=a};goog.exportProperty(box2d.b2Body.prototype,"SetUserData",box2d.b2Body.prototype.SetUserData);box2d.b2Body.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Body.prototype,"GetWorld",box2d.b2Body.prototype.GetWorld);
box2d.b2Body.prototype.SynchronizeFixtures=function(){var a=box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;a.q.SetAngle(this.m_sweep.a0);box2d.b2Mul_R_V2(a.q,this.m_sweep.localCenter,a.p);box2d.b2Sub_V2_V2(this.m_sweep.c0,a.p,a.p);for(var c=this.m_world.m_contactManager.m_broadPhase,b=this.m_fixtureList;b;b=b.m_next)b.Synchronize(c,a,this.m_xf)};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeFixtures",box2d.b2Body.prototype.SynchronizeFixtures);
box2d.b2Body.prototype.SynchronizeFixtures.s_xf1=new box2d.b2Transform;box2d.b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngle(this.m_sweep.a);box2d.b2Mul_R_V2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2Sub_V2_V2(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeTransform",box2d.b2Body.prototype.SynchronizeTransform);
box2d.b2Body.prototype.ShouldCollide=function(a){if(this.m_type!==box2d.b2BodyType.b2_dynamicBody&&a.m_type!==box2d.b2BodyType.b2_dynamicBody)return!1;for(var c=this.m_jointList;c;c=c.next)if(c.other===a&&!c.joint.m_collideConnected)return!1;return!0};goog.exportProperty(box2d.b2Body.prototype,"ShouldCollide",box2d.b2Body.prototype.ShouldCollide);
box2d.b2Body.prototype.Advance=function(a){this.m_sweep.Advance(a);this.m_sweep.c.Copy(this.m_sweep.c0);this.m_sweep.a=this.m_sweep.a0;this.m_xf.q.SetAngle(this.m_sweep.a);box2d.b2Mul_R_V2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2Sub_V2_V2(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"Advance",box2d.b2Body.prototype.Advance);
box2d.b2Body.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_islandIndex;box2d.b2Log("{\n");box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n");var c="";switch(this.m_type){case box2d.b2BodyType.b2_staticBody:c="box2d.b2BodyType.b2_staticBody";break;case box2d.b2BodyType.b2_kinematicBody:c="box2d.b2BodyType.b2_kinematicBody";break;case box2d.b2BodyType.b2_dynamicBody:c="box2d.b2BodyType.b2_dynamicBody";break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}box2d.b2Log("  bd.type = %s;\n",
c);box2d.b2Log("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y);box2d.b2Log("  bd.angle = %.15f;\n",this.m_sweep.a);box2d.b2Log("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y);box2d.b2Log("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity);box2d.b2Log("  bd.linearDamping = %.15f;\n",this.m_linearDamping);box2d.b2Log("  bd.angularDamping = %.15f;\n",this.m_angularDamping);box2d.b2Log("  bd.allowSleep = %s;\n",this.m_flag_autoSleepFlag?
"true":"false");box2d.b2Log("  bd.awake = %s;\n",this.m_flag_awakeFlag?"true":"false");box2d.b2Log("  bd.fixedRotation = %s;\n",this.m_flag_fixedRotationFlag?"true":"false");box2d.b2Log("  bd.bullet = %s;\n",this.m_flag_bulletFlag?"true":"false");box2d.b2Log("  bd.active = %s;\n",this.m_flag_activeFlag?"true":"false");box2d.b2Log("  bd.gravityScale = %.15f;\n",this.m_gravityScale);box2d.b2Log("\n");box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex);box2d.b2Log("\n");for(c=
this.m_fixtureList;c;c=c.m_next)box2d.b2Log("  {\n"),c.Dump(a),box2d.b2Log("  }\n");box2d.b2Log("}\n")}};goog.exportProperty(box2d.b2Body.prototype,"Dump",box2d.b2Body.prototype.Dump);box2d.b2Body.prototype.GetControllerList=function(){return this.m_controllerList};goog.exportProperty(box2d.b2Body.prototype,"GetControllerList",box2d.b2Body.prototype.GetControllerList);box2d.b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount};
goog.exportProperty(box2d.b2Body.prototype,"GetControllerCount",box2d.b2Body.prototype.GetControllerCount);box2d.b2Profile=function(){};goog.exportSymbol("box2d.b2Profile",box2d.b2Profile);box2d.b2Profile.prototype.step=0;goog.exportProperty(box2d.b2Profile.prototype,"step",box2d.b2Profile.prototype.step);box2d.b2Profile.prototype.collide=0;goog.exportProperty(box2d.b2Profile.prototype,"collide",box2d.b2Profile.prototype.collide);box2d.b2Profile.prototype.solve=0;goog.exportProperty(box2d.b2Profile.prototype,"solve",box2d.b2Profile.prototype.solve);box2d.b2Profile.prototype.solveInit=0;
goog.exportProperty(box2d.b2Profile.prototype,"solveInit",box2d.b2Profile.prototype.solveInit);box2d.b2Profile.prototype.solveVelocity=0;goog.exportProperty(box2d.b2Profile.prototype,"solveVelocity",box2d.b2Profile.prototype.solveVelocity);box2d.b2Profile.prototype.solvePosition=0;goog.exportProperty(box2d.b2Profile.prototype,"solvePosition",box2d.b2Profile.prototype.solvePosition);box2d.b2Profile.prototype.broadphase=0;goog.exportProperty(box2d.b2Profile.prototype,"broadphase",box2d.b2Profile.prototype.broadphase);
box2d.b2Profile.prototype.solveTOI=0;goog.exportProperty(box2d.b2Profile.prototype,"solveTOI",box2d.b2Profile.prototype.solveTOI);box2d.b2Profile.prototype.Reset=function(){this.solveTOI=this.broadphase=this.solvePosition=this.solveVelocity=this.solveInit=this.solve=this.collide=this.step=0;return this};goog.exportProperty(box2d.b2Profile.prototype,"Reset",box2d.b2Profile.prototype.Reset);box2d.b2TimeStep=function(){};goog.exportSymbol("box2d.b2TimeStep",box2d.b2TimeStep);
box2d.b2TimeStep.prototype.dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dt",box2d.b2TimeStep.prototype.dt);box2d.b2TimeStep.prototype.inv_dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"inv_dt",box2d.b2TimeStep.prototype.inv_dt);box2d.b2TimeStep.prototype.dtRatio=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dtRatio",box2d.b2TimeStep.prototype.dtRatio);box2d.b2TimeStep.prototype.velocityIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"velocityIterations",box2d.b2TimeStep.prototype.velocityIterations);
box2d.b2TimeStep.prototype.positionIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"positionIterations",box2d.b2TimeStep.prototype.positionIterations);box2d.b2TimeStep.prototype.particleIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"particleIterations",box2d.b2TimeStep.prototype.particleIterations);box2d.b2TimeStep.prototype.warmStarting=!1;goog.exportProperty(box2d.b2TimeStep.prototype,"warmStarting",box2d.b2TimeStep.prototype.warmStarting);
box2d.b2TimeStep.prototype.Copy=function(a){this.dt=a.dt;this.inv_dt=a.inv_dt;this.dtRatio=a.dtRatio;this.positionIterations=a.positionIterations;this.velocityIterations=a.velocityIterations;this.particleIterations=a.particleIterations;this.warmStarting=a.warmStarting;return this};goog.exportProperty(box2d.b2TimeStep.prototype,"Copy",box2d.b2TimeStep.prototype.Copy);box2d.b2Position=function(){this.c=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Position",box2d.b2Position);
box2d.b2Position.prototype.c=null;goog.exportProperty(box2d.b2Position.prototype,"c",box2d.b2Position.prototype.c);box2d.b2Position.prototype.a=0;goog.exportProperty(box2d.b2Position.prototype,"a",box2d.b2Position.prototype.a);box2d.b2Position.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2Position})};goog.exportProperty(box2d.b2Position,"MakeArray",box2d.b2Position.MakeArray);box2d.b2Velocity=function(){this.v=new box2d.b2Vec2};
goog.exportSymbol("box2d.b2Velocity",box2d.b2Velocity);box2d.b2Velocity.prototype.v=null;goog.exportProperty(box2d.b2Velocity.prototype,"v",box2d.b2Velocity.prototype.v);box2d.b2Velocity.prototype.w=0;goog.exportProperty(box2d.b2Velocity.prototype,"w",box2d.b2Velocity.prototype.w);box2d.b2Velocity.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2Velocity})};goog.exportProperty(box2d.b2Velocity,"MakeArray",box2d.b2Velocity.MakeArray);
box2d.b2SolverData=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2SolverData",box2d.b2SolverData);box2d.b2SolverData.prototype.step=null;goog.exportProperty(box2d.b2SolverData.prototype,"step",box2d.b2SolverData.prototype.step);box2d.b2SolverData.prototype.positions=null;goog.exportProperty(box2d.b2SolverData.prototype,"positions",box2d.b2SolverData.prototype.positions);box2d.b2SolverData.prototype.velocities=null;
goog.exportProperty(box2d.b2SolverData.prototype,"velocities",box2d.b2SolverData.prototype.velocities);box2d.b2WorldCallbacks={};box2d.b2DestructionListener=function(){};goog.exportSymbol("box2d.b2DestructionListener",box2d.b2DestructionListener);box2d.b2DestructionListener.prototype.SayGoodbyeJoint=function(a){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeJoint",box2d.b2DestructionListener.prototype.SayGoodbyeJoint);box2d.b2DestructionListener.prototype.SayGoodbyeFixture=function(a){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeFixture",box2d.b2DestructionListener.prototype.SayGoodbyeFixture);
box2d.b2DestructionListener.prototype.SayGoodbyeParticleGroup=function(a){};box2d.b2DestructionListener.prototype.SayGoodbyeParticle=function(a,c){};box2d.b2ContactFilter=function(){};goog.exportSymbol("box2d.b2ContactFilter",box2d.b2ContactFilter);box2d.b2ContactFilter.prototype.ShouldCollide=function(a,c){var b=a.GetFilterData(),d=c.GetFilterData();return b.groupIndex===d.groupIndex&&0!==b.groupIndex?0<b.groupIndex:0!==(b.maskBits&d.categoryBits)&&0!==(b.categoryBits&d.maskBits)};
goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollide",box2d.b2ContactFilter.prototype.ShouldCollide);box2d.b2ContactFilter.prototype.ShouldCollideFixtureParticle=function(a,c,b){return!0};goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollideFixtureParticle",box2d.b2ContactFilter.prototype.ShouldCollideFixtureParticle);box2d.b2ContactFilter.prototype.ShouldCollideParticleParticle=function(a,c,b){return!0};
goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollideParticleParticle",box2d.b2ContactFilter.prototype.ShouldCollideParticleParticle);box2d.b2ContactFilter.b2_defaultFilter=new box2d.b2ContactFilter;box2d.b2ContactImpulse=function(){this.normalImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints);this.tangentImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2ContactImpulse",box2d.b2ContactImpulse);
box2d.b2ContactImpulse.prototype.normalImpulses=null;goog.exportProperty(box2d.b2ContactImpulse.prototype,"normalImpulses",box2d.b2ContactImpulse.prototype.normalImpulses);box2d.b2ContactImpulse.prototype.tangentImpulses=null;goog.exportProperty(box2d.b2ContactImpulse.prototype,"tangentImpulses",box2d.b2ContactImpulse.prototype.tangentImpulses);box2d.b2ContactImpulse.prototype.count=0;goog.exportProperty(box2d.b2ContactImpulse.prototype,"count",box2d.b2ContactImpulse.prototype.count);
box2d.b2ContactListener=function(){};goog.exportSymbol("box2d.b2ContactListener",box2d.b2ContactListener);box2d.b2ContactListener.prototype.BeginContact=function(a){};goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContact",box2d.b2ContactListener.prototype.BeginContact);box2d.b2ContactListener.prototype.EndContact=function(a){};goog.exportProperty(box2d.b2ContactListener.prototype,"EndContact",box2d.b2ContactListener.prototype.EndContact);
box2d.b2ContactListener.prototype.BeginContactFixtureParticle=function(a,c){};goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContactFixtureParticle",box2d.b2ContactListener.prototype.BeginContactFixtureParticle);box2d.b2ContactListener.prototype.EndContactFixtureParticle=function(a,c,b){};goog.exportProperty(box2d.b2ContactListener.prototype,"EndContactFixtureParticle",box2d.b2ContactListener.prototype.EndContactFixtureParticle);
box2d.b2ContactListener.prototype.BeginContactParticleParticle=function(a,c){};goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContactParticleParticle",box2d.b2ContactListener.prototype.BeginContactParticleParticle);box2d.b2ContactListener.prototype.EndContactParticleParticle=function(a,c,b){};goog.exportProperty(box2d.b2ContactListener.prototype,"EndContactParticleParticle",box2d.b2ContactListener.prototype.EndContactParticleParticle);
box2d.b2ContactListener.prototype.PreSolve=function(a,c){};goog.exportProperty(box2d.b2ContactListener.prototype,"PreSolve",box2d.b2ContactListener.prototype.PreSolve);box2d.b2ContactListener.prototype.PostSolve=function(a,c){};goog.exportProperty(box2d.b2ContactListener.prototype,"PostSolve",box2d.b2ContactListener.prototype.PostSolve);box2d.b2ContactListener.b2_defaultListener=new box2d.b2ContactListener;goog.exportProperty(box2d.b2ContactListener,"b2_defaultListener",box2d.b2ContactListener.b2_defaultListener);
box2d.b2QueryCallback=function(){};goog.exportSymbol("box2d.b2QueryCallback",box2d.b2QueryCallback);box2d.b2QueryCallback.prototype.ReportFixture=function(a){return!0};goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportFixture",box2d.b2QueryCallback.prototype.ReportFixture);box2d.b2QueryCallback.prototype.ReportParticle=function(a,c){return!1};goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportParticle",box2d.b2QueryCallback.prototype.ReportParticle);
box2d.b2QueryCallback.prototype.ShouldQueryParticleSystem=function(a){return!0};goog.exportProperty(box2d.b2QueryCallback.prototype,"ShouldQueryParticleSystem",box2d.b2QueryCallback.prototype.ShouldQueryParticleSystem);box2d.b2RayCastCallback=function(){};goog.exportSymbol("box2d.b2RayCastCallback",box2d.b2RayCastCallback);box2d.b2RayCastCallback.prototype.ReportFixture=function(a,c,b,d){return d};goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportFixture",box2d.b2RayCastCallback.prototype.ReportFixture);
box2d.b2RayCastCallback.prototype.ReportParticle=function(a,c,b,d,e){return 0};goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportParticle",box2d.b2RayCastCallback.prototype.ReportParticle);box2d.b2RayCastCallback.prototype.ShouldQueryParticleSystem=function(a){return!0};goog.exportProperty(box2d.b2RayCastCallback.prototype,"ShouldQueryParticleSystem",box2d.b2RayCastCallback.prototype.ShouldQueryParticleSystem);box2d.b2BuoyancyController=function(){box2d.b2Controller.call(this);this.normal=new box2d.b2Vec2(0,1);this.velocity=new box2d.b2Vec2(0,0);this.gravity=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2BuoyancyController,box2d.b2Controller);goog.exportSymbol("box2d.b2BuoyancyController",box2d.b2BuoyancyController);box2d.b2BuoyancyController.prototype.normal=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"normal",box2d.b2BuoyancyController.prototype.normal);
box2d.b2BuoyancyController.prototype.offset=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"offset",box2d.b2BuoyancyController.prototype.offset);box2d.b2BuoyancyController.prototype.density=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"density",box2d.b2BuoyancyController.prototype.density);box2d.b2BuoyancyController.prototype.velocity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"velocity",box2d.b2BuoyancyController.prototype.velocity);
box2d.b2BuoyancyController.prototype.linearDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"linearDrag",box2d.b2BuoyancyController.prototype.linearDrag);box2d.b2BuoyancyController.prototype.angularDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"angularDrag",box2d.b2BuoyancyController.prototype.angularDrag);box2d.b2BuoyancyController.prototype.useDensity=!1;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useDensity",box2d.b2BuoyancyController.prototype.useDensity);
box2d.b2BuoyancyController.prototype.useWorldGravity=!0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useWorldGravity",box2d.b2BuoyancyController.prototype.useWorldGravity);box2d.b2BuoyancyController.prototype.gravity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"gravity",box2d.b2BuoyancyController.prototype.gravity);
box2d.b2BuoyancyController.prototype.Step=function(a){if(this.m_bodyList)for(this.useWorldGravity&&this.gravity.Copy(this.GetWorld().GetGravity()),a=this.m_bodyList;a;a=a.nextBody){var c=a.body;if(c.IsAwake()){for(var b=new box2d.b2Vec2,d=new box2d.b2Vec2,e=0,f=0,g=c.GetFixtureList();g;g=g.m_next){var h=new box2d.b2Vec2,k=g.GetShape().ComputeSubmergedArea(this.normal,this.offset,c.GetTransform(),h),e=e+k;b.x+=k*h.x;b.y+=k*h.y;var l=0,l=this.useDensity?g.GetDensity():1,f=f+k*l;d.x+=k*h.x*l;d.y+=k*
h.y*l}b.x/=e;b.y/=e;d.x/=f;d.y/=f;e<box2d.b2_epsilon||(f=this.gravity.Clone().SelfNeg(),f.SelfMul(this.density*e),c.ApplyForce(f,d),d=c.GetLinearVelocityFromWorldPoint(b,new box2d.b2Vec2),d.SelfSub(this.velocity),d.SelfMul(-this.linearDrag*e),c.ApplyForce(d,b),c.ApplyTorque(-c.GetInertia()/c.GetMass()*e*c.GetAngularVelocity()*this.angularDrag))}}};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Step",box2d.b2BuoyancyController.prototype.Step);
box2d.b2BuoyancyController.prototype.Draw=function(a){var c=new box2d.b2Vec2,b=new box2d.b2Vec2;c.x=this.normal.x*this.offset+100*this.normal.y;c.y=this.normal.y*this.offset-100*this.normal.x;b.x=this.normal.x*this.offset-100*this.normal.y;b.y=this.normal.y*this.offset+100*this.normal.x;var d=new box2d.b2Color(0,0,.8);a.DrawSegment(c,b,d)};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Draw",box2d.b2BuoyancyController.prototype.Draw);box2d.b2MixFriction=function(a,c){return box2d.b2Sqrt(a*c)};goog.exportSymbol("box2d.b2MixFriction",box2d.b2MixFriction);box2d.b2MixRestitution=function(a,c){return a>c?a:c};goog.exportSymbol("box2d.b2MixRestitution",box2d.b2MixRestitution);box2d.b2ContactEdge=function(){};goog.exportSymbol("box2d.b2ContactEdge",box2d.b2ContactEdge);box2d.b2ContactEdge.prototype.other=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"other",box2d.b2ContactEdge.prototype.other);
box2d.b2ContactEdge.prototype.contact=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"contact",box2d.b2ContactEdge.prototype.contact);box2d.b2ContactEdge.prototype.prev=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"prev",box2d.b2ContactEdge.prototype.prev);box2d.b2ContactEdge.prototype.next=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"next",box2d.b2ContactEdge.prototype.next);
box2d.b2Contact=function(){this.m_nodeA=new box2d.b2ContactEdge;this.m_nodeB=new box2d.b2ContactEdge;this.m_manifold=new box2d.b2Manifold;this.m_oldManifold=new box2d.b2Manifold};goog.exportSymbol("box2d.b2Contact",box2d.b2Contact);box2d.b2Contact.prototype.m_flag_islandFlag=!1;goog.exportProperty(box2d.b2Contact.prototype,"m_flag_islandFlag",box2d.b2Contact.prototype.m_flag_islandFlag);box2d.b2Contact.prototype.m_flag_touchingFlag=!1;
goog.exportProperty(box2d.b2Contact.prototype,"m_flag_touchingFlag",box2d.b2Contact.prototype.m_flag_touchingFlag);box2d.b2Contact.prototype.m_flag_enabledFlag=!1;goog.exportProperty(box2d.b2Contact.prototype,"m_flag_enabledFlag",box2d.b2Contact.prototype.m_flag_enabledFlag);box2d.b2Contact.prototype.m_flag_filterFlag=!1;goog.exportProperty(box2d.b2Contact.prototype,"m_flag_filterFlag",box2d.b2Contact.prototype.m_flag_filterFlag);box2d.b2Contact.prototype.m_flag_bulletHitFlag=!1;
goog.exportProperty(box2d.b2Contact.prototype,"m_flag_bulletHitFlag",box2d.b2Contact.prototype.m_flag_bulletHitFlag);box2d.b2Contact.prototype.m_flag_toiFlag=!1;goog.exportProperty(box2d.b2Contact.prototype,"m_flag_toiFlag",box2d.b2Contact.prototype.m_flag_toiFlag);box2d.b2Contact.prototype.m_prev=null;goog.exportProperty(box2d.b2Contact.prototype,"m_prev",box2d.b2Contact.prototype.m_prev);box2d.b2Contact.prototype.m_next=null;goog.exportProperty(box2d.b2Contact.prototype,"m_next",box2d.b2Contact.prototype.m_next);
box2d.b2Contact.prototype.m_nodeA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeA",box2d.b2Contact.prototype.m_nodeA);box2d.b2Contact.prototype.m_nodeB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeB",box2d.b2Contact.prototype.m_nodeB);box2d.b2Contact.prototype.m_fixtureA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureA",box2d.b2Contact.prototype.m_fixtureA);box2d.b2Contact.prototype.m_fixtureB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureB",box2d.b2Contact.prototype.m_fixtureB);
box2d.b2Contact.prototype.m_indexA=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexA",box2d.b2Contact.prototype.m_indexA);box2d.b2Contact.prototype.m_indexB=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexB",box2d.b2Contact.prototype.m_indexB);box2d.b2Contact.prototype.m_manifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_manifold",box2d.b2Contact.prototype.m_manifold);box2d.b2Contact.prototype.m_toiCount=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toiCount",box2d.b2Contact.prototype.m_toiCount);
box2d.b2Contact.prototype.m_toi=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toi",box2d.b2Contact.prototype.m_toi);box2d.b2Contact.prototype.m_friction=0;goog.exportProperty(box2d.b2Contact.prototype,"m_friction",box2d.b2Contact.prototype.m_friction);box2d.b2Contact.prototype.m_restitution=0;goog.exportProperty(box2d.b2Contact.prototype,"m_restitution",box2d.b2Contact.prototype.m_restitution);box2d.b2Contact.prototype.m_tangentSpeed=0;
goog.exportProperty(box2d.b2Contact.prototype,"m_tangentSpeed",box2d.b2Contact.prototype.m_tangentSpeed);box2d.b2Contact.prototype.m_oldManifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_oldManifold",box2d.b2Contact.prototype.m_oldManifold);box2d.b2Contact.prototype.GetManifold=function(){return this.m_manifold};goog.exportProperty(box2d.b2Contact.prototype,"GetManifold",box2d.b2Contact.prototype.GetManifold);
box2d.b2Contact.prototype.GetWorldManifold=function(a){var c=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody(),d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();a.Initialize(this.m_manifold,c.GetTransform(),d.m_radius,b.GetTransform(),e.m_radius)};goog.exportProperty(box2d.b2Contact.prototype,"GetWorldManifold",box2d.b2Contact.prototype.GetWorldManifold);box2d.b2Contact.prototype.IsTouching=function(){return this.m_flag_touchingFlag};
goog.exportProperty(box2d.b2Contact.prototype,"IsTouching",box2d.b2Contact.prototype.IsTouching);box2d.b2Contact.prototype.SetEnabled=function(a){this.m_flag_enabledFlag=a};goog.exportProperty(box2d.b2Contact.prototype,"SetEnabled",box2d.b2Contact.prototype.SetEnabled);box2d.b2Contact.prototype.IsEnabled=function(){return this.m_flag_enabledFlag};goog.exportProperty(box2d.b2Contact.prototype,"IsEnabled",box2d.b2Contact.prototype.IsEnabled);box2d.b2Contact.prototype.GetNext=function(){return this.m_next};
goog.exportProperty(box2d.b2Contact.prototype,"GetNext",box2d.b2Contact.prototype.GetNext);box2d.b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA};goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureA",box2d.b2Contact.prototype.GetFixtureA);box2d.b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexA",box2d.b2Contact.prototype.GetChildIndexA);box2d.b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB};
goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureB",box2d.b2Contact.prototype.GetFixtureB);box2d.b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexB",box2d.b2Contact.prototype.GetChildIndexB);box2d.b2Contact.prototype.Evaluate=function(a,c,b){};goog.exportProperty(box2d.b2Contact.prototype,"Evaluate",box2d.b2Contact.prototype.Evaluate);
box2d.b2Contact.prototype.FlagForFiltering=function(){this.m_flag_filterFlag=!0};goog.exportProperty(box2d.b2Contact.prototype,"FlagForFiltering",box2d.b2Contact.prototype.FlagForFiltering);box2d.b2Contact.prototype.SetFriction=function(a){this.m_friction=a};goog.exportProperty(box2d.b2Contact.prototype,"SetFriction",box2d.b2Contact.prototype.SetFriction);box2d.b2Contact.prototype.GetFriction=function(){return this.m_friction};goog.exportProperty(box2d.b2Contact.prototype,"GetFriction",box2d.b2Contact.prototype.GetFriction);
box2d.b2Contact.prototype.ResetFriction=function(){this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)};goog.exportProperty(box2d.b2Contact.prototype,"ResetFriction",box2d.b2Contact.prototype.ResetFriction);box2d.b2Contact.prototype.SetRestitution=function(a){this.m_restitution=a};goog.exportProperty(box2d.b2Contact.prototype,"SetRestitution",box2d.b2Contact.prototype.SetRestitution);box2d.b2Contact.prototype.GetRestitution=function(){return this.m_restitution};
goog.exportProperty(box2d.b2Contact.prototype,"GetRestitution",box2d.b2Contact.prototype.GetRestitution);box2d.b2Contact.prototype.ResetRestitution=function(){this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"ResetRestitution",box2d.b2Contact.prototype.ResetRestitution);box2d.b2Contact.prototype.SetTangentSpeed=function(a){this.m_tangentSpeed=a};
goog.exportProperty(box2d.b2Contact.prototype,"SetTangentSpeed",box2d.b2Contact.prototype.SetTangentSpeed);box2d.b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed};goog.exportProperty(box2d.b2Contact.prototype,"GetTangentSpeed",box2d.b2Contact.prototype.GetTangentSpeed);
box2d.b2Contact.prototype.Reset=function(a,c,b,d){this.m_flag_enabledFlag=!0;this.m_fixtureA=a;this.m_fixtureB=b;this.m_indexA=c;this.m_indexB=d;this.m_manifold.pointCount=0;this.m_next=this.m_prev=null;this.m_nodeA.contact=null;this.m_nodeA.prev=null;this.m_nodeA.next=null;this.m_nodeA.other=null;this.m_nodeB.contact=null;this.m_nodeB.prev=null;this.m_nodeB.next=null;this.m_nodeB.other=null;this.m_toiCount=0;this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction);
this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"Reset",box2d.b2Contact.prototype.Reset);
box2d.b2Contact.prototype.Update=function(a){var c=this.m_oldManifold;this.m_oldManifold=this.m_manifold;this.m_manifold=c;this.m_flag_enabledFlag=!0;var b=!1,c=this.m_flag_touchingFlag,d=this.m_fixtureA.IsSensor(),e=this.m_fixtureB.IsSensor(),d=d||e,e=this.m_fixtureA.GetBody(),f=this.m_fixtureB.GetBody(),b=e.GetTransform(),g=f.GetTransform();if(d)e=this.m_fixtureA.GetShape(),f=this.m_fixtureB.GetShape(),b=box2d.b2TestOverlapShape(e,this.m_indexA,f,this.m_indexB,b,g),this.m_manifold.pointCount=0;
else{this.Evaluate(this.m_manifold,b,g);b=0<this.m_manifold.pointCount;for(g=0;g<this.m_manifold.pointCount;++g){var h=this.m_manifold.points[g];h.normalImpulse=0;h.tangentImpulse=0;for(var k=h.id,l=0;l<this.m_oldManifold.pointCount;++l){var m=this.m_oldManifold.points[l];if(m.id.key===k.key){h.normalImpulse=m.normalImpulse;h.tangentImpulse=m.tangentImpulse;break}}}b!==c&&(e.SetAwake(!0),f.SetAwake(!0))}this.m_flag_touchingFlag=b;!c&&b&&a&&a.BeginContact(this);c&&!b&&a&&a.EndContact(this);!d&&b&&
a&&a.PreSolve(this,this.m_oldManifold)};goog.exportProperty(box2d.b2Contact.prototype,"Update",box2d.b2Contact.prototype.Update);box2d.b2Contact.prototype.ComputeTOI=function(a,c){var b=box2d.b2Contact.prototype.ComputeTOI.s_input;b.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA);b.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB);b.sweepA.Copy(a);b.sweepB.Copy(c);b.tMax=box2d.b2_linearSlop;var d=box2d.b2Contact.prototype.ComputeTOI.s_output;box2d.b2TimeOfImpact(d,b);return d.t};
goog.exportProperty(box2d.b2Contact.prototype,"ComputeTOI",box2d.b2Contact.prototype.ComputeTOI);box2d.b2Contact.prototype.ComputeTOI.s_input=new box2d.b2TOIInput;box2d.b2Contact.prototype.ComputeTOI.s_output=new box2d.b2TOIOutput;box2d.b2ChainAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndCircleContact",box2d.b2ChainAndCircleContact);box2d.b2ChainAndCircleContact.Create=function(a){return new box2d.b2ChainAndCircleContact};goog.exportProperty(box2d.b2ChainAndCircleContact,"Create",box2d.b2ChainAndCircleContact.Create);box2d.b2ChainAndCircleContact.Destroy=function(a,c){};
goog.exportProperty(box2d.b2ChainAndCircleContact,"Destroy",box2d.b2ChainAndCircleContact.Destroy);
box2d.b2ChainAndCircleContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2CircleShape);var f=box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;(d instanceof box2d.b2ChainShape?d:null).GetChildEdge(f,this.m_indexA);box2d.b2CollideEdgeAndCircle(a,f,c,e instanceof box2d.b2CircleShape?e:null,b)};
goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Evaluate",box2d.b2ChainAndCircleContact.prototype.Evaluate);box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2ChainAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndPolygonContact",box2d.b2ChainAndPolygonContact);box2d.b2ChainAndPolygonContact.Create=function(a){return new box2d.b2ChainAndPolygonContact};goog.exportProperty(box2d.b2ChainAndPolygonContact,"Create",box2d.b2ChainAndPolygonContact.Create);box2d.b2ChainAndPolygonContact.Destroy=function(a,c){};
goog.exportProperty(box2d.b2ChainAndPolygonContact,"Destroy",box2d.b2ChainAndPolygonContact.Destroy);
box2d.b2ChainAndPolygonContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2PolygonShape);var f=box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;(d instanceof box2d.b2ChainShape?d:null).GetChildEdge(f,this.m_indexA);box2d.b2CollideEdgeAndPolygon(a,f,c,e instanceof box2d.b2PolygonShape?e:null,b)};
goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Evaluate",box2d.b2ChainAndPolygonContact.prototype.Evaluate);box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2CircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2CircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2CircleContact",box2d.b2CircleContact);box2d.b2CircleContact.Create=function(a){return new box2d.b2CircleContact};goog.exportProperty(box2d.b2CircleContact,"Create",box2d.b2CircleContact.Create);box2d.b2CircleContact.Destroy=function(a,c){};goog.exportProperty(box2d.b2CircleContact,"Destroy",box2d.b2CircleContact.Destroy);
box2d.b2CircleContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2CircleShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2CircleShape);box2d.b2CollideCircles(a,d instanceof box2d.b2CircleShape?d:null,c,e instanceof box2d.b2CircleShape?e:null,b)};goog.exportProperty(box2d.b2CircleContact.prototype,"Evaluate",box2d.b2CircleContact.prototype.Evaluate);box2d.b2ContactRegister=function(){};goog.exportSymbol("box2d.b2ContactRegister",box2d.b2ContactRegister);box2d.b2ContactRegister.prototype.createFcn=null;box2d.b2ContactRegister.prototype.destroyFcn=null;box2d.b2ContactRegister.prototype.primary=!1;box2d.b2ContactFactory=function(a){this.m_allocator=a;this.InitializeRegisters()};goog.exportSymbol("box2d.b2ContactFactory",box2d.b2ContactFactory);box2d.b2ContactFactory.prototype.m_allocator=null;
box2d.b2ContactFactory.prototype.AddType=function(a,c,b,d){var e=box2d.b2MakeArray(256,function(b){return a()});c=function(b){return 0<e.length?e.pop():a(b)};var f=function(a,b){e.push(a)};this.m_registers[b][d].pool=e;this.m_registers[b][d].createFcn=c;this.m_registers[b][d].destroyFcn=f;this.m_registers[b][d].primary=!0;b!==d&&(this.m_registers[d][b].pool=e,this.m_registers[d][b].createFcn=c,this.m_registers[d][b].destroyFcn=f,this.m_registers[d][b].primary=!1)};
goog.exportProperty(box2d.b2ContactFactory.prototype,"AddType",box2d.b2ContactFactory.prototype.AddType);
box2d.b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var a=0;a<box2d.b2ShapeType.e_shapeTypeCount;a++){this.m_registers[a]=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var c=0;c<box2d.b2ShapeType.e_shapeTypeCount;c++)this.m_registers[a][c]=new box2d.b2ContactRegister}this.AddType(box2d.b2CircleContact.Create,box2d.b2CircleContact.Destroy,box2d.b2ShapeType.e_circleShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonAndCircleContact.Create,
box2d.b2PolygonAndCircleContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonContact.Create,box2d.b2PolygonContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2EdgeAndCircleContact.Create,box2d.b2EdgeAndCircleContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2EdgeAndPolygonContact.Create,box2d.b2EdgeAndPolygonContact.Destroy,box2d.b2ShapeType.e_edgeShape,
box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2ChainAndCircleContact.Create,box2d.b2ChainAndCircleContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2ChainAndPolygonContact.Create,box2d.b2ChainAndPolygonContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2ContactFactory.prototype,"InitializeRegisters",box2d.b2ContactFactory.prototype.InitializeRegisters);
box2d.b2ContactFactory.prototype.Create=function(a,c,b,d){var e=a.GetType(),f=b.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=e&&e<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=f&&f<box2d.b2ShapeType.e_shapeTypeCount);e=this.m_registers[e][f];f=e.createFcn;return null!==f?(e.primary?(e=f(this.m_allocator),e.Reset(a,c,b,d)):(e=f(this.m_allocator),e.Reset(b,d,a,c)),e):null};goog.exportProperty(box2d.b2ContactFactory.prototype,"Create",box2d.b2ContactFactory.prototype.Create);
box2d.b2ContactFactory.prototype.Destroy=function(a){var c=a.m_fixtureA,b=a.m_fixtureB;0<a.m_manifold.pointCount&&!c.IsSensor()&&!b.IsSensor()&&(c.GetBody().SetAwake(!0),b.GetBody().SetAwake(!0));c=c.GetType();b=b.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=c&&b<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=c&&b<box2d.b2ShapeType.e_shapeTypeCount);b=this.m_registers[c][b].destroyFcn;b(a,this.m_allocator)};
goog.exportProperty(box2d.b2ContactFactory.prototype,"Destroy",box2d.b2ContactFactory.prototype.Destroy);box2d.b2ContactManager=function(){this.m_broadPhase=new box2d.b2BroadPhase;this.m_contactFactory=new box2d.b2ContactFactory(this.m_allocator)};box2d.b2ContactManager.prototype.m_broadPhase=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_broadPhase",box2d.b2ContactManager.prototype.m_broadPhase);box2d.b2ContactManager.prototype.m_contactList=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactList",box2d.b2ContactManager.prototype.m_contactList);
box2d.b2ContactManager.prototype.m_contactCount=0;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactCount",box2d.b2ContactManager.prototype.m_contactCount);box2d.b2ContactManager.prototype.m_contactFilter=box2d.b2ContactFilter.b2_defaultFilter;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFilter",box2d.b2ContactManager.prototype.m_contactFilter);box2d.b2ContactManager.prototype.m_contactListener=box2d.b2ContactListener.b2_defaultListener;
goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactListener",box2d.b2ContactManager.prototype.m_contactListener);box2d.b2ContactManager.prototype.m_allocator=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_allocator",box2d.b2ContactManager.prototype.m_allocator);box2d.b2ContactManager.prototype.m_contactFactory=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFactory",box2d.b2ContactManager.prototype.m_contactFactory);
box2d.b2ContactManager.prototype.Destroy=function(a){var c=a.GetFixtureA(),b=a.GetFixtureB(),c=c.GetBody(),b=b.GetBody();this.m_contactListener&&a.IsTouching()&&this.m_contactListener.EndContact(a);a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a===this.m_contactList&&(this.m_contactList=a.m_next);a.m_nodeA.prev&&(a.m_nodeA.prev.next=a.m_nodeA.next);a.m_nodeA.next&&(a.m_nodeA.next.prev=a.m_nodeA.prev);a.m_nodeA===c.m_contactList&&(c.m_contactList=a.m_nodeA.next);a.m_nodeB.prev&&
(a.m_nodeB.prev.next=a.m_nodeB.next);a.m_nodeB.next&&(a.m_nodeB.next.prev=a.m_nodeB.prev);a.m_nodeB===b.m_contactList&&(b.m_contactList=a.m_nodeB.next);this.m_contactFactory.Destroy(a);--this.m_contactCount};goog.exportSymbol("box2d.b2ContactManager.prototype.Destroy",box2d.b2ContactManager.prototype.Destroy);
box2d.b2ContactManager.prototype.Collide=function(){for(var a=this.m_contactList;a;){var c=a.GetFixtureA(),b=a.GetFixtureB(),d=a.GetChildIndexA(),e=a.GetChildIndexB(),f=c.GetBody(),g=b.GetBody();if(a.m_flag_filterFlag){if(!g.ShouldCollide(f)){c=a;a=c.m_next;this.Destroy(c);continue}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(c,b)){c=a;a=c.m_next;this.Destroy(c);continue}a.m_flag_filterFlag=!1}f=f.IsAwake()&&f.m_type!==box2d.b2BodyType.b2_staticBody;g=g.IsAwake()&&g.m_type!==box2d.b2BodyType.b2_staticBody;
f||g?this.m_broadPhase.TestOverlap(c.m_proxies[d].proxy,b.m_proxies[e].proxy)?(a.Update(this.m_contactListener),a=a.m_next):(c=a,a=c.m_next,this.Destroy(c)):a=a.m_next}};goog.exportSymbol("box2d.b2ContactManager.prototype.Collide",box2d.b2ContactManager.prototype.Collide);box2d.b2ContactManager.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this)};goog.exportSymbol("box2d.b2ContactManager.prototype.FindNewContacts",box2d.b2ContactManager.prototype.FindNewContacts);
box2d.b2ContactManager.prototype.AddPair=function(a,c){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2FixtureProxy);box2d.ENABLE_ASSERTS&&box2d.b2Assert(c instanceof box2d.b2FixtureProxy);var b=a.fixture,d=c.fixture,e=a.childIndex,f=c.childIndex,g=b.GetBody(),h=d.GetBody();if(g!==h){for(var k=h.GetContactList();k;){if(k.other===g){var l=k.contact.GetFixtureA(),m=k.contact.GetFixtureB(),n=k.contact.GetChildIndexA(),p=k.contact.GetChildIndexB();if(l===b&&m===d&&n===e&&p===f||l===d&&m===b&&
n===f&&p===e)return}k=k.next}!h.ShouldCollide(g)||this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(b,d)||(e=this.m_contactFactory.Create(b,e,d,f),null!==e&&(b=e.GetFixtureA(),d=e.GetFixtureB(),g=b.m_body,h=d.m_body,e.m_prev=null,e.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=e),this.m_contactList=e,e.m_nodeA.contact=e,e.m_nodeA.other=h,e.m_nodeA.prev=null,e.m_nodeA.next=g.m_contactList,null!==g.m_contactList&&(g.m_contactList.prev=e.m_nodeA),g.m_contactList=
e.m_nodeA,e.m_nodeB.contact=e,e.m_nodeB.other=g,e.m_nodeB.prev=null,e.m_nodeB.next=h.m_contactList,null!==h.m_contactList&&(h.m_contactList.prev=e.m_nodeB),h.m_contactList=e.m_nodeB,b.IsSensor()||d.IsSensor()||(g.SetAwake(!0),h.SetAwake(!0)),++this.m_contactCount))}};goog.exportSymbol("box2d.b2ContactManager.prototype.AddPair",box2d.b2ContactManager.prototype.AddPair);box2d.b2EdgeAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndCircleContact",box2d.b2EdgeAndCircleContact);box2d.b2EdgeAndCircleContact.Create=function(a){return new box2d.b2EdgeAndCircleContact};goog.exportProperty(box2d.b2EdgeAndCircleContact,"Create",box2d.b2EdgeAndCircleContact.Create);box2d.b2EdgeAndCircleContact.Destroy=function(a,c){};
goog.exportProperty(box2d.b2EdgeAndCircleContact,"Destroy",box2d.b2EdgeAndCircleContact.Destroy);box2d.b2EdgeAndCircleContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2CircleShape);box2d.b2CollideEdgeAndCircle(a,d instanceof box2d.b2EdgeShape?d:null,c,e instanceof box2d.b2CircleShape?e:null,b)};
goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Evaluate",box2d.b2EdgeAndCircleContact.prototype.Evaluate);box2d.b2EdgeAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndPolygonContact",box2d.b2EdgeAndPolygonContact);box2d.b2EdgeAndPolygonContact.Create=function(a){return new box2d.b2EdgeAndPolygonContact};goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Create",box2d.b2EdgeAndPolygonContact.Create);box2d.b2EdgeAndPolygonContact.Destroy=function(a,c){};
goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Destroy",box2d.b2EdgeAndPolygonContact.Destroy);box2d.b2EdgeAndPolygonContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2PolygonShape);box2d.b2CollideEdgeAndPolygon(a,d instanceof box2d.b2EdgeShape?d:null,c,e instanceof box2d.b2PolygonShape?e:null,b)};
goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Evaluate",box2d.b2EdgeAndPolygonContact.prototype.Evaluate);box2d.b2PolygonAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonAndCircleContact",box2d.b2PolygonAndCircleContact);box2d.b2PolygonAndCircleContact.Create=function(a){return new box2d.b2PolygonAndCircleContact};goog.exportProperty(box2d.b2PolygonAndCircleContact,"Create",box2d.b2PolygonAndCircleContact.Create);box2d.b2PolygonAndCircleContact.Destroy=function(a,c){};
goog.exportProperty(box2d.b2PolygonAndCircleContact,"Destroy",box2d.b2PolygonAndCircleContact.Destroy);box2d.b2PolygonAndCircleContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2CircleShape);box2d.b2CollidePolygonAndCircle(a,d instanceof box2d.b2PolygonShape?d:null,c,e instanceof box2d.b2CircleShape?e:null,b)};
goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Evaluate",box2d.b2PolygonAndCircleContact.prototype.Evaluate);box2d.b2PolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonContact",box2d.b2PolygonContact);box2d.b2PolygonContact.Create=function(a){return new box2d.b2PolygonContact};goog.exportProperty(box2d.b2PolygonContact,"Create",box2d.b2PolygonContact.Create);box2d.b2PolygonContact.Destroy=function(a,c){};goog.exportProperty(box2d.b2PolygonContact,"Destroy",box2d.b2PolygonContact.Destroy);
box2d.b2PolygonContact.prototype.Evaluate=function(a,c,b){var d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2PolygonShape);box2d.b2CollidePolygons(a,d instanceof box2d.b2PolygonShape?d:null,c,e instanceof box2d.b2PolygonShape?e:null,b)};goog.exportProperty(box2d.b2PolygonContact.prototype,"Evaluate",box2d.b2PolygonContact.prototype.Evaluate);box2d.g_blockSolve=!0;box2d.b2VelocityConstraintPoint=function(){this.rA=new box2d.b2Vec2;this.rB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2VelocityConstraintPoint",box2d.b2VelocityConstraintPoint);box2d.b2VelocityConstraintPoint.prototype.rA=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rA",box2d.b2VelocityConstraintPoint.prototype.rA);box2d.b2VelocityConstraintPoint.prototype.rB=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rB",box2d.b2VelocityConstraintPoint.prototype.rB);
box2d.b2VelocityConstraintPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalImpulse",box2d.b2VelocityConstraintPoint.prototype.normalImpulse);box2d.b2VelocityConstraintPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentImpulse",box2d.b2VelocityConstraintPoint.prototype.tangentImpulse);box2d.b2VelocityConstraintPoint.prototype.normalMass=0;
goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalMass",box2d.b2VelocityConstraintPoint.prototype.normalMass);box2d.b2VelocityConstraintPoint.prototype.tangentMass=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentMass",box2d.b2VelocityConstraintPoint.prototype.tangentMass);box2d.b2VelocityConstraintPoint.prototype.velocityBias=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"velocityBias",box2d.b2VelocityConstraintPoint.prototype.velocityBias);
box2d.b2VelocityConstraintPoint.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2VelocityConstraintPoint})};goog.exportProperty(box2d.b2VelocityConstraintPoint,"MakeArray",box2d.b2VelocityConstraintPoint.MakeArray);box2d.b2ContactVelocityConstraint=function(){this.points=box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints);this.normal=new box2d.b2Vec2;this.tangent=new box2d.b2Vec2;this.normalMass=new box2d.b2Mat22;this.K=new box2d.b2Mat22};
goog.exportSymbol("box2d.b2ContactVelocityConstraint",box2d.b2ContactVelocityConstraint);box2d.b2ContactVelocityConstraint.prototype.points=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"points",box2d.b2ContactVelocityConstraint.prototype.points);box2d.b2ContactVelocityConstraint.prototype.normal=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normal",box2d.b2ContactVelocityConstraint.prototype.normal);
box2d.b2ContactVelocityConstraint.prototype.tangent=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangent",box2d.b2ContactVelocityConstraint.prototype.tangent);box2d.b2ContactVelocityConstraint.prototype.normalMass=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normalMass",box2d.b2ContactVelocityConstraint.prototype.normalMass);box2d.b2ContactVelocityConstraint.prototype.K=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"K",box2d.b2ContactVelocityConstraint.prototype.K);
box2d.b2ContactVelocityConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexA",box2d.b2ContactVelocityConstraint.prototype.indexA);box2d.b2ContactVelocityConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexB",box2d.b2ContactVelocityConstraint.prototype.indexB);box2d.b2ContactVelocityConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassA",box2d.b2ContactVelocityConstraint.prototype.invMassA);
box2d.b2ContactVelocityConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassB",box2d.b2ContactVelocityConstraint.prototype.invMassB);box2d.b2ContactVelocityConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIA",box2d.b2ContactVelocityConstraint.prototype.invIA);box2d.b2ContactVelocityConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIB",box2d.b2ContactVelocityConstraint.prototype.invIB);
box2d.b2ContactVelocityConstraint.prototype.friction=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"friction",box2d.b2ContactVelocityConstraint.prototype.friction);box2d.b2ContactVelocityConstraint.prototype.restitution=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"restitution",box2d.b2ContactVelocityConstraint.prototype.restitution);box2d.b2ContactVelocityConstraint.prototype.tangentSpeed=0;
goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangentSpeed",box2d.b2ContactVelocityConstraint.prototype.tangentSpeed);box2d.b2ContactVelocityConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"pointCount",box2d.b2ContactVelocityConstraint.prototype.pointCount);box2d.b2ContactVelocityConstraint.prototype.contactIndex=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"contactIndex",box2d.b2ContactVelocityConstraint.prototype.contactIndex);
box2d.b2ContactVelocityConstraint.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2ContactVelocityConstraint})};goog.exportProperty(box2d.b2ContactVelocityConstraint,"MakeArray",box2d.b2ContactVelocityConstraint.MakeArray);box2d.b2ContactPositionConstraint=function(){this.localPoints=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.localCenterA=new box2d.b2Vec2;this.localCenterB=new box2d.b2Vec2};
goog.exportSymbol("box2d.b2ContactPositionConstraint",box2d.b2ContactPositionConstraint);box2d.b2ContactPositionConstraint.prototype.localPoints=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoints",box2d.b2ContactPositionConstraint.prototype.localPoints);box2d.b2ContactPositionConstraint.prototype.localNormal=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localNormal",box2d.b2ContactPositionConstraint.prototype.localNormal);
box2d.b2ContactPositionConstraint.prototype.localPoint=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoint",box2d.b2ContactPositionConstraint.prototype.localPoint);box2d.b2ContactPositionConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexA",box2d.b2ContactPositionConstraint.prototype.indexA);box2d.b2ContactPositionConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexB",box2d.b2ContactPositionConstraint.prototype.indexB);
box2d.b2ContactPositionConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassA",box2d.b2ContactPositionConstraint.prototype.invMassA);box2d.b2ContactPositionConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassB",box2d.b2ContactPositionConstraint.prototype.invMassB);box2d.b2ContactPositionConstraint.prototype.localCenterA=null;
goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterA",box2d.b2ContactPositionConstraint.prototype.localCenterA);box2d.b2ContactPositionConstraint.prototype.localCenterB=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterB",box2d.b2ContactPositionConstraint.prototype.localCenterB);box2d.b2ContactPositionConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIA",box2d.b2ContactPositionConstraint.prototype.invIA);
box2d.b2ContactPositionConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIB",box2d.b2ContactPositionConstraint.prototype.invIB);box2d.b2ContactPositionConstraint.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"type",box2d.b2ContactPositionConstraint.prototype.type);box2d.b2ContactPositionConstraint.prototype.radiusA=0;
goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusA",box2d.b2ContactPositionConstraint.prototype.radiusA);box2d.b2ContactPositionConstraint.prototype.radiusB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusB",box2d.b2ContactPositionConstraint.prototype.radiusB);box2d.b2ContactPositionConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"pointCount",box2d.b2ContactPositionConstraint.prototype.pointCount);
box2d.b2ContactPositionConstraint.MakeArray=function(a){return box2d.b2MakeArray(a,function(a){return new box2d.b2ContactPositionConstraint})};goog.exportProperty(box2d.b2ContactPositionConstraint,"MakeArray",box2d.b2ContactPositionConstraint.MakeArray);box2d.b2ContactSolverDef=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2ContactSolverDef",box2d.b2ContactSolverDef);box2d.b2ContactSolverDef.prototype.step=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"step",box2d.b2ContactSolverDef.prototype.step);
box2d.b2ContactSolverDef.prototype.contacts=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"contacts",box2d.b2ContactSolverDef.prototype.contacts);box2d.b2ContactSolverDef.prototype.count=0;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"count",box2d.b2ContactSolverDef.prototype.count);box2d.b2ContactSolverDef.prototype.positions=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"positions",box2d.b2ContactSolverDef.prototype.positions);
box2d.b2ContactSolverDef.prototype.velocities=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"velocities",box2d.b2ContactSolverDef.prototype.velocities);box2d.b2ContactSolverDef.prototype.allocator=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"allocator",box2d.b2ContactSolverDef.prototype.allocator);box2d.b2ContactSolver=function(){this.m_step=new box2d.b2TimeStep;this.m_positionConstraints=box2d.b2ContactPositionConstraint.MakeArray(1024);this.m_velocityConstraints=box2d.b2ContactVelocityConstraint.MakeArray(1024)};
goog.exportSymbol("box2d.b2ContactSolver",box2d.b2ContactSolver);box2d.b2ContactSolver.prototype.m_step=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_step",box2d.b2ContactSolver.prototype.m_step);box2d.b2ContactSolver.prototype.m_positions=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positions",box2d.b2ContactSolver.prototype.m_positions);box2d.b2ContactSolver.prototype.m_velocities=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocities",box2d.b2ContactSolver.prototype.m_velocities);
box2d.b2ContactSolver.prototype.m_allocator=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_allocator",box2d.b2ContactSolver.prototype.m_allocator);box2d.b2ContactSolver.prototype.m_positionConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positionConstraints",box2d.b2ContactSolver.prototype.m_positionConstraints);box2d.b2ContactSolver.prototype.m_velocityConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocityConstraints",box2d.b2ContactSolver.prototype.m_velocityConstraints);
box2d.b2ContactSolver.prototype.m_contacts=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_contacts",box2d.b2ContactSolver.prototype.m_contacts);box2d.b2ContactSolver.prototype.m_count=0;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_count",box2d.b2ContactSolver.prototype.m_count);
box2d.b2ContactSolver.prototype.Initialize=function(a){this.m_step.Copy(a.step);this.m_allocator=a.allocator;this.m_count=a.count;if(this.m_positionConstraints.length<this.m_count){var c=box2d.b2Max(2*this.m_positionConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_positionConstraints: "+c);this.m_positionConstraints.length<c;)this.m_positionConstraints[this.m_positionConstraints.length]=new box2d.b2ContactPositionConstraint}if(this.m_velocityConstraints.length<
this.m_count)for(c=box2d.b2Max(2*this.m_velocityConstraints.length,this.m_count),box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_velocityConstraints: "+c);this.m_velocityConstraints.length<c;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new box2d.b2ContactVelocityConstraint;this.m_positions=a.positions;this.m_velocities=a.velocities;this.m_contacts=a.contacts;var b,d,e,f,g,h,k,l;a=0;for(c=this.m_count;a<c;++a)for(e=this.m_contacts[a],f=e.m_fixtureA,g=e.m_fixtureB,b=f.GetShape(),
d=g.GetShape(),b=b.m_radius,d=d.m_radius,h=f.GetBody(),k=g.GetBody(),g=e.GetManifold(),l=g.pointCount,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<l),f=this.m_velocityConstraints[a],f.friction=e.m_friction,f.restitution=e.m_restitution,f.tangentSpeed=e.m_tangentSpeed,f.indexA=h.m_islandIndex,f.indexB=k.m_islandIndex,f.invMassA=h.m_invMass,f.invMassB=k.m_invMass,f.invIA=h.m_invI,f.invIB=k.m_invI,f.contactIndex=a,f.pointCount=l,f.K.SetZero(),f.normalMass.SetZero(),e=this.m_positionConstraints[a],e.indexA=
h.m_islandIndex,e.indexB=k.m_islandIndex,e.invMassA=h.m_invMass,e.invMassB=k.m_invMass,e.localCenterA.Copy(h.m_sweep.localCenter),e.localCenterB.Copy(k.m_sweep.localCenter),e.invIA=h.m_invI,e.invIB=k.m_invI,e.localNormal.Copy(g.localNormal),e.localPoint.Copy(g.localPoint),e.pointCount=l,e.radiusA=b,e.radiusB=d,e.type=g.type,b=0,d=l;b<d;++b)h=g.points[b],l=f.points[b],this.m_step.warmStarting?(l.normalImpulse=this.m_step.dtRatio*h.normalImpulse,l.tangentImpulse=this.m_step.dtRatio*h.tangentImpulse):
(l.normalImpulse=0,l.tangentImpulse=0),l.rA.SetZero(),l.rB.SetZero(),l.normalMass=0,l.tangentMass=0,l.velocityBias=0,e.localPoints[b].Copy(h.localPoint);return this};goog.exportProperty(box2d.b2ContactSolver.prototype,"Initialize",box2d.b2ContactSolver.prototype.Initialize);
box2d.b2ContactSolver.prototype.InitializeVelocityConstraints=function(){var a,c,b,d,e,f,g,h,k,l,m,n,p,q,r,u,t,w,x,v,y=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,z=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,B=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold;a=0;for(c=this.m_count;a<c;++a){e=this.m_velocityConstraints[a];f=this.m_positionConstraints[a];b=f.radiusA;d=f.radiusB;g=this.m_contacts[e.contactIndex].GetManifold();
h=e.indexA;k=e.indexB;l=e.invMassA;m=e.invMassB;n=e.invIA;p=e.invIB;q=f.localCenterA;r=f.localCenterB;f=this.m_positions[h].c;u=this.m_positions[h].a;t=this.m_velocities[h].v;h=this.m_velocities[h].w;w=this.m_positions[k].c;x=this.m_positions[k].a;v=this.m_velocities[k].v;k=this.m_velocities[k].w;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<g.pointCount);y.q.SetAngle(u);z.q.SetAngle(x);box2d.b2Sub_V2_V2(f,box2d.b2Mul_R_V2(y.q,q,box2d.b2Vec2.s_t0),y.p);box2d.b2Sub_V2_V2(w,box2d.b2Mul_R_V2(z.q,r,box2d.b2Vec2.s_t0),
z.p);B.Initialize(g,y,b,z,d);e.normal.Copy(B.normal);box2d.b2Cross_V2_S(e.normal,1,e.tangent);d=e.pointCount;for(b=0;b<d;++b)g=e.points[b],box2d.b2Sub_V2_V2(B.points[b],f,g.rA),box2d.b2Sub_V2_V2(B.points[b],w,g.rB),q=box2d.b2Cross_V2_V2(g.rA,e.normal),r=box2d.b2Cross_V2_V2(g.rB,e.normal),q=l+m+n*q*q+p*r*r,g.normalMass=0<q?1/q:0,r=e.tangent,q=box2d.b2Cross_V2_V2(g.rA,r),r=box2d.b2Cross_V2_V2(g.rB,r),q=l+m+n*q*q+p*r*r,g.tangentMass=0<q?1/q:0,g.velocityBias=0,q=box2d.b2Dot_V2_V2(e.normal,box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(v,
k,g.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(t,h,g.rA,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0)),q<-box2d.b2_velocityThreshold&&(g.velocityBias+=-e.restitution*q);2===e.pointCount&&box2d.g_blockSolve&&(t=e.points[0],w=e.points[1],f=box2d.b2Cross_V2_V2(t.rA,e.normal),t=box2d.b2Cross_V2_V2(t.rB,e.normal),h=box2d.b2Cross_V2_V2(w.rA,e.normal),k=box2d.b2Cross_V2_V2(w.rB,e.normal),w=l+m+n*f*f+p*t*t,v=l+m+n*h*h+p*k*k,l=l+m+n*f*h+p*t*k,w*w<1E3*(w*v-l*l)?(e.K.ex.Set(w,l),e.K.ey.Set(l,v),e.K.GetInverse(e.normalMass)):
e.pointCount=1)}};goog.exportProperty(box2d.b2ContactSolver.prototype,"InitializeVelocityConstraints",box2d.b2ContactSolver.prototype.InitializeVelocityConstraints);box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold=new box2d.b2WorldManifold;
box2d.b2ContactSolver.prototype.WarmStart=function(){var a,c,b,d,e,f,g,h,k,l,m,n,p,q,r,u,t,w,x=box2d.b2ContactSolver.prototype.WarmStart.s_P;a=0;for(c=this.m_count;a<c;++a){e=this.m_velocityConstraints[a];f=e.indexA;g=e.indexB;h=e.invMassA;k=e.invIA;l=e.invMassB;m=e.invIB;d=e.pointCount;n=this.m_velocities[f].v;p=this.m_velocities[f].w;q=this.m_velocities[g].v;r=this.m_velocities[g].w;u=e.normal;t=e.tangent;for(b=0;b<d;++b)w=e.points[b],box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(w.normalImpulse,u,box2d.b2Vec2.s_t0),
box2d.b2Mul_S_V2(w.tangentImpulse,t,box2d.b2Vec2.s_t1),x),p-=k*box2d.b2Cross_V2_V2(w.rA,x),n.SelfMulSub(h,x),r+=m*box2d.b2Cross_V2_V2(w.rB,x),q.SelfMulAdd(l,x);this.m_velocities[f].w=p;this.m_velocities[g].w=r}};goog.exportProperty(box2d.b2ContactSolver.prototype,"WarmStart",box2d.b2ContactSolver.prototype.WarmStart);box2d.b2ContactSolver.prototype.WarmStart.s_P=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolveVelocityConstraints=function(){var a,c,b,d,e,f,g,h,k,l,m,n,p,q,r,u,t,w,x,v,y=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,z=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,B=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,E,F,G=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,H=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,I=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,C=
box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,A=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,K=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,J=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,D=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2;a=0;for(c=this.m_count;a<c;++a){e=this.m_velocityConstraints[a];f=e.indexA;g=e.indexB;h=e.invMassA;k=e.invIA;l=e.invMassB;m=e.invIB;n=e.pointCount;p=this.m_velocities[f].v;q=this.m_velocities[f].w;
r=this.m_velocities[g].v;u=this.m_velocities[g].w;t=e.normal;w=e.tangent;x=e.friction;box2d.ENABLE_ASSERTS&&box2d.b2Assert(1===n||2===n);b=0;for(d=n;b<d;++b)v=e.points[b],box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,u,v.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(p,q,v.rA,box2d.b2Vec2.s_t1),y),E=box2d.b2Dot_V2_V2(y,w)-e.tangentSpeed,E=v.tangentMass*-E,F=x*v.normalImpulse,F=box2d.b2Clamp(v.tangentImpulse+E,-F,F),E=F-v.tangentImpulse,v.tangentImpulse=F,box2d.b2Mul_S_V2(E,w,G),p.SelfMulSub(h,G),q-=
k*box2d.b2Cross_V2_V2(v.rA,G),r.SelfMulAdd(l,G),u+=m*box2d.b2Cross_V2_V2(v.rB,G);if(1!==e.pointCount&&box2d.g_blockSolve)for(n=e.points[0],v=e.points[1],H.Set(n.normalImpulse,v.normalImpulse),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=H.x&&0<=H.y),box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,u,n.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(p,q,n.rA,box2d.b2Vec2.s_t1),z),box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,u,v.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(p,q,v.rA,box2d.b2Vec2.s_t1),B),b=
box2d.b2Dot_V2_V2(z,t),d=box2d.b2Dot_V2_V2(B,t),I.x=b-n.velocityBias,I.y=d-v.velocityBias,I.SelfSub(box2d.b2Mul_M22_V2(e.K,H,box2d.b2Vec2.s_t0));;){box2d.b2Mul_M22_V2(e.normalMass,I,C).SelfNeg();if(0<=C.x&&0<=C.y){box2d.b2Sub_V2_V2(C,H,A);box2d.b2Mul_S_V2(A.x,t,K);box2d.b2Mul_S_V2(A.y,t,J);box2d.b2Add_V2_V2(K,J,D);p.SelfMulSub(h,D);q-=k*(box2d.b2Cross_V2_V2(n.rA,K)+box2d.b2Cross_V2_V2(v.rA,J));r.SelfMulAdd(l,D);u+=m*(box2d.b2Cross_V2_V2(n.rB,K)+box2d.b2Cross_V2_V2(v.rB,J));n.normalImpulse=C.x;v.normalImpulse=
C.y;break}C.x=-n.normalMass*I.x;C.y=0;d=e.K.ex.y*C.x+I.y;if(0<=C.x&&0<=d){box2d.b2Sub_V2_V2(C,H,A);box2d.b2Mul_S_V2(A.x,t,K);box2d.b2Mul_S_V2(A.y,t,J);box2d.b2Add_V2_V2(K,J,D);p.SelfMulSub(h,D);q-=k*(box2d.b2Cross_V2_V2(n.rA,K)+box2d.b2Cross_V2_V2(v.rA,J));r.SelfMulAdd(l,D);u+=m*(box2d.b2Cross_V2_V2(n.rB,K)+box2d.b2Cross_V2_V2(v.rB,J));n.normalImpulse=C.x;v.normalImpulse=C.y;break}C.x=0;C.y=-v.normalMass*I.y;b=e.K.ey.x*C.y+I.x;if(0<=C.y&&0<=b){box2d.b2Sub_V2_V2(C,H,A);box2d.b2Mul_S_V2(A.x,t,K);box2d.b2Mul_S_V2(A.y,
t,J);box2d.b2Add_V2_V2(K,J,D);p.SelfMulSub(h,D);q-=k*(box2d.b2Cross_V2_V2(n.rA,K)+box2d.b2Cross_V2_V2(v.rA,J));r.SelfMulAdd(l,D);u+=m*(box2d.b2Cross_V2_V2(n.rB,K)+box2d.b2Cross_V2_V2(v.rB,J));n.normalImpulse=C.x;v.normalImpulse=C.y;break}C.x=0;C.y=0;b=I.x;d=I.y;if(0<=b&&0<=d){box2d.b2Sub_V2_V2(C,H,A);box2d.b2Mul_S_V2(A.x,t,K);box2d.b2Mul_S_V2(A.y,t,J);box2d.b2Add_V2_V2(K,J,D);p.SelfMulSub(h,D);q-=k*(box2d.b2Cross_V2_V2(n.rA,K)+box2d.b2Cross_V2_V2(v.rA,J));r.SelfMulAdd(l,D);u+=m*(box2d.b2Cross_V2_V2(n.rB,
K)+box2d.b2Cross_V2_V2(v.rB,J));n.normalImpulse=C.x;v.normalImpulse=C.y;break}break}else for(b=0;b<n;++b)v=e.points[b],box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,u,v.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(p,q,v.rA,box2d.b2Vec2.s_t1),y),d=box2d.b2Dot_V2_V2(y,t),E=-v.normalMass*(d-v.velocityBias),F=box2d.b2Max(v.normalImpulse+E,0),E=F-v.normalImpulse,v.normalImpulse=F,box2d.b2Mul_S_V2(E,t,G),p.SelfMulSub(h,G),q-=k*box2d.b2Cross_V2_V2(v.rA,G),r.SelfMulAdd(l,G),u+=m*box2d.b2Cross_V2_V2(v.rB,
G);this.m_velocities[f].w=q;this.m_velocities[g].w=u}};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveVelocityConstraints",box2d.b2ContactSolver.prototype.SolveVelocityConstraints);box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.StoreImpulses=function(){var a,c,b,d,e,f;a=0;for(c=this.m_count;a<c;++a)for(e=this.m_velocityConstraints[a],f=this.m_contacts[e.contactIndex].GetManifold(),b=0,d=e.pointCount;b<d;++b)f.points[b].normalImpulse=e.points[b].normalImpulse,f.points[b].tangentImpulse=e.points[b].tangentImpulse};goog.exportProperty(box2d.b2ContactSolver.prototype,"StoreImpulses",box2d.b2ContactSolver.prototype.StoreImpulses);
box2d.b2PositionSolverManifold=function(){this.normal=new box2d.b2Vec2;this.point=new box2d.b2Vec2};goog.exportSymbol("box2d.b2PositionSolverManifold",box2d.b2PositionSolverManifold);box2d.b2PositionSolverManifold.prototype.normal=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"normal",box2d.b2PositionSolverManifold.prototype.normal);box2d.b2PositionSolverManifold.prototype.point=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"point",box2d.b2PositionSolverManifold.prototype.point);
box2d.b2PositionSolverManifold.prototype.separation=0;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"separation",box2d.b2PositionSolverManifold.prototype.separation);
box2d.b2PositionSolverManifold.prototype.Initialize=function(a,c,b,d){var e=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,f=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,g=box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,h=box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<a.pointCount);switch(a.type){case box2d.b2ManifoldType.e_circles:box2d.b2Mul_X_V2(c,a.localPoint,e);box2d.b2Mul_X_V2(b,a.localPoints[0],
f);box2d.b2Sub_V2_V2(f,e,this.normal).SelfNormalize();box2d.b2Mid_V2_V2(e,f,this.point);this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(f,e,box2d.b2Vec2.s_t0),this.normal)-a.radiusA-a.radiusB;break;case box2d.b2ManifoldType.e_faceA:box2d.b2Mul_R_V2(c.q,a.localNormal,this.normal);box2d.b2Mul_X_V2(c,a.localPoint,g);box2d.b2Mul_X_V2(b,a.localPoints[d],h);this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(h,g,box2d.b2Vec2.s_t0),this.normal)-a.radiusA-a.radiusB;this.point.Copy(h);break;case box2d.b2ManifoldType.e_faceB:box2d.b2Mul_R_V2(b.q,
a.localNormal,this.normal),box2d.b2Mul_X_V2(b,a.localPoint,g),box2d.b2Mul_X_V2(c,a.localPoints[d],h),this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(h,g,box2d.b2Vec2.s_t0),this.normal)-a.radiusA-a.radiusB,this.point.Copy(h),this.normal.SelfNeg()}};goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"Initialize",box2d.b2PositionSolverManifold.prototype.Initialize);box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;
box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolvePositionConstraints=function(){var a,c,b,d,e,f,g,h,k,l,m,n,p,q,r,u,t,w=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,x=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,v=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,y,z,B,E=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,F=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,G,H=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,I=
0;a=0;for(c=this.m_count;a<c;++a){e=this.m_positionConstraints[a];f=e.indexA;g=e.indexB;h=e.localCenterA;k=e.invMassA;l=e.invIA;m=e.localCenterB;n=e.invMassB;p=e.invIB;d=e.pointCount;q=this.m_positions[f].c;r=this.m_positions[f].a;u=this.m_positions[g].c;t=this.m_positions[g].a;for(b=0;b<d;++b)w.q.SetAngle(r),x.q.SetAngle(t),box2d.b2Sub_V2_V2(q,box2d.b2Mul_R_V2(w.q,h,box2d.b2Vec2.s_t0),w.p),box2d.b2Sub_V2_V2(u,box2d.b2Mul_R_V2(x.q,m,box2d.b2Vec2.s_t0),x.p),v.Initialize(e,w,x,b),y=v.normal,z=v.point,
B=v.separation,box2d.b2Sub_V2_V2(z,q,E),box2d.b2Sub_V2_V2(z,u,F),I=box2d.b2Min(I,B),z=box2d.b2Clamp(box2d.b2_baumgarte*(B+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),B=box2d.b2Cross_V2_V2(E,y),G=box2d.b2Cross_V2_V2(F,y),B=k+n+l*B*B+p*G*G,z=0<B?-z/B:0,box2d.b2Mul_S_V2(z,y,H),q.SelfMulSub(k,H),r-=l*box2d.b2Cross_V2_V2(E,H),u.SelfMulAdd(n,H),t+=p*box2d.b2Cross_V2_V2(F,H);this.m_positions[f].a=r;this.m_positions[g].a=t}return I>-3*box2d.b2_linearSlop};
goog.exportProperty(box2d.b2ContactSolver.prototype,"SolvePositionConstraints",box2d.b2ContactSolver.prototype.SolvePositionConstraints);box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints=function(a,c){var b,d,e,f,g,h,k,l,m,n,p,q,r,u,t,w,x,v=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,y=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,z=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,B,E,F,G=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,H=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,I,C=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,
A=0;b=0;for(d=this.m_count;b<d;++b){g=this.m_positionConstraints[b];h=g.indexA;k=g.indexB;l=g.localCenterA;m=g.localCenterB;f=g.pointCount;p=n=0;if(h===a||h===c)n=g.invMassA,p=g.invIA;r=q=0;if(k===a||k===c)q=g.invMassB,r=g.invIB;u=this.m_positions[h].c;t=this.m_positions[h].a;w=this.m_positions[k].c;x=this.m_positions[k].a;for(e=0;e<f;++e)v.q.SetAngle(t),y.q.SetAngle(x),box2d.b2Sub_V2_V2(u,box2d.b2Mul_R_V2(v.q,l,box2d.b2Vec2.s_t0),v.p),box2d.b2Sub_V2_V2(w,box2d.b2Mul_R_V2(y.q,m,box2d.b2Vec2.s_t0),
y.p),z.Initialize(g,v,y,e),B=z.normal,E=z.point,F=z.separation,box2d.b2Sub_V2_V2(E,u,G),box2d.b2Sub_V2_V2(E,w,H),A=box2d.b2Min(A,F),E=box2d.b2Clamp(box2d.b2_toiBaumgarte*(F+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),F=box2d.b2Cross_V2_V2(G,B),I=box2d.b2Cross_V2_V2(H,B),F=n+q+p*F*F+r*I*I,E=0<F?-E/F:0,box2d.b2Mul_S_V2(E,B,C),u.SelfMulSub(n,C),t-=p*box2d.b2Cross_V2_V2(G,C),w.SelfMulAdd(q,C),x+=r*box2d.b2Cross_V2_V2(H,C);this.m_positions[h].a=t;this.m_positions[k].a=x}return A>=-1.5*box2d.b2_linearSlop};
goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveTOIPositionConstraints",box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints);box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA=new box2d.b2Vec2;
box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P=new box2d.b2Vec2;box2d.b2Island=function(){this.m_bodies=Array(1024);this.m_contacts=Array(1024);this.m_joints=Array(1024);this.m_positions=box2d.b2Position.MakeArray(1024);this.m_velocities=box2d.b2Velocity.MakeArray(1024)};goog.exportSymbol("box2d.b2Island",box2d.b2Island);box2d.b2Island.prototype.m_allocator=null;goog.exportProperty(box2d.b2Island.prototype,"m_allocator",box2d.b2Island.prototype.m_allocator);box2d.b2Island.prototype.m_listener=null;goog.exportProperty(box2d.b2Island.prototype,"m_listener",box2d.b2Island.prototype.m_listener);
box2d.b2Island.prototype.m_bodies=null;goog.exportProperty(box2d.b2Island.prototype,"m_bodies",box2d.b2Island.prototype.m_bodies);box2d.b2Island.prototype.m_contacts=null;goog.exportProperty(box2d.b2Island.prototype,"m_contacts",box2d.b2Island.prototype.m_contacts);box2d.b2Island.prototype.m_joints=null;goog.exportProperty(box2d.b2Island.prototype,"m_joints",box2d.b2Island.prototype.m_joints);box2d.b2Island.prototype.m_positions=null;goog.exportProperty(box2d.b2Island.prototype,"m_positions",box2d.b2Island.prototype.m_positions);
box2d.b2Island.prototype.m_velocities=null;goog.exportProperty(box2d.b2Island.prototype,"m_velocities",box2d.b2Island.prototype.m_velocities);box2d.b2Island.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCount",box2d.b2Island.prototype.m_bodyCount);box2d.b2Island.prototype.m_jointCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_jointCount",box2d.b2Island.prototype.m_jointCount);box2d.b2Island.prototype.m_contactCount=0;
goog.exportProperty(box2d.b2Island.prototype,"m_contactCount",box2d.b2Island.prototype.m_contactCount);box2d.b2Island.prototype.m_bodyCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCapacity",box2d.b2Island.prototype.m_bodyCapacity);box2d.b2Island.prototype.m_contactCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_contactCapacity",box2d.b2Island.prototype.m_contactCapacity);box2d.b2Island.prototype.m_jointCapacity=0;
goog.exportProperty(box2d.b2Island.prototype,"m_jointCapacity",box2d.b2Island.prototype.m_jointCapacity);
box2d.b2Island.prototype.Initialize=function(a,c,b,d,e){this.m_bodyCapacity=a;this.m_contactCapacity=c;this.m_jointCapacity=b;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_allocator=d;for(this.m_listener=e;this.m_bodies.length<a;)this.m_bodies[this.m_bodies.length]=null;for(;this.m_contacts.length<c;)this.m_contacts[this.m_contacts.length]=null;for(;this.m_joints.length<b;)this.m_joints[this.m_joints.length]=null;if(this.m_positions.length<a)for(c=box2d.b2Max(2*this.m_positions.length,
a),box2d.DEBUG&&window.console.log("box2d.b2Island.m_positions: "+c);this.m_positions.length<c;)this.m_positions[this.m_positions.length]=new box2d.b2Position;if(this.m_velocities.length<a)for(c=box2d.b2Max(2*this.m_velocities.length,a),box2d.DEBUG&&window.console.log("box2d.b2Island.m_velocities: "+c);this.m_velocities.length<c;)this.m_velocities[this.m_velocities.length]=new box2d.b2Velocity};goog.exportProperty(box2d.b2Island.prototype,"Initialize",box2d.b2Island.prototype.Initialize);
box2d.b2Island.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0};goog.exportProperty(box2d.b2Island.prototype,"Clear",box2d.b2Island.prototype.Clear);box2d.b2Island.prototype.AddBody=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_bodyCount<this.m_bodyCapacity);a.m_islandIndex=this.m_bodyCount;this.m_bodies[this.m_bodyCount++]=a};goog.exportProperty(box2d.b2Island.prototype,"AddBody",box2d.b2Island.prototype.AddBody);
box2d.b2Island.prototype.AddContact=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_contactCount<this.m_contactCapacity);this.m_contacts[this.m_contactCount++]=a};goog.exportProperty(box2d.b2Island.prototype,"AddContact",box2d.b2Island.prototype.AddContact);box2d.b2Island.prototype.AddJoint=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_jointCount<this.m_jointCapacity);this.m_joints[this.m_jointCount++]=a};goog.exportProperty(box2d.b2Island.prototype,"AddJoint",box2d.b2Island.prototype.AddJoint);
box2d.b2Island.prototype.Solve=function(a,c,b,d){for(var e=box2d.b2Island.s_timer.Reset(),f=c.dt,g=0;g<this.m_bodyCount;++g){var h=this.m_bodies[g],k=this.m_positions[g].c.Copy(h.m_sweep.c),l=h.m_sweep.a,m=this.m_velocities[g].v.Copy(h.m_linearVelocity),n=h.m_angularVelocity;h.m_sweep.c0.Copy(h.m_sweep.c);h.m_sweep.a0=h.m_sweep.a;h.m_type===box2d.b2BodyType.b2_dynamicBody&&(m.x+=f*(h.m_gravityScale*b.x+h.m_invMass*h.m_force.x),m.y+=f*(h.m_gravityScale*b.y+h.m_invMass*h.m_force.y),n+=f*h.m_invI*h.m_torque,
m.SelfMul(1/(1+f*h.m_linearDamping)),n*=1/(1+f*h.m_angularDamping));this.m_positions[g].a=l;this.m_velocities[g].w=n}e.Reset();h=box2d.b2Island.s_solverData;h.step.Copy(c);h.positions=this.m_positions;h.velocities=this.m_velocities;g=box2d.b2Island.s_contactSolverDef;g.step.Copy(c);g.contacts=this.m_contacts;g.count=this.m_contactCount;g.positions=this.m_positions;g.velocities=this.m_velocities;g.allocator=this.m_allocator;b=box2d.b2Island.s_contactSolver.Initialize(g);b.InitializeVelocityConstraints();
c.warmStarting&&b.WarmStart();for(g=0;g<this.m_jointCount;++g)this.m_joints[g].InitVelocityConstraints(h);a.solveInit=e.GetMilliseconds();e.Reset();for(g=0;g<c.velocityIterations;++g){for(l=0;l<this.m_jointCount;++l)this.m_joints[l].SolveVelocityConstraints(h);b.SolveVelocityConstraints()}b.StoreImpulses();a.solveVelocity=e.GetMilliseconds();for(g=0;g<this.m_bodyCount;++g){var k=this.m_positions[g].c,l=this.m_positions[g].a,m=this.m_velocities[g].v,n=this.m_velocities[g].w,p=box2d.b2Mul_S_V2(f,m,
box2d.b2Island.s_translation);box2d.b2Dot_V2_V2(p,p)>box2d.b2_maxTranslationSquared&&(p=box2d.b2_maxTranslation/p.Length(),m.SelfMul(p));p=f*n;p*p>box2d.b2_maxRotationSquared&&(p=box2d.b2_maxRotation/box2d.b2Abs(p),n*=p);k.x+=f*m.x;k.y+=f*m.y;l+=f*n;this.m_positions[g].a=l;this.m_velocities[g].w=n}e.Reset();k=!1;for(g=0;g<c.positionIterations;++g){m=b.SolvePositionConstraints();n=!0;for(l=0;l<this.m_jointCount;++l)p=this.m_joints[l].SolvePositionConstraints(h),n=n&&p;if(m&&n){k=!0;break}}for(g=0;g<
this.m_bodyCount;++g)c=this.m_bodies[g],c.m_sweep.c.Copy(this.m_positions[g].c),c.m_sweep.a=this.m_positions[g].a,c.m_linearVelocity.Copy(this.m_velocities[g].v),c.m_angularVelocity=this.m_velocities[g].w,c.SynchronizeTransform();a.solvePosition=e.GetMilliseconds();this.Report(b.m_velocityConstraints);if(d){a=box2d.b2_maxFloat;d=box2d.b2_linearSleepTolerance*box2d.b2_linearSleepTolerance;e=box2d.b2_angularSleepTolerance*box2d.b2_angularSleepTolerance;for(g=0;g<this.m_bodyCount;++g)h=this.m_bodies[g],
h.GetType()!==box2d.b2BodyType.b2_staticBody&&(!h.m_flag_autoSleepFlag||h.m_angularVelocity*h.m_angularVelocity>e||box2d.b2Dot_V2_V2(h.m_linearVelocity,h.m_linearVelocity)>d?a=h.m_sleepTime=0:(h.m_sleepTime+=f,a=box2d.b2Min(a,h.m_sleepTime)));if(a>=box2d.b2_timeToSleep&&k)for(g=0;g<this.m_bodyCount;++g)h=this.m_bodies[g],h.SetAwake(!1)}};goog.exportProperty(box2d.b2Island.prototype,"Solve",box2d.b2Island.prototype.Solve);
box2d.b2Island.prototype.SolveTOI=function(a,c,b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(c<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b<this.m_bodyCount);for(var d=0;d<this.m_bodyCount;++d){var e=this.m_bodies[d];this.m_positions[d].c.Copy(e.m_sweep.c);this.m_positions[d].a=e.m_sweep.a;this.m_velocities[d].v.Copy(e.m_linearVelocity);this.m_velocities[d].w=e.m_angularVelocity}d=box2d.b2Island.s_contactSolverDef;d.contacts=this.m_contacts;d.count=this.m_contactCount;d.allocator=this.m_allocator;
d.step.Copy(a);d.positions=this.m_positions;d.velocities=this.m_velocities;e=box2d.b2Island.s_contactSolver.Initialize(d);for(d=0;d<a.positionIterations&&!e.SolveTOIPositionConstraints(c,b);++d);this.m_bodies[c].m_sweep.c0.Copy(this.m_positions[c].c);this.m_bodies[c].m_sweep.a0=this.m_positions[c].a;this.m_bodies[b].m_sweep.c0.Copy(this.m_positions[b].c);this.m_bodies[b].m_sweep.a0=this.m_positions[b].a;e.InitializeVelocityConstraints();for(d=0;d<a.velocityIterations;++d)e.SolveVelocityConstraints();
a=a.dt;for(d=0;d<this.m_bodyCount;++d){c=this.m_positions[d].c;b=this.m_positions[d].a;var f=this.m_velocities[d].v,g=this.m_velocities[d].w,h=box2d.b2Mul_S_V2(a,f,box2d.b2Island.s_translation);box2d.b2Dot_V2_V2(h,h)>box2d.b2_maxTranslationSquared&&(h=box2d.b2_maxTranslation/h.Length(),f.SelfMul(h));h=a*g;h*h>box2d.b2_maxRotationSquared&&(h=box2d.b2_maxRotation/box2d.b2Abs(h),g*=h);c.SelfMulAdd(a,f);b+=a*g;this.m_positions[d].a=b;this.m_velocities[d].w=g;h=this.m_bodies[d];h.m_sweep.c.Copy(c);h.m_sweep.a=
b;h.m_linearVelocity.Copy(f);h.m_angularVelocity=g;h.SynchronizeTransform()}this.Report(e.m_velocityConstraints)};goog.exportProperty(box2d.b2Island.prototype,"SolveTOI",box2d.b2Island.prototype.SolveTOI);
box2d.b2Island.prototype.Report=function(a){if(null!==this.m_listener)for(var c=0;c<this.m_contactCount;++c){var b=this.m_contacts[c];if(b){var d=a[c],e=box2d.b2Island.s_impulse;e.count=d.pointCount;for(var f=0;f<d.pointCount;++f)e.normalImpulses[f]=d.points[f].normalImpulse,e.tangentImpulses[f]=d.points[f].tangentImpulse;this.m_listener.PostSolve(b,e)}}};goog.exportProperty(box2d.b2Island.prototype,"Report",box2d.b2Island.prototype.Report);box2d.b2Island.s_timer=new box2d.b2Timer;
box2d.b2Island.s_solverData=new box2d.b2SolverData;box2d.b2Island.s_contactSolverDef=new box2d.b2ContactSolverDef;box2d.b2Island.s_contactSolver=new box2d.b2ContactSolver;box2d.b2Island.s_translation=new box2d.b2Vec2;box2d.b2Island.s_impulse=new box2d.b2ContactImpulse;box2d.b2JointType={e_unknownJoint:0,e_revoluteJoint:1,e_prismaticJoint:2,e_distanceJoint:3,e_pulleyJoint:4,e_mouseJoint:5,e_gearJoint:6,e_wheelJoint:7,e_weldJoint:8,e_frictionJoint:9,e_ropeJoint:10,e_motorJoint:11,e_areaJoint:12};goog.exportSymbol("box2d.b2JointType",box2d.b2JointType);goog.exportProperty(box2d.b2JointType,"e_unknownJoint",box2d.b2JointType.e_unknownJoint);goog.exportProperty(box2d.b2JointType,"e_revoluteJoint",box2d.b2JointType.e_revoluteJoint);
goog.exportProperty(box2d.b2JointType,"e_prismaticJoint",box2d.b2JointType.e_prismaticJoint);goog.exportProperty(box2d.b2JointType,"e_distanceJoint",box2d.b2JointType.e_distanceJoint);goog.exportProperty(box2d.b2JointType,"e_pulleyJoint",box2d.b2JointType.e_pulleyJoint);goog.exportProperty(box2d.b2JointType,"e_mouseJoint",box2d.b2JointType.e_mouseJoint);goog.exportProperty(box2d.b2JointType,"e_gearJoint",box2d.b2JointType.e_gearJoint);goog.exportProperty(box2d.b2JointType,"e_wheelJoint",box2d.b2JointType.e_wheelJoint);
goog.exportProperty(box2d.b2JointType,"e_weldJoint",box2d.b2JointType.e_weldJoint);goog.exportProperty(box2d.b2JointType,"e_frictionJoint",box2d.b2JointType.e_frictionJoint);goog.exportProperty(box2d.b2JointType,"e_ropeJoint",box2d.b2JointType.e_ropeJoint);goog.exportProperty(box2d.b2JointType,"e_motorJoint",box2d.b2JointType.e_motorJoint);goog.exportProperty(box2d.b2JointType,"e_areaJoint",box2d.b2JointType.e_areaJoint);box2d.b2LimitState={e_inactiveLimit:0,e_atLowerLimit:1,e_atUpperLimit:2,e_equalLimits:3};
goog.exportSymbol("box2d.b2LimitState",box2d.b2LimitState);goog.exportProperty(box2d.b2LimitState,"e_inactiveLimit",box2d.b2LimitState.e_inactiveLimit);goog.exportProperty(box2d.b2LimitState,"e_atLowerLimit",box2d.b2LimitState.e_atLowerLimit);goog.exportProperty(box2d.b2LimitState,"e_atUpperLimit",box2d.b2LimitState.e_atUpperLimit);goog.exportProperty(box2d.b2LimitState,"e_equalLimits",box2d.b2LimitState.e_equalLimits);box2d.b2Jacobian=function(){this.linear=new box2d.b2Vec2};
goog.exportSymbol("box2d.b2Jacobian",box2d.b2Jacobian);box2d.b2Jacobian.prototype.linear=null;goog.exportProperty(box2d.b2Jacobian.prototype,"linear",box2d.b2Jacobian.prototype.linear);box2d.b2Jacobian.prototype.angularA=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularA",box2d.b2Jacobian.prototype.angularA);box2d.b2Jacobian.prototype.angularB=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularB",box2d.b2Jacobian.prototype.angularB);
box2d.b2Jacobian.prototype.SetZero=function(){this.linear.SetZero();this.angularB=this.angularA=0;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"SetZero",box2d.b2Jacobian.prototype.SetZero);box2d.b2Jacobian.prototype.Set=function(a,c,b){this.linear.Copy(a);this.angularA=c;this.angularB=b;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"Set",box2d.b2Jacobian.prototype.Set);box2d.b2JointEdge=function(){};goog.exportSymbol("box2d.b2JointEdge",box2d.b2JointEdge);
box2d.b2JointEdge.prototype.other=null;goog.exportProperty(box2d.b2JointEdge.prototype,"other",box2d.b2JointEdge.prototype.other);box2d.b2JointEdge.prototype.joint=null;goog.exportProperty(box2d.b2JointEdge.prototype,"joint",box2d.b2JointEdge.prototype.joint);box2d.b2JointEdge.prototype.prev=null;goog.exportProperty(box2d.b2JointEdge.prototype,"prev",box2d.b2JointEdge.prototype.prev);box2d.b2JointEdge.prototype.next=null;goog.exportProperty(box2d.b2JointEdge.prototype,"next",box2d.b2JointEdge.prototype.next);
box2d.b2JointDef=function(a){this.type=a};goog.exportSymbol("box2d.b2JointDef",box2d.b2JointDef);box2d.b2JointDef.prototype.type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2JointDef.prototype,"type",box2d.b2JointDef.prototype.type);box2d.b2JointDef.prototype.userData=null;goog.exportProperty(box2d.b2JointDef.prototype,"userData",box2d.b2JointDef.prototype.userData);box2d.b2JointDef.prototype.bodyA=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyA",box2d.b2JointDef.prototype.bodyA);
box2d.b2JointDef.prototype.bodyB=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyB",box2d.b2JointDef.prototype.bodyB);box2d.b2JointDef.prototype.collideConnected=!1;goog.exportProperty(box2d.b2JointDef.prototype,"collideConnected",box2d.b2JointDef.prototype.collideConnected);
box2d.b2Joint=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.bodyA!==a.bodyB);this.m_type=a.type;this.m_edgeA=new box2d.b2JointEdge;this.m_edgeB=new box2d.b2JointEdge;this.m_bodyA=a.bodyA;this.m_bodyB=a.bodyB;this.m_collideConnected=a.collideConnected;this.m_userData=a.userData};goog.exportSymbol("box2d.b2Joint",box2d.b2Joint);box2d.b2Joint.prototype.m_type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2Joint.prototype,"m_type",box2d.b2Joint.prototype.m_type);
box2d.b2Joint.prototype.m_prev=null;goog.exportProperty(box2d.b2Joint.prototype,"m_prev",box2d.b2Joint.prototype.m_prev);box2d.b2Joint.prototype.m_next=null;goog.exportProperty(box2d.b2Joint.prototype,"m_next",box2d.b2Joint.prototype.m_next);box2d.b2Joint.prototype.m_edgeA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeA",box2d.b2Joint.prototype.m_edgeA);box2d.b2Joint.prototype.m_edgeB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeB",box2d.b2Joint.prototype.m_edgeB);
box2d.b2Joint.prototype.m_bodyA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyA",box2d.b2Joint.prototype.m_bodyA);box2d.b2Joint.prototype.m_bodyB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyB",box2d.b2Joint.prototype.m_bodyB);box2d.b2Joint.prototype.m_index=0;goog.exportProperty(box2d.b2Joint.prototype,"m_index",box2d.b2Joint.prototype.m_index);box2d.b2Joint.prototype.m_islandFlag=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_islandFlag",box2d.b2Joint.prototype.m_islandFlag);
box2d.b2Joint.prototype.m_collideConnected=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_collideConnected",box2d.b2Joint.prototype.m_collideConnected);box2d.b2Joint.prototype.m_userData=null;goog.exportProperty(box2d.b2Joint.prototype,"m_userData",box2d.b2Joint.prototype.m_userData);box2d.b2Joint.prototype.GetAnchorA=function(a){return a.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorA",box2d.b2Joint.prototype.GetAnchorA);box2d.b2Joint.prototype.GetAnchorB=function(a){return a.SetZero()};
goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorB",box2d.b2Joint.prototype.GetAnchorB);box2d.b2Joint.prototype.GetReactionForce=function(a,c){return c.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionForce",box2d.b2Joint.prototype.GetReactionForce);box2d.b2Joint.prototype.GetReactionTorque=function(a){return 0};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionTorque",box2d.b2Joint.prototype.GetReactionTorque);box2d.b2Joint.prototype.InitVelocityConstraints=function(a){};
goog.exportProperty(box2d.b2Joint.prototype,"InitVelocityConstraints",box2d.b2Joint.prototype.InitVelocityConstraints);box2d.b2Joint.prototype.SolveVelocityConstraints=function(a){};goog.exportProperty(box2d.b2Joint.prototype,"SolveVelocityConstraints",box2d.b2Joint.prototype.SolveVelocityConstraints);box2d.b2Joint.prototype.SolvePositionConstraints=function(a){return!1};goog.exportProperty(box2d.b2Joint.prototype,"SolvePositionConstraints",box2d.b2Joint.prototype.SolvePositionConstraints);
box2d.b2Joint.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Joint.prototype,"GetType",box2d.b2Joint.prototype.GetType);box2d.b2Joint.prototype.GetBodyA=function(){return this.m_bodyA};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyA",box2d.b2Joint.prototype.GetBodyA);box2d.b2Joint.prototype.GetBodyB=function(){return this.m_bodyB};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyB",box2d.b2Joint.prototype.GetBodyB);box2d.b2Joint.prototype.GetNext=function(){return this.m_next};
goog.exportProperty(box2d.b2Joint.prototype,"GetNext",box2d.b2Joint.prototype.GetNext);box2d.b2Joint.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Joint.prototype,"GetUserData",box2d.b2Joint.prototype.GetUserData);box2d.b2Joint.prototype.SetUserData=function(a){this.m_userData=a};goog.exportProperty(box2d.b2Joint.prototype,"SetUserData",box2d.b2Joint.prototype.SetUserData);box2d.b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected};
goog.exportProperty(box2d.b2Joint.prototype,"GetCollideConnected",box2d.b2Joint.prototype.GetCollideConnected);box2d.b2Joint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("// Dump is not supported for this joint type.\n")};goog.exportProperty(box2d.b2Joint.prototype,"Dump",box2d.b2Joint.prototype.Dump);box2d.b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()};goog.exportProperty(box2d.b2Joint.prototype,"IsActive",box2d.b2Joint.prototype.IsActive);
box2d.b2Joint.prototype.ShiftOrigin=function(a){};goog.exportProperty(box2d.b2Joint.prototype,"ShiftOrigin",box2d.b2Joint.prototype.ShiftOrigin);box2d.b2AreaJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_areaJoint);this.bodies=[]};goog.inherits(box2d.b2AreaJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2AreaJointDef",box2d.b2AreaJointDef);box2d.b2AreaJointDef.prototype.world=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"world",box2d.b2AreaJointDef.prototype.world);box2d.b2AreaJointDef.prototype.bodies=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"bodies",box2d.b2AreaJointDef.prototype.bodies);
box2d.b2AreaJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"frequencyHz",box2d.b2AreaJointDef.prototype.frequencyHz);box2d.b2AreaJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"dampingRatio",box2d.b2AreaJointDef.prototype.dampingRatio);box2d.b2AreaJointDef.prototype.AddBody=function(a){this.bodies.push(a);1===this.bodies.length?this.bodyA=a:2===this.bodies.length&&(this.bodyB=a)};
goog.exportProperty(box2d.b2AreaJointDef.prototype,"AddBody",box2d.b2AreaJointDef.prototype.AddBody);
box2d.b2AreaJoint=function(a){box2d.b2Joint.call(this,a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=a.bodies.length,"You cannot create an area joint with less than three bodies.");this.m_bodies=a.bodies;this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_targetLengths=box2d.b2MakeNumberArray(a.bodies.length);this.m_normals=box2d.b2Vec2.MakeArray(a.bodies.length);this.m_joints=Array(a.bodies.length);this.m_deltas=box2d.b2Vec2.MakeArray(a.bodies.length);this.m_delta=new box2d.b2Vec2;
var c=new box2d.b2DistanceJointDef;c.frequencyHz=a.frequencyHz;c.dampingRatio=a.dampingRatio;for(var b=this.m_targetArea=0,d=this.m_bodies.length;b<d;++b){var e=this.m_bodies[b],f=this.m_bodies[(b+1)%d],g=e.GetWorldCenter(),h=f.GetWorldCenter();this.m_targetLengths[b]=box2d.b2Distance(g,h);this.m_targetArea+=box2d.b2Cross_V2_V2(g,h);c.Initialize(e,f,g,h);this.m_joints[b]=a.world.CreateJoint(c)}this.m_targetArea*=.5};goog.inherits(box2d.b2AreaJoint,box2d.b2Joint);
goog.exportSymbol("box2d.b2AreaJoint",box2d.b2AreaJoint);box2d.b2AreaJoint.prototype.m_bodies=null;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_bodies",box2d.b2AreaJoint.prototype.m_bodies);box2d.b2AreaJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_frequencyHz",box2d.b2AreaJoint.prototype.m_frequencyHz);box2d.b2AreaJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_dampingRatio",box2d.b2AreaJoint.prototype.m_dampingRatio);
box2d.b2AreaJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_impulse",box2d.b2AreaJoint.prototype.m_impulse);box2d.b2AreaJoint.prototype.m_targetLengths=null;box2d.b2AreaJoint.prototype.m_targetArea=0;box2d.b2AreaJoint.prototype.m_normals=null;box2d.b2AreaJoint.prototype.m_joints=null;box2d.b2AreaJoint.prototype.m_deltas=null;box2d.b2AreaJoint.prototype.m_delta=null;box2d.b2AreaJoint.prototype.GetAnchorA=function(a){return a.SetZero()};
goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorA",box2d.b2AreaJoint.prototype.GetAnchorA);box2d.b2AreaJoint.prototype.GetAnchorB=function(a){return a.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorB",box2d.b2AreaJoint.prototype.GetAnchorB);box2d.b2AreaJoint.prototype.GetReactionForce=function(a,c){return c.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionForce",box2d.b2AreaJoint.prototype.GetReactionForce);
box2d.b2AreaJoint.prototype.GetReactionTorque=function(a){return 0};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionTorque",box2d.b2AreaJoint.prototype.GetReactionTorque);box2d.b2AreaJoint.prototype.SetFrequency=function(a){this.m_frequencyHz=a;for(var c=0,b=this.m_joints.length;c<b;++c)this.m_joints[c].SetFrequency(a)};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetFrequency",box2d.b2AreaJoint.prototype.SetFrequency);box2d.b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};
goog.exportProperty(box2d.b2AreaJoint.prototype,"GetFrequency",box2d.b2AreaJoint.prototype.GetFrequency);box2d.b2AreaJoint.prototype.SetDampingRatio=function(a){this.m_dampingRatio=a;for(var c=0,b=this.m_joints.length;c<b;++c)this.m_joints[c].SetDampingRatio(a)};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetDampingRatio",box2d.b2AreaJoint.prototype.SetDampingRatio);box2d.b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};
goog.exportProperty(box2d.b2AreaJoint.prototype,"GetDampingRatio",box2d.b2AreaJoint.prototype.GetDampingRatio);box2d.b2AreaJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Area joint dumping is not supported.\n")};goog.exportProperty(box2d.b2AreaJoint.prototype,"Dump",box2d.b2AreaJoint.prototype.Dump);
box2d.b2AreaJoint.prototype.InitVelocityConstraints=function(a){for(var c=0,b=this.m_bodies.length;c<b;++c){var d=this.m_deltas[c];box2d.b2Sub_V2_V2(a.positions[this.m_bodies[(c+1)%b].m_islandIndex].c,a.positions[this.m_bodies[(c+b-1)%b].m_islandIndex].c,d)}if(a.step.warmStarting)for(this.m_impulse*=a.step.dtRatio,c=0,b=this.m_bodies.length;c<b;++c){var e=this.m_bodies[c],f=a.velocities[e.m_islandIndex].v,d=this.m_deltas[c];f.x+=e.m_invMass*d.y*.5*this.m_impulse;f.y+=e.m_invMass*-d.x*.5*this.m_impulse}else this.m_impulse=
0};goog.exportProperty(box2d.b2AreaJoint.prototype,"InitVelocityConstraints",box2d.b2AreaJoint.prototype.InitVelocityConstraints);
box2d.b2AreaJoint.prototype.SolveVelocityConstraints=function(a){for(var c=0,b=0,d=0,e=this.m_bodies.length;d<e;++d)var f=this.m_bodies[d],g=a.velocities[f.m_islandIndex].v,h=this.m_deltas[d],c=c+h.LengthSquared()/f.GetMass(),b=b+box2d.b2Cross_V2_V2(g,h);c=-2*b/c;this.m_impulse+=c;d=0;for(e=this.m_bodies.length;d<e;++d)f=this.m_bodies[d],g=a.velocities[f.m_islandIndex].v,h=this.m_deltas[d],g.x+=f.m_invMass*h.y*.5*c,g.y+=f.m_invMass*-h.x*.5*c};
goog.exportProperty(box2d.b2AreaJoint.prototype,"SolveVelocityConstraints",box2d.b2AreaJoint.prototype.SolveVelocityConstraints);
box2d.b2AreaJoint.prototype.SolvePositionConstraints=function(a){for(var c=0,b=0,d=0,e=this.m_bodies.length;d<e;++d){var f=this.m_bodies[d],f=a.positions[f.m_islandIndex].c,g=a.positions[this.m_bodies[(d+1)%e].m_islandIndex].c,h=box2d.b2Sub_V2_V2(g,f,this.m_delta),k=h.Length();k<box2d.b2_epsilon&&(k=1);this.m_normals[d].x=h.y/k;this.m_normals[d].y=-h.x/k;c+=k;b+=box2d.b2Cross_V2_V2(f,g)}c=.5*(this.m_targetArea-.5*b)/c;b=!0;d=0;for(e=this.m_bodies.length;d<e;++d)f=this.m_bodies[d],f=a.positions[f.m_islandIndex].c,
h=box2d.b2Add_V2_V2(this.m_normals[d],this.m_normals[(d+1)%e],this.m_delta),h.SelfMul(c),g=h.LengthSquared(),g>box2d.b2Sq(box2d.b2_maxLinearCorrection)&&h.SelfMul(box2d.b2_maxLinearCorrection/box2d.b2Sqrt(g)),g>box2d.b2Sq(box2d.b2_linearSlop)&&(b=!1),f.x+=h.x,f.y+=h.y;return b};goog.exportProperty(box2d.b2AreaJoint.prototype,"SolvePositionConstraints",box2d.b2AreaJoint.prototype.SolvePositionConstraints);box2d.b2DistanceJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_distanceJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2DistanceJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2DistanceJointDef",box2d.b2DistanceJointDef);box2d.b2DistanceJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorA",box2d.b2DistanceJointDef.prototype.localAnchorA);
box2d.b2DistanceJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorB",box2d.b2DistanceJointDef.prototype.localAnchorB);box2d.b2DistanceJointDef.prototype.length=1;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"length",box2d.b2DistanceJointDef.prototype.length);box2d.b2DistanceJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"frequencyHz",box2d.b2DistanceJointDef.prototype.frequencyHz);
box2d.b2DistanceJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"dampingRatio",box2d.b2DistanceJointDef.prototype.dampingRatio);box2d.b2DistanceJointDef.prototype.Initialize=function(a,c,b,d){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(d,this.localAnchorB);this.length=box2d.b2Distance(b,d);this.dampingRatio=this.frequencyHz=0};goog.exportProperty(box2d.b2DistanceJointDef.prototype,"Initialize",box2d.b2DistanceJointDef.prototype.Initialize);
box2d.b2DistanceJoint=function(a){box2d.b2Joint.call(this,a);this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_length=a.length};
goog.inherits(box2d.b2DistanceJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2DistanceJoint",box2d.b2DistanceJoint);box2d.b2DistanceJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_frequencyHz",box2d.b2DistanceJoint.prototype.m_frequencyHz);box2d.b2DistanceJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_dampingRatio",box2d.b2DistanceJoint.prototype.m_dampingRatio);box2d.b2DistanceJoint.prototype.m_bias=0;
goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_bias",box2d.b2DistanceJoint.prototype.m_bias);box2d.b2DistanceJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorA",box2d.b2DistanceJoint.prototype.m_localAnchorA);box2d.b2DistanceJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorB",box2d.b2DistanceJoint.prototype.m_localAnchorB);box2d.b2DistanceJoint.prototype.m_gamma=0;
goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_gamma",box2d.b2DistanceJoint.prototype.m_gamma);box2d.b2DistanceJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_impulse",box2d.b2DistanceJoint.prototype.m_impulse);box2d.b2DistanceJoint.prototype.m_length=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_length",box2d.b2DistanceJoint.prototype.m_length);box2d.b2DistanceJoint.prototype.m_indexA=0;
goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexA",box2d.b2DistanceJoint.prototype.m_indexA);box2d.b2DistanceJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexB",box2d.b2DistanceJoint.prototype.m_indexB);box2d.b2DistanceJoint.prototype.m_u=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_u",box2d.b2DistanceJoint.prototype.m_u);box2d.b2DistanceJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rA",box2d.b2DistanceJoint.prototype.m_rA);
box2d.b2DistanceJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rB",box2d.b2DistanceJoint.prototype.m_rB);box2d.b2DistanceJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterA",box2d.b2DistanceJoint.prototype.m_localCenterA);box2d.b2DistanceJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterB",box2d.b2DistanceJoint.prototype.m_localCenterB);
box2d.b2DistanceJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassA",box2d.b2DistanceJoint.prototype.m_invMassA);box2d.b2DistanceJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassB",box2d.b2DistanceJoint.prototype.m_invMassB);box2d.b2DistanceJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIA",box2d.b2DistanceJoint.prototype.m_invIA);box2d.b2DistanceJoint.prototype.m_invIB=0;
goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIB",box2d.b2DistanceJoint.prototype.m_invIB);box2d.b2DistanceJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_mass",box2d.b2DistanceJoint.prototype.m_mass);box2d.b2DistanceJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qA",box2d.b2DistanceJoint.prototype.m_qA);box2d.b2DistanceJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qB",box2d.b2DistanceJoint.prototype.m_qB);
box2d.b2DistanceJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcA",box2d.b2DistanceJoint.prototype.m_lalcA);box2d.b2DistanceJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcB",box2d.b2DistanceJoint.prototype.m_lalcB);box2d.b2DistanceJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorA",box2d.b2DistanceJoint.prototype.GetAnchorA);
box2d.b2DistanceJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorB",box2d.b2DistanceJoint.prototype.GetAnchorB);box2d.b2DistanceJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*this.m_impulse*this.m_u.x,a*this.m_impulse*this.m_u.y)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionForce",box2d.b2DistanceJoint.prototype.GetReactionForce);
box2d.b2DistanceJoint.prototype.GetReactionTorque=function(a){return 0};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionTorque",box2d.b2DistanceJoint.prototype.GetReactionTorque);box2d.b2DistanceJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorA",box2d.b2DistanceJoint.prototype.GetLocalAnchorA);box2d.b2DistanceJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};
goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorB",box2d.b2DistanceJoint.prototype.GetLocalAnchorB);box2d.b2DistanceJoint.prototype.SetLength=function(a){this.m_length=a};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetLength",box2d.b2DistanceJoint.prototype.SetLength);box2d.b2DistanceJoint.prototype.GetLength=function(){return this.m_length};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLength",box2d.b2DistanceJoint.prototype.GetLength);
box2d.b2DistanceJoint.prototype.SetFrequency=function(a){this.m_frequencyHz=a};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetFrequency",box2d.b2DistanceJoint.prototype.SetFrequency);box2d.b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetFrequency",box2d.b2DistanceJoint.prototype.GetFrequency);box2d.b2DistanceJoint.prototype.SetDampingRatio=function(a){this.m_dampingRatio=a};
goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetDampingRatio",box2d.b2DistanceJoint.prototype.SetDampingRatio);box2d.b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetDampingRatio",box2d.b2DistanceJoint.prototype.GetDampingRatio);
box2d.b2DistanceJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.length = %.15f;\n",this.m_length);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2DistanceJoint.prototype,"Dump",box2d.b2DistanceJoint.prototype.Dump);
box2d.b2DistanceJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].c,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].c,f=a.positions[this.m_indexB].a,g=a.velocities[this.m_indexB].v,h=a.velocities[this.m_indexB].w,k=this.m_qA.SetAngle(a.positions[this.m_indexA].a),f=this.m_qB.SetAngle(f);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2Mul_R_V2(k,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(f,this.m_lalcB,this.m_rB);this.m_u.x=e.x+this.m_rB.x-c.x-this.m_rA.x;this.m_u.y=e.y+this.m_rB.y-
c.y-this.m_rA.y;e=this.m_u.Length();e>box2d.b2_linearSlop?this.m_u.SelfMul(1/e):this.m_u.SetZero();c=box2d.b2Cross_V2_V2(this.m_rA,this.m_u);k=box2d.b2Cross_V2_V2(this.m_rB,this.m_u);c=this.m_invMassA+this.m_invIA*c*c+this.m_invMassB+this.m_invIB*k*k;this.m_mass=0!==c?1/c:0;if(0<this.m_frequencyHz){var e=e-this.m_length,k=2*box2d.b2_pi*this.m_frequencyHz,f=this.m_mass*k*k,l=a.step.dt;this.m_gamma=l*(2*this.m_mass*this.m_dampingRatio*k+l*f);this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0;this.m_bias=
e*l*f*this.m_gamma;c+=this.m_gamma;this.m_mass=0!==c?1/c:0}else this.m_bias=this.m_gamma=0;a.step.warmStarting?(this.m_impulse*=a.step.dtRatio,c=box2d.b2Mul_S_V2(this.m_impulse,this.m_u,box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P),b.SelfMulSub(this.m_invMassA,c),d-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,c),g.SelfMulAdd(this.m_invMassB,c),h+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,c)):this.m_impulse=0;a.velocities[this.m_indexA].w=d;a.velocities[this.m_indexB].w=h};
goog.exportProperty(box2d.b2DistanceJoint.prototype,"InitVelocityConstraints",box2d.b2DistanceJoint.prototype.InitVelocityConstraints);box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2DistanceJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),g=box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB),f=box2d.b2Dot_V2_V2(this.m_u,box2d.b2Sub_V2_V2(g,f,box2d.b2Vec2.s_t0)),f=-this.m_mass*(f+this.m_bias+
this.m_gamma*this.m_impulse);this.m_impulse+=f;f=box2d.b2Mul_S_V2(f,this.m_u,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P);c.SelfMulSub(this.m_invMassA,f);b-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,f);d.SelfMulAdd(this.m_invMassB,f);e+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,f);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolveVelocityConstraints",box2d.b2DistanceJoint.prototype.SolveVelocityConstraints);
box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2DistanceJoint.prototype.SolvePositionConstraints=function(a){if(0<this.m_frequencyHz)return!0;var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a;this.m_qA.SetAngle(b);this.m_qB.SetAngle(e);var f=box2d.b2Mul_R_V2(this.m_qA,this.m_lalcA,this.m_rA),g=box2d.b2Mul_R_V2(this.m_qB,this.m_lalcB,this.m_rB),h=this.m_u;h.x=d.x+g.x-c.x-f.x;h.y=d.y+g.y-c.y-f.y;var k=this.m_u.Normalize()-this.m_length,k=box2d.b2Clamp(k,-box2d.b2_maxLinearCorrection,
box2d.b2_maxLinearCorrection),h=box2d.b2Mul_S_V2(-this.m_mass*k,h,box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P);c.SelfMulSub(this.m_invMassA,h);b-=this.m_invIA*box2d.b2Cross_V2_V2(f,h);d.SelfMulAdd(this.m_invMassB,h);e+=this.m_invIB*box2d.b2Cross_V2_V2(g,h);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return box2d.b2Abs(k)<box2d.b2_linearSlop};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolvePositionConstraints",box2d.b2DistanceJoint.prototype.SolvePositionConstraints);
box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2FrictionJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_frictionJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2FrictionJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2FrictionJointDef",box2d.b2FrictionJointDef);box2d.b2FrictionJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorA",box2d.b2FrictionJointDef.prototype.localAnchorA);
box2d.b2FrictionJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorB",box2d.b2FrictionJointDef.prototype.localAnchorB);box2d.b2FrictionJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxForce",box2d.b2FrictionJointDef.prototype.maxForce);box2d.b2FrictionJointDef.prototype.maxTorque=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxTorque",box2d.b2FrictionJointDef.prototype.maxTorque);
box2d.b2FrictionJointDef.prototype.Initialize=function(a,c,b){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(b,this.localAnchorB)};goog.exportProperty(box2d.b2FrictionJointDef.prototype,"Initialize",box2d.b2FrictionJointDef.prototype.Initialize);
box2d.b2FrictionJoint=function(a){box2d.b2Joint.call(this,a);this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_linearImpulse=(new box2d.b2Vec2).SetZero();this.m_maxForce=a.maxForce;this.m_maxTorque=a.maxTorque;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_linearMass=(new box2d.b2Mat22).SetZero();this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;
this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2FrictionJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2FrictionJoint",box2d.b2FrictionJoint);box2d.b2FrictionJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorA",box2d.b2FrictionJoint.prototype.m_localAnchorA);box2d.b2FrictionJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorB",box2d.b2FrictionJoint.prototype.m_localAnchorB);
box2d.b2FrictionJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearImpulse",box2d.b2FrictionJoint.prototype.m_linearImpulse);box2d.b2FrictionJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularImpulse",box2d.b2FrictionJoint.prototype.m_angularImpulse);box2d.b2FrictionJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxForce",box2d.b2FrictionJoint.prototype.m_maxForce);
box2d.b2FrictionJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxTorque",box2d.b2FrictionJoint.prototype.m_maxTorque);box2d.b2FrictionJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexA",box2d.b2FrictionJoint.prototype.m_indexA);box2d.b2FrictionJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexB",box2d.b2FrictionJoint.prototype.m_indexB);box2d.b2FrictionJoint.prototype.m_rA=null;
goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rA",box2d.b2FrictionJoint.prototype.m_rA);box2d.b2FrictionJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rB",box2d.b2FrictionJoint.prototype.m_rB);box2d.b2FrictionJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterA",box2d.b2FrictionJoint.prototype.m_localCenterA);box2d.b2FrictionJoint.prototype.m_localCenterB=null;
goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterB",box2d.b2FrictionJoint.prototype.m_localCenterB);box2d.b2FrictionJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassA",box2d.b2FrictionJoint.prototype.m_invMassA);box2d.b2FrictionJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassB",box2d.b2FrictionJoint.prototype.m_invMassB);box2d.b2FrictionJoint.prototype.m_invIA=0;
goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIA",box2d.b2FrictionJoint.prototype.m_invIA);box2d.b2FrictionJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIB",box2d.b2FrictionJoint.prototype.m_invIB);box2d.b2FrictionJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearMass",box2d.b2FrictionJoint.prototype.m_linearMass);box2d.b2FrictionJoint.prototype.m_angularMass=0;
goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularMass",box2d.b2FrictionJoint.prototype.m_angularMass);box2d.b2FrictionJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qA",box2d.b2FrictionJoint.prototype.m_qA);box2d.b2FrictionJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qB",box2d.b2FrictionJoint.prototype.m_qB);box2d.b2FrictionJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcA",box2d.b2FrictionJoint.prototype.m_lalcA);
box2d.b2FrictionJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcB",box2d.b2FrictionJoint.prototype.m_lalcB);box2d.b2FrictionJoint.prototype.m_K=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_K",box2d.b2FrictionJoint.prototype.m_K);
box2d.b2FrictionJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.positions[this.m_indexB].a,
e=a.velocities[this.m_indexB].v,f=a.velocities[this.m_indexB].w,g=this.m_qA.SetAngle(a.positions[this.m_indexA].a),d=this.m_qB.SetAngle(d);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);g=box2d.b2Mul_R_V2(g,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var h=box2d.b2Mul_R_V2(d,this.m_lalcB,this.m_rB),d=this.m_invMassA,k=this.m_invMassB,l=this.m_invIA,m=this.m_invIB,n=this.m_K;n.ex.x=d+k+l*g.y*g.y+m*h.y*h.y;n.ex.y=-l*g.x*g.y-
m*h.x*h.y;n.ey.x=n.ex.y;n.ey.y=d+k+l*g.x*g.x+m*h.x*h.x;n.GetInverse(this.m_linearMass);this.m_angularMass=l+m;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);a.step.warmStarting?(this.m_linearImpulse.SelfMul(a.step.dtRatio),this.m_angularImpulse*=a.step.dtRatio,g=this.m_linearImpulse,c.SelfMulSub(d,g),b-=l*(box2d.b2Cross_V2_V2(this.m_rA,g)+this.m_angularImpulse),e.SelfMulAdd(k,g),f+=m*(box2d.b2Cross_V2_V2(this.m_rB,g)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=
0);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=f};goog.exportProperty(box2d.b2FrictionJoint.prototype,"InitVelocityConstraints",box2d.b2FrictionJoint.prototype.InitVelocityConstraints);
box2d.b2FrictionJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=this.m_invMassA,g=this.m_invMassB,h=this.m_invIA,k=this.m_invIB,l=a.step.dt,m,n=-this.m_angularMass*(e-b),p=this.m_angularImpulse;m=l*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+n,-m,m);n=this.m_angularImpulse-p;b-=h*n;e+=k*n;m=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(d,
e,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot);n=box2d.b2Mul_M22_V2(this.m_linearMass,m,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg();p=box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(n);m=l*this.m_maxForce;this.m_linearImpulse.LengthSquared()>m*m&&(this.m_linearImpulse.Normalize(),
this.m_linearImpulse.SelfMul(m));box2d.b2Sub_V2_V2(this.m_linearImpulse,p,n);c.SelfMulSub(f,n);b-=h*box2d.b2Cross_V2_V2(this.m_rA,n);d.SelfMulAdd(g,n);e+=k*box2d.b2Cross_V2_V2(this.m_rB,n);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolveVelocityConstraints",box2d.b2FrictionJoint.prototype.SolveVelocityConstraints);box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;
box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolvePositionConstraints=function(a){return!0};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolvePositionConstraints",box2d.b2FrictionJoint.prototype.SolvePositionConstraints);box2d.b2FrictionJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};
goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorA",box2d.b2FrictionJoint.prototype.GetAnchorA);box2d.b2FrictionJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorB",box2d.b2FrictionJoint.prototype.GetAnchorB);box2d.b2FrictionJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*this.m_linearImpulse.x,a*this.m_linearImpulse.y)};
goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionForce",box2d.b2FrictionJoint.prototype.GetReactionForce);box2d.b2FrictionJoint.prototype.GetReactionTorque=function(a){return a*this.m_angularImpulse};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionTorque",box2d.b2FrictionJoint.prototype.GetReactionTorque);box2d.b2FrictionJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};
goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorA",box2d.b2FrictionJoint.prototype.GetLocalAnchorA);box2d.b2FrictionJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorB",box2d.b2FrictionJoint.prototype.GetLocalAnchorB);box2d.b2FrictionJoint.prototype.SetMaxForce=function(a){this.m_maxForce=a};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxForce",box2d.b2FrictionJoint.prototype.SetMaxForce);
box2d.b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxForce",box2d.b2FrictionJoint.prototype.GetMaxForce);box2d.b2FrictionJoint.prototype.SetMaxTorque=function(a){this.m_maxTorque=a};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxTorque",box2d.b2FrictionJoint.prototype.SetMaxTorque);box2d.b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};
goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxTorque",box2d.b2FrictionJoint.prototype.GetMaxTorque);
box2d.b2FrictionJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2FrictionJoint.prototype,"Dump",box2d.b2FrictionJoint.prototype.Dump);box2d.b2JointFactory={};
box2d.b2JointFactory.Create=function(a,c){var b=null;switch(a.type){case box2d.b2JointType.e_distanceJoint:b=new box2d.b2DistanceJoint(a instanceof box2d.b2DistanceJointDef?a:null);break;case box2d.b2JointType.e_mouseJoint:b=new box2d.b2MouseJoint(a instanceof box2d.b2MouseJointDef?a:null);break;case box2d.b2JointType.e_prismaticJoint:b=new box2d.b2PrismaticJoint(a instanceof box2d.b2PrismaticJointDef?a:null);break;case box2d.b2JointType.e_revoluteJoint:b=new box2d.b2RevoluteJoint(a instanceof box2d.b2RevoluteJointDef?
a:null);break;case box2d.b2JointType.e_pulleyJoint:b=new box2d.b2PulleyJoint(a instanceof box2d.b2PulleyJointDef?a:null);break;case box2d.b2JointType.e_gearJoint:b=new box2d.b2GearJoint(a instanceof box2d.b2GearJointDef?a:null);break;case box2d.b2JointType.e_wheelJoint:b=new box2d.b2WheelJoint(a instanceof box2d.b2WheelJointDef?a:null);break;case box2d.b2JointType.e_weldJoint:b=new box2d.b2WeldJoint(a instanceof box2d.b2WeldJointDef?a:null);break;case box2d.b2JointType.e_frictionJoint:b=new box2d.b2FrictionJoint(a instanceof
box2d.b2FrictionJointDef?a:null);break;case box2d.b2JointType.e_ropeJoint:b=new box2d.b2RopeJoint(a instanceof box2d.b2RopeJointDef?a:null);break;case box2d.b2JointType.e_motorJoint:b=new box2d.b2MotorJoint(a instanceof box2d.b2MotorJointDef?a:null);break;case box2d.b2JointType.e_areaJoint:b=new box2d.b2AreaJoint(a instanceof box2d.b2AreaJointDef?a:null);break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}return b};goog.exportSymbol("box2d.b2JointFactory.Create",box2d.b2JointFactory.Create);
box2d.b2JointFactory.Destroy=function(a,c){};goog.exportSymbol("box2d.b2JointFactory.Destroy",box2d.b2JointFactory.Destroy);box2d.b2World=function(a){this.m_flag_clearForces=!0;this.m_contactManager=new box2d.b2ContactManager;this.m_gravity=a.Clone();this.m_out_gravity=new box2d.b2Vec2;this.m_allowSleep=!0;this.m_debugDraw=this.m_destructionListener=null;this.m_continuousPhysics=this.m_warmStarting=!0;this.m_subStepping=!1;this.m_stepComplete=!0;this.m_profile=new box2d.b2Profile;this.m_island=new box2d.b2Island;this.s_stack=[]};goog.exportSymbol("box2d.b2World",box2d.b2World);
box2d.b2World.prototype.m_flag_newFixture=!1;goog.exportProperty(box2d.b2World.prototype,"m_flag_newFixture",box2d.b2World.prototype.m_flag_newFixture);box2d.b2World.prototype.m_flag_locked=!1;goog.exportProperty(box2d.b2World.prototype,"m_flag_locked",box2d.b2World.prototype.m_flag_locked);box2d.b2World.prototype.m_flag_clearForces=!1;goog.exportProperty(box2d.b2World.prototype,"m_flag_clearForces",box2d.b2World.prototype.m_flag_clearForces);box2d.b2World.prototype.m_contactManager=null;
goog.exportProperty(box2d.b2World.prototype,"m_contactManager",box2d.b2World.prototype.m_contactManager);box2d.b2World.prototype.m_bodyList=null;goog.exportProperty(box2d.b2World.prototype,"m_bodyList",box2d.b2World.prototype.m_bodyList);box2d.b2World.prototype.m_jointList=null;goog.exportProperty(box2d.b2World.prototype,"m_jointList",box2d.b2World.prototype.m_jointList);box2d.b2World.prototype.m_particleSystemList=null;goog.exportProperty(box2d.b2World.prototype,"m_particleSystemList",box2d.b2World.prototype.m_particleSystemList);
box2d.b2World.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2World.prototype,"m_bodyCount",box2d.b2World.prototype.m_bodyCount);box2d.b2World.prototype.m_jointCount=0;goog.exportProperty(box2d.b2World.prototype,"m_jointCount",box2d.b2World.prototype.m_jointCount);box2d.b2World.prototype.m_gravity=null;goog.exportProperty(box2d.b2World.prototype,"m_gravity",box2d.b2World.prototype.m_gravity);box2d.b2World.prototype.m_out_gravity=null;
goog.exportProperty(box2d.b2World.prototype,"m_out_gravity",box2d.b2World.prototype.m_out_gravity);box2d.b2World.prototype.m_allowSleep=!0;goog.exportProperty(box2d.b2World.prototype,"m_allowSleep",box2d.b2World.prototype.m_allowSleep);box2d.b2World.prototype.m_destructionListener=null;goog.exportProperty(box2d.b2World.prototype,"m_destructionListener",box2d.b2World.prototype.m_destructionListener);box2d.b2World.prototype.m_debugDraw=null;
goog.exportProperty(box2d.b2World.prototype,"m_debugDraw",box2d.b2World.prototype.m_debugDraw);box2d.b2World.prototype.m_inv_dt0=0;goog.exportProperty(box2d.b2World.prototype,"m_inv_dt0",box2d.b2World.prototype.m_inv_dt0);box2d.b2World.prototype.m_warmStarting=!0;goog.exportProperty(box2d.b2World.prototype,"m_warmStarting",box2d.b2World.prototype.m_warmStarting);box2d.b2World.prototype.m_continuousPhysics=!0;goog.exportProperty(box2d.b2World.prototype,"m_continuousPhysics",box2d.b2World.prototype.m_continuousPhysics);
box2d.b2World.prototype.m_subStepping=!1;goog.exportProperty(box2d.b2World.prototype,"m_subStepping",box2d.b2World.prototype.m_subStepping);box2d.b2World.prototype.m_stepComplete=!0;goog.exportProperty(box2d.b2World.prototype,"m_stepComplete",box2d.b2World.prototype.m_stepComplete);box2d.b2World.prototype.m_profile=null;goog.exportProperty(box2d.b2World.prototype,"m_profile",box2d.b2World.prototype.m_profile);box2d.b2World.prototype.m_island=null;
goog.exportProperty(box2d.b2World.prototype,"m_island",box2d.b2World.prototype.m_island);box2d.b2World.prototype.s_stack=null;goog.exportProperty(box2d.b2World.prototype,"s_stack",box2d.b2World.prototype.s_stack);box2d.b2World.prototype.m_controllerList=null;goog.exportProperty(box2d.b2World.prototype,"m_controllerList",box2d.b2World.prototype.m_controllerList);box2d.b2World.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2World.prototype,"m_controllerCount",box2d.b2World.prototype.m_controllerCount);
box2d.b2World.prototype.SetAllowSleeping=function(a){if(a!==this.m_allowSleep&&(this.m_allowSleep=a,!this.m_allowSleep))for(a=this.m_bodyList;a;a=a.m_next)a.SetAwake(!0)};goog.exportProperty(box2d.b2World.prototype,"SetAllowSleeping",box2d.b2World.prototype.SetAllowSleeping);box2d.b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep};goog.exportProperty(box2d.b2World.prototype,"GetAllowSleeping",box2d.b2World.prototype.GetAllowSleeping);
box2d.b2World.prototype.SetWarmStarting=function(a){this.m_warmStarting=a};goog.exportProperty(box2d.b2World.prototype,"SetWarmStarting",box2d.b2World.prototype.SetWarmStarting);box2d.b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting};goog.exportProperty(box2d.b2World.prototype,"GetWarmStarting",box2d.b2World.prototype.GetWarmStarting);box2d.b2World.prototype.SetContinuousPhysics=function(a){this.m_continuousPhysics=a};
goog.exportProperty(box2d.b2World.prototype,"SetContinuousPhysics",box2d.b2World.prototype.SetContinuousPhysics);box2d.b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics};goog.exportProperty(box2d.b2World.prototype,"GetContinuousPhysics",box2d.b2World.prototype.GetContinuousPhysics);box2d.b2World.prototype.SetSubStepping=function(a){this.m_subStepping=a};goog.exportProperty(box2d.b2World.prototype,"SetSubStepping",box2d.b2World.prototype.SetSubStepping);
box2d.b2World.prototype.GetSubStepping=function(){return this.m_subStepping};goog.exportProperty(box2d.b2World.prototype,"GetSubStepping",box2d.b2World.prototype.GetSubStepping);box2d.b2World.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2World.prototype,"GetBodyList",box2d.b2World.prototype.GetBodyList);box2d.b2World.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2World.prototype,"GetJointList",box2d.b2World.prototype.GetJointList);
box2d.b2World.prototype.GetParticleSystemList=function(){return this.m_particleSystemList};goog.exportProperty(box2d.b2World.prototype,"GetParticleSystemList",box2d.b2World.prototype.GetParticleSystemList);box2d.b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList};goog.exportProperty(box2d.b2World.prototype,"GetContactList",box2d.b2World.prototype.GetContactList);box2d.b2World.prototype.GetBodyCount=function(){return this.m_bodyCount};
goog.exportProperty(box2d.b2World.prototype,"GetBodyCount",box2d.b2World.prototype.GetBodyCount);box2d.b2World.prototype.GetJointCount=function(){return this.m_jointCount};goog.exportProperty(box2d.b2World.prototype,"GetJointCount",box2d.b2World.prototype.GetJointCount);box2d.b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount};goog.exportProperty(box2d.b2World.prototype,"GetContactCount",box2d.b2World.prototype.GetContactCount);
box2d.b2World.prototype.SetGravity=function(a,c){c=c||!0;if(this.m_gravity.x!==a.x||this.m_gravity.y!==a.y)if(this.m_gravity.Copy(a),c)for(var b=this.m_bodyList;b;b=b.m_next)b.SetAwake(!0)};goog.exportProperty(box2d.b2World.prototype,"SetGravity",box2d.b2World.prototype.SetGravity);box2d.b2World.prototype.GetGravity=function(a){a=a||this.m_out_gravity;return a.Copy(this.m_gravity)};goog.exportProperty(box2d.b2World.prototype,"GetGravity",box2d.b2World.prototype.GetGravity);
box2d.b2World.prototype.IsLocked=function(){return this.m_flag_locked};goog.exportProperty(box2d.b2World.prototype,"IsLocked",box2d.b2World.prototype.IsLocked);box2d.b2World.prototype.SetAutoClearForces=function(a){this.m_flag_clearForces=a};goog.exportProperty(box2d.b2World.prototype,"SetAutoClearForces",box2d.b2World.prototype.SetAutoClearForces);box2d.b2World.prototype.GetAutoClearForces=function(){return this.m_flag_clearForces};
goog.exportProperty(box2d.b2World.prototype,"GetAutoClearForces",box2d.b2World.prototype.GetAutoClearForces);box2d.b2World.prototype.GetContactManager=function(){return this.m_contactManager};goog.exportProperty(box2d.b2World.prototype,"GetContactManager",box2d.b2World.prototype.GetContactManager);box2d.b2World.prototype.GetProfile=function(){return this.m_profile};goog.exportProperty(box2d.b2World.prototype,"GetProfile",box2d.b2World.prototype.GetProfile);
box2d.b2World.prototype.SetDestructionListener=function(a){this.m_destructionListener=a};goog.exportProperty(box2d.b2World.prototype,"SetDestructionListener",box2d.b2World.prototype.SetDestructionListener);box2d.b2World.prototype.SetContactFilter=function(a){this.m_contactManager.m_contactFilter=a};goog.exportProperty(box2d.b2World.prototype,"SetContactFilter",box2d.b2World.prototype.SetContactFilter);box2d.b2World.prototype.SetContactListener=function(a){this.m_contactManager.m_contactListener=a};
goog.exportProperty(box2d.b2World.prototype,"SetContactListener",box2d.b2World.prototype.SetContactListener);box2d.b2World.prototype.SetDebugDraw=function(a){this.m_debugDraw=a};goog.exportProperty(box2d.b2World.prototype,"SetDebugDraw",box2d.b2World.prototype.SetDebugDraw);
box2d.b2World.prototype.CreateBody=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(this.IsLocked())return null;a=new box2d.b2Body(a,this);a.m_prev=null;if(a.m_next=this.m_bodyList)this.m_bodyList.m_prev=a;this.m_bodyList=a;++this.m_bodyCount;return a};goog.exportProperty(box2d.b2World.prototype,"CreateBody",box2d.b2World.prototype.CreateBody);
box2d.b2World.prototype.DestroyBody=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(!this.IsLocked()){for(var c=a.m_jointList;c;){var b=c,c=c.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(b.joint);this.DestroyJoint(b.joint);a.m_jointList=c}a.m_jointList=null;for(c=a.m_controllerList;c;)b=c,c=c.nextController,b.controller.RemoveBody(a);for(c=a.m_contactList;c;)b=c,c=c.next,this.m_contactManager.Destroy(b.contact);
a.m_contactList=null;for(c=a.m_fixtureList;c;)b=c,c=c.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(b),b.DestroyProxies(this.m_contactManager.m_broadPhase),b.Destroy(),a.m_fixtureList=c,--a.m_fixtureCount;a.m_fixtureList=null;a.m_fixtureCount=0;a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a===this.m_bodyList&&(this.m_bodyList=a.m_next);--this.m_bodyCount}};goog.exportProperty(box2d.b2World.prototype,"DestroyBody",box2d.b2World.prototype.DestroyBody);
box2d.b2World.prototype.CreateJoint=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(this.IsLocked())return null;var c=box2d.b2JointFactory.Create(a,null);c.m_prev=null;if(c.m_next=this.m_jointList)this.m_jointList.m_prev=c;this.m_jointList=c;++this.m_jointCount;c.m_edgeA.joint=c;c.m_edgeA.other=c.m_bodyB;c.m_edgeA.prev=null;if(c.m_edgeA.next=c.m_bodyA.m_jointList)c.m_bodyA.m_jointList.prev=c.m_edgeA;c.m_bodyA.m_jointList=c.m_edgeA;c.m_edgeB.joint=c;c.m_edgeB.other=c.m_bodyA;
c.m_edgeB.prev=null;if(c.m_edgeB.next=c.m_bodyB.m_jointList)c.m_bodyB.m_jointList.prev=c.m_edgeB;c.m_bodyB.m_jointList=c.m_edgeB;var b=a.bodyA,d=a.bodyB;if(!a.collideConnected)for(a=d.GetContactList();a;)a.other===b&&a.contact.FlagForFiltering(),a=a.next;return c};goog.exportProperty(box2d.b2World.prototype,"CreateJoint",box2d.b2World.prototype.CreateJoint);
box2d.b2World.prototype.DestroyJoint=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(!this.IsLocked()){var c=a.m_collideConnected;a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a===this.m_jointList&&(this.m_jointList=a.m_next);var b=a.m_bodyA,d=a.m_bodyB;b.SetAwake(!0);d.SetAwake(!0);a.m_edgeA.prev&&(a.m_edgeA.prev.next=a.m_edgeA.next);a.m_edgeA.next&&(a.m_edgeA.next.prev=a.m_edgeA.prev);a.m_edgeA===b.m_jointList&&(b.m_jointList=a.m_edgeA.next);a.m_edgeA.prev=
null;a.m_edgeA.next=null;a.m_edgeB.prev&&(a.m_edgeB.prev.next=a.m_edgeB.next);a.m_edgeB.next&&(a.m_edgeB.next.prev=a.m_edgeB.prev);a.m_edgeB===d.m_jointList&&(d.m_jointList=a.m_edgeB.next);a.m_edgeB.prev=null;a.m_edgeB.next=null;box2d.b2JointFactory.Destroy(a,null);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_jointCount);--this.m_jointCount;if(!c)for(a=d.GetContactList();a;)a.other===b&&a.contact.FlagForFiltering(),a=a.next}};goog.exportProperty(box2d.b2World.prototype,"DestroyJoint",box2d.b2World.prototype.DestroyJoint);
box2d.b2World.prototype.CreateParticleSystem=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(this.IsLocked())return null;a=new box2d.b2ParticleSystem(a,this);a.m_prev=null;if(a.m_next=this.m_particleSystemList)this.m_particleSystemList.m_prev=a;return this.m_particleSystemList=a};goog.exportProperty(box2d.b2World.prototype,"CreateParticleSystem",box2d.b2World.prototype.CreateParticleSystem);
box2d.b2World.prototype.DestroyParticleSystem=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());this.IsLocked()||(a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),a===this.m_particleSystemList&&(this.m_particleSystemList=a.m_next))};goog.exportProperty(box2d.b2World.prototype,"DestroyParticleSystem",box2d.b2World.prototype.DestroyParticleSystem);
box2d.b2World.prototype.Solve=function(a){for(var c=this.m_bodyList;c;c=c.m_next)c.m_xf0.Copy(c.m_xf);for(var b=this.m_controllerList;b;b=b.m_next)b.Step(a);this.m_profile.solveInit=0;this.m_profile.solveVelocity=0;this.m_profile.solvePosition=0;b=this.m_island;b.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(c=this.m_bodyList;c;c=c.m_next)c.m_flag_islandFlag=!1;for(var d=this.m_contactManager.m_contactList;d;d=
d.m_next)d.m_flag_islandFlag=!1;for(d=this.m_jointList;d;d=d.m_next)d.m_islandFlag=!1;for(var d=this.m_bodyCount,e=this.s_stack,f=this.m_bodyList;f;f=f.m_next)if(!f.m_flag_islandFlag&&f.IsAwake()&&f.IsActive()&&f.GetType()!==box2d.b2BodyType.b2_staticBody){b.Clear();var g=0;e[g++]=f;for(f.m_flag_islandFlag=!0;0<g;)if(c=e[--g],box2d.ENABLE_ASSERTS&&box2d.b2Assert(c.IsActive()),b.AddBody(c),c.SetAwake(!0),c.GetType()!==box2d.b2BodyType.b2_staticBody){for(var h=c.m_contactList;h;h=h.next){var k=h.contact;
if(!k.m_flag_islandFlag&&k.IsEnabled()&&k.IsTouching()){var l=k.m_fixtureB.m_isSensor;k.m_fixtureA.m_isSensor||l||(b.AddContact(k),k.m_flag_islandFlag=!0,k=h.other,k.m_flag_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(g<d),e[g++]=k,k.m_flag_islandFlag=!0))}}for(c=c.m_jointList;c;c=c.next)c.joint.m_islandFlag||(k=c.other,k.IsActive()&&(b.AddJoint(c.joint),c.joint.m_islandFlag=!0,k.m_flag_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(g<d),e[g++]=k,k.m_flag_islandFlag=!0)))}c=new box2d.b2Profile;
b.Solve(c,a,this.m_gravity,this.m_allowSleep);this.m_profile.solveInit+=c.solveInit;this.m_profile.solveVelocity+=c.solveVelocity;this.m_profile.solvePosition+=c.solvePosition;for(g=0;g<b.m_bodyCount;++g)c=b.m_bodies[g],c.GetType()===box2d.b2BodyType.b2_staticBody&&(c.m_flag_islandFlag=!1)}for(g=0;g<e.length&&e[g];++g)e[g]=null;a=new box2d.b2Timer;for(c=this.m_bodyList;c;c=c.m_next)c.m_flag_islandFlag&&c.GetType()!==box2d.b2BodyType.b2_staticBody&&c.SynchronizeFixtures();this.m_contactManager.FindNewContacts();
this.m_profile.broadphase=a.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Solve",box2d.b2World.prototype.Solve);
box2d.b2World.prototype.SolveTOI=function(a){var c=this.m_island;c.Initialize(2*box2d.b2_maxTOIContacts,box2d.b2_maxTOIContacts,0,null,this.m_contactManager.m_contactListener);if(this.m_stepComplete){for(var b=this.m_bodyList;b;b=b.m_next)b.m_flag_islandFlag=!1,b.m_sweep.alpha0=0;for(var d=this.m_contactManager.m_contactList;d;d=d.m_next)d.m_flag_toiFlag=d.m_flag_islandFlag=!1,d.m_toiCount=0,d.m_toi=1}for(;;){for(var e=null,b=1,d=this.m_contactManager.m_contactList;d;d=d.m_next)if(d.IsEnabled()&&
!(d.m_toiCount>box2d.b2_maxSubSteps)){var f=1;if(d.m_flag_toiFlag)f=d.m_toi;else{var g=d.GetFixtureA(),h=d.GetFixtureB();if(g.IsSensor()||h.IsSensor())continue;var f=g.GetBody(),k=h.GetBody(),l=f.m_type,m=k.m_type;box2d.ENABLE_ASSERTS&&box2d.b2Assert(l===box2d.b2BodyType.b2_dynamicBody||m===box2d.b2BodyType.b2_dynamicBody);var n=f.IsAwake()&&l!==box2d.b2BodyType.b2_staticBody,p=k.IsAwake()&&m!==box2d.b2BodyType.b2_staticBody;if(!n&&!p)continue;l=f.IsBullet()||l!==box2d.b2BodyType.b2_dynamicBody;m=
k.IsBullet()||m!==box2d.b2BodyType.b2_dynamicBody;if(!l&&!m)continue;m=f.m_sweep.alpha0;f.m_sweep.alpha0<k.m_sweep.alpha0?(m=k.m_sweep.alpha0,f.m_sweep.Advance(m)):k.m_sweep.alpha0<f.m_sweep.alpha0&&(m=f.m_sweep.alpha0,k.m_sweep.Advance(m));box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>m);n=d.GetChildIndexA();p=d.GetChildIndexB();l=box2d.b2World.prototype.SolveTOI.s_toi_input;l.proxyA.SetShape(g.GetShape(),n);l.proxyB.SetShape(h.GetShape(),p);l.sweepA.Copy(f.m_sweep);l.sweepB.Copy(k.m_sweep);l.tMax=1;f=
box2d.b2World.prototype.SolveTOI.s_toi_output;box2d.b2TimeOfImpact(f,l);k=f.t;f=f.state===box2d.b2TOIOutputState.e_touching?box2d.b2Min(m+(1-m)*k,1):1;d.m_toi=f;d.m_flag_toiFlag=!0}f<b&&(e=d,b=f)}if(null===e||1-10*box2d.b2_epsilon<b){this.m_stepComplete=!0;break}g=e.GetFixtureA();h=e.GetFixtureB();f=g.GetBody();k=h.GetBody();d=box2d.b2World.prototype.SolveTOI.s_backup1.Copy(f.m_sweep);g=box2d.b2World.prototype.SolveTOI.s_backup2.Copy(k.m_sweep);f.Advance(b);k.Advance(b);e.Update(this.m_contactManager.m_contactListener);
e.m_flag_toiFlag=!1;++e.m_toiCount;if(e.IsEnabled()&&e.IsTouching()){f.SetAwake(!0);k.SetAwake(!0);c.Clear();c.AddBody(f);c.AddBody(k);c.AddContact(e);f.m_flag_islandFlag=!0;k.m_flag_islandFlag=!0;e.m_flag_islandFlag=!0;for(e=0;2>e;++e)if(d=0===e?f:k,d.m_type===box2d.b2BodyType.b2_dynamicBody)for(g=d.m_contactList;g&&c.m_bodyCount!==c.m_bodyCapacity&&c.m_contactCount!==c.m_contactCapacity;g=g.next)h=g.contact,!h.m_flag_islandFlag&&(m=g.other,m.m_type!==box2d.b2BodyType.b2_dynamicBody||d.IsBullet()||
m.IsBullet())&&(l=h.m_fixtureB.m_isSensor,h.m_fixtureA.m_isSensor||l||(l=box2d.b2World.prototype.SolveTOI.s_backup.Copy(m.m_sweep),m.m_flag_islandFlag||m.Advance(b),h.Update(this.m_contactManager.m_contactListener),h.IsEnabled()?h.IsTouching()?(h.m_flag_islandFlag=!0,c.AddContact(h),m.m_flag_islandFlag||(m.m_flag_islandFlag=!0,m.m_type!==box2d.b2BodyType.b2_staticBody&&m.SetAwake(!0),c.AddBody(m))):(m.m_sweep.Copy(l),m.SynchronizeTransform()):(m.m_sweep.Copy(l),m.SynchronizeTransform())));e=box2d.b2World.prototype.SolveTOI.s_subStep;
e.dt=(1-b)*a.dt;e.inv_dt=1/e.dt;e.dtRatio=1;e.positionIterations=20;e.velocityIterations=a.velocityIterations;e.particleIterations=a.particleIterations;e.warmStarting=!1;c.SolveTOI(e,f.m_islandIndex,k.m_islandIndex);for(e=0;e<c.m_bodyCount;++e)if(d=c.m_bodies[e],d.m_flag_islandFlag=!1,d.m_type===box2d.b2BodyType.b2_dynamicBody)for(d.SynchronizeFixtures(),g=d.m_contactList;g;g=g.next)g.contact.m_flag_toiFlag=g.contact.m_flag_islandFlag=!1;this.m_contactManager.FindNewContacts();if(this.m_subStepping){this.m_stepComplete=
!1;break}}else e.SetEnabled(!1),f.m_sweep.Copy(d),k.m_sweep.Copy(g),f.SynchronizeTransform(),k.SynchronizeTransform()}};goog.exportProperty(box2d.b2World.prototype,"SolveTOI",box2d.b2World.prototype.SolveTOI);box2d.b2World.prototype.SolveTOI.s_subStep=new box2d.b2TimeStep;box2d.b2World.prototype.SolveTOI.s_backup=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup1=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup2=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_toi_input=new box2d.b2TOIInput;
box2d.b2World.prototype.SolveTOI.s_toi_output=new box2d.b2TOIOutput;
box2d.b2World.prototype.Step=function(a,c,b,d){d=d||this.CalculateReasonableParticleIterations(a);var e=new box2d.b2Timer;this.m_flag_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flag_newFixture=!1);this.m_flag_locked=!0;var f=box2d.b2World.prototype.Step.s_step;f.dt=a;f.velocityIterations=c;f.positionIterations=b;f.particleIterations=d;f.inv_dt=0<a?1/a:0;f.dtRatio=this.m_inv_dt0*a;f.warmStarting=this.m_warmStarting;a=new box2d.b2Timer;this.m_contactManager.Collide();this.m_profile.collide=
a.GetMilliseconds();if(this.m_stepComplete&&0<f.dt){a=new box2d.b2Timer;for(c=this.m_particleSystemList;c;c=c.m_next)c.Solve(f);this.Solve(f);this.m_profile.solve=a.GetMilliseconds()}this.m_continuousPhysics&&0<f.dt&&(a=new box2d.b2Timer,this.SolveTOI(f),this.m_profile.solveTOI=a.GetMilliseconds());0<f.dt&&(this.m_inv_dt0=f.inv_dt);this.m_flag_clearForces&&this.ClearForces();this.m_flag_locked=!1;this.m_profile.step=e.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Step",box2d.b2World.prototype.Step);
box2d.b2World.prototype.Step.s_step=new box2d.b2TimeStep;box2d.b2World.prototype.ClearForces=function(){for(var a=this.m_bodyList;a;a=a.m_next)a.m_force.SetZero(),a.m_torque=0};goog.exportProperty(box2d.b2World.prototype,"ClearForces",box2d.b2World.prototype.ClearForces);
box2d.b2World.prototype.QueryAABB=function(a,c){var b=this.m_contactManager.m_broadPhase;b.Query(function(c){c=b.GetUserData(c);box2d.ENABLE_ASSERTS&&box2d.b2Assert(c instanceof box2d.b2FixtureProxy);c=c.fixture;return a instanceof box2d.b2QueryCallback?a.ReportFixture(c):a(c)},c);if(a instanceof box2d.b2QueryCallback)for(var d=this.m_particleSystemList;d;d=d.m_next)a.ShouldQueryParticleSystem(d)&&d.QueryAABB(a,c)};goog.exportProperty(box2d.b2World.prototype,"QueryAABB",box2d.b2World.prototype.QueryAABB);
box2d.b2World.prototype.QueryShape=function(a,c,b,d){var e=this.m_contactManager.m_broadPhase,f=box2d.b2World.prototype.QueryShape.s_aabb;c.ComputeAABB(f,b,d||0);e.Query(function(d){d=e.GetUserData(d);box2d.ENABLE_ASSERTS&&box2d.b2Assert(d instanceof box2d.b2FixtureProxy);d=d.fixture;return box2d.b2TestOverlapShape(c,0,d.GetShape(),0,b,d.GetBody().GetTransform())?a instanceof box2d.b2QueryCallback?a.ReportFixture(d):a(d):!0},f);if(a instanceof box2d.b2QueryCallback)for(d=this.m_particleSystemList;d;d=
d.m_next)a.ShouldQueryParticleSystem(d)&&d.QueryAABB(a,f)};goog.exportProperty(box2d.b2World.prototype,"QueryShape",box2d.b2World.prototype.QueryShape);box2d.b2World.prototype.QueryShape.s_aabb=new box2d.b2AABB;
box2d.b2World.prototype.QueryPoint=function(a,c,b){var d=this.m_contactManager.m_broadPhase;b="number"===typeof b?b:box2d.b2_linearSlop;var e=box2d.b2World.prototype.QueryPoint.s_aabb;e.lowerBound.Set(c.x-b,c.y-b);e.upperBound.Set(c.x+b,c.y+b);d.Query(function(b){b=d.GetUserData(b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2FixtureProxy);b=b.fixture;return b.TestPoint(c)?a instanceof box2d.b2QueryCallback?a.ReportFixture(b):a(b):!0},e);if(a instanceof box2d.b2QueryCallback)for(b=this.m_particleSystemList;b;b=
b.m_next)a.ShouldQueryParticleSystem(b)&&b.QueryAABB(a,e)};goog.exportProperty(box2d.b2World.prototype,"QueryPoint",box2d.b2World.prototype.QueryPoint);box2d.b2World.prototype.QueryPoint.s_aabb=new box2d.b2AABB;
box2d.b2World.prototype.RayCast=function(a,c,b){var d=this.m_contactManager.m_broadPhase,e=box2d.b2World.prototype.RayCast.s_input;e.maxFraction=1;e.p1.Copy(c);e.p2.Copy(b);d.RayCast(function(e,g){var h=d.GetUserData(g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(h instanceof box2d.b2FixtureProxy);var k=h.fixture,l=box2d.b2World.prototype.RayCast.s_output;if(k.RayCast(l,e,h.childIndex)){var h=l.fraction,m=box2d.b2World.prototype.RayCast.s_point;m.Set((1-h)*c.x+h*b.x,(1-h)*c.y+h*b.y);return a instanceof box2d.b2RayCastCallback?
a.ReportFixture(k,m,l.normal,h):a(k,m,l.normal,h)}return e.maxFraction},e);if(a instanceof box2d.b2RayCastCallback)for(e=this.m_particleSystemList;e;e=e.m_next)a.ShouldQueryParticleSystem(e)&&e.RayCast(a,c,b)};goog.exportProperty(box2d.b2World.prototype,"RayCast",box2d.b2World.prototype.RayCast);box2d.b2World.prototype.RayCast.s_input=new box2d.b2RayCastInput;box2d.b2World.prototype.RayCast.s_output=new box2d.b2RayCastOutput;box2d.b2World.prototype.RayCast.s_point=new box2d.b2Vec2;
box2d.b2World.prototype.RayCastOne=function(a,c){var b=null,d=1;this.RayCast(function(a,c,g,h){h<d&&(d=h,b=a);return d},a,c);return b};goog.exportProperty(box2d.b2World.prototype,"RayCastOne",box2d.b2World.prototype.RayCastOne);box2d.b2World.prototype.RayCastAll=function(a,c,b){b.length=0;this.RayCast(function(a,c,f,g){b.push(a);return 1},a,c);return b};goog.exportProperty(box2d.b2World.prototype,"RayCastAll",box2d.b2World.prototype.RayCastAll);
box2d.b2World.prototype.DrawShape=function(a,c){var b=a.GetShape();switch(b.m_type){case box2d.b2ShapeType.e_circleShape:b=b instanceof box2d.b2CircleShape?b:null;this.m_debugDraw.DrawSolidCircle(b.m_p,b.m_radius,box2d.b2Vec2.UNITX,c);break;case box2d.b2ShapeType.e_edgeShape:var d=b instanceof box2d.b2EdgeShape?b:null,b=d.m_vertex1,e=d.m_vertex2;this.m_debugDraw.DrawSegment(b,e,c);break;case box2d.b2ShapeType.e_chainShape:var b=b instanceof box2d.b2ChainShape?b:null,d=b.m_count,f=b.m_vertices,b=f[0];
this.m_debugDraw.DrawCircle(b,.05,c);for(var g=1;g<d;++g)e=f[g],this.m_debugDraw.DrawSegment(b,e,c),this.m_debugDraw.DrawCircle(e,.05,c),b=e;break;case box2d.b2ShapeType.e_polygonShape:d=b instanceof box2d.b2PolygonShape?b:null,b=d.m_count,f=d.m_vertices,this.m_debugDraw.DrawSolidPolygon(f,b,c)}};goog.exportProperty(box2d.b2World.prototype,"DrawShape",box2d.b2World.prototype.DrawShape);
box2d.b2World.prototype.DrawJoint=function(a){var c=a.GetBodyA(),b=a.GetBodyB(),d=c.m_xf.p,e=b.m_xf.p,b=a.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),c=a.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),f=box2d.b2World.prototype.DrawJoint.s_color.SetRGB(.5,.8,.8);switch(a.m_type){case box2d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(b,c,f);break;case box2d.b2JointType.e_pulleyJoint:d=a instanceof box2d.b2PulleyJoint?a:null;a=d.GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1);
d=d.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2);this.m_debugDraw.DrawSegment(a,b,f);this.m_debugDraw.DrawSegment(d,c,f);this.m_debugDraw.DrawSegment(a,d,f);break;case box2d.b2JointType.e_mouseJoint:this.m_debugDraw.DrawSegment(b,c,f);break;default:this.m_debugDraw.DrawSegment(d,b,f),this.m_debugDraw.DrawSegment(b,c,f),this.m_debugDraw.DrawSegment(e,c,f)}};goog.exportProperty(box2d.b2World.prototype,"DrawJoint",box2d.b2World.prototype.DrawJoint);
box2d.b2World.prototype.DrawJoint.s_p1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_p2=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_color=new box2d.b2Color(.5,.8,.8);box2d.b2World.prototype.DrawJoint.s_s1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_s2=new box2d.b2Vec2;
box2d.b2World.prototype.DrawParticleSystem=function(a){var c=a.GetParticleCount();if(c){var b=a.GetRadius(),d=a.GetPositionBuffer();a.m_colorBuffer.data?(a=a.GetColorBuffer(),this.m_debugDraw.DrawParticles(d,b,a,c)):this.m_debugDraw.DrawParticles(d,b,null,c)}};goog.exportProperty(box2d.b2World.prototype,"DrawParticleSystem",box2d.b2World.prototype.DrawParticleSystem);
box2d.b2World.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var a=this.m_debugDraw.GetFlags(),c=box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0,0,0);if(a&box2d.b2DrawFlags.e_shapeBit)for(var b=this.m_bodyList;b;b=b.m_next){var d=b.m_xf;this.m_debugDraw.PushTransform(d);for(var e=b.GetFixtureList();e;e=e.m_next)b.IsActive()?b.GetType()===box2d.b2BodyType.b2_staticBody?c.SetRGB(.5,.9,.5):b.GetType()===box2d.b2BodyType.b2_kinematicBody?c.SetRGB(.5,.5,.9):b.IsAwake()?c.SetRGB(.9,
.7,.7):c.SetRGB(.6,.6,.6):c.SetRGB(.5,.5,.3),this.DrawShape(e,c);this.m_debugDraw.PopTransform(d)}if(a&box2d.b2DrawFlags.e_particleBit)for(b=this.m_particleSystemList;b;b=b.m_next)this.DrawParticleSystem(b);if(a&box2d.b2DrawFlags.e_jointBit)for(b=this.m_jointList;b;b=b.m_next)this.DrawJoint(b);if(a&box2d.b2DrawFlags.e_aabbBit){c.SetRGB(.9,.3,.9);for(var d=this.m_contactManager.m_broadPhase,f=box2d.b2World.prototype.DrawDebugData.s_vs,b=this.m_bodyList;b;b=b.m_next)if(b.IsActive())for(e=b.GetFixtureList();e;e=
e.m_next)for(var g=0;g<e.m_proxyCount;++g){var h=d.GetFatAABB(e.m_proxies[g].proxy);f[0].Set(h.lowerBound.x,h.lowerBound.y);f[1].Set(h.upperBound.x,h.lowerBound.y);f[2].Set(h.upperBound.x,h.upperBound.y);f[3].Set(h.lowerBound.x,h.upperBound.y);this.m_debugDraw.DrawPolygon(f,4,c)}}if(a&box2d.b2DrawFlags.e_centerOfMassBit)for(b=this.m_bodyList;b;b=b.m_next)d=box2d.b2World.prototype.DrawDebugData.s_xf,d.q.Copy(b.m_xf.q),d.p.Copy(b.GetWorldCenter()),this.m_debugDraw.DrawTransform(d);if(a&box2d.b2DrawFlags.e_controllerBit)for(a=
this.m_controllerList;a;a=a.m_next)a.Draw(this.m_debugDraw)}};goog.exportProperty(box2d.b2World.prototype,"DrawDebugData",box2d.b2World.prototype.DrawDebugData);box2d.b2World.prototype.DrawDebugData.s_color=new box2d.b2Color(0,0,0);box2d.b2World.prototype.DrawDebugData.s_vs=box2d.b2Vec2.MakeArray(4);box2d.b2World.prototype.DrawDebugData.s_xf=new box2d.b2Transform;
box2d.b2World.prototype.SetBroadPhase=function(a){var c=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=a;for(var b=this.m_bodyList;b;b=b.m_next)for(var d=b.m_fixtureList;d;d=d.m_next)d.m_proxy=a.CreateProxy(c.GetFatAABB(d.m_proxy),d)};goog.exportProperty(box2d.b2World.prototype,"SetBroadPhase",box2d.b2World.prototype.SetBroadPhase);
box2d.b2World.prototype.CalculateReasonableParticleIterations=function(a){return null===this.m_particleSystemList?1:box2d.b2CalculateParticleIterations(this.m_gravity.Length(),function(a){var b=box2d.b2_maxFloat;for(a=a.GetParticleSystemList();null!==a;a=a.m_next)b=box2d.b2Min(b,a.GetRadius());return b}(this),a)};goog.exportProperty(box2d.b2World.prototype,"CalculateReasonableParticleIterations",box2d.b2World.prototype.CalculateReasonableParticleIterations);box2d.b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()};
goog.exportProperty(box2d.b2World.prototype,"GetProxyCount",box2d.b2World.prototype.GetProxyCount);box2d.b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()};goog.exportProperty(box2d.b2World.prototype,"GetTreeHeight",box2d.b2World.prototype.GetTreeHeight);box2d.b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()};goog.exportProperty(box2d.b2World.prototype,"GetTreeBalance",box2d.b2World.prototype.GetTreeBalance);
box2d.b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()};goog.exportProperty(box2d.b2World.prototype,"GetTreeQuality",box2d.b2World.prototype.GetTreeQuality);box2d.b2World.prototype.ShiftOrigin=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked());if(!this.IsLocked()){for(var c=this.m_bodyList;c;c=c.m_next)c.m_xf.p.SelfSub(a),c.m_sweep.c0.SelfSub(a),c.m_sweep.c.SelfSub(a);for(c=this.m_jointList;c;c=c.m_next)c.ShiftOrigin(a);this.m_contactManager.m_broadPhase.ShiftOrigin(a)}};
goog.exportProperty(box2d.b2World.prototype,"ShiftOrigin",box2d.b2World.prototype.ShiftOrigin);
box2d.b2World.prototype.Dump=function(){if(box2d.DEBUG&&!this.m_flag_locked){box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y);box2d.b2Log("this.m_world.SetGravity(g);\n");box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n",this.m_bodyCount);box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n",this.m_jointCount);for(var a=0,c=this.m_bodyList;c;c=c.m_next)c.m_islandIndex=a,c.Dump(),
++a;a=0;for(c=this.m_jointList;c;c=c.m_next)c.m_index=a,++a;for(c=this.m_jointList;c;c=c.m_next)c.m_type!==box2d.b2JointType.e_gearJoint&&(box2d.b2Log("{\n"),c.Dump(),box2d.b2Log("}\n"));for(c=this.m_jointList;c;c=c.m_next)c.m_type===box2d.b2JointType.e_gearJoint&&(box2d.b2Log("{\n"),c.Dump(),box2d.b2Log("}\n"))}};goog.exportProperty(box2d.b2World.prototype,"Dump",box2d.b2World.prototype.Dump);
box2d.b2World.prototype.AddController=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===a.m_world,"Controller can only be a member of one world");a.m_world=this;a.m_next=this.m_controllerList;a.m_prev=null;this.m_controllerList&&(this.m_controllerList.m_prev=a);this.m_controllerList=a;++this.m_controllerCount;return a};goog.exportProperty(box2d.b2World.prototype,"AddController",box2d.b2World.prototype.AddController);
box2d.b2World.prototype.RemoveController=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.m_world===this,"Controller is not a member of this world");a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);this.m_controllerList===a&&(this.m_controllerList=a.m_next);--this.m_controllerCount;a.m_prev=null;a.m_next=null;a.m_world=null};goog.exportProperty(box2d.b2World.prototype,"RemoveController",box2d.b2World.prototype.RemoveController);box2d.b2MotorJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_motorJoint);this.linearOffset=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2MotorJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MotorJointDef",box2d.b2MotorJointDef);box2d.b2MotorJointDef.prototype.linearOffset=null;goog.exportProperty(box2d.b2MotorJointDef.prototype,"linearOffset",box2d.b2MotorJointDef.prototype.linearOffset);box2d.b2MotorJointDef.prototype.angularOffset=0;
goog.exportProperty(box2d.b2MotorJointDef.prototype,"angularOffset",box2d.b2MotorJointDef.prototype.angularOffset);box2d.b2MotorJointDef.prototype.maxForce=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxForce",box2d.b2MotorJointDef.prototype.maxForce);box2d.b2MotorJointDef.prototype.maxTorque=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxTorque",box2d.b2MotorJointDef.prototype.maxTorque);box2d.b2MotorJointDef.prototype.correctionFactor=.3;
goog.exportProperty(box2d.b2MotorJointDef.prototype,"correctionFactor",box2d.b2MotorJointDef.prototype.correctionFactor);box2d.b2MotorJointDef.prototype.Initialize=function(a,c){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);var b=this.bodyA.GetAngle();this.angularOffset=this.bodyB.GetAngle()-b};goog.exportProperty(box2d.b2MotorJointDef.prototype,"Initialize",box2d.b2MotorJointDef.prototype.Initialize);
box2d.b2MotorJoint=function(a){box2d.b2Joint.call(this,a);this.m_linearOffset=a.linearOffset.Clone();this.m_linearImpulse=new box2d.b2Vec2(0,0);this.m_maxForce=a.maxForce;this.m_maxTorque=a.maxTorque;this.m_correctionFactor=a.correctionFactor;this.m_rA=new box2d.b2Vec2(0,0);this.m_rB=new box2d.b2Vec2(0,0);this.m_localCenterA=new box2d.b2Vec2(0,0);this.m_localCenterB=new box2d.b2Vec2(0,0);this.m_linearError=new box2d.b2Vec2(0,0);this.m_linearMass=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=
new box2d.b2Rot;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2MotorJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2MotorJoint",box2d.b2MotorJoint);box2d.b2MotorJoint.prototype.m_linearOffset=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearOffset",box2d.b2MotorJoint.prototype.m_linearOffset);box2d.b2MotorJoint.prototype.m_angularOffset=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularOffset",box2d.b2MotorJoint.prototype.m_angularOffset);
box2d.b2MotorJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearImpulse",box2d.b2MotorJoint.prototype.m_linearImpulse);box2d.b2MotorJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularImpulse",box2d.b2MotorJoint.prototype.m_angularImpulse);box2d.b2MotorJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxForce",box2d.b2MotorJoint.prototype.m_maxForce);
box2d.b2MotorJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxTorque",box2d.b2MotorJoint.prototype.m_maxTorque);box2d.b2MotorJoint.prototype.m_correctionFactor=.3;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_correctionFactor",box2d.b2MotorJoint.prototype.m_correctionFactor);box2d.b2MotorJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexA",box2d.b2MotorJoint.prototype.m_indexA);box2d.b2MotorJoint.prototype.m_indexB=0;
goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexB",box2d.b2MotorJoint.prototype.m_indexB);box2d.b2MotorJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rA",box2d.b2MotorJoint.prototype.m_rA);box2d.b2MotorJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rB",box2d.b2MotorJoint.prototype.m_rB);box2d.b2MotorJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterA",box2d.b2MotorJoint.prototype.m_localCenterA);
box2d.b2MotorJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterB",box2d.b2MotorJoint.prototype.m_localCenterB);box2d.b2MotorJoint.prototype.m_linearError=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearError",box2d.b2MotorJoint.prototype.m_linearError);box2d.b2MotorJoint.prototype.m_angularError=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularError",box2d.b2MotorJoint.prototype.m_angularError);
box2d.b2MotorJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassA",box2d.b2MotorJoint.prototype.m_invMassA);box2d.b2MotorJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassB",box2d.b2MotorJoint.prototype.m_invMassB);box2d.b2MotorJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIA",box2d.b2MotorJoint.prototype.m_invIA);box2d.b2MotorJoint.prototype.m_invIB=0;
goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIB",box2d.b2MotorJoint.prototype.m_invIB);box2d.b2MotorJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearMass",box2d.b2MotorJoint.prototype.m_linearMass);box2d.b2MotorJoint.prototype.m_angularMass=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularMass",box2d.b2MotorJoint.prototype.m_angularMass);box2d.b2MotorJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qA",box2d.b2MotorJoint.prototype.m_qA);
box2d.b2MotorJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qB",box2d.b2MotorJoint.prototype.m_qB);box2d.b2MotorJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_K",box2d.b2MotorJoint.prototype.m_K);box2d.b2MotorJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetPosition(a)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorA",box2d.b2MotorJoint.prototype.GetAnchorA);box2d.b2MotorJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetPosition(a)};
goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorB",box2d.b2MotorJoint.prototype.GetAnchorB);box2d.b2MotorJoint.prototype.GetReactionForce=function(a,c){return box2d.b2Mul_S_V2(a,this.m_linearImpulse,c)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionForce",box2d.b2MotorJoint.prototype.GetReactionForce);box2d.b2MotorJoint.prototype.GetReactionTorque=function(a){return a*this.m_angularImpulse};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionTorque",box2d.b2MotorJoint.prototype.GetReactionTorque);
box2d.b2MotorJoint.prototype.SetCorrectionFactor=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a)&&0<=a&&1>=a);this._correctionFactor=a};box2d.b2MotorJoint.prototype.GetCorrectionFactor=function(){return this.m_correctionFactor};box2d.b2MotorJoint.prototype.SetLinearOffset=function(a){if(a.x!=this.m_linearOffset.x||a.y!=this.m_linearOffset.y)this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(a)};
goog.exportProperty(box2d.b2MotorJoint.prototype,"SetLinearOffset",box2d.b2MotorJoint.prototype.SetLinearOffset);box2d.b2MotorJoint.prototype.GetLinearOffset=function(a){return a.Copy(this.m_linearOffset)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetLinearOffset",box2d.b2MotorJoint.prototype.GetLinearOffset);box2d.b2MotorJoint.prototype.SetAngularOffset=function(a){a!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=a)};
goog.exportProperty(box2d.b2MotorJoint.prototype,"SetAngularOffset",box2d.b2MotorJoint.prototype.SetAngularOffset);box2d.b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAngularOffset",box2d.b2MotorJoint.prototype.GetAngularOffset);box2d.b2MotorJoint.prototype.SetMaxForce=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a)&&0<=a);this.m_maxForce=a};
goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxForce",box2d.b2MotorJoint.prototype.SetMaxForce);box2d.b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxForce",box2d.b2MotorJoint.prototype.GetMaxForce);box2d.b2MotorJoint.prototype.SetMaxTorque=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a)&&0<=a);this.m_maxTorque=a};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxTorque",box2d.b2MotorJoint.prototype.SetMaxTorque);
box2d.b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxTorque",box2d.b2MotorJoint.prototype.GetMaxTorque);
box2d.b2MotorJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.velocities[this.m_indexA].v,
e=a.velocities[this.m_indexA].w,f=a.positions[this.m_indexB].c,g=a.positions[this.m_indexB].a,h=a.velocities[this.m_indexB].v,k=a.velocities[this.m_indexB].w,l=this.m_qA.SetAngle(b),m=this.m_qB.SetAngle(g),n=box2d.b2Mul_R_V2(l,box2d.b2Vec2.s_t0.Copy(this.m_localCenterA).SelfNeg(),this.m_rA),m=box2d.b2Mul_R_V2(m,box2d.b2Vec2.s_t0.Copy(this.m_localCenterB).SelfNeg(),this.m_rB),p=this.m_invMassA,q=this.m_invMassB,r=this.m_invIA,u=this.m_invIB,t=this.m_K;t.ex.x=p+q+r*n.y*n.y+u*m.y*m.y;t.ex.y=-r*n.x*n.y-
u*m.x*m.y;t.ey.x=t.ex.y;t.ey.y=p+q+r*n.x*n.x+u*m.x*m.x;t.GetInverse(this.m_linearMass);this.m_angularMass=r+u;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);box2d.b2Sub_V2_V2(box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(f,m,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,n,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2Mul_R_V2(l,this.m_linearOffset,box2d.b2Vec2.s_t3),this.m_linearError);this.m_angularError=g-b-this.m_angularOffset;a.step.warmStarting?(this.m_linearImpulse.SelfMul(a.step.dtRatio),this.m_angularImpulse*=
a.step.dtRatio,c=this.m_linearImpulse,d.SelfMulSub(p,c),e-=r*(box2d.b2Cross_V2_V2(n,c)+this.m_angularImpulse),h.SelfMulAdd(q,c),k+=u*(box2d.b2Cross_V2_V2(m,c)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0);a.velocities[this.m_indexA].w=e;a.velocities[this.m_indexB].w=k};goog.exportProperty(box2d.b2MotorJoint.prototype,"InitVelocityConstraints",box2d.b2MotorJoint.prototype.InitVelocityConstraints);
box2d.b2MotorJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=this.m_invMassA,g=this.m_invMassB,h=this.m_invIA,k=this.m_invIB,l=a.step.dt,m=a.step.inv_dt,n=e-b+m*this.m_correctionFactor*this.m_angularError,n=-this.m_angularMass*n,p=this.m_angularImpulse,q=l*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+n,-q,q);var n=this.m_angularImpulse-
p,b=b-h*n,e=e+k*n,r=this.m_rA,u=this.m_rB,n=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(d,box2d.b2Cross_S_V2(e,u,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,box2d.b2Cross_S_V2(b,r,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2Mul_S_V2(m*this.m_correctionFactor,this.m_linearError,box2d.b2Vec2.s_t3),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot),n=box2d.b2Mul_M22_V2(this.m_linearMass,n,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),
p=box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(n);q=l*this.m_maxForce;this.m_linearImpulse.LengthSquared()>q*q&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(q));box2d.b2Sub_V2_V2(this.m_linearImpulse,p,n);c.SelfMulSub(f,n);b-=h*box2d.b2Cross_V2_V2(r,n);d.SelfMulAdd(g,n);e+=k*box2d.b2Cross_V2_V2(u,n);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};
goog.exportProperty(box2d.b2MotorJoint.prototype,"SolveVelocityConstraints",box2d.b2MotorJoint.prototype.SolveVelocityConstraints);box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolvePositionConstraints=function(a){return!0};
goog.exportProperty(box2d.b2MotorJoint.prototype,"SolvePositionConstraints",box2d.b2MotorJoint.prototype.SolvePositionConstraints);
box2d.b2MotorJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y);box2d.b2Log("  jd.angularOffset = %.15f;\n",
this.m_angularOffset);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2MotorJoint.prototype,"Dump",box2d.b2MotorJoint.prototype.Dump);box2d.b2MouseJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_mouseJoint);this.target=new box2d.b2Vec2};goog.inherits(box2d.b2MouseJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MouseJointDef",box2d.b2MouseJointDef);box2d.b2MouseJointDef.prototype.target=null;goog.exportProperty(box2d.b2MouseJointDef.prototype,"target",box2d.b2MouseJointDef.prototype.target);box2d.b2MouseJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2MouseJointDef.prototype,"maxForce",box2d.b2MouseJointDef.prototype.maxForce);
box2d.b2MouseJointDef.prototype.frequencyHz=5;goog.exportProperty(box2d.b2MouseJointDef.prototype,"frequencyHz",box2d.b2MouseJointDef.prototype.frequencyHz);box2d.b2MouseJointDef.prototype.dampingRatio=.7;goog.exportProperty(box2d.b2MouseJointDef.prototype,"dampingRatio",box2d.b2MouseJointDef.prototype.dampingRatio);
box2d.b2MouseJoint=function(a){box2d.b2Joint.call(this,a);this.m_localAnchorB=new box2d.b2Vec2;this.m_targetA=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat22;this.m_C=new box2d.b2Vec2;this.m_qB=new box2d.b2Rot;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;box2d.ENABLE_ASSERTS&&box2d.b2Assert(a.target.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.maxForce)&&0<=a.maxForce);box2d.ENABLE_ASSERTS&&
box2d.b2Assert(box2d.b2IsValid(a.frequencyHz)&&0<=a.frequencyHz);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a.dampingRatio)&&0<=a.dampingRatio);this.m_targetA.Copy(a.target);box2d.b2MulT_X_V2(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB);this.m_maxForce=a.maxForce;this.m_impulse.SetZero();this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_gamma=this.m_beta=0};goog.inherits(box2d.b2MouseJoint,box2d.b2Joint);
goog.exportSymbol("box2d.b2MouseJoint",box2d.b2MouseJoint);box2d.b2MouseJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localAnchorB",box2d.b2MouseJoint.prototype.m_localAnchorB);box2d.b2MouseJoint.prototype.m_targetA=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_targetA",box2d.b2MouseJoint.prototype.m_targetA);box2d.b2MouseJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_frequencyHz",box2d.b2MouseJoint.prototype.m_frequencyHz);
box2d.b2MouseJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_dampingRatio",box2d.b2MouseJoint.prototype.m_dampingRatio);box2d.b2MouseJoint.prototype.m_beta=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_beta",box2d.b2MouseJoint.prototype.m_beta);box2d.b2MouseJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_impulse",box2d.b2MouseJoint.prototype.m_impulse);box2d.b2MouseJoint.prototype.m_maxForce=0;
goog.exportProperty(box2d.b2MouseJoint.prototype,"m_maxForce",box2d.b2MouseJoint.prototype.m_maxForce);box2d.b2MouseJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_gamma",box2d.b2MouseJoint.prototype.m_gamma);box2d.b2MouseJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexA",box2d.b2MouseJoint.prototype.m_indexA);box2d.b2MouseJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexB",box2d.b2MouseJoint.prototype.m_indexB);
box2d.b2MouseJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_rB",box2d.b2MouseJoint.prototype.m_rB);box2d.b2MouseJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localCenterB",box2d.b2MouseJoint.prototype.m_localCenterB);box2d.b2MouseJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invMassB",box2d.b2MouseJoint.prototype.m_invMassB);box2d.b2MouseJoint.prototype.m_invIB=0;
goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invIB",box2d.b2MouseJoint.prototype.m_invIB);box2d.b2MouseJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_mass",box2d.b2MouseJoint.prototype.m_mass);box2d.b2MouseJoint.prototype.m_C=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_C",box2d.b2MouseJoint.prototype.m_C);box2d.b2MouseJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_qB",box2d.b2MouseJoint.prototype.m_qB);
box2d.b2MouseJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_lalcB",box2d.b2MouseJoint.prototype.m_lalcB);box2d.b2MouseJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_K",box2d.b2MouseJoint.prototype.m_K);box2d.b2MouseJoint.prototype.SetTarget=function(a){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0);this.m_targetA.Copy(a)};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetTarget",box2d.b2MouseJoint.prototype.SetTarget);
box2d.b2MouseJoint.prototype.GetTarget=function(a){return a.Copy(this.m_targetA)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetTarget",box2d.b2MouseJoint.prototype.GetTarget);box2d.b2MouseJoint.prototype.SetMaxForce=function(a){this.m_maxForce=a};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetMaxForce",box2d.b2MouseJoint.prototype.SetMaxForce);box2d.b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetMaxForce",box2d.b2MouseJoint.prototype.GetMaxForce);
box2d.b2MouseJoint.prototype.SetFrequency=function(a){this.m_frequencyHz=a};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetFrequency",box2d.b2MouseJoint.prototype.SetFrequency);box2d.b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetFrequency",box2d.b2MouseJoint.prototype.GetFrequency);box2d.b2MouseJoint.prototype.SetDampingRatio=function(a){this.m_dampingRatio=a};
goog.exportProperty(box2d.b2MouseJoint.prototype,"SetDampingRatio",box2d.b2MouseJoint.prototype.SetDampingRatio);box2d.b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetDampingRatio",box2d.b2MouseJoint.prototype.GetDampingRatio);
box2d.b2MouseJoint.prototype.InitVelocityConstraints=function(a){this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexB].c,b=a.velocities[this.m_indexB].v,d=a.velocities[this.m_indexB].w,e=this.m_qB.SetAngle(a.positions[this.m_indexB].a),f=this.m_bodyB.GetMass(),g=2*box2d.b2_pi*this.m_frequencyHz,h=2*f*this.m_dampingRatio*g,f=f*g*g,g=a.step.dt;box2d.ENABLE_ASSERTS&&
box2d.b2Assert(h+g*f>box2d.b2_epsilon);this.m_gamma=g*(h+g*f);0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma);this.m_beta=g*f*this.m_gamma;box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(e,this.m_lalcB,this.m_rB);e=this.m_K;e.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma;e.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y;e.ey.x=e.ex.y;e.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma;e.GetInverse(this.m_mass);this.m_C.x=
c.x+this.m_rB.x-this.m_targetA.x;this.m_C.y=c.y+this.m_rB.y-this.m_targetA.y;this.m_C.SelfMul(this.m_beta);d*=.98;a.step.warmStarting?(this.m_impulse.SelfMul(a.step.dtRatio),b.x+=this.m_invMassB*this.m_impulse.x,b.y+=this.m_invMassB*this.m_impulse.y,d+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,this.m_impulse)):this.m_impulse.SetZero();a.velocities[this.m_indexB].w=d};goog.exportProperty(box2d.b2MouseJoint.prototype,"InitVelocityConstraints",box2d.b2MouseJoint.prototype.InitVelocityConstraints);
box2d.b2MouseJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexB].v,b=a.velocities[this.m_indexB].w,d=box2d.b2AddCross_V2_S_V2(c,b,this.m_rB,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),d=box2d.b2Mul_M22_V2(this.m_mass,box2d.b2Add_V2_V2(d,box2d.b2Add_V2_V2(this.m_C,box2d.b2Mul_S_V2(this.m_gamma,this.m_impulse,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0).SelfNeg(),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse),e=box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse);
this.m_impulse.SelfAdd(d);var f=a.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>f*f&&this.m_impulse.SelfMul(f/this.m_impulse.Length());box2d.b2Sub_V2_V2(this.m_impulse,e,d);c.SelfMulAdd(this.m_invMassB,d);b+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,d);a.velocities[this.m_indexB].w=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolveVelocityConstraints",box2d.b2MouseJoint.prototype.SolveVelocityConstraints);box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;
box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolvePositionConstraints=function(a){return!0};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolvePositionConstraints",box2d.b2MouseJoint.prototype.SolvePositionConstraints);box2d.b2MouseJoint.prototype.GetAnchorA=function(a){return a.Copy(this.m_targetA)};
goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorA",box2d.b2MouseJoint.prototype.GetAnchorA);box2d.b2MouseJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorB",box2d.b2MouseJoint.prototype.GetAnchorB);box2d.b2MouseJoint.prototype.GetReactionForce=function(a,c){return box2d.b2Mul_S_V2(a,this.m_impulse,c)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionForce",box2d.b2MouseJoint.prototype.GetReactionForce);
box2d.b2MouseJoint.prototype.GetReactionTorque=function(a){return 0};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionTorque",box2d.b2MouseJoint.prototype.GetReactionTorque);box2d.b2MouseJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Mouse joint dumping is not supported.\n")};goog.exportProperty(box2d.b2MouseJoint.prototype,"Dump",box2d.b2MouseJoint.prototype.Dump);box2d.b2MouseJoint.prototype.ShiftOrigin=function(a){this.m_targetA.SelfSub(a)};
goog.exportProperty(box2d.b2MouseJoint.prototype,"ShiftOrigin",box2d.b2MouseJoint.prototype.ShiftOrigin);box2d.b2PrismaticJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_prismaticJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2;this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PrismaticJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PrismaticJointDef",box2d.b2PrismaticJointDef);box2d.b2PrismaticJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorA",box2d.b2PrismaticJointDef.prototype.localAnchorA);
box2d.b2PrismaticJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorB",box2d.b2PrismaticJointDef.prototype.localAnchorB);box2d.b2PrismaticJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAxisA",box2d.b2PrismaticJointDef.prototype.localAxisA);box2d.b2PrismaticJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"referenceAngle",box2d.b2PrismaticJointDef.prototype.referenceAngle);
box2d.b2PrismaticJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableLimit",box2d.b2PrismaticJointDef.prototype.enableLimit);box2d.b2PrismaticJointDef.prototype.lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"lowerTranslation",box2d.b2PrismaticJointDef.prototype.lowerTranslation);box2d.b2PrismaticJointDef.prototype.upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"upperTranslation",box2d.b2PrismaticJointDef.prototype.upperTranslation);
box2d.b2PrismaticJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableMotor",box2d.b2PrismaticJointDef.prototype.enableMotor);box2d.b2PrismaticJointDef.prototype.maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"maxMotorForce",box2d.b2PrismaticJointDef.prototype.maxMotorForce);box2d.b2PrismaticJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"motorSpeed",box2d.b2PrismaticJointDef.prototype.motorSpeed);
box2d.b2PrismaticJointDef.prototype.Initialize=function(a,c,b,d){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(b,this.localAnchorB);this.bodyA.GetLocalVector(d,this.localAxisA);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"Initialize",box2d.b2PrismaticJointDef.prototype.Initialize);
box2d.b2PrismaticJoint=function(a){box2d.b2Joint.call(this,a);this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_localXAxisA=a.localAxisA.Clone().SelfNormalize();this.m_localYAxisA=box2d.b2Cross_S_V2(1,this.m_localXAxisA,new box2d.b2Vec2);this.m_referenceAngle=a.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_lowerTranslation=a.lowerTranslation;this.m_upperTranslation=a.upperTranslation;this.m_maxMotorForce=a.maxMotorForce;this.m_motorSpeed=a.motorSpeed;
this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2(0,0);this.m_perp=new box2d.b2Vec2(0,0);this.m_K=new box2d.b2Mat33;this.m_K3=new box2d.b2Mat33;this.m_K2=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2};goog.inherits(box2d.b2PrismaticJoint,box2d.b2Joint);
goog.exportSymbol("box2d.b2PrismaticJoint",box2d.b2PrismaticJoint);box2d.b2PrismaticJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorA",box2d.b2PrismaticJoint.prototype.m_localAnchorA);box2d.b2PrismaticJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorB",box2d.b2PrismaticJoint.prototype.m_localAnchorB);box2d.b2PrismaticJoint.prototype.m_localXAxisA=null;
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localXAxisA",box2d.b2PrismaticJoint.prototype.m_localXAxisA);box2d.b2PrismaticJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localYAxisA",box2d.b2PrismaticJoint.prototype.m_localYAxisA);box2d.b2PrismaticJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_referenceAngle",box2d.b2PrismaticJoint.prototype.m_referenceAngle);
box2d.b2PrismaticJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_impulse",box2d.b2PrismaticJoint.prototype.m_impulse);box2d.b2PrismaticJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorImpulse",box2d.b2PrismaticJoint.prototype.m_motorImpulse);box2d.b2PrismaticJoint.prototype.m_lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lowerTranslation",box2d.b2PrismaticJoint.prototype.m_lowerTranslation);
box2d.b2PrismaticJoint.prototype.m_upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_upperTranslation",box2d.b2PrismaticJoint.prototype.m_upperTranslation);box2d.b2PrismaticJoint.prototype.m_maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_maxMotorForce",box2d.b2PrismaticJoint.prototype.m_maxMotorForce);box2d.b2PrismaticJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorSpeed",box2d.b2PrismaticJoint.prototype.m_motorSpeed);
box2d.b2PrismaticJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableLimit",box2d.b2PrismaticJoint.prototype.m_enableLimit);box2d.b2PrismaticJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableMotor",box2d.b2PrismaticJoint.prototype.m_enableMotor);box2d.b2PrismaticJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_limitState",box2d.b2PrismaticJoint.prototype.m_limitState);
box2d.b2PrismaticJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexA",box2d.b2PrismaticJoint.prototype.m_indexA);box2d.b2PrismaticJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexB",box2d.b2PrismaticJoint.prototype.m_indexB);box2d.b2PrismaticJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterA",box2d.b2PrismaticJoint.prototype.m_localCenterA);
box2d.b2PrismaticJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterB",box2d.b2PrismaticJoint.prototype.m_localCenterB);box2d.b2PrismaticJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassA",box2d.b2PrismaticJoint.prototype.m_invMassA);box2d.b2PrismaticJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassB",box2d.b2PrismaticJoint.prototype.m_invMassB);
box2d.b2PrismaticJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIA",box2d.b2PrismaticJoint.prototype.m_invIA);box2d.b2PrismaticJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIB",box2d.b2PrismaticJoint.prototype.m_invIB);box2d.b2PrismaticJoint.prototype.m_axis=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_axis",box2d.b2PrismaticJoint.prototype.m_axis);box2d.b2PrismaticJoint.prototype.m_perp=null;
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_perp",box2d.b2PrismaticJoint.prototype.m_perp);box2d.b2PrismaticJoint.prototype.m_s1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s1",box2d.b2PrismaticJoint.prototype.m_s1);box2d.b2PrismaticJoint.prototype.m_s2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s2",box2d.b2PrismaticJoint.prototype.m_s2);box2d.b2PrismaticJoint.prototype.m_a1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a1",box2d.b2PrismaticJoint.prototype.m_a1);
box2d.b2PrismaticJoint.prototype.m_a2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a2",box2d.b2PrismaticJoint.prototype.m_a2);box2d.b2PrismaticJoint.prototype.m_K=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K",box2d.b2PrismaticJoint.prototype.m_K);box2d.b2PrismaticJoint.prototype.m_K3=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K3",box2d.b2PrismaticJoint.prototype.m_K3);box2d.b2PrismaticJoint.prototype.m_K2=null;
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K2",box2d.b2PrismaticJoint.prototype.m_K2);box2d.b2PrismaticJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorMass",box2d.b2PrismaticJoint.prototype.m_motorMass);box2d.b2PrismaticJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qA",box2d.b2PrismaticJoint.prototype.m_qA);box2d.b2PrismaticJoint.prototype.m_qB=null;
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qB",box2d.b2PrismaticJoint.prototype.m_qB);box2d.b2PrismaticJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcA",box2d.b2PrismaticJoint.prototype.m_lalcA);box2d.b2PrismaticJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcB",box2d.b2PrismaticJoint.prototype.m_lalcB);box2d.b2PrismaticJoint.prototype.m_rA=null;
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rA",box2d.b2PrismaticJoint.prototype.m_rA);box2d.b2PrismaticJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rB",box2d.b2PrismaticJoint.prototype.m_rB);
box2d.b2PrismaticJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].c,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].c,f=a.positions[this.m_indexB].a,g=a.velocities[this.m_indexB].v,h=a.velocities[this.m_indexB].w,k=this.m_qA.SetAngle(a.positions[this.m_indexA].a),f=this.m_qB.SetAngle(f);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var l=box2d.b2Mul_R_V2(k,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var m=box2d.b2Mul_R_V2(f,this.m_lalcB,this.m_rB),n=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(e,c,box2d.b2Vec2.s_t0),
box2d.b2Sub_V2_V2(m,l,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),c=this.m_invMassA,e=this.m_invMassB,f=this.m_invIA,p=this.m_invIB;box2d.b2Mul_R_V2(k,this.m_localXAxisA,this.m_axis);this.m_a1=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(n,l,box2d.b2Vec2.s_t0),this.m_axis);this.m_a2=box2d.b2Cross_V2_V2(m,this.m_axis);this.m_motorMass=c+e+f*this.m_a1*this.m_a1+p*this.m_a2*this.m_a2;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);box2d.b2Mul_R_V2(k,this.m_localYAxisA,
this.m_perp);this.m_s1=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(n,l,box2d.b2Vec2.s_t0),this.m_perp);this.m_s2=box2d.b2Cross_V2_V2(m,this.m_perp);this.m_K.ex.x=c+e+f*this.m_s1*this.m_s1+p*this.m_s2*this.m_s2;this.m_K.ex.y=f*this.m_s1+p*this.m_s2;this.m_K.ex.z=f*this.m_s1*this.m_a1+p*this.m_s2*this.m_a2;this.m_K.ey.x=this.m_K.ex.y;this.m_K.ey.y=f+p;0===this.m_K.ey.y&&(this.m_K.ey.y=1);this.m_K.ey.z=f*this.m_a1+p*this.m_a2;this.m_K.ez.x=this.m_K.ex.z;this.m_K.ez.y=this.m_K.ey.z;this.m_K.ez.z=c+e+f*this.m_a1*
this.m_a1+p*this.m_a2*this.m_a2;this.m_enableLimit?(k=box2d.b2Dot_V2_V2(this.m_axis,n),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:k<=this.m_lowerTranslation?this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_limitState=box2d.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):k>=this.m_upperTranslation?this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_limitState=box2d.b2LimitState.e_atUpperLimit,
this.m_impulse.z=0):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0);this.m_enableMotor||(this.m_motorImpulse=0);a.step.warmStarting?(this.m_impulse.SelfMulScalar(a.step.dtRatio),this.m_motorImpulse*=a.step.dtRatio,k=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(this.m_impulse.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(this.m_motorImpulse+this.m_impulse.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P),
l=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,m=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,b.SelfMulSub(c,k),d-=f*l,g.SelfMulAdd(e,k),h+=p*m):(this.m_impulse.SetZero(),this.m_motorImpulse=0);a.velocities[this.m_indexA].w=d;a.velocities[this.m_indexB].w=h};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"InitVelocityConstraints",box2d.b2PrismaticJoint.prototype.InitVelocityConstraints);
box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=this.m_invMassA,g=this.m_invMassB,h=this.m_invIA,k=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits){var l=box2d.b2Dot_V2_V2(this.m_axis,box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0))+this.m_a2*e-this.m_a1*b,l=this.m_motorMass*(this.m_motorSpeed-l),m=this.m_motorImpulse,
n=a.step.dt*this.m_maxMotorForce;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+l,-n,n);l=this.m_motorImpulse-m;m=box2d.b2Mul_S_V2(l,this.m_axis,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P);n=l*this.m_a1;l*=this.m_a2;c.SelfMulSub(f,m);b-=h*n;d.SelfMulAdd(g,m);e+=k*l}var n=box2d.b2Dot_V2_V2(this.m_perp,box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0))+this.m_s2*e-this.m_s1*b,p=e-b;this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit?(l=box2d.b2Dot_V2_V2(this.m_axis,
box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0))+this.m_a2*e-this.m_a1*b,m=box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),l=this.m_K.Solve33(-n,-p,-l,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3),this.m_impulse.SelfAdd(l),this.m_limitState===box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z=box2d.b2Max(this.m_impulse.z,0):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=box2d.b2Min(this.m_impulse.z,0)),n=this.m_K.Solve22(-n-
(this.m_impulse.z-m.z)*this.m_K.ez.x,-p-(this.m_impulse.z-m.z)*this.m_K.ez.y,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r),n.x+=m.x,n.y+=m.y,this.m_impulse.x=n.x,this.m_impulse.y=n.y,l.x=this.m_impulse.x-m.x,l.y=this.m_impulse.y-m.y,l.z=this.m_impulse.z-m.z,m=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(l.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(l.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),n=l.x*this.m_s1+l.y+l.z*this.m_a1,l=l.x*
this.m_s2+l.y+l.z*this.m_a2):(l=this.m_K.Solve22(-n,-p,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2),this.m_impulse.x+=l.x,this.m_impulse.y+=l.y,m=box2d.b2Mul_S_V2(l.x,this.m_perp,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),n=l.x*this.m_s1+l.y,l=l.x*this.m_s2+l.y);c.SelfMulSub(f,m);b-=h*n;d.SelfMulAdd(g,m);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e+k*l};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolveVelocityConstraints",box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints);
box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2=new box2d.b2Vec2;
box2d.b2PrismaticJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e),h=this.m_invMassA,k=this.m_invMassB,l=this.m_invIA,m=this.m_invIB,n=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA),p=box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),q=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(d,p,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,n,box2d.b2Vec2.s_t1),
box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),r=box2d.b2Mul_R_V2(f,this.m_localXAxisA,this.m_axis),u=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(q,n,box2d.b2Vec2.s_t0),r),g=box2d.b2Cross_V2_V2(p,r),f=box2d.b2Mul_R_V2(f,this.m_localYAxisA,this.m_perp),t=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(q,n,box2d.b2Vec2.s_t0),f),w=box2d.b2Cross_V2_V2(p,f),x=box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,v=box2d.b2Dot_V2_V2(f,q),y=e-b-this.m_referenceAngle,n=box2d.b2Abs(v),p=box2d.b2Abs(y),
z=!1,B=0;this.m_enableLimit&&(q=box2d.b2Dot_V2_V2(r,q),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?(B=box2d.b2Clamp(q,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),n=box2d.b2Max(n,box2d.b2Abs(q)),z=!0):q<=this.m_lowerTranslation?(B=box2d.b2Clamp(q-this.m_lowerTranslation+box2d.b2_linearSlop,-box2d.b2_maxLinearCorrection,0),n=box2d.b2Max(n,this.m_lowerTranslation-q),z=!0):q>=this.m_upperTranslation&&(B=box2d.b2Clamp(q-this.m_upperTranslation-box2d.b2_linearSlop,
0,box2d.b2_maxLinearCorrection),n=box2d.b2Max(n,q-this.m_upperTranslation),z=!0));if(z){var q=l*t+m*w,E=l*t*u+m*w*g,z=l+m;0===z&&(z=1);var F=l*u+m*g,G=h+k+l*u*u+m*g*g,H=this.m_K3;H.ex.Set(h+k+l*t*t+m*w*w,q,E);H.ey.Set(q,z,F);H.ez.Set(E,F,G);x=H.Solve33(-v,-y,-B,x)}else q=l*t+m*w,z=l+m,0===z&&(z=1),B=this.m_K2,B.ex.Set(h+k+l*t*t+m*w*w,q),B.ey.Set(q,z),v=B.Solve(-v,-y,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1),x.x=v.x,x.y=v.y,x.z=0;r=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(x.x,
f,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(x.z,r,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P);u=x.x*t+x.y+x.z*u;g=x.x*w+x.y+x.z*g;c.SelfMulSub(h,r);b-=l*u;d.SelfMulAdd(k,r);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e+m*g;return n<=box2d.b2_linearSlop&&p<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolvePositionConstraints",box2d.b2PrismaticJoint.prototype.SolvePositionConstraints);
box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorA",box2d.b2PrismaticJoint.prototype.GetAnchorA);box2d.b2PrismaticJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorB",box2d.b2PrismaticJoint.prototype.GetAnchorB);
box2d.b2PrismaticJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),a*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionForce",box2d.b2PrismaticJoint.prototype.GetReactionForce);box2d.b2PrismaticJoint.prototype.GetReactionTorque=function(a){return a*this.m_impulse.y};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionTorque",box2d.b2PrismaticJoint.prototype.GetReactionTorque);box2d.b2PrismaticJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorA",box2d.b2PrismaticJoint.prototype.GetLocalAnchorA);box2d.b2PrismaticJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorB",box2d.b2PrismaticJoint.prototype.GetLocalAnchorB);box2d.b2PrismaticJoint.prototype.GetLocalAxisA=function(a){return a.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAxisA",box2d.b2PrismaticJoint.prototype.GetLocalAxisA);box2d.b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReferenceAngle",box2d.b2PrismaticJoint.prototype.GetReferenceAngle);
box2d.b2PrismaticJoint.prototype.GetJointTranslation=function(){var a=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),c=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB),a=box2d.b2Sub_V2_V2(c,a,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),c=this.m_bodyA.GetWorldVector(this.m_localXAxisA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);return box2d.b2Dot_V2_V2(a,
c)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointTranslation",box2d.b2PrismaticJoint.prototype.GetJointTranslation);box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis=new box2d.b2Vec2;
box2d.b2PrismaticJoint.prototype.GetJointSpeed=function(){var a=this.m_bodyA,c=this.m_bodyB;box2d.b2Sub_V2_V2(this.m_localAnchorA,a.m_sweep.localCenter,this.m_lalcA);var b=box2d.b2Mul_R_V2(a.m_xf.q,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,c.m_sweep.localCenter,this.m_lalcB);var d=box2d.b2Mul_R_V2(c.m_xf.q,this.m_lalcB,this.m_rB),e=box2d.b2Add_V2_V2(a.m_sweep.c,b,box2d.b2Vec2.s_t0),f=box2d.b2Add_V2_V2(c.m_sweep.c,d,box2d.b2Vec2.s_t1),e=box2d.b2Sub_V2_V2(f,e,box2d.b2Vec2.s_t2),
f=a.GetWorldVector(this.m_localXAxisA,this.m_axis),g=a.m_linearVelocity,h=c.m_linearVelocity,a=a.m_angularVelocity,c=c.m_angularVelocity;return box2d.b2Dot_V2_V2(e,box2d.b2Cross_S_V2(a,f,box2d.b2Vec2.s_t0))+box2d.b2Dot_V2_V2(f,box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(h,c,d,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(g,a,b,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointSpeed",box2d.b2PrismaticJoint.prototype.GetJointSpeed);
box2d.b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsLimitEnabled",box2d.b2PrismaticJoint.prototype.IsLimitEnabled);box2d.b2PrismaticJoint.prototype.EnableLimit=function(a){a!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=a,this.m_impulse.z=0)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableLimit",box2d.b2PrismaticJoint.prototype.EnableLimit);
box2d.b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLowerLimit",box2d.b2PrismaticJoint.prototype.GetLowerLimit);box2d.b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetUpperLimit",box2d.b2PrismaticJoint.prototype.GetUpperLimit);
box2d.b2PrismaticJoint.prototype.SetLimits=function(a,c){if(a!==this.m_lowerTranslation||c!==this.m_upperTranslation)this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=a,this.m_upperTranslation=c,this.m_impulse.z=0};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetLimits",box2d.b2PrismaticJoint.prototype.SetLimits);box2d.b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsMotorEnabled",box2d.b2PrismaticJoint.prototype.IsMotorEnabled);box2d.b2PrismaticJoint.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=a};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableMotor",box2d.b2PrismaticJoint.prototype.EnableMotor);box2d.b2PrismaticJoint.prototype.SetMotorSpeed=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=a};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMotorSpeed",box2d.b2PrismaticJoint.prototype.SetMotorSpeed);box2d.b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorSpeed",box2d.b2PrismaticJoint.prototype.GetMotorSpeed);box2d.b2PrismaticJoint.prototype.SetMaxMotorForce=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorForce=a};
goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMaxMotorForce",box2d.b2PrismaticJoint.prototype.SetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMaxMotorForce",box2d.b2PrismaticJoint.prototype.GetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMotorForce=function(a){return a*this.m_motorImpulse};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorForce",box2d.b2PrismaticJoint.prototype.GetMotorForce);
box2d.b2PrismaticJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation);box2d.b2Log("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",
this.m_motorSpeed);box2d.b2Log("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"Dump",box2d.b2PrismaticJoint.prototype.Dump);box2d.b2_minPulleyLength=2;goog.exportSymbol("box2d.b2_minPulleyLength",box2d.b2_minPulleyLength);box2d.b2PulleyJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_pulleyJoint);this.collideConnected=!0;this.groundAnchorA=new box2d.b2Vec2(-1,1);this.groundAnchorB=new box2d.b2Vec2(1,1);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PulleyJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PulleyJointDef",box2d.b2PulleyJointDef);
box2d.b2PulleyJointDef.prototype.groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorA",box2d.b2PulleyJointDef.prototype.groundAnchorA);box2d.b2PulleyJointDef.prototype.groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorB",box2d.b2PulleyJointDef.prototype.groundAnchorB);box2d.b2PulleyJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorA",box2d.b2PulleyJointDef.prototype.localAnchorA);
box2d.b2PulleyJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorB",box2d.b2PulleyJointDef.prototype.localAnchorB);box2d.b2PulleyJointDef.prototype.lengthA=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthA",box2d.b2PulleyJointDef.prototype.lengthA);box2d.b2PulleyJointDef.prototype.lengthB=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthB",box2d.b2PulleyJointDef.prototype.lengthB);
box2d.b2PulleyJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"ratio",box2d.b2PulleyJointDef.prototype.ratio);
box2d.b2PulleyJointDef.prototype.Initialize=function(a,c,b,d,e,f,g){this.bodyA=a;this.bodyB=c;this.groundAnchorA.Copy(b);this.groundAnchorB.Copy(d);this.bodyA.GetLocalPoint(e,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB);this.lengthA=box2d.b2Distance(e,b);this.lengthB=box2d.b2Distance(f,d);this.ratio=g;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.ratio>box2d.b2_epsilon)};goog.exportProperty(box2d.b2PulleyJointDef.prototype,"Initialize",box2d.b2PulleyJointDef.prototype.Initialize);
box2d.b2PulleyJoint=function(a){box2d.b2Joint.call(this,a);this.m_groundAnchorA=new box2d.b2Vec2;this.m_groundAnchorB=new box2d.b2Vec2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_uA=new box2d.b2Vec2;this.m_uB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;
this.m_groundAnchorA.Copy(a.groundAnchorA);this.m_groundAnchorB.Copy(a.groundAnchorB);this.m_localAnchorA.Copy(a.localAnchorA);this.m_localAnchorB.Copy(a.localAnchorB);this.m_lengthA=a.lengthA;this.m_lengthB=a.lengthB;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0!==a.ratio);this.m_ratio=a.ratio;this.m_constant=a.lengthA+this.m_ratio*a.lengthB;this.m_impulse=0};goog.inherits(box2d.b2PulleyJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2PulleyJoint",box2d.b2PulleyJoint);
box2d.b2PulleyJoint.prototype.m_groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorA",box2d.b2PulleyJoint.prototype.m_groundAnchorA);box2d.b2PulleyJoint.prototype.m_groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorB",box2d.b2PulleyJoint.prototype.m_groundAnchorB);box2d.b2PulleyJoint.prototype.m_lengthA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthA",box2d.b2PulleyJoint.prototype.m_lengthA);
box2d.b2PulleyJoint.prototype.m_lengthB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthB",box2d.b2PulleyJoint.prototype.m_lengthB);box2d.b2PulleyJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorA",box2d.b2PulleyJoint.prototype.m_localAnchorA);box2d.b2PulleyJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorB",box2d.b2PulleyJoint.prototype.m_localAnchorB);
box2d.b2PulleyJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_constant",box2d.b2PulleyJoint.prototype.m_constant);box2d.b2PulleyJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_ratio",box2d.b2PulleyJoint.prototype.m_ratio);box2d.b2PulleyJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_impulse",box2d.b2PulleyJoint.prototype.m_impulse);box2d.b2PulleyJoint.prototype.m_indexA=0;
goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexA",box2d.b2PulleyJoint.prototype.m_indexA);box2d.b2PulleyJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexB",box2d.b2PulleyJoint.prototype.m_indexB);box2d.b2PulleyJoint.prototype.m_uA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uA",box2d.b2PulleyJoint.prototype.m_uA);box2d.b2PulleyJoint.prototype.m_uB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uB",box2d.b2PulleyJoint.prototype.m_uB);
box2d.b2PulleyJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rA",box2d.b2PulleyJoint.prototype.m_rA);box2d.b2PulleyJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rB",box2d.b2PulleyJoint.prototype.m_rB);box2d.b2PulleyJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterA",box2d.b2PulleyJoint.prototype.m_localCenterA);box2d.b2PulleyJoint.prototype.m_localCenterB=null;
goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterB",box2d.b2PulleyJoint.prototype.m_localCenterB);box2d.b2PulleyJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassA",box2d.b2PulleyJoint.prototype.m_invMassA);box2d.b2PulleyJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassB",box2d.b2PulleyJoint.prototype.m_invMassB);box2d.b2PulleyJoint.prototype.m_invIA=0;
goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIA",box2d.b2PulleyJoint.prototype.m_invIA);box2d.b2PulleyJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIB",box2d.b2PulleyJoint.prototype.m_invIB);box2d.b2PulleyJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_mass",box2d.b2PulleyJoint.prototype.m_mass);box2d.b2PulleyJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qA",box2d.b2PulleyJoint.prototype.m_qA);
box2d.b2PulleyJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qB",box2d.b2PulleyJoint.prototype.m_qB);box2d.b2PulleyJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcA",box2d.b2PulleyJoint.prototype.m_lalcA);box2d.b2PulleyJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcB",box2d.b2PulleyJoint.prototype.m_lalcB);
box2d.b2PulleyJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].c,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].c,f=a.positions[this.m_indexB].a,g=a.velocities[this.m_indexB].v,h=a.velocities[this.m_indexB].w,k=this.m_qA.SetAngle(a.positions[this.m_indexA].a),f=this.m_qB.SetAngle(f);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2Mul_R_V2(k,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(f,this.m_lalcB,this.m_rB);this.m_uA.Copy(c).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA);this.m_uB.Copy(e).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);
c=this.m_uA.Length();e=this.m_uB.Length();c>10*box2d.b2_linearSlop?this.m_uA.SelfMul(1/c):this.m_uA.SetZero();e>10*box2d.b2_linearSlop?this.m_uB.SelfMul(1/e):this.m_uB.SetZero();c=box2d.b2Cross_V2_V2(this.m_rA,this.m_uA);e=box2d.b2Cross_V2_V2(this.m_rB,this.m_uB);this.m_mass=this.m_invMassA+this.m_invIA*c*c+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*e*e);0<this.m_mass&&(this.m_mass=1/this.m_mass);a.step.warmStarting?(this.m_impulse*=a.step.dtRatio,c=box2d.b2Mul_S_V2(-this.m_impulse,this.m_uA,
box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),e=box2d.b2Mul_S_V2(-this.m_ratio*this.m_impulse,this.m_uB,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB),b.SelfMulAdd(this.m_invMassA,c),d+=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,c),g.SelfMulAdd(this.m_invMassB,e),h+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,e)):this.m_impulse=0;a.velocities[this.m_indexA].w=d;a.velocities[this.m_indexB].w=h};goog.exportProperty(box2d.b2PulleyJoint.prototype,"InitVelocityConstraints",box2d.b2PulleyJoint.prototype.InitVelocityConstraints);
box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB=new box2d.b2Vec2;
box2d.b2PulleyJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),g=box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB),f=-box2d.b2Dot_V2_V2(this.m_uA,f)-this.m_ratio*box2d.b2Dot_V2_V2(this.m_uB,g),g=-this.m_mass*f;this.m_impulse+=
g;f=box2d.b2Mul_S_V2(-g,this.m_uA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA);g=box2d.b2Mul_S_V2(-this.m_ratio*g,this.m_uB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB);c.SelfMulAdd(this.m_invMassA,f);b+=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,f);d.SelfMulAdd(this.m_invMassB,g);e+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,g);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};
goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolveVelocityConstraints",box2d.b2PulleyJoint.prototype.SolveVelocityConstraints);box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB=new box2d.b2Vec2;
box2d.b2PulleyJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);f=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var g=box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),h=this.m_uA.Copy(c).SelfAdd(f).SelfSub(this.m_groundAnchorA),
k=this.m_uB.Copy(d).SelfAdd(g).SelfSub(this.m_groundAnchorB),l=h.Length(),m=k.Length();l>10*box2d.b2_linearSlop?h.SelfMul(1/l):h.SetZero();m>10*box2d.b2_linearSlop?k.SelfMul(1/m):k.SetZero();var n=box2d.b2Cross_V2_V2(f,h),p=box2d.b2Cross_V2_V2(g,k),n=this.m_invMassA+this.m_invIA*n*n+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*p*p);0<n&&(n=1/n);m=this.m_constant-l-this.m_ratio*m;l=box2d.b2Abs(m);m*=-n;h=box2d.b2Mul_S_V2(-m,h,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA);
k=box2d.b2Mul_S_V2(-this.m_ratio*m,k,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB);c.SelfMulAdd(this.m_invMassA,h);b+=this.m_invIA*box2d.b2Cross_V2_V2(f,h);d.SelfMulAdd(this.m_invMassB,k);e+=this.m_invIB*box2d.b2Cross_V2_V2(g,k);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return l<box2d.b2_linearSlop};goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolvePositionConstraints",box2d.b2PulleyJoint.prototype.SolvePositionConstraints);
box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorA",box2d.b2PulleyJoint.prototype.GetAnchorA);box2d.b2PulleyJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};
goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorB",box2d.b2PulleyJoint.prototype.GetAnchorB);box2d.b2PulleyJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*this.m_impulse*this.m_uB.x,a*this.m_impulse*this.m_uB.y)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionForce",box2d.b2PulleyJoint.prototype.GetReactionForce);box2d.b2PulleyJoint.prototype.GetReactionTorque=function(a){return 0};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionTorque",box2d.b2PulleyJoint.prototype.GetReactionTorque);
box2d.b2PulleyJoint.prototype.GetGroundAnchorA=function(a){return a.Copy(this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorA",box2d.b2PulleyJoint.prototype.GetGroundAnchorA);box2d.b2PulleyJoint.prototype.GetGroundAnchorB=function(a){return a.Copy(this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorB",box2d.b2PulleyJoint.prototype.GetGroundAnchorB);box2d.b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA};
goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthA",box2d.b2PulleyJoint.prototype.GetLengthA);box2d.b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthB",box2d.b2PulleyJoint.prototype.GetLengthB);box2d.b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetRatio",box2d.b2PulleyJoint.prototype.GetRatio);
box2d.b2PulleyJoint.prototype.GetCurrentLengthA=function(){var a=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p);return box2d.b2Distance(a,this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthA",box2d.b2PulleyJoint.prototype.GetCurrentLengthA);box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p=new box2d.b2Vec2;
box2d.b2PulleyJoint.prototype.GetCurrentLengthB=function(){var a=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p);return box2d.b2Distance(a,this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthB",box2d.b2PulleyJoint.prototype.GetCurrentLengthB);box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p=new box2d.b2Vec2;
box2d.b2PulleyJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y);box2d.b2Log("  jd.groundAnchorB.Set(%.15f, %.15f);\n",
this.m_groundAnchorB.x,this.m_groundAnchorB.y);box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.lengthA = %.15f;\n",this.m_lengthA);box2d.b2Log("  jd.lengthB = %.15f;\n",this.m_lengthB);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};
goog.exportProperty(box2d.b2PulleyJoint.prototype,"Dump",box2d.b2PulleyJoint.prototype.Dump);box2d.b2PulleyJoint.prototype.ShiftOrigin=function(a){this.m_groundAnchorA.SelfSub(a);this.m_groundAnchorB.SelfSub(a)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"ShiftOrigin",box2d.b2PulleyJoint.prototype.ShiftOrigin);box2d.b2RevoluteJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_revoluteJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2RevoluteJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RevoluteJointDef",box2d.b2RevoluteJointDef);box2d.b2RevoluteJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorA",box2d.b2RevoluteJointDef.prototype.localAnchorA);
box2d.b2RevoluteJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorB",box2d.b2RevoluteJointDef.prototype.localAnchorB);box2d.b2RevoluteJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"referenceAngle",box2d.b2RevoluteJointDef.prototype.referenceAngle);box2d.b2RevoluteJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableLimit",box2d.b2RevoluteJointDef.prototype.enableLimit);
box2d.b2RevoluteJointDef.prototype.lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"lowerAngle",box2d.b2RevoluteJointDef.prototype.lowerAngle);box2d.b2RevoluteJointDef.prototype.upperAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"upperAngle",box2d.b2RevoluteJointDef.prototype.upperAngle);box2d.b2RevoluteJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableMotor",box2d.b2RevoluteJointDef.prototype.enableMotor);
box2d.b2RevoluteJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"motorSpeed",box2d.b2RevoluteJointDef.prototype.motorSpeed);box2d.b2RevoluteJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"maxMotorTorque",box2d.b2RevoluteJointDef.prototype.maxMotorTorque);
box2d.b2RevoluteJointDef.prototype.Initialize=function(a,c,b){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(b,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"Initialize",box2d.b2RevoluteJointDef.prototype.Initialize);
box2d.b2RevoluteJoint=function(a){box2d.b2Joint.call(this,a);this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec3;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;this.m_localAnchorA.Copy(a.localAnchorA);
this.m_localAnchorB.Copy(a.localAnchorB);this.m_referenceAngle=a.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=0;this.m_lowerAngle=a.lowerAngle;this.m_upperAngle=a.upperAngle;this.m_maxMotorTorque=a.maxMotorTorque;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor;this.m_limitState=box2d.b2LimitState.e_inactiveLimit};goog.inherits(box2d.b2RevoluteJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2RevoluteJoint",box2d.b2RevoluteJoint);
box2d.b2RevoluteJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorA",box2d.b2RevoluteJoint.prototype.m_localAnchorA);box2d.b2RevoluteJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorB",box2d.b2RevoluteJoint.prototype.m_localAnchorB);box2d.b2RevoluteJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_impulse",box2d.b2RevoluteJoint.prototype.m_impulse);
box2d.b2RevoluteJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorImpulse",box2d.b2RevoluteJoint.prototype.m_motorImpulse);box2d.b2RevoluteJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableMotor",box2d.b2RevoluteJoint.prototype.m_enableMotor);box2d.b2RevoluteJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_maxMotorTorque",box2d.b2RevoluteJoint.prototype.m_maxMotorTorque);
box2d.b2RevoluteJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorSpeed",box2d.b2RevoluteJoint.prototype.m_motorSpeed);box2d.b2RevoluteJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableLimit",box2d.b2RevoluteJoint.prototype.m_enableLimit);box2d.b2RevoluteJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_referenceAngle",box2d.b2RevoluteJoint.prototype.m_referenceAngle);
box2d.b2RevoluteJoint.prototype.m_lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lowerAngle",box2d.b2RevoluteJoint.prototype.m_lowerAngle);box2d.b2RevoluteJoint.prototype.m_upperAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_upperAngle",box2d.b2RevoluteJoint.prototype.m_upperAngle);box2d.b2RevoluteJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexA",box2d.b2RevoluteJoint.prototype.m_indexA);
box2d.b2RevoluteJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexB",box2d.b2RevoluteJoint.prototype.m_indexB);box2d.b2RevoluteJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rA",box2d.b2RevoluteJoint.prototype.m_rA);box2d.b2RevoluteJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rB",box2d.b2RevoluteJoint.prototype.m_rB);box2d.b2RevoluteJoint.prototype.m_localCenterA=null;
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterA",box2d.b2RevoluteJoint.prototype.m_localCenterA);box2d.b2RevoluteJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterB",box2d.b2RevoluteJoint.prototype.m_localCenterB);box2d.b2RevoluteJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassA",box2d.b2RevoluteJoint.prototype.m_invMassA);box2d.b2RevoluteJoint.prototype.m_invMassB=0;
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassB",box2d.b2RevoluteJoint.prototype.m_invMassB);box2d.b2RevoluteJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIA",box2d.b2RevoluteJoint.prototype.m_invIA);box2d.b2RevoluteJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIB",box2d.b2RevoluteJoint.prototype.m_invIB);box2d.b2RevoluteJoint.prototype.m_mass=null;
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_mass",box2d.b2RevoluteJoint.prototype.m_mass);box2d.b2RevoluteJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorMass",box2d.b2RevoluteJoint.prototype.m_motorMass);box2d.b2RevoluteJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_limitState",box2d.b2RevoluteJoint.prototype.m_limitState);box2d.b2RevoluteJoint.prototype.m_qA=null;
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qA",box2d.b2RevoluteJoint.prototype.m_qA);box2d.b2RevoluteJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qB",box2d.b2RevoluteJoint.prototype.m_qB);box2d.b2RevoluteJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcA",box2d.b2RevoluteJoint.prototype.m_lalcA);box2d.b2RevoluteJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcB",box2d.b2RevoluteJoint.prototype.m_lalcB);
box2d.b2RevoluteJoint.prototype.m_K=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_K",box2d.b2RevoluteJoint.prototype.m_K);
box2d.b2RevoluteJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].a,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].a,f=a.velocities[this.m_indexB].v,g=a.velocities[this.m_indexB].w,h=this.m_qA.SetAngle(c),k=this.m_qB.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2Mul_R_V2(h,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(k,this.m_lalcB,this.m_rB);var h=this.m_invMassA,k=this.m_invMassB,l=this.m_invIA,m=this.m_invIB,n=0===l+m;this.m_mass.ex.x=h+k+this.m_rA.y*this.m_rA.y*l+this.m_rB.y*
this.m_rB.y*m;this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*l-this.m_rB.y*this.m_rB.x*m;this.m_mass.ez.x=-this.m_rA.y*l-this.m_rB.y*m;this.m_mass.ex.y=this.m_mass.ey.x;this.m_mass.ey.y=h+k+this.m_rA.x*this.m_rA.x*l+this.m_rB.x*this.m_rB.x*m;this.m_mass.ez.y=this.m_rA.x*l+this.m_rB.x*m;this.m_mass.ex.z=this.m_mass.ez.x;this.m_mass.ey.z=this.m_mass.ez.y;this.m_mass.ez.z=l+m;this.m_motorMass=l+m;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);if(!this.m_enableMotor||n)this.m_motorImpulse=0;this.m_enableLimit&&
!n?(c=e-c-this.m_referenceAngle,box2d.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*box2d.b2_angularSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:c<=this.m_lowerAngle?(this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atLowerLimit):c>=this.m_upperAngle?(this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atUpperLimit):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,
this.m_impulse.z=0)):this.m_limitState=box2d.b2LimitState.e_inactiveLimit;a.step.warmStarting?(this.m_impulse.SelfMulScalar(a.step.dtRatio),this.m_motorImpulse*=a.step.dtRatio,c=box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.Set(this.m_impulse.x,this.m_impulse.y),b.SelfMulSub(h,c),d-=l*(box2d.b2Cross_V2_V2(this.m_rA,c)+this.m_motorImpulse+this.m_impulse.z),f.SelfMulAdd(k,c),g+=m*(box2d.b2Cross_V2_V2(this.m_rB,c)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=
0);a.velocities[this.m_indexA].w=d;a.velocities[this.m_indexB].w=g};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"InitVelocityConstraints",box2d.b2RevoluteJoint.prototype.InitVelocityConstraints);box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=this.m_invMassA,g=this.m_invMassB,h=this.m_invIA,k=this.m_invIB,l=0===h+k;if(this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits&&!l){var m=e-b-this.m_motorSpeed,m=-this.m_motorMass*m,n=this.m_motorImpulse,p=a.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+
m,-p,p);m=this.m_motorImpulse-n;b-=h*m;e+=k*m}this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!l?(l=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),m=this.m_mass.Solve33(l.x,l.y,e-b,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg(),this.m_limitState===box2d.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(m):
this.m_limitState===box2d.b2LimitState.e_atLowerLimit?(n=this.m_impulse.z+m.z,0>n?(n=-l.x+this.m_impulse.z*this.m_mass.ez.x,l=-l.y+this.m_impulse.z*this.m_mass.ez.y,l=this.m_mass.Solve22(n,l,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),m.x=l.x,m.y=l.y,m.z=-this.m_impulse.z,this.m_impulse.x+=l.x,this.m_impulse.y+=l.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(m)):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(n=this.m_impulse.z+m.z,0<n?(n=-l.x+this.m_impulse.z*this.m_mass.ez.x,
l=-l.y+this.m_impulse.z*this.m_mass.ez.y,l=this.m_mass.Solve22(n,l,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),m.x=l.x,m.y=l.y,m.z=-this.m_impulse.z,this.m_impulse.x+=l.x,this.m_impulse.y+=l.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(m)),l=box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.Set(m.x,m.y),c.SelfMulSub(f,l),b-=h*(box2d.b2Cross_V2_V2(this.m_rA,l)+m.z),d.SelfMulAdd(g,l),e+=k*(box2d.b2Cross_V2_V2(this.m_rB,l)+m.z)):(m=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(d,
e,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot),m=this.m_mass.Solve22(-m.x,-m.y,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2),this.m_impulse.x+=m.x,this.m_impulse.y+=m.y,c.SelfMulSub(f,m),b-=h*box2d.b2Cross_V2_V2(this.m_rA,m),d.SelfMulAdd(g,m),e+=k*box2d.b2Cross_V2_V2(this.m_rB,m));a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolveVelocityConstraints",box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints);box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3=new box2d.b2Vec3;
box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2=new box2d.b2Vec2;
box2d.b2RevoluteJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e),h=0,k=0,k=0===this.m_invIA+this.m_invIB;if(this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!k){var l=e-b-this.m_referenceAngle,k=0;this.m_limitState===box2d.b2LimitState.e_equalLimits?(l=box2d.b2Clamp(l-this.m_lowerAngle,-box2d.b2_maxAngularCorrection,
box2d.b2_maxAngularCorrection),k=-this.m_motorMass*l,h=box2d.b2Abs(l)):this.m_limitState===box2d.b2LimitState.e_atLowerLimit?(l-=this.m_lowerAngle,h=-l,l=box2d.b2Clamp(l+box2d.b2_angularSlop,-box2d.b2_maxAngularCorrection,0),k=-this.m_motorMass*l):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(h=l-=this.m_upperAngle,l=box2d.b2Clamp(l-box2d.b2_angularSlop,0,box2d.b2_maxAngularCorrection),k=-this.m_motorMass*l);b-=this.m_invIA*k;e+=this.m_invIB*k}f.SetAngle(b);g.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,
this.m_localCenterA,this.m_lalcA);f=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var g=box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),l=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(d,g,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,f,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C),k=l.Length(),m=this.m_invMassA,n=this.m_invMassB,p=this.m_invIA,q=this.m_invIB,r=this.m_K;r.ex.x=m+n+p*f.y*f.y+q*g.y*g.y;r.ex.y=-p*f.x*f.y-
q*g.x*g.y;r.ey.x=r.ex.y;r.ey.y=m+n+p*f.x*f.x+q*g.x*g.x;l=r.Solve(l.x,l.y,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg();c.SelfMulSub(m,l);b-=p*box2d.b2Cross_V2_V2(f,l);d.SelfMulAdd(n,l);e+=q*box2d.b2Cross_V2_V2(g,l);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return k<=box2d.b2_linearSlop&&h<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolvePositionConstraints",box2d.b2RevoluteJoint.prototype.SolvePositionConstraints);
box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorA",box2d.b2RevoluteJoint.prototype.GetAnchorA);box2d.b2RevoluteJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorB",box2d.b2RevoluteJoint.prototype.GetAnchorB);box2d.b2RevoluteJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*this.m_impulse.x,a*this.m_impulse.y)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionForce",box2d.b2RevoluteJoint.prototype.GetReactionForce);box2d.b2RevoluteJoint.prototype.GetReactionTorque=function(a){return a*this.m_impulse.z};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionTorque",box2d.b2RevoluteJoint.prototype.GetReactionTorque);box2d.b2RevoluteJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorA",box2d.b2RevoluteJoint.prototype.GetLocalAnchorA);box2d.b2RevoluteJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorB",box2d.b2RevoluteJoint.prototype.GetLocalAnchorB);box2d.b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReferenceAngle",box2d.b2RevoluteJoint.prototype.GetReferenceAngle);box2d.b2RevoluteJoint.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointAngle",box2d.b2RevoluteJoint.prototype.GetJointAngle);box2d.b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointSpeed",box2d.b2RevoluteJoint.prototype.GetJointSpeed);box2d.b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsMotorEnabled",box2d.b2RevoluteJoint.prototype.IsMotorEnabled);box2d.b2RevoluteJoint.prototype.EnableMotor=function(a){this.m_enableMotor!==a&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=a)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableMotor",box2d.b2RevoluteJoint.prototype.EnableMotor);box2d.b2RevoluteJoint.prototype.GetMotorTorque=function(a){return a*this.m_motorImpulse};
goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorTorque",box2d.b2RevoluteJoint.prototype.GetMotorTorque);box2d.b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorSpeed",box2d.b2RevoluteJoint.prototype.GetMotorSpeed);box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque=function(a){this.m_maxMotorTorque=a};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque);
box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque);box2d.b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsLimitEnabled",box2d.b2RevoluteJoint.prototype.IsLimitEnabled);
box2d.b2RevoluteJoint.prototype.EnableLimit=function(a){a!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=a,this.m_impulse.z=0)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableLimit",box2d.b2RevoluteJoint.prototype.EnableLimit);box2d.b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLowerLimit",box2d.b2RevoluteJoint.prototype.GetLowerLimit);
box2d.b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetUpperLimit",box2d.b2RevoluteJoint.prototype.GetUpperLimit);box2d.b2RevoluteJoint.prototype.SetLimits=function(a,c){if(a!==this.m_lowerAngle||c!==this.m_upperAngle)this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=a,this.m_upperAngle=c};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetLimits",box2d.b2RevoluteJoint.prototype.SetLimits);
box2d.b2RevoluteJoint.prototype.SetMotorSpeed=function(a){this.m_motorSpeed!==a&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=a)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMotorSpeed",box2d.b2RevoluteJoint.prototype.SetMotorSpeed);
box2d.b2RevoluteJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle);box2d.b2Log("  jd.upperAngle = %.15f;\n",this.m_upperAngle);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);
box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"Dump",box2d.b2RevoluteJoint.prototype.Dump);box2d.b2GearJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_gearJoint)};goog.inherits(box2d.b2GearJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2GearJointDef",box2d.b2GearJointDef);box2d.b2GearJointDef.prototype.joint1=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint1",box2d.b2GearJointDef.prototype.joint1);box2d.b2GearJointDef.prototype.joint2=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint2",box2d.b2GearJointDef.prototype.joint2);
box2d.b2GearJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2GearJointDef.prototype,"ratio",box2d.b2GearJointDef.prototype.ratio);
box2d.b2GearJoint=function(a){box2d.b2Joint.call(this,a);this.m_joint1=a.joint1;this.m_joint2=a.joint2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_localAnchorC=new box2d.b2Vec2;this.m_localAnchorD=new box2d.b2Vec2;this.m_localAxisC=new box2d.b2Vec2;this.m_localAxisD=new box2d.b2Vec2;this.m_lcA=new box2d.b2Vec2;this.m_lcB=new box2d.b2Vec2;this.m_lcC=new box2d.b2Vec2;this.m_lcD=new box2d.b2Vec2;this.m_JvAC=new box2d.b2Vec2;this.m_JvBD=new box2d.b2Vec2;this.m_qA=
new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_qC=new box2d.b2Rot;this.m_qD=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_lalcC=new box2d.b2Vec2;this.m_lalcD=new box2d.b2Vec2;this.m_typeA=this.m_joint1.GetType();this.m_typeB=this.m_joint2.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeA===box2d.b2JointType.e_revoluteJoint||this.m_typeA===box2d.b2JointType.e_prismaticJoint);box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeB===box2d.b2JointType.e_revoluteJoint||
this.m_typeB===box2d.b2JointType.e_prismaticJoint);var c,b;this.m_bodyC=this.m_joint1.GetBodyA();this.m_bodyA=this.m_joint1.GetBodyB();c=this.m_bodyA.m_xf;var d=this.m_bodyA.m_sweep.a;b=this.m_bodyC.m_xf;var e=this.m_bodyC.m_sweep.a;this.m_typeA===box2d.b2JointType.e_revoluteJoint?(b=a.joint1,this.m_localAnchorC.Copy(b.m_localAnchorA),this.m_localAnchorA.Copy(b.m_localAnchorB),this.m_referenceAngleA=b.m_referenceAngle,this.m_localAxisC.SetZero(),c=d-e-this.m_referenceAngleA):(e=a.joint1,this.m_localAnchorC.Copy(e.m_localAnchorA),
this.m_localAnchorA.Copy(e.m_localAnchorB),this.m_referenceAngleA=e.m_referenceAngle,this.m_localAxisC.Copy(e.m_localXAxisA),d=this.m_localAnchorC,c=box2d.b2MulT_R_V2(b.q,box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(c.q,this.m_localAnchorA,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(c.p,b.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),c=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(c,d,box2d.b2Vec2.s_t0),this.m_localAxisC));this.m_bodyD=this.m_joint2.GetBodyA();this.m_bodyB=this.m_joint2.GetBodyB();b=this.m_bodyB.m_xf;
var e=this.m_bodyB.m_sweep.a,d=this.m_bodyD.m_xf,f=this.m_bodyD.m_sweep.a;this.m_typeB===box2d.b2JointType.e_revoluteJoint?(b=a.joint2,this.m_localAnchorD.Copy(b.m_localAnchorA),this.m_localAnchorB.Copy(b.m_localAnchorB),this.m_referenceAngleB=b.m_referenceAngle,this.m_localAxisD.SetZero(),b=e-f-this.m_referenceAngleB):(e=a.joint2,this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.Copy(e.m_localXAxisA),
e=this.m_localAnchorD,b=box2d.b2MulT_R_V2(d.q,box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(b.q,this.m_localAnchorB,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(b.p,d.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),b=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,e,box2d.b2Vec2.s_t0),this.m_localAxisD));this.m_ratio=a.ratio;this.m_constant=c+this.m_ratio*b;this.m_impulse=0};goog.inherits(box2d.b2GearJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2GearJoint",box2d.b2GearJoint);
box2d.b2GearJoint.prototype.m_joint1=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint1",box2d.b2GearJoint.prototype.m_joint1);box2d.b2GearJoint.prototype.m_joint2=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint2",box2d.b2GearJoint.prototype.m_joint2);box2d.b2GearJoint.prototype.m_typeA=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeA",box2d.b2GearJoint.prototype.m_typeA);box2d.b2GearJoint.prototype.m_typeB=box2d.b2JointType.e_unknownJoint;
goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeB",box2d.b2GearJoint.prototype.m_typeB);box2d.b2GearJoint.prototype.m_bodyC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyC",box2d.b2GearJoint.prototype.m_bodyC);box2d.b2GearJoint.prototype.m_bodyD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyD",box2d.b2GearJoint.prototype.m_bodyD);box2d.b2GearJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorA",box2d.b2GearJoint.prototype.m_localAnchorA);
box2d.b2GearJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorB",box2d.b2GearJoint.prototype.m_localAnchorB);box2d.b2GearJoint.prototype.m_localAnchorC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorC",box2d.b2GearJoint.prototype.m_localAnchorC);box2d.b2GearJoint.prototype.m_localAnchorD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorD",box2d.b2GearJoint.prototype.m_localAnchorD);
box2d.b2GearJoint.prototype.m_localAxisC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisC",box2d.b2GearJoint.prototype.m_localAxisC);box2d.b2GearJoint.prototype.m_localAxisD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisD",box2d.b2GearJoint.prototype.m_localAxisD);box2d.b2GearJoint.prototype.m_referenceAngleA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleA",box2d.b2GearJoint.prototype.m_referenceAngleA);
box2d.b2GearJoint.prototype.m_referenceAngleB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleB",box2d.b2GearJoint.prototype.m_referenceAngleB);box2d.b2GearJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_constant",box2d.b2GearJoint.prototype.m_constant);box2d.b2GearJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_ratio",box2d.b2GearJoint.prototype.m_ratio);box2d.b2GearJoint.prototype.m_impulse=0;
goog.exportProperty(box2d.b2GearJoint.prototype,"m_impulse",box2d.b2GearJoint.prototype.m_impulse);box2d.b2GearJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexA",box2d.b2GearJoint.prototype.m_indexA);box2d.b2GearJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexB",box2d.b2GearJoint.prototype.m_indexB);box2d.b2GearJoint.prototype.m_indexC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexC",box2d.b2GearJoint.prototype.m_indexC);
box2d.b2GearJoint.prototype.m_indexD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexD",box2d.b2GearJoint.prototype.m_indexD);box2d.b2GearJoint.prototype.m_lcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcA",box2d.b2GearJoint.prototype.m_lcA);box2d.b2GearJoint.prototype.m_lcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcB",box2d.b2GearJoint.prototype.m_lcB);box2d.b2GearJoint.prototype.m_lcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcC",box2d.b2GearJoint.prototype.m_lcC);
box2d.b2GearJoint.prototype.m_lcD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcD",box2d.b2GearJoint.prototype.m_lcD);box2d.b2GearJoint.prototype.m_mA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mA",box2d.b2GearJoint.prototype.m_mA);box2d.b2GearJoint.prototype.m_mB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mB",box2d.b2GearJoint.prototype.m_mB);box2d.b2GearJoint.prototype.m_mC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mC",box2d.b2GearJoint.prototype.m_mC);
box2d.b2GearJoint.prototype.m_mD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mD",box2d.b2GearJoint.prototype.m_mD);box2d.b2GearJoint.prototype.m_iA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iA",box2d.b2GearJoint.prototype.m_iA);box2d.b2GearJoint.prototype.m_iB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iB",box2d.b2GearJoint.prototype.m_iB);box2d.b2GearJoint.prototype.m_iC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iC",box2d.b2GearJoint.prototype.m_iC);
box2d.b2GearJoint.prototype.m_iD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iD",box2d.b2GearJoint.prototype.m_iD);box2d.b2GearJoint.prototype.m_JvAC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvAC",box2d.b2GearJoint.prototype.m_JvAC);box2d.b2GearJoint.prototype.m_JvBD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvBD",box2d.b2GearJoint.prototype.m_JvBD);box2d.b2GearJoint.prototype.m_JwA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwA",box2d.b2GearJoint.prototype.m_JwA);
box2d.b2GearJoint.prototype.m_JwB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwB",box2d.b2GearJoint.prototype.m_JwB);box2d.b2GearJoint.prototype.m_JwC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwC",box2d.b2GearJoint.prototype.m_JwC);box2d.b2GearJoint.prototype.m_JwD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwD",box2d.b2GearJoint.prototype.m_JwD);box2d.b2GearJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mass",box2d.b2GearJoint.prototype.m_mass);
box2d.b2GearJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qA",box2d.b2GearJoint.prototype.m_qA);box2d.b2GearJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qB",box2d.b2GearJoint.prototype.m_qB);box2d.b2GearJoint.prototype.m_qC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qC",box2d.b2GearJoint.prototype.m_qC);box2d.b2GearJoint.prototype.m_qD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qD",box2d.b2GearJoint.prototype.m_qD);
box2d.b2GearJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcA",box2d.b2GearJoint.prototype.m_lalcA);box2d.b2GearJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcB",box2d.b2GearJoint.prototype.m_lalcB);box2d.b2GearJoint.prototype.m_lalcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcC",box2d.b2GearJoint.prototype.m_lalcC);box2d.b2GearJoint.prototype.m_lalcD=null;
goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcD",box2d.b2GearJoint.prototype.m_lalcD);
box2d.b2GearJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_indexC=this.m_bodyC.m_islandIndex;this.m_indexD=this.m_bodyD.m_islandIndex;this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter);this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter);this.m_mA=this.m_bodyA.m_invMass;this.m_mB=this.m_bodyB.m_invMass;this.m_mC=
this.m_bodyC.m_invMass;this.m_mD=this.m_bodyD.m_invMass;this.m_iA=this.m_bodyA.m_invI;this.m_iB=this.m_bodyB.m_invI;this.m_iC=this.m_bodyC.m_invI;this.m_iD=this.m_bodyD.m_invI;var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.positions[this.m_indexB].a,e=a.velocities[this.m_indexB].v,f=a.velocities[this.m_indexB].w,g=a.positions[this.m_indexC].a,h=a.velocities[this.m_indexC].v,k=a.velocities[this.m_indexC].w,l=a.positions[this.m_indexD].a,m=a.velocities[this.m_indexD].v,n=a.velocities[this.m_indexD].w,
p=this.m_qA.SetAngle(a.positions[this.m_indexA].a),d=this.m_qB.SetAngle(d),q=this.m_qC.SetAngle(g),g=this.m_qD.SetAngle(l);this.m_mass=0;this.m_typeA===box2d.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwC=this.m_JwA=1,this.m_mass+=this.m_iA+this.m_iC):(l=box2d.b2Mul_R_V2(q,this.m_localAxisC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2Sub_V2_V2(this.m_localAnchorC,this.m_lcC,this.m_lalcC),q=box2d.b2Mul_R_V2(q,this.m_lalcC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC),
box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_lcA,this.m_lalcA),p=box2d.b2Mul_R_V2(p,this.m_lalcA,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA),this.m_JvAC.Copy(l),this.m_JwC=box2d.b2Cross_V2_V2(q,l),this.m_JwA=box2d.b2Cross_V2_V2(p,l),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA);this.m_typeB===box2d.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwD=this.m_JwB=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+
this.m_iD)):(l=box2d.b2Mul_R_V2(g,this.m_localAxisD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2Sub_V2_V2(this.m_localAnchorD,this.m_lcD,this.m_lalcD),p=box2d.b2Mul_R_V2(g,this.m_lalcD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_lcB,this.m_lalcB),d=box2d.b2Mul_R_V2(d,this.m_lalcB,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB),box2d.b2Mul_S_V2(this.m_ratio,l,this.m_JvBD),this.m_JwD=this.m_ratio*box2d.b2Cross_V2_V2(p,
l),this.m_JwB=this.m_ratio*box2d.b2Cross_V2_V2(d,l),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB);this.m_mass=0<this.m_mass?1/this.m_mass:0;a.step.warmStarting?(c.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),b+=this.m_iA*this.m_impulse*this.m_JwA,e.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),f+=this.m_iB*this.m_impulse*this.m_JwB,h.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),k-=this.m_iC*this.m_impulse*this.m_JwC,
m.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),n-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0;a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=f;a.velocities[this.m_indexC].w=k;a.velocities[this.m_indexD].w=n};box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB=new box2d.b2Vec2;
box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD=new box2d.b2Vec2;
box2d.b2GearJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=a.velocities[this.m_indexC].v,g=a.velocities[this.m_indexC].w,h=a.velocities[this.m_indexD].v,k=a.velocities[this.m_indexD].w,l=box2d.b2Dot_V2_V2(this.m_JvAC,box2d.b2Sub_V2_V2(c,f,box2d.b2Vec2.s_t0))+box2d.b2Dot_V2_V2(this.m_JvBD,box2d.b2Sub_V2_V2(d,h,box2d.b2Vec2.s_t0)),l=l+(this.m_JwA*b-this.m_JwC*g+
(this.m_JwB*e-this.m_JwD*k)),l=-this.m_mass*l;this.m_impulse+=l;c.SelfMulAdd(this.m_mA*l,this.m_JvAC);b+=this.m_iA*l*this.m_JwA;d.SelfMulAdd(this.m_mB*l,this.m_JvBD);e+=this.m_iB*l*this.m_JwB;f.SelfMulSub(this.m_mC*l,this.m_JvAC);g-=this.m_iC*l*this.m_JwC;h.SelfMulSub(this.m_mD*l,this.m_JvBD);k-=this.m_iD*l*this.m_JwD;a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e;a.velocities[this.m_indexC].w=g;a.velocities[this.m_indexD].w=k};
box2d.b2GearJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=a.positions[this.m_indexC].c,g=a.positions[this.m_indexC].a,h=a.positions[this.m_indexD].c,k=a.positions[this.m_indexD].a,l=this.m_qA.SetAngle(b),m=this.m_qB.SetAngle(e),n=this.m_qC.SetAngle(g),p=this.m_qD.SetAngle(k),q=this.m_JvAC,r=this.m_JvBD,u,t,w=0;if(this.m_typeA===box2d.b2JointType.e_revoluteJoint)q.SetZero(),
l=u=1,w+=this.m_iA+this.m_iC,n=b-g-this.m_referenceAngleA;else{t=box2d.b2Mul_R_V2(n,this.m_localAxisC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);u=box2d.b2Mul_R_V2(n,this.m_lalcC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC);var x=box2d.b2Mul_R_V2(l,this.m_lalcA,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA);q.Copy(t);l=box2d.b2Cross_V2_V2(u,t);u=box2d.b2Cross_V2_V2(x,t);w+=this.m_mC+this.m_mA+this.m_iC*l*l+this.m_iA*u*u;t=this.m_lalcC;n=box2d.b2MulT_R_V2(n,
box2d.b2Add_V2_V2(x,box2d.b2Sub_V2_V2(c,f,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);n=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(n,t,box2d.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB===box2d.b2JointType.e_revoluteJoint)r.SetZero(),m=t=this.m_ratio,w+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),p=e-k-this.m_referenceAngleB;else{t=box2d.b2Mul_R_V2(p,this.m_localAxisD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);var v=box2d.b2Mul_R_V2(p,this.m_lalcD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD),
x=box2d.b2Mul_R_V2(m,this.m_lalcB,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB);box2d.b2Mul_S_V2(this.m_ratio,t,r);m=this.m_ratio*box2d.b2Cross_V2_V2(v,t);t=this.m_ratio*box2d.b2Cross_V2_V2(x,t);w+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*m*m+this.m_iB*t*t;v=this.m_lalcD;p=box2d.b2MulT_R_V2(p,box2d.b2Add_V2_V2(x,box2d.b2Sub_V2_V2(d,h,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);p=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(p,v,box2d.b2Vec2.s_t0),this.m_localAxisD)}p=
n+this.m_ratio*p-this.m_constant;n=0;0<w&&(n=-p/w);c.SelfMulAdd(this.m_mA*n,q);b+=this.m_iA*n*u;d.SelfMulAdd(this.m_mB*n,r);e+=this.m_iB*n*t;f.SelfMulSub(this.m_mC*n,q);g-=this.m_iC*n*l;h.SelfMulSub(this.m_mD*n,r);k-=this.m_iD*n*m;a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;a.positions[this.m_indexC].a=g;a.positions[this.m_indexD].a=k;return 0<box2d.b2_linearSlop};goog.exportProperty(box2d.b2GearJoint.prototype,"SolvePositionConstraints",box2d.b2GearJoint.prototype.SolvePositionConstraints);
box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD=new box2d.b2Vec2;box2d.b2GearJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};
goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorA",box2d.b2GearJoint.prototype.GetAnchorA);box2d.b2GearJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorB",box2d.b2GearJoint.prototype.GetAnchorB);box2d.b2GearJoint.prototype.GetReactionForce=function(a,c){return box2d.b2Mul_S_V2(a*this.m_impulse,this.m_JvAC,c)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionForce",box2d.b2GearJoint.prototype.GetReactionForce);
box2d.b2GearJoint.prototype.GetReactionTorque=function(a){return a*this.m_impulse*this.m_JwA};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionTorque",box2d.b2GearJoint.prototype.GetReactionTorque);box2d.b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1};goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint1",box2d.b2GearJoint.prototype.GetJoint1);box2d.b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2};
goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint2",box2d.b2GearJoint.prototype.GetJoint2);box2d.b2GearJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2GearJoint.prototype,"GetRatio",box2d.b2GearJoint.prototype.GetRatio);box2d.b2GearJoint.prototype.SetRatio=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(a));this.m_ratio=a};goog.exportProperty(box2d.b2GearJoint.prototype,"SetRatio",box2d.b2GearJoint.prototype.SetRatio);
box2d.b2GearJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex,b=this.m_joint1.m_index,d=this.m_joint2.m_index;box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.joint1 = joints[%d];\n",b);box2d.b2Log("  jd.joint2 = joints[%d];\n",
d);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2GearJoint.prototype,"Dump",box2d.b2GearJoint.prototype.Dump);box2d.b2RopeJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_ropeJoint);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2RopeJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RopeJointDef",box2d.b2RopeJointDef);box2d.b2RopeJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorA",box2d.b2RopeJointDef.prototype.localAnchorA);box2d.b2RopeJointDef.prototype.localAnchorB=null;
goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorB",box2d.b2RopeJointDef.prototype.localAnchorB);box2d.b2RopeJointDef.prototype.maxLength=0;goog.exportProperty(box2d.b2RopeJointDef.prototype,"maxLength",box2d.b2RopeJointDef.prototype.maxLength);
box2d.b2RopeJoint=function(a){box2d.b2Joint.call(this,a);this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_maxLength=a.maxLength;this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2};goog.inherits(box2d.b2RopeJoint,box2d.b2Joint);
goog.exportSymbol("box2d.b2RopeJoint",box2d.b2RopeJoint);box2d.b2RopeJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorA",box2d.b2RopeJoint.prototype.m_localAnchorA);box2d.b2RopeJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorB",box2d.b2RopeJoint.prototype.m_localAnchorB);box2d.b2RopeJoint.prototype.m_maxLength=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_maxLength",box2d.b2RopeJoint.prototype.m_maxLength);
box2d.b2RopeJoint.prototype.m_length=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_length",box2d.b2RopeJoint.prototype.m_length);box2d.b2RopeJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_impulse",box2d.b2RopeJoint.prototype.m_impulse);box2d.b2RopeJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexA",box2d.b2RopeJoint.prototype.m_indexA);box2d.b2RopeJoint.prototype.m_indexB=0;
goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexB",box2d.b2RopeJoint.prototype.m_indexB);box2d.b2RopeJoint.prototype.m_u=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_u",box2d.b2RopeJoint.prototype.m_u);box2d.b2RopeJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rA",box2d.b2RopeJoint.prototype.m_rA);box2d.b2RopeJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rB",box2d.b2RopeJoint.prototype.m_rB);
box2d.b2RopeJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterA",box2d.b2RopeJoint.prototype.m_localCenterA);box2d.b2RopeJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterB",box2d.b2RopeJoint.prototype.m_localCenterB);box2d.b2RopeJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassA",box2d.b2RopeJoint.prototype.m_invMassA);box2d.b2RopeJoint.prototype.m_invMassB=0;
goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassB",box2d.b2RopeJoint.prototype.m_invMassB);box2d.b2RopeJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIA",box2d.b2RopeJoint.prototype.m_invIA);box2d.b2RopeJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIB",box2d.b2RopeJoint.prototype.m_invIB);box2d.b2RopeJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_mass",box2d.b2RopeJoint.prototype.m_mass);
box2d.b2RopeJoint.prototype.m_state=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_state",box2d.b2RopeJoint.prototype.m_state);box2d.b2RopeJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qA",box2d.b2RopeJoint.prototype.m_qA);box2d.b2RopeJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qB",box2d.b2RopeJoint.prototype.m_qB);box2d.b2RopeJoint.prototype.m_lalcA=null;
goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcA",box2d.b2RopeJoint.prototype.m_lalcA);box2d.b2RopeJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcB",box2d.b2RopeJoint.prototype.m_lalcB);
box2d.b2RopeJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].c,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].c,f=a.positions[this.m_indexB].a,g=a.velocities[this.m_indexB].v,h=a.velocities[this.m_indexB].w,k=this.m_qA.SetAngle(a.positions[this.m_indexA].a),f=this.m_qB.SetAngle(f);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2Mul_R_V2(k,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(f,this.m_lalcB,this.m_rB);this.m_u.Copy(e).SelfAdd(this.m_rB).SelfSub(c).SelfSub(this.m_rA);this.m_length=
this.m_u.Length();this.m_state=0<this.m_length-this.m_maxLength?box2d.b2LimitState.e_atUpperLimit:box2d.b2LimitState.e_inactiveLimit;this.m_length>box2d.b2_linearSlop?(this.m_u.SelfMul(1/this.m_length),c=box2d.b2Cross_V2_V2(this.m_rA,this.m_u),e=box2d.b2Cross_V2_V2(this.m_rB,this.m_u),c=this.m_invMassA+this.m_invIA*c*c+this.m_invMassB+this.m_invIB*e*e,this.m_mass=0!==c?1/c:0,a.step.warmStarting?(this.m_impulse*=a.step.dtRatio,c=box2d.b2Mul_S_V2(this.m_impulse,this.m_u,box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P),
b.SelfMulSub(this.m_invMassA,c),d-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,c),g.SelfMulAdd(this.m_invMassB,c),h+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,c)):this.m_impulse=0,a.velocities[this.m_indexA].w=d,a.velocities[this.m_indexB].w=h):(this.m_u.SetZero(),this.m_impulse=this.m_mass=0)};goog.exportProperty(box2d.b2RopeJoint.prototype,"InitVelocityConstraints",box2d.b2RopeJoint.prototype.InitVelocityConstraints);box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2RopeJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),g=box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),h=this.m_length-this.m_maxLength,f=box2d.b2Dot_V2_V2(this.m_u,box2d.b2Sub_V2_V2(g,f,box2d.b2Vec2.s_t0));
0>h&&(f+=a.step.inv_dt*h);h=-this.m_mass*f;f=this.m_impulse;this.m_impulse=box2d.b2Min(0,this.m_impulse+h);h=this.m_impulse-f;h=box2d.b2Mul_S_V2(h,this.m_u,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P);c.SelfMulSub(this.m_invMassA,h);b-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,h);d.SelfMulAdd(this.m_invMassB,h);e+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,h);a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};
goog.exportProperty(box2d.b2RopeJoint.prototype,"SolveVelocityConstraints",box2d.b2RopeJoint.prototype.SolveVelocityConstraints);box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2RopeJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);f=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var g=box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),h=this.m_u.Copy(d).SelfAdd(g).SelfSub(c).SelfSub(f),
k=h.Normalize(),l=k-this.m_maxLength,l=box2d.b2Clamp(l,0,box2d.b2_maxLinearCorrection),h=box2d.b2Mul_S_V2(-this.m_mass*l,h,box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P);c.SelfMulSub(this.m_invMassA,h);b-=this.m_invIA*box2d.b2Cross_V2_V2(f,h);d.SelfMulAdd(this.m_invMassB,h);e+=this.m_invIB*box2d.b2Cross_V2_V2(g,h);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return k-this.m_maxLength<box2d.b2_linearSlop};
goog.exportProperty(box2d.b2RopeJoint.prototype,"SolvePositionConstraints",box2d.b2RopeJoint.prototype.SolvePositionConstraints);box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorA",box2d.b2RopeJoint.prototype.GetAnchorA);
box2d.b2RopeJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorB",box2d.b2RopeJoint.prototype.GetAnchorB);box2d.b2RopeJoint.prototype.GetReactionForce=function(a,c){return box2d.b2Mul_S_V2(a*this.m_impulse,this.m_u,c)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionForce",box2d.b2RopeJoint.prototype.GetReactionForce);box2d.b2RopeJoint.prototype.GetReactionTorque=function(a){return 0};
goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionTorque",box2d.b2RopeJoint.prototype.GetReactionTorque);box2d.b2RopeJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorA",box2d.b2RopeJoint.prototype.GetLocalAnchorA);box2d.b2RopeJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorB",box2d.b2RopeJoint.prototype.GetLocalAnchorB);
box2d.b2RopeJoint.prototype.SetMaxLength=function(a){this.m_maxLength=a};goog.exportProperty(box2d.b2RopeJoint.prototype,"SetMaxLength",box2d.b2RopeJoint.prototype.SetMaxLength);box2d.b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetMaxLength",box2d.b2RopeJoint.prototype.GetMaxLength);box2d.b2RopeJoint.prototype.GetLimitState=function(){return this.m_state};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLimitState",box2d.b2RopeJoint.prototype.GetLimitState);
box2d.b2RopeJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxLength = %.15f;\n",this.m_maxLength);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RopeJoint.prototype,"Dump",box2d.b2RopeJoint.prototype.Dump);box2d.b2WeldJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_weldJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2WeldJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WeldJointDef",box2d.b2WeldJointDef);box2d.b2WeldJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorA",box2d.b2WeldJointDef.prototype.localAnchorA);box2d.b2WeldJointDef.prototype.localAnchorB=null;
goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorB",box2d.b2WeldJointDef.prototype.localAnchorB);box2d.b2WeldJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"referenceAngle",box2d.b2WeldJointDef.prototype.referenceAngle);box2d.b2WeldJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"frequencyHz",box2d.b2WeldJointDef.prototype.frequencyHz);box2d.b2WeldJointDef.prototype.dampingRatio=0;
goog.exportProperty(box2d.b2WeldJointDef.prototype,"dampingRatio",box2d.b2WeldJointDef.prototype.dampingRatio);box2d.b2WeldJointDef.prototype.Initialize=function(a,c,b){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(b,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};goog.exportProperty(box2d.b2WeldJointDef.prototype,"Initialize",box2d.b2WeldJointDef.prototype.Initialize);
box2d.b2WeldJoint=function(a){box2d.b2Joint.call(this,a);this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_referenceAngle=a.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=
new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat33};goog.inherits(box2d.b2WeldJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WeldJoint",box2d.b2WeldJoint);box2d.b2WeldJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_frequencyHz",box2d.b2WeldJoint.prototype.m_frequencyHz);box2d.b2WeldJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_dampingRatio",box2d.b2WeldJoint.prototype.m_dampingRatio);
box2d.b2WeldJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_bias",box2d.b2WeldJoint.prototype.m_bias);box2d.b2WeldJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorA",box2d.b2WeldJoint.prototype.m_localAnchorA);box2d.b2WeldJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorB",box2d.b2WeldJoint.prototype.m_localAnchorB);box2d.b2WeldJoint.prototype.m_referenceAngle=0;
goog.exportProperty(box2d.b2WeldJoint.prototype,"m_referenceAngle",box2d.b2WeldJoint.prototype.m_referenceAngle);box2d.b2WeldJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_gamma",box2d.b2WeldJoint.prototype.m_gamma);box2d.b2WeldJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_impulse",box2d.b2WeldJoint.prototype.m_impulse);box2d.b2WeldJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexA",box2d.b2WeldJoint.prototype.m_indexA);
box2d.b2WeldJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexB",box2d.b2WeldJoint.prototype.m_indexB);box2d.b2WeldJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rA",box2d.b2WeldJoint.prototype.m_rA);box2d.b2WeldJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rB",box2d.b2WeldJoint.prototype.m_rB);box2d.b2WeldJoint.prototype.m_localCenterA=null;
goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterA",box2d.b2WeldJoint.prototype.m_localCenterA);box2d.b2WeldJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterB",box2d.b2WeldJoint.prototype.m_localCenterB);box2d.b2WeldJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassA",box2d.b2WeldJoint.prototype.m_invMassA);box2d.b2WeldJoint.prototype.m_invMassB=0;
goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassB",box2d.b2WeldJoint.prototype.m_invMassB);box2d.b2WeldJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIA",box2d.b2WeldJoint.prototype.m_invIA);box2d.b2WeldJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIB",box2d.b2WeldJoint.prototype.m_invIB);box2d.b2WeldJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_mass",box2d.b2WeldJoint.prototype.m_mass);
box2d.b2WeldJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qA",box2d.b2WeldJoint.prototype.m_qA);box2d.b2WeldJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qB",box2d.b2WeldJoint.prototype.m_qB);box2d.b2WeldJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcA",box2d.b2WeldJoint.prototype.m_lalcA);box2d.b2WeldJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcB",box2d.b2WeldJoint.prototype.m_lalcB);
box2d.b2WeldJoint.prototype.m_K=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_K",box2d.b2WeldJoint.prototype.m_K);
box2d.b2WeldJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=a.positions[this.m_indexA].a,b=a.velocities[this.m_indexA].v,d=a.velocities[this.m_indexA].w,
e=a.positions[this.m_indexB].a,f=a.velocities[this.m_indexB].v,g=a.velocities[this.m_indexB].w,h=this.m_qA.SetAngle(c),k=this.m_qB.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2Mul_R_V2(h,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2Mul_R_V2(k,this.m_lalcB,this.m_rB);var h=this.m_invMassA,k=this.m_invMassB,l=this.m_invIA,m=this.m_invIB,n=this.m_K;n.ex.x=h+k+this.m_rA.y*this.m_rA.y*l+this.m_rB.y*
this.m_rB.y*m;n.ey.x=-this.m_rA.y*this.m_rA.x*l-this.m_rB.y*this.m_rB.x*m;n.ez.x=-this.m_rA.y*l-this.m_rB.y*m;n.ex.y=n.ey.x;n.ey.y=h+k+this.m_rA.x*this.m_rA.x*l+this.m_rB.x*this.m_rB.x*m;n.ez.y=this.m_rA.x*l+this.m_rB.x*m;n.ex.z=n.ez.x;n.ey.z=n.ez.y;n.ez.z=l+m;if(0<this.m_frequencyHz){n.GetInverse22(this.m_mass);var n=l+m,p=0<n?1/n:0,c=e-c-this.m_referenceAngle,e=2*box2d.b2_pi*this.m_frequencyHz,q=p*e*e,r=a.step.dt;this.m_gamma=r*(2*p*this.m_dampingRatio*e+r*q);this.m_gamma=0!==this.m_gamma?1/this.m_gamma:
0;this.m_bias=c*r*q*this.m_gamma;n+=this.m_gamma;this.m_mass.ez.z=0!==n?1/n:0}else 0===n.ez.z?n.GetInverse22(this.m_mass):n.GetSymInverse33(this.m_mass),this.m_bias=this.m_gamma=0;a.step.warmStarting?(this.m_impulse.SelfMulScalar(a.step.dtRatio),n=box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.Set(this.m_impulse.x,this.m_impulse.y),b.SelfMulSub(h,n),d-=l*(box2d.b2Cross_V2_V2(this.m_rA,n)+this.m_impulse.z),f.SelfMulAdd(k,n),g+=m*(box2d.b2Cross_V2_V2(this.m_rB,n)+this.m_impulse.z)):this.m_impulse.SetZero();
a.velocities[this.m_indexA].w=d;a.velocities[this.m_indexB].w=g};box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2WeldJoint.prototype.SolveVelocityConstraints=function(a){var c=a.velocities[this.m_indexA].v,b=a.velocities[this.m_indexA].w,d=a.velocities[this.m_indexB].v,e=a.velocities[this.m_indexB].w,f=this.m_invMassA,g=this.m_invMassB,h=this.m_invIA,k=this.m_invIB;if(0<this.m_frequencyHz){var l=-this.m_mass.ez.z*(e-b+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=l;b-=h*l;e+=k*l;l=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(c,b,
this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1);l=box2d.b2Mul_M33_X_Y(this.m_mass,l.x,l.y,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg();this.m_impulse.x+=l.x;this.m_impulse.y+=l.y;c.SelfMulSub(f,l);b-=h*box2d.b2Cross_V2_V2(this.m_rA,l);d.SelfMulAdd(g,l);e+=k*box2d.b2Cross_V2_V2(this.m_rB,l)}else{var l=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(d,e,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(c,b,this.m_rA,box2d.b2Vec2.s_t1),
box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),m=box2d.b2Mul_M33_X_Y_Z(this.m_mass,l.x,l.y,e-b,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg();this.m_impulse.SelfAdd(m);l=box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.Set(m.x,m.y);c.SelfMulSub(f,l);b-=h*(box2d.b2Cross_V2_V2(this.m_rA,l)+m.z);d.SelfMulAdd(g,l);e+=k*(box2d.b2Cross_V2_V2(this.m_rB,l)+m.z)}a.velocities[this.m_indexA].w=b;a.velocities[this.m_indexB].w=e};
goog.exportProperty(box2d.b2WeldJoint.prototype,"SolveVelocityConstraints",box2d.b2WeldJoint.prototype.SolveVelocityConstraints);box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2WeldJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e),h=this.m_invMassA,k=this.m_invMassB,l=this.m_invIA,m=this.m_invIB;box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var n=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var p=
box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),q=this.m_K;q.ex.x=h+k+n.y*n.y*l+p.y*p.y*m;q.ey.x=-n.y*n.x*l-p.y*p.x*m;q.ez.x=-n.y*l-p.y*m;q.ex.y=q.ey.x;q.ey.y=h+k+n.x*n.x*l+p.x*p.x*m;q.ez.y=n.x*l+p.x*m;q.ex.z=q.ez.x;q.ey.z=q.ez.y;q.ez.z=l+m;if(0<this.m_frequencyHz){var r=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(d,p,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,n,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),g=r.Length(),f=0,q=q.Solve22(r.x,r.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg();
c.SelfMulSub(h,q);b-=l*box2d.b2Cross_V2_V2(n,q);d.SelfMulAdd(k,q);e+=m*box2d.b2Cross_V2_V2(p,q)}else r=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(d,p,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(c,n,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),p=e-b-this.m_referenceAngle,g=r.Length(),f=box2d.b2Abs(p),n=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse,0<q.ez.z?q.Solve33(r.x,r.y,p,n).SelfNeg():(q=q.Solve22(r.x,r.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse2).SelfNeg(),
n.x=q.x,n.y=q.y,n.z=0),q=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.Set(n.x,n.y),c.SelfMulSub(h,q),b-=l*(box2d.b2Cross_V2_V2(this.m_rA,q)+n.z),d.SelfMulAdd(k,q),e+=m*(box2d.b2Cross_V2_V2(this.m_rB,q)+n.z);a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return g<=box2d.b2_linearSlop&&f<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2WeldJoint.prototype,"SolvePositionConstraints",box2d.b2WeldJoint.prototype.SolvePositionConstraints);
box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse2=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorA",box2d.b2WeldJoint.prototype.GetAnchorA);
box2d.b2WeldJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorB",box2d.b2WeldJoint.prototype.GetAnchorB);box2d.b2WeldJoint.prototype.GetReactionForce=function(a,c){return c.Set(a*this.m_impulse.x,a*this.m_impulse.y)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionForce",box2d.b2WeldJoint.prototype.GetReactionForce);
box2d.b2WeldJoint.prototype.GetReactionTorque=function(a){return a*this.m_impulse.z};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionTorque",box2d.b2WeldJoint.prototype.GetReactionTorque);box2d.b2WeldJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorA",box2d.b2WeldJoint.prototype.GetLocalAnchorA);box2d.b2WeldJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};
goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorB",box2d.b2WeldJoint.prototype.GetLocalAnchorB);box2d.b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReferenceAngle",box2d.b2WeldJoint.prototype.GetReferenceAngle);box2d.b2WeldJoint.prototype.SetFrequency=function(a){this.m_frequencyHz=a};box2d.b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};
goog.exportProperty(box2d.b2WeldJoint.prototype,"GetFrequency",box2d.b2WeldJoint.prototype.GetFrequency);box2d.b2WeldJoint.prototype.SetDampingRatio=function(a){this.m_dampingRatio=a};box2d.b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetDampingRatio",box2d.b2WeldJoint.prototype.GetDampingRatio);
box2d.b2WeldJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2WeldJoint.prototype,"Dump",box2d.b2WeldJoint.prototype.Dump);box2d.b2WheelJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_wheelJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0);this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2WheelJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WheelJointDef",box2d.b2WheelJointDef);box2d.b2WheelJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorA",box2d.b2WheelJointDef.prototype.localAnchorA);
box2d.b2WheelJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorB",box2d.b2WheelJointDef.prototype.localAnchorB);box2d.b2WheelJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAxisA",box2d.b2WheelJointDef.prototype.localAxisA);box2d.b2WheelJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2WheelJointDef.prototype,"enableMotor",box2d.b2WheelJointDef.prototype.enableMotor);
box2d.b2WheelJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"maxMotorTorque",box2d.b2WheelJointDef.prototype.maxMotorTorque);box2d.b2WheelJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"motorSpeed",box2d.b2WheelJointDef.prototype.motorSpeed);box2d.b2WheelJointDef.prototype.frequencyHz=2;goog.exportProperty(box2d.b2WheelJointDef.prototype,"frequencyHz",box2d.b2WheelJointDef.prototype.frequencyHz);
box2d.b2WheelJointDef.prototype.dampingRatio=.7;goog.exportProperty(box2d.b2WheelJointDef.prototype,"dampingRatio",box2d.b2WheelJointDef.prototype.dampingRatio);box2d.b2WheelJointDef.prototype.Initialize=function(a,c,b,d){this.bodyA=a;this.bodyB=c;this.bodyA.GetLocalPoint(b,this.localAnchorA);this.bodyB.GetLocalPoint(b,this.localAnchorB);this.bodyA.GetLocalVector(d,this.localAxisA)};goog.exportProperty(box2d.b2WheelJointDef.prototype,"Initialize",box2d.b2WheelJointDef.prototype.Initialize);
box2d.b2WheelJoint=function(a){box2d.b2Joint.call(this,a);this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_localAnchorA=a.localAnchorA.Clone();this.m_localAnchorB=a.localAnchorB.Clone();this.m_localXAxisA=a.localAxisA.Clone();this.m_localYAxisA=box2d.b2Cross_S_V2(1,this.m_localXAxisA,new box2d.b2Vec2);this.m_maxMotorTorque=a.maxMotorTorque;this.m_motorSpeed=a.motorSpeed;this.m_enableMotor=a.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;
this.m_ax=new box2d.b2Vec2;this.m_ay=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_ax.SetZero();this.m_ay.SetZero()};goog.inherits(box2d.b2WheelJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WheelJoint",box2d.b2WheelJoint);box2d.b2WheelJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_frequencyHz",box2d.b2WheelJoint.prototype.m_frequencyHz);
box2d.b2WheelJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_dampingRatio",box2d.b2WheelJoint.prototype.m_dampingRatio);box2d.b2WheelJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorA",box2d.b2WheelJoint.prototype.m_localAnchorA);box2d.b2WheelJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorB",box2d.b2WheelJoint.prototype.m_localAnchorB);
box2d.b2WheelJoint.prototype.m_localXAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localXAxisA",box2d.b2WheelJoint.prototype.m_localXAxisA);box2d.b2WheelJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localYAxisA",box2d.b2WheelJoint.prototype.m_localYAxisA);box2d.b2WheelJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_impulse",box2d.b2WheelJoint.prototype.m_impulse);box2d.b2WheelJoint.prototype.m_motorImpulse=0;
goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorImpulse",box2d.b2WheelJoint.prototype.m_motorImpulse);box2d.b2WheelJoint.prototype.m_springImpulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springImpulse",box2d.b2WheelJoint.prototype.m_springImpulse);box2d.b2WheelJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_maxMotorTorque",box2d.b2WheelJoint.prototype.m_maxMotorTorque);box2d.b2WheelJoint.prototype.m_motorSpeed=0;
goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorSpeed",box2d.b2WheelJoint.prototype.m_motorSpeed);box2d.b2WheelJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_enableMotor",box2d.b2WheelJoint.prototype.m_enableMotor);box2d.b2WheelJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexA",box2d.b2WheelJoint.prototype.m_indexA);box2d.b2WheelJoint.prototype.m_indexB=0;
goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexB",box2d.b2WheelJoint.prototype.m_indexB);box2d.b2WheelJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterA",box2d.b2WheelJoint.prototype.m_localCenterA);box2d.b2WheelJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterB",box2d.b2WheelJoint.prototype.m_localCenterB);box2d.b2WheelJoint.prototype.m_invMassA=0;
goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassA",box2d.b2WheelJoint.prototype.m_invMassA);box2d.b2WheelJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassB",box2d.b2WheelJoint.prototype.m_invMassB);box2d.b2WheelJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIA",box2d.b2WheelJoint.prototype.m_invIA);box2d.b2WheelJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIB",box2d.b2WheelJoint.prototype.m_invIB);
box2d.b2WheelJoint.prototype.m_ax=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ax",box2d.b2WheelJoint.prototype.m_ax);box2d.b2WheelJoint.prototype.m_ay=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ay",box2d.b2WheelJoint.prototype.m_ay);box2d.b2WheelJoint.prototype.m_sAx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAx",box2d.b2WheelJoint.prototype.m_sAx);box2d.b2WheelJoint.prototype.m_sBx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBx",box2d.b2WheelJoint.prototype.m_sBx);
box2d.b2WheelJoint.prototype.m_sAy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAy",box2d.b2WheelJoint.prototype.m_sAy);box2d.b2WheelJoint.prototype.m_sBy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBy",box2d.b2WheelJoint.prototype.m_sBy);box2d.b2WheelJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_mass",box2d.b2WheelJoint.prototype.m_mass);box2d.b2WheelJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorMass",box2d.b2WheelJoint.prototype.m_motorMass);
box2d.b2WheelJoint.prototype.m_springMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springMass",box2d.b2WheelJoint.prototype.m_springMass);box2d.b2WheelJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_bias",box2d.b2WheelJoint.prototype.m_bias);box2d.b2WheelJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_gamma",box2d.b2WheelJoint.prototype.m_gamma);box2d.b2WheelJoint.prototype.m_qA=null;
goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qA",box2d.b2WheelJoint.prototype.m_qA);box2d.b2WheelJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qB",box2d.b2WheelJoint.prototype.m_qB);box2d.b2WheelJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcA",box2d.b2WheelJoint.prototype.m_lalcA);box2d.b2WheelJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcB",box2d.b2WheelJoint.prototype.m_lalcB);
box2d.b2WheelJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rA",box2d.b2WheelJoint.prototype.m_rA);box2d.b2WheelJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rB",box2d.b2WheelJoint.prototype.m_rB);box2d.b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorSpeed",box2d.b2WheelJoint.prototype.GetMotorSpeed);box2d.b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};
goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMaxMotorTorque",box2d.b2WheelJoint.prototype.GetMaxMotorTorque);box2d.b2WheelJoint.prototype.SetSpringFrequencyHz=function(a){this.m_frequencyHz=a};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringFrequencyHz",box2d.b2WheelJoint.prototype.SetSpringFrequencyHz);box2d.b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringFrequencyHz",box2d.b2WheelJoint.prototype.GetSpringFrequencyHz);
box2d.b2WheelJoint.prototype.SetSpringDampingRatio=function(a){this.m_dampingRatio=a};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringDampingRatio",box2d.b2WheelJoint.prototype.SetSpringDampingRatio);box2d.b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringDampingRatio",box2d.b2WheelJoint.prototype.GetSpringDampingRatio);
box2d.b2WheelJoint.prototype.InitVelocityConstraints=function(a){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var c=this.m_invMassA,b=this.m_invMassB,d=this.m_invIA,e=this.m_invIB,f=a.positions[this.m_indexA].c,
g=a.velocities[this.m_indexA].v,h=a.velocities[this.m_indexA].w,k=a.positions[this.m_indexB].c,l=a.positions[this.m_indexB].a,m=a.velocities[this.m_indexB].v,n=a.velocities[this.m_indexB].w,p=this.m_qA.SetAngle(a.positions[this.m_indexA].a),q=this.m_qB.SetAngle(l);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);l=box2d.b2Mul_R_V2(p,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);q=box2d.b2Mul_R_V2(q,this.m_lalcB,this.m_rB);f=
box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(k,q,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(f,l,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d);box2d.b2Mul_R_V2(p,this.m_localYAxisA,this.m_ay);this.m_sAy=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(f,l,box2d.b2Vec2.s_t0),this.m_ay);this.m_sBy=box2d.b2Cross_V2_V2(q,this.m_ay);this.m_mass=c+b+d*this.m_sAy*this.m_sAy+e*this.m_sBy*this.m_sBy;0<this.m_mass&&(this.m_mass=1/this.m_mass);this.m_gamma=this.m_bias=this.m_springMass=0;0<this.m_frequencyHz?
(box2d.b2Mul_R_V2(p,this.m_localXAxisA,this.m_ax),this.m_sAx=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(f,l,box2d.b2Vec2.s_t0),this.m_ax),this.m_sBx=box2d.b2Cross_V2_V2(q,this.m_ax),c=c+b+d*this.m_sAx*this.m_sAx+e*this.m_sBx*this.m_sBx,0<c&&(this.m_springMass=1/c,b=box2d.b2Dot_V2_V2(f,this.m_ax),p=2*box2d.b2_pi*this.m_frequencyHz,f=this.m_springMass*p*p,k=a.step.dt,this.m_gamma=k*(2*this.m_springMass*this.m_dampingRatio*p+k*f),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=b*k*f*this.m_gamma,
this.m_springMass=c+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0;this.m_enableMotor?(this.m_motorMass=d+e,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):this.m_motorImpulse=this.m_motorMass=0;a.step.warmStarting?(this.m_impulse*=a.step.dtRatio,this.m_springImpulse*=a.step.dtRatio,this.m_motorImpulse*=a.step.dtRatio,d=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(this.m_impulse,this.m_ay,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(this.m_springImpulse,
this.m_ax,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),e=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,c=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,g.SelfMulSub(this.m_invMassA,d),h-=this.m_invIA*e,m.SelfMulAdd(this.m_invMassB,d),n+=this.m_invIB*c):this.m_motorImpulse=this.m_springImpulse=this.m_impulse=0;a.velocities[this.m_indexA].w=h;a.velocities[this.m_indexB].w=n};
goog.exportProperty(box2d.b2WheelJoint.prototype,"InitVelocityConstraints",box2d.b2WheelJoint.prototype.InitVelocityConstraints);box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2WheelJoint.prototype.SolveVelocityConstraints=function(a){var c=this.m_invMassA,b=this.m_invMassB,d=this.m_invIA,e=this.m_invIB,f=a.velocities[this.m_indexA].v,g=a.velocities[this.m_indexA].w,h=a.velocities[this.m_indexB].v,k=a.velocities[this.m_indexB].w,l=box2d.b2Dot_V2_V2(this.m_ax,box2d.b2Sub_V2_V2(h,f,box2d.b2Vec2.s_t0))+this.m_sBx*k-this.m_sAx*g,l=-this.m_springMass*(l+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=l;var m=box2d.b2Mul_S_V2(l,this.m_ax,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),
n=l*this.m_sAx,l=l*this.m_sBx;f.SelfMulSub(c,m);g-=d*n;h.SelfMulAdd(b,m);k+=e*l;l=k-g-this.m_motorSpeed;l*=-this.m_motorMass;m=this.m_motorImpulse;n=a.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+l,-n,n);l=this.m_motorImpulse-m;g-=d*l;k+=e*l;l=box2d.b2Dot_V2_V2(this.m_ay,box2d.b2Sub_V2_V2(h,f,box2d.b2Vec2.s_t0))+this.m_sBy*k-this.m_sAy*g;l*=-this.m_mass;this.m_impulse+=l;m=box2d.b2Mul_S_V2(l,this.m_ay,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P);
n=l*this.m_sAy;l*=this.m_sBy;f.SelfMulSub(c,m);g-=d*n;h.SelfMulAdd(b,m);a.velocities[this.m_indexA].w=g;a.velocities[this.m_indexB].w=k+e*l};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolveVelocityConstraints",box2d.b2WheelJoint.prototype.SolveVelocityConstraints);box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;
box2d.b2WheelJoint.prototype.SolvePositionConstraints=function(a){var c=a.positions[this.m_indexA].c,b=a.positions[this.m_indexA].a,d=a.positions[this.m_indexB].c,e=a.positions[this.m_indexB].a,f=this.m_qA.SetAngle(b),g=this.m_qB.SetAngle(e);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var h=box2d.b2Mul_R_V2(f,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var g=box2d.b2Mul_R_V2(g,this.m_lalcB,this.m_rB),k=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(d,
c,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(g,h,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),f=box2d.b2Mul_R_V2(f,this.m_localYAxisA,this.m_ay),h=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(k,h,box2d.b2Vec2.s_t0),f),g=box2d.b2Cross_V2_V2(g,f),k=box2d.b2Dot_V2_V2(k,this.m_ay),l=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,l=0!==l?-k/l:0,f=box2d.b2Mul_S_V2(l,f,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),h=
l*h,g=l*g;c.SelfMulSub(this.m_invMassA,f);b-=this.m_invIA*h;d.SelfMulAdd(this.m_invMassB,f);e+=this.m_invIB*g;a.positions[this.m_indexA].a=b;a.positions[this.m_indexB].a=e;return box2d.b2Abs(k)<=box2d.b2_linearSlop};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolvePositionConstraints",box2d.b2WheelJoint.prototype.SolvePositionConstraints);box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;
box2d.b2WheelJoint.prototype.GetDefinition=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return a};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetDefinition",box2d.b2WheelJoint.prototype.GetDefinition);box2d.b2WheelJoint.prototype.GetAnchorA=function(a){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,a)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorA",box2d.b2WheelJoint.prototype.GetAnchorA);
box2d.b2WheelJoint.prototype.GetAnchorB=function(a){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,a)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorB",box2d.b2WheelJoint.prototype.GetAnchorB);box2d.b2WheelJoint.prototype.GetReactionForce=function(a,c){c.x=a*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x);c.y=a*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y);return c};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionForce",box2d.b2WheelJoint.prototype.GetReactionForce);
box2d.b2WheelJoint.prototype.GetReactionTorque=function(a){return a*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionTorque",box2d.b2WheelJoint.prototype.GetReactionTorque);box2d.b2WheelJoint.prototype.GetLocalAnchorA=function(a){return a.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorA",box2d.b2WheelJoint.prototype.GetLocalAnchorA);box2d.b2WheelJoint.prototype.GetLocalAnchorB=function(a){return a.Copy(this.m_localAnchorB)};
goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorB",box2d.b2WheelJoint.prototype.GetLocalAnchorB);box2d.b2WheelJoint.prototype.GetLocalAxisA=function(a){return a.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAxisA",box2d.b2WheelJoint.prototype.GetLocalAxisA);
box2d.b2WheelJoint.prototype.GetJointTranslation=function(){var a=this.m_bodyA,c=this.m_bodyB,b=a.GetWorldPoint(this.m_localAnchorA,new box2d.b2Vec2),c=c.GetWorldPoint(this.m_localAnchorB,new box2d.b2Vec2),b=box2d.b2Sub_V2_V2(c,b,new box2d.b2Vec2),a=a.GetWorldVector(this.m_localXAxisA,new box2d.b2Vec2);return box2d.b2Dot_V2_V2(b,a)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointTranslation",box2d.b2WheelJoint.prototype.GetJointTranslation);
box2d.b2WheelJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointSpeed",box2d.b2WheelJoint.prototype.GetJointSpeed);box2d.b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2WheelJoint.prototype,"IsMotorEnabled",box2d.b2WheelJoint.prototype.IsMotorEnabled);
box2d.b2WheelJoint.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=a};goog.exportProperty(box2d.b2WheelJoint.prototype,"EnableMotor",box2d.b2WheelJoint.prototype.EnableMotor);box2d.b2WheelJoint.prototype.SetMotorSpeed=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=a};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMotorSpeed",box2d.b2WheelJoint.prototype.SetMotorSpeed);
box2d.b2WheelJoint.prototype.SetMaxMotorTorque=function(a){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorTorque=a};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMaxMotorTorque",box2d.b2WheelJoint.prototype.SetMaxMotorTorque);box2d.b2WheelJoint.prototype.GetMotorTorque=function(a){return a*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorTorque",box2d.b2WheelJoint.prototype.GetMotorTorque);
box2d.b2WheelJoint.prototype.Dump=function(){if(box2d.DEBUG){var a=this.m_bodyA.m_islandIndex,c=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",a);box2d.b2Log("  jd.bodyB = bodies[%d];\n",c);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",
this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",
this.m_index)}};goog.exportProperty(box2d.b2WheelJoint.prototype,"Dump",box2d.b2WheelJoint.prototype.Dump);box2d.b2Particle={};box2d.b2ParticleFlag={b2_waterParticle:0,b2_zombieParticle:2,b2_wallParticle:4,b2_springParticle:8,b2_elasticParticle:16,b2_viscousParticle:32,b2_powderParticle:64,b2_tensileParticle:128,b2_colorMixingParticle:256,b2_destructionListenerParticle:512,b2_barrierParticle:1024,b2_staticPressureParticle:2048,b2_reactiveParticle:4096,b2_repulsiveParticle:8192,b2_fixtureContactListenerParticle:16384,b2_particleContactListenerParticle:32768,b2_fixtureContactFilterParticle:65536,b2_particleContactFilterParticle:131072};
goog.exportSymbol("box2d.b2ParticleFlag",box2d.b2ParticleFlag);goog.exportProperty(box2d.b2ParticleFlag,"b2_waterParticle",box2d.b2ParticleFlag.b2_waterParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_zombieParticle",box2d.b2ParticleFlag.b2_zombieParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_wallParticle",box2d.b2ParticleFlag.b2_wallParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_springParticle",box2d.b2ParticleFlag.b2_springParticle);
goog.exportProperty(box2d.b2ParticleFlag,"b2_elasticParticle",box2d.b2ParticleFlag.b2_elasticParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_viscousParticle",box2d.b2ParticleFlag.b2_viscousParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_powderParticle",box2d.b2ParticleFlag.b2_powderParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_tensileParticle",box2d.b2ParticleFlag.b2_tensileParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_colorMixingParticle",box2d.b2ParticleFlag.b2_colorMixingParticle);
goog.exportProperty(box2d.b2ParticleFlag,"b2_destructionListenerParticle",box2d.b2ParticleFlag.b2_destructionListenerParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_barrierParticle",box2d.b2ParticleFlag.b2_barrierParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_staticPressureParticle",box2d.b2ParticleFlag.b2_staticPressureParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_reactiveParticle",box2d.b2ParticleFlag.b2_reactiveParticle);
goog.exportProperty(box2d.b2ParticleFlag,"b2_repulsiveParticle",box2d.b2ParticleFlag.b2_repulsiveParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_fixtureContactListenerParticle",box2d.b2ParticleFlag.b2_fixtureContactListenerParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_particleContactListenerParticle",box2d.b2ParticleFlag.b2_particleContactListenerParticle);goog.exportProperty(box2d.b2ParticleFlag,"b2_fixtureContactFilterParticle",box2d.b2ParticleFlag.b2_fixtureContactFilterParticle);
goog.exportProperty(box2d.b2ParticleFlag,"b2_particleContactFilterParticle",box2d.b2ParticleFlag.b2_particleContactFilterParticle);box2d.b2ParticleColor=function(a,c,b,d){if(0!==arguments.length)if(a instanceof box2d.b2Color)this.r=0|255*a.r,this.g=0|255*a.g,this.b=0|255*a.b,this.a=0|255*a.a;else if(3<=arguments.length)this.r=0|a||0,this.g=0|c||0,this.b=0|b||0,this.a=0|d||0;else throw Error();};goog.exportSymbol("box2d.b2ParticleColor",box2d.b2ParticleColor);box2d.b2ParticleColor.prototype.r=0;
goog.exportProperty(box2d.b2ParticleColor.prototype,"r",box2d.b2ParticleColor.prototype.r);box2d.b2ParticleColor.prototype.g=0;goog.exportProperty(box2d.b2ParticleColor.prototype,"g",box2d.b2ParticleColor.prototype.g);box2d.b2ParticleColor.prototype.b=0;goog.exportProperty(box2d.b2ParticleColor.prototype,"b",box2d.b2ParticleColor.prototype.b);box2d.b2ParticleColor.prototype.a=0;goog.exportProperty(box2d.b2ParticleColor.prototype,"a",box2d.b2ParticleColor.prototype.a);
box2d.b2ParticleColor.prototype.IsZero=function(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a};goog.exportProperty(box2d.b2ParticleColor.prototype,"IsZero",box2d.b2ParticleColor.prototype.IsZero);box2d.b2ParticleColor.prototype.GetColor=function(a){a.r=this.r/255;a.g=this.g/255;a.b=this.b/255;a.a=this.a/255;return a};goog.exportProperty(box2d.b2ParticleColor.prototype,"GetColor",box2d.b2ParticleColor.prototype.GetColor);
box2d.b2ParticleColor.prototype.Set=function(a,c,b,d){if(a instanceof box2d.b2Color)this.SetColor(a);else if(3<=arguments.length)this.SetRGBA(a||0,c||0,b||0,d);else throw Error();};goog.exportProperty(box2d.b2ParticleColor.prototype,"Set",box2d.b2ParticleColor.prototype.Set);box2d.b2ParticleColor.prototype.SetRGBA=function(a,c,b,d){this.r=a;this.g=c;this.b=b;this.a="number"===typeof d?d:255};goog.exportProperty(box2d.b2ParticleColor.prototype,"SetRGBA",box2d.b2ParticleColor.prototype.SetRGBA);
box2d.b2ParticleColor.prototype.SetColor=function(a){this.r=255*a.r;this.g=255*a.g;this.b=255*a.b;this.a=255*a.a};goog.exportProperty(box2d.b2ParticleColor.prototype,"SetColor",box2d.b2ParticleColor.prototype.SetColor);box2d.b2ParticleColor.prototype.Copy=function(a){this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a;return this};goog.exportProperty(box2d.b2ParticleColor.prototype,"Copy",box2d.b2ParticleColor.prototype.Copy);
box2d.b2ParticleColor.prototype.Clone=function(){return new box2d.b2ParticleColor(this.r,this.g,this.b,this.a)};box2d.b2ParticleColor.prototype.SelfMul_0_1=function(a){this.r*=a;this.g*=a;this.b*=a;this.a*=a;return this};goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfMul_0_1",box2d.b2ParticleColor.prototype.SelfMul_0_1);
box2d.b2ParticleColor.prototype.SelfMul_0_255=function(a){a+=1;this.r=this.r*a>>box2d.b2ParticleColor.k_bitsPerComponent;this.g=this.g*a>>box2d.b2ParticleColor.k_bitsPerComponent;this.b=this.b*a>>box2d.b2ParticleColor.k_bitsPerComponent;this.a=this.a*a>>box2d.b2ParticleColor.k_bitsPerComponent;return this};goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfMul_0_255",box2d.b2ParticleColor.prototype.SelfMul_0_255);box2d.b2ParticleColor.prototype.Mul_0_1=function(a,c){return c.Copy(this).SelfMul_0_1(a)};
goog.exportProperty(box2d.b2ParticleColor.prototype,"Mul_0_1",box2d.b2ParticleColor.prototype.Mul_0_1);box2d.b2ParticleColor.prototype.Mul_0_255=function(a,c){return c.Copy(this).SelfMul_0_255(a)};goog.exportProperty(box2d.b2ParticleColor.prototype,"Mul_0_255",box2d.b2ParticleColor.prototype.Mul_0_255);box2d.b2ParticleColor.prototype.SelfAdd=function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;this.a+=a.a;return this};goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfAdd",box2d.b2ParticleColor.prototype.SelfAdd);
box2d.b2ParticleColor.prototype.Add=function(a,c){c.r=this.r+a.r;c.g=this.g+a.g;c.b=this.b+a.b;c.a=this.a+a.a;return c};goog.exportProperty(box2d.b2ParticleColor.prototype,"Add",box2d.b2ParticleColor.prototype.Add);box2d.b2ParticleColor.prototype.SelfSub=function(a){this.r-=a.r;this.g-=a.g;this.b-=a.b;this.a-=a.a;return this};goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfSub",box2d.b2ParticleColor.prototype.SelfSub);
box2d.b2ParticleColor.prototype.Sub=function(a,c){c.r=this.r-a.r;c.g=this.g-a.g;c.b=this.b-a.b;c.a=this.a-a.a;return c};goog.exportProperty(box2d.b2ParticleColor.prototype,"Sub",box2d.b2ParticleColor.prototype.Sub);box2d.b2ParticleColor.prototype.IsEqual=function(a){return this.r===a.r&&this.g===a.g&&this.b===a.b&&this.a===a.a};goog.exportProperty(box2d.b2ParticleColor.prototype,"IsEqual",box2d.b2ParticleColor.prototype.IsEqual);
box2d.b2ParticleColor.prototype.Mix=function(a,c){box2d.b2ParticleColor.MixColors(this,a,c)};goog.exportProperty(box2d.b2ParticleColor.prototype,"Mix",box2d.b2ParticleColor.prototype.Mix);
box2d.b2ParticleColor.MixColors=function(a,c,b){var d=b*(c.r-a.r)>>box2d.b2ParticleColor.k_bitsPerComponent,e=b*(c.g-a.g)>>box2d.b2ParticleColor.k_bitsPerComponent,f=b*(c.b-a.b)>>box2d.b2ParticleColor.k_bitsPerComponent;b=b*(c.a-a.a)>>box2d.b2ParticleColor.k_bitsPerComponent;a.r+=d;a.g+=e;a.b+=f;a.a+=b;c.r-=d;c.g-=e;c.b-=f;c.a-=b};goog.exportProperty(box2d.b2ParticleColor,"MixColors",box2d.b2ParticleColor.MixColors);box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT=8;
box2d.B2PARTICLECOLOR_MAX_VALUE=(1<<box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT)-1;box2d.b2ParticleColor.k_maxValue=+box2d.B2PARTICLECOLOR_MAX_VALUE;goog.exportProperty(box2d.b2ParticleColor,"k_maxValue",box2d.b2ParticleColor.k_maxValue);box2d.b2ParticleColor.k_inverseMaxValue=1/+box2d.B2PARTICLECOLOR_MAX_VALUE;goog.exportProperty(box2d.b2ParticleColor,"k_inverseMaxValue",box2d.b2ParticleColor.k_inverseMaxValue);box2d.b2ParticleColor.k_bitsPerComponent=box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT;
goog.exportProperty(box2d.b2ParticleColor,"k_bitsPerComponent",box2d.b2ParticleColor.k_bitsPerComponent);box2d.b2ParticleColor_zero=new box2d.b2ParticleColor;box2d.b2ParticleDef=function(){this.position=box2d.b2Vec2_zero.Clone();this.velocity=box2d.b2Vec2_zero.Clone();this.color=box2d.b2ParticleColor_zero.Clone()};goog.exportSymbol("box2d.b2ParticleDef",box2d.b2ParticleDef);box2d.b2ParticleDef.prototype.flags=0;goog.exportProperty(box2d.b2ParticleDef.prototype,"flags",box2d.b2ParticleDef.prototype.flags);
box2d.b2ParticleDef.prototype.position=null;goog.exportProperty(box2d.b2ParticleDef.prototype,"position",box2d.b2ParticleDef.prototype.position);box2d.b2ParticleDef.prototype.velocity=null;goog.exportProperty(box2d.b2ParticleDef.prototype,"velocity",box2d.b2ParticleDef.prototype.velocity);box2d.b2ParticleDef.prototype.color=null;goog.exportProperty(box2d.b2ParticleDef.prototype,"color",box2d.b2ParticleDef.prototype.color);box2d.b2ParticleDef.prototype.lifetime=0;
goog.exportProperty(box2d.b2ParticleDef.prototype,"lifetime",box2d.b2ParticleDef.prototype.lifetime);box2d.b2ParticleDef.prototype.userData=null;goog.exportProperty(box2d.b2ParticleDef.prototype,"userData",box2d.b2ParticleDef.prototype.userData);box2d.b2ParticleDef.prototype.group=null;goog.exportProperty(box2d.b2ParticleDef.prototype,"group",box2d.b2ParticleDef.prototype.group);box2d.b2CalculateParticleIterations=function(a,c,b){a=Math.ceil(Math.sqrt(a/(.01*c))*b);return box2d.b2Clamp(a,1,8)};
goog.exportSymbol("box2d.b2CalculateParticleIterations",box2d.b2CalculateParticleIterations);box2d.b2ParticleHandle=function(){};goog.exportSymbol("box2d.b2ParticleHandle",box2d.b2ParticleHandle);box2d.b2ParticleHandle.prototype.m_index=box2d.b2_invalidParticleIndex;box2d.b2ParticleHandle.prototype.GetIndex=function(){return this.m_index};goog.exportProperty(box2d.b2ParticleHandle.prototype,"GetIndex",box2d.b2ParticleHandle.prototype.GetIndex);
box2d.b2ParticleHandle.prototype.SetIndex=function(a){this.m_index=a};box2d.Testbed.ParticleParameter=function(){this.Reset()};goog.exportSymbol("box2d.Testbed.ParticleParameter",box2d.Testbed.ParticleParameter);box2d.Testbed.ParticleParameter.Options={OptionStrictContacts:1,OptionDrawShapes:2,OptionDrawParticles:4,OptionDrawJoints:8,OptionDrawAABBs:16,OptionDrawContactPoints:32,OptionDrawContactNormals:64,OptionDrawContactImpulse:128,OptionDrawFrictionImpulse:256,OptionDrawCOMs:512,OptionDrawStats:1024,OptionDrawProfile:2048};
goog.exportProperty(box2d.Testbed.ParticleParameter,"Options",box2d.Testbed.ParticleParameter.Options);box2d.Testbed.ParticleParameter.k_DefaultOptions=box2d.Testbed.ParticleParameter.Options.OptionDrawShapes|box2d.Testbed.ParticleParameter.Options.OptionDrawParticles;goog.exportProperty(box2d.Testbed.ParticleParameter,"k_DefaultOptions",box2d.Testbed.ParticleParameter.k_DefaultOptions);box2d.Testbed.ParticleParameter.Value=function(a,c,b){this.value=a;this.options=c;this.name=b};
box2d.Testbed.ParticleParameter.Value.prototype.value=0;box2d.Testbed.ParticleParameter.Value.prototype.options=0;box2d.Testbed.ParticleParameter.Value.prototype.name="";box2d.Testbed.ParticleParameter.Definition=function(a,c){this.values=a;this.numValues=c||a.length};box2d.Testbed.ParticleParameter.Definition.prototype.values=null;box2d.Testbed.ParticleParameter.Definition.prototype.numValues=0;
box2d.Testbed.ParticleParameter.Definition.prototype.CalculateValueMask=function(){for(var a=0,c=0;c<this.numValues;c++)a|=this.values[c].value;return a};
box2d.Testbed.ParticleParameter.k_particleTypes=[new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"water"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions|box2d.Testbed.ParticleParameter.Options.OptionStrictContacts,"water (strict)"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_springParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"spring"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_elasticParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"elastic"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"viscous"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_tensileParticle,
box2d.Testbed.ParticleParameter.k_DefaultOptions,"tensile"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_colorMixingParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"color mixing"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_wallParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"wall"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_wallParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"barrier"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_staticPressureParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"static pressure"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions|box2d.Testbed.ParticleParameter.Options.OptionDrawAABBs,"water (bounding boxes)")];box2d.Testbed.ParticleParameter.k_defaultDefinition=[new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.ParticleParameter.k_particleTypes)];
box2d.Testbed.ParticleParameter.prototype.m_index=0;box2d.Testbed.ParticleParameter.prototype.m_changed=!1;box2d.Testbed.ParticleParameter.prototype.m_restartOnChange=!1;box2d.Testbed.ParticleParameter.prototype.m_value=null;box2d.Testbed.ParticleParameter.prototype.m_definition=null;box2d.Testbed.ParticleParameter.prototype.m_definitionCount=0;box2d.Testbed.ParticleParameter.prototype.m_valueCount=0;
box2d.Testbed.ParticleParameter.prototype.Reset=function(){this.m_restartOnChange=!0;this.m_index=0;this.SetDefinition(box2d.Testbed.ParticleParameter.k_defaultDefinition);this.Set(0)};box2d.Testbed.ParticleParameter.prototype.SetDefinition=function(a,c){this.m_definition=a;this.m_definitionCount=c||a.length;for(var b=this.m_valueCount=0;b<this.m_definitionCount;++b)this.m_valueCount+=this.m_definition[b].numValues;this.Set(this.Get())};box2d.Testbed.ParticleParameter.prototype.Get=function(){return this.m_index};
box2d.Testbed.ParticleParameter.prototype.Set=function(a){this.m_changed=this.m_index!==a;this.m_index=this.m_valueCount?a%this.m_valueCount:a;this.m_value=this.FindParticleParameterValue();box2d.b2Assert(null!==this.m_value)};box2d.Testbed.ParticleParameter.prototype.Increment=function(){var a=this.Get();this.Set(a>=this.m_valueCount?0:a+1)};box2d.Testbed.ParticleParameter.prototype.Decrement=function(){var a=this.Get();this.Set(0===a?this.m_valueCount-1:a-1)};
box2d.Testbed.ParticleParameter.prototype.Changed=function(a){var c=this.m_changed;this.m_changed=!1;a&&(a[0]=c&&this.GetRestartOnChange());return c};box2d.Testbed.ParticleParameter.prototype.GetValue=function(){box2d.b2Assert(null!==this.m_value);return this.m_value.value};box2d.Testbed.ParticleParameter.prototype.GetName=function(){box2d.b2Assert(null!==this.m_value);return this.m_value.name};box2d.Testbed.ParticleParameter.prototype.GetOptions=function(){box2d.b2Assert(null!==this.m_value);return this.m_value.options};
box2d.Testbed.ParticleParameter.prototype.SetRestartOnChange=function(a){this.m_restartOnChange=a};box2d.Testbed.ParticleParameter.prototype.GetRestartOnChange=function(){return this.m_restartOnChange};box2d.Testbed.ParticleParameter.prototype.FindIndexByValue=function(a){for(var c=0,b=0;b<this.m_definitionCount;++b)for(var d=this.m_definition[b],e=d.numValues,f=0;f<e;++f,++c)if(d.values[f].value===a)return c;return-1};
box2d.Testbed.ParticleParameter.prototype.FindParticleParameterValue=function(){for(var a=0,c=this.Get(),b=0;b<this.m_definitionCount;++b){var d=this.m_definition[b],e=a+d.numValues;if(c>=a&&c<e)return d.values[c-a];a=e}return null};box2d.b2ParticleGroupFlag={b2_solidParticleGroup:1,b2_rigidParticleGroup:2,b2_particleGroupCanBeEmpty:4,b2_particleGroupWillBeDestroyed:8,b2_particleGroupNeedsUpdateDepth:16};goog.exportSymbol("box2d.b2ParticleGroupFlag",box2d.b2ParticleGroupFlag);goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_solidParticleGroup",box2d.b2ParticleGroupFlag.b2_solidParticleGroup);goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_rigidParticleGroup",box2d.b2ParticleGroupFlag.b2_rigidParticleGroup);
goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupCanBeEmpty",box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty);goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupWillBeDestroyed",box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed);goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupNeedsUpdateDepth",box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);
box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask=box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed|box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth;box2d.b2ParticleGroupDef=function(){this.position=box2d.b2Vec2_zero.Clone();this.linearVelocity=box2d.b2Vec2_zero.Clone();this.color=box2d.b2ParticleColor_zero.Clone()};goog.exportSymbol("box2d.b2ParticleGroupDef",box2d.b2ParticleGroupDef);box2d.b2ParticleGroupDef.prototype.flags=0;
goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"flags",box2d.b2ParticleGroupDef.prototype.flags);box2d.b2ParticleGroupDef.prototype.groupFlags=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"groupFlags",box2d.b2ParticleGroupDef.prototype.groupFlags);box2d.b2ParticleGroupDef.prototype.position=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"position",box2d.b2ParticleGroupDef.prototype.position);box2d.b2ParticleGroupDef.prototype.angle=0;
goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"angle",box2d.b2ParticleGroupDef.prototype.angle);box2d.b2ParticleGroupDef.prototype.linearVelocity=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"linearVelocity",box2d.b2ParticleGroupDef.prototype.linearVelocity);box2d.b2ParticleGroupDef.prototype.angularVelocity=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"angularVelocity",box2d.b2ParticleGroupDef.prototype.angularVelocity);
box2d.b2ParticleGroupDef.prototype.color=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"color",box2d.b2ParticleGroupDef.prototype.color);box2d.b2ParticleGroupDef.prototype.strength=1;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"strength",box2d.b2ParticleGroupDef.prototype.strength);box2d.b2ParticleGroupDef.prototype.shape=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shape",box2d.b2ParticleGroupDef.prototype.shape);
box2d.b2ParticleGroupDef.prototype.shapes=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shapes",box2d.b2ParticleGroupDef.prototype.shapes);box2d.b2ParticleGroupDef.prototype.shapeCount=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shapeCount",box2d.b2ParticleGroupDef.prototype.shapeCount);box2d.b2ParticleGroupDef.prototype.stride=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"stride",box2d.b2ParticleGroupDef.prototype.stride);
box2d.b2ParticleGroupDef.prototype.particleCount=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"particleCount",box2d.b2ParticleGroupDef.prototype.particleCount);box2d.b2ParticleGroupDef.prototype.positionData=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"positionData",box2d.b2ParticleGroupDef.prototype.positionData);box2d.b2ParticleGroupDef.prototype.lifetime=0;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"lifetime",box2d.b2ParticleGroupDef.prototype.lifetime);
box2d.b2ParticleGroupDef.prototype.userData=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"userData",box2d.b2ParticleGroupDef.prototype.userData);box2d.b2ParticleGroupDef.prototype.group=null;goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"group",box2d.b2ParticleGroupDef.prototype.group);box2d.b2ParticleGroup=function(){this.m_center=new box2d.b2Vec2;this.m_linearVelocity=new box2d.b2Vec2;this.m_transform=new box2d.b2Transform;this.m_transform.SetIdentity()};
goog.exportSymbol("box2d.b2ParticleGroup",box2d.b2ParticleGroup);box2d.b2ParticleGroup.prototype.m_system=null;box2d.b2ParticleGroup.prototype.m_firstIndex=0;box2d.b2ParticleGroup.prototype.m_lastIndex=0;box2d.b2ParticleGroup.prototype.m_groupFlags=0;box2d.b2ParticleGroup.prototype.m_strength=1;box2d.b2ParticleGroup.prototype.m_prev=null;box2d.b2ParticleGroup.prototype.m_next=null;box2d.b2ParticleGroup.prototype.m_timestamp=-1;box2d.b2ParticleGroup.prototype.m_mass=0;
box2d.b2ParticleGroup.prototype.m_inertia=0;box2d.b2ParticleGroup.prototype.m_center=null;box2d.b2ParticleGroup.prototype.m_linearVelocity=null;box2d.b2ParticleGroup.prototype.m_angularVelocity=0;box2d.b2ParticleGroup.prototype.m_transform=null;box2d.b2ParticleGroup.prototype.m_userData=null;box2d.b2ParticleGroup.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetNext",box2d.b2ParticleGroup.prototype.GetNext);
box2d.b2ParticleGroup.prototype.GetParticleSystem=function(){return this.m_system};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetParticleSystem",box2d.b2ParticleGroup.prototype.GetParticleSystem);box2d.b2ParticleGroup.prototype.GetParticleCount=function(){return this.m_lastIndex-this.m_firstIndex};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetParticleCount",box2d.b2ParticleGroup.prototype.GetParticleCount);box2d.b2ParticleGroup.prototype.GetBufferIndex=function(){return this.m_firstIndex};
goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetBufferIndex",box2d.b2ParticleGroup.prototype.GetBufferIndex);box2d.b2ParticleGroup.prototype.ContainsParticle=function(a){return this.m_firstIndex<=a&&a<this.m_lastIndex};box2d.b2ParticleGroup.prototype.GetAllParticleFlags=function(){for(var a=0,c=this.m_firstIndex;c<this.m_lastIndex;c++)a|=this.m_system.m_flagsBuffer.data[c];return a};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAllParticleFlags",box2d.b2ParticleGroup.prototype.GetAllParticleFlags);
box2d.b2ParticleGroup.prototype.GetGroupFlags=function(){return this.m_groupFlags};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetGroupFlags",box2d.b2ParticleGroup.prototype.GetGroupFlags);box2d.b2ParticleGroup.prototype.SetGroupFlags=function(a){box2d.b2Assert(0===(a&box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask));a|=this.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask;this.m_system.SetGroupFlags(this,a)};
goog.exportProperty(box2d.b2ParticleGroup.prototype,"SetGroupFlags",box2d.b2ParticleGroup.prototype.SetGroupFlags);box2d.b2ParticleGroup.prototype.GetMass=function(){this.UpdateStatistics();return this.m_mass};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetMass",box2d.b2ParticleGroup.prototype.GetMass);box2d.b2ParticleGroup.prototype.GetInertia=function(){this.UpdateStatistics();return this.m_inertia};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetInertia",box2d.b2ParticleGroup.prototype.GetInertia);
box2d.b2ParticleGroup.prototype.GetCenter=function(){this.UpdateStatistics();return this.m_center};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetCenter",box2d.b2ParticleGroup.prototype.GetCenter);box2d.b2ParticleGroup.prototype.GetLinearVelocity=function(){this.UpdateStatistics();return this.m_linearVelocity};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetLinearVelocity",box2d.b2ParticleGroup.prototype.GetLinearVelocity);
box2d.b2ParticleGroup.prototype.GetAngularVelocity=function(){this.UpdateStatistics();return this.m_angularVelocity};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAngularVelocity",box2d.b2ParticleGroup.prototype.GetAngularVelocity);box2d.b2ParticleGroup.prototype.GetTransform=function(){return this.m_transform};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetTransform",box2d.b2ParticleGroup.prototype.GetTransform);box2d.b2ParticleGroup.prototype.GetPosition=function(){return this.m_transform.p};
goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetPosition",box2d.b2ParticleGroup.prototype.GetPosition);box2d.b2ParticleGroup.prototype.GetAngle=function(){return this.m_transform.q.GetAngle()};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAngle",box2d.b2ParticleGroup.prototype.GetAngle);
box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint=function(a,c){var b=box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint.s_t0;this.UpdateStatistics();return box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(a,this.m_center,b),c)};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint);
box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint.s_t0=new box2d.b2Vec2;box2d.b2ParticleGroup.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetUserData",box2d.b2ParticleGroup.prototype.GetUserData);box2d.b2ParticleGroup.prototype.SetUserData=function(a){this.m_userData=a};goog.exportProperty(box2d.b2ParticleGroup.prototype,"SetUserData",box2d.b2ParticleGroup.prototype.SetUserData);
box2d.b2ParticleGroup.prototype.ApplyForce=function(a){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,a)};goog.exportProperty(box2d.b2ParticleGroup.prototype,"ApplyForce",box2d.b2ParticleGroup.prototype.ApplyForce);box2d.b2ParticleGroup.prototype.ApplyLinearImpulse=function(a){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,a)};goog.exportProperty(box2d.b2ParticleGroup.prototype,"ApplyLinearImpulse",box2d.b2ParticleGroup.prototype.ApplyLinearImpulse);
box2d.b2ParticleGroup.prototype.DestroyParticles=function(a){box2d.b2Assert(!1===this.m_system.m_world.IsLocked());if(!this.m_system.m_world.IsLocked())for(var c=this.m_firstIndex;c<this.m_lastIndex;c++)this.m_system.DestroyParticle(c,a)};goog.exportProperty(box2d.b2ParticleGroup.prototype,"DestroyParticles",box2d.b2ParticleGroup.prototype.DestroyParticles);
box2d.b2ParticleGroup.prototype.UpdateStatistics=function(){var a=new box2d.b2Vec2,c=new box2d.b2Vec2;if(this.m_timestamp!=this.m_system.m_timestamp){var b=this.m_system.GetParticleMass();this.m_mass=b*(this.m_lastIndex-this.m_firstIndex);this.m_center.SetZero();this.m_linearVelocity.SetZero();for(var d=this.m_firstIndex;d<this.m_lastIndex;d++)this.m_center.SelfMulAdd(b,this.m_system.m_positionBuffer.data[d]),this.m_linearVelocity.SelfMulAdd(b,this.m_system.m_velocityBuffer.data[d]);0<this.m_mass&&
(d=1/this.m_mass,this.m_center.SelfMul(d),this.m_linearVelocity.SelfMul(d));this.m_angularVelocity=this.m_inertia=0;for(d=this.m_firstIndex;d<this.m_lastIndex;d++)box2d.b2Sub_V2_V2(this.m_system.m_positionBuffer.data[d],this.m_center,a),box2d.b2Sub_V2_V2(this.m_system.m_velocityBuffer.data[d],this.m_linearVelocity,c),this.m_inertia+=b*box2d.b2Dot_V2_V2(a,a),this.m_angularVelocity+=b*box2d.b2Cross_V2_V2(a,c);0<this.m_inertia&&(this.m_angularVelocity*=1/this.m_inertia);this.m_timestamp=this.m_system.m_timestamp}};
goog.exportProperty(box2d.b2ParticleGroup.prototype,"UpdateStatistics",box2d.b2ParticleGroup.prototype.UpdateStatistics);box2d.std_iter_swap=function(a,c,b){var d=a[c];a[c]=a[b];a[b]=d};box2d.std_sort=function(a,c,b,d){"number"!==typeof c&&(c=0);"number"!==typeof b&&(b=a.length-c);"function"!==typeof d&&(d=function(a,b){return a<b});for(var e=[],f=0;;){for(;c+1<b;b++){var g=a[c+Math.floor(Math.random()*(b-c))];e[f++]=b;for(var h=c-1;;){for(;d(a[++h],g););for(;d(g,a[--b]););if(h>=b)break;box2d.std_iter_swap(a,h,b)}}if(0===f)break;c=b;b=e[--f]}return a};
box2d.std_stable_sort=function(a,c,b,d){return box2d.std_sort(a,c,b,d)};box2d.std_remove_if=function(a,c,b){"number"!==typeof b&&(b=a.length);for(var d=0,e=0;e<b;++e)c(a[e])||(e===d?++d:box2d.std_iter_swap(a,d++,e));return d};box2d.std_lower_bound=function(a,c,b,d,e){"function"!==typeof e&&(e=function(a,b){return a<b});for(b-=c;0<b;){var f=Math.floor(b/2),g=c+f;e(a[g],d)?(c=++g,b-=f+1):b=f}return c};
box2d.std_upper_bound=function(a,c,b,d,e){"function"!==typeof e&&(e=function(a,b){return a<b});for(b-=c;0<b;){var f=Math.floor(b/2),g=c+f;e(d,a[g])?b=f:(c=++g,b-=f+1)}return c};box2d.std_rotate=function(a,c,b,d){for(var e=b;c!==e;)box2d.std_iter_swap(a,c++,e++),e===d?e=b:c===b&&(b=e)};box2d.std_unique=function(a,c,b,d){if(c===b)return b;for(var e=c;++c!==b;)d(a[e],a[c])||box2d.std_iter_swap(a,++e,c);return++e};
box2d.b2GrowableBuffer=function(a){this.data=[];this.capacity=this.count=0;this.allocator=a};box2d.b2GrowableBuffer.prototype.data=null;box2d.b2GrowableBuffer.prototype.count=0;box2d.b2GrowableBuffer.prototype.capacity=0;box2d.b2GrowableBuffer.prototype.allocator=function(){return null};box2d.b2GrowableBuffer.prototype.Append=function(){this.count>=this.capacity&&this.Grow();return this.count++};
box2d.b2GrowableBuffer.prototype.Reserve=function(a){if(!(this.capacity>=a)){box2d.b2Assert(this.capacity===this.data.length);for(var c=this.capacity;c<a;++c)this.data[c]=this.allocator();this.capacity=a}};box2d.b2GrowableBuffer.prototype.Grow=function(){var a=this.capacity?2*this.capacity:box2d.b2_minParticleSystemBufferCapacity;box2d.b2Assert(a>this.capacity);this.Reserve(a)};box2d.b2GrowableBuffer.prototype.Free=function(){0!==this.data.length&&(this.data=[],this.count=this.capacity=0)};
box2d.b2GrowableBuffer.prototype.Shorten=function(a){box2d.b2Assert(!1)};box2d.b2GrowableBuffer.prototype.Data=function(){return this.data};box2d.b2GrowableBuffer.prototype.GetCount=function(){return this.count};box2d.b2GrowableBuffer.prototype.SetCount=function(a){box2d.b2Assert(0<=a&&a<=this.capacity);this.count=a};box2d.b2GrowableBuffer.prototype.GetCapacity=function(){return this.capacity};
box2d.b2GrowableBuffer.prototype.RemoveIf=function(a){for(var c=0,b=0;b<this.count;++b)a(this.data[b])||c++;this.count=box2d.std_remove_if(this.data,a,this.count);box2d.b2Assert(c===this.count)};box2d.b2GrowableBuffer.prototype.Unique=function(a){this.count=box2d.std_unique(this.data,0,this.count,a)};box2d.b2FixtureParticleQueryCallback=function(a){this.m_system=a};goog.inherits(box2d.b2FixtureParticleQueryCallback,box2d.b2QueryCallback);box2d.b2FixtureParticleQueryCallback.prototype.m_system=null;
box2d.b2FixtureParticleQueryCallback.prototype.ShouldQueryParticleSystem=function(a){return!1};box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture=function(a){if(a.IsSensor())return!0;for(var c=a.GetShape().GetChildCount(),b=0;b<c;b++)for(var d=a.GetAABB(b),d=this.m_system.GetInsideBoundsEnumerator(d),e;0<=(e=d.GetNext());)this.ReportFixtureAndParticle(a,b,e);return!0};goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture",box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture);
box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle=function(a,c){return!1};goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle",box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle);box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle=function(a,c,b){box2d.b2Assert(!1)};goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle",box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle);
box2d.b2ParticleContact=function(){this.normal=new box2d.b2Vec2};goog.exportSymbol("box2d.b2ParticleContact",box2d.b2ParticleContact);box2d.b2ParticleContact.prototype.indexA=0;goog.exportProperty(box2d.b2ParticleContact.prototype,"indexA",box2d.b2ParticleContact.prototype.indexA);box2d.b2ParticleContact.prototype.indexB=0;goog.exportProperty(box2d.b2ParticleContact.prototype,"indexB",box2d.b2ParticleContact.prototype.indexB);box2d.b2ParticleContact.prototype.weight=0;
goog.exportProperty(box2d.b2ParticleContact.prototype,"weight",box2d.b2ParticleContact.prototype.weight);box2d.b2ParticleContact.prototype.normal=null;goog.exportProperty(box2d.b2ParticleContact.prototype,"normal",box2d.b2ParticleContact.prototype.normal);box2d.b2ParticleContact.prototype.flags=0;goog.exportProperty(box2d.b2ParticleContact.prototype,"flags",box2d.b2ParticleContact.prototype.flags);
box2d.b2ParticleContact.prototype.SetIndices=function(a,c){box2d.b2Assert(a<=box2d.b2_maxParticleIndex&&c<=box2d.b2_maxParticleIndex);this.indexA=a;this.indexB=c};goog.exportProperty(box2d.b2ParticleContact.prototype,"SetIndices",box2d.b2ParticleContact.prototype.SetIndices);box2d.b2ParticleContact.prototype.SetWeight=function(a){this.weight=a};goog.exportProperty(box2d.b2ParticleContact.prototype,"SetWeight",box2d.b2ParticleContact.prototype.SetWeight);
box2d.b2ParticleContact.prototype.SetNormal=function(a){this.normal.Copy(a)};goog.exportProperty(box2d.b2ParticleContact.prototype,"SetNormal",box2d.b2ParticleContact.prototype.SetNormal);box2d.b2ParticleContact.prototype.SetFlags=function(a){this.flags=a};goog.exportProperty(box2d.b2ParticleContact.prototype,"SetFlags",box2d.b2ParticleContact.prototype.SetFlags);box2d.b2ParticleContact.prototype.GetIndexA=function(){return this.indexA};
goog.exportProperty(box2d.b2ParticleContact.prototype,"GetIndexA",box2d.b2ParticleContact.prototype.GetIndexA);box2d.b2ParticleContact.prototype.GetIndexB=function(){return this.indexB};goog.exportProperty(box2d.b2ParticleContact.prototype,"GetIndexB",box2d.b2ParticleContact.prototype.GetIndexB);box2d.b2ParticleContact.prototype.GetWeight=function(){return this.weight};goog.exportProperty(box2d.b2ParticleContact.prototype,"GetWeight",box2d.b2ParticleContact.prototype.GetWeight);
box2d.b2ParticleContact.prototype.GetNormal=function(){return this.normal};goog.exportProperty(box2d.b2ParticleContact.prototype,"GetNormal",box2d.b2ParticleContact.prototype.GetNormal);box2d.b2ParticleContact.prototype.GetFlags=function(){return this.flags};goog.exportProperty(box2d.b2ParticleContact.prototype,"GetFlags",box2d.b2ParticleContact.prototype.GetFlags);
box2d.b2ParticleContact.prototype.IsEqual=function(a){return this.indexA===a.indexA&&this.indexB===a.indexB&&this.flags===a.flags&&this.weight===a.weight&&this.normal.x===a.normal.x&&this.normal.y===a.normal.y};goog.exportProperty(box2d.b2ParticleContact.prototype,"IsEqual",box2d.b2ParticleContact.prototype.IsEqual);box2d.b2ParticleContact.prototype.IsNotEqual=function(a){return!this.IsEqual(a)};goog.exportProperty(box2d.b2ParticleContact.prototype,"IsNotEqual",box2d.b2ParticleContact.prototype.IsNotEqual);
box2d.b2ParticleContact.prototype.ApproximatelyEqual=function(a){return this.indexA===a.indexA&&this.indexB===a.indexB&&this.flags===a.flags&&.01>box2d.b2Abs(this.weight-a.weight)&&1E-4>box2d.b2DistanceSquared(this.normal,a.normal)};goog.exportProperty(box2d.b2ParticleContact.prototype,"ApproximatelyEqual",box2d.b2ParticleContact.prototype.ApproximatelyEqual);box2d.b2ParticleBodyContact=function(){this.normal=new box2d.b2Vec2};goog.exportSymbol("box2d.b2ParticleBodyContact",box2d.b2ParticleBodyContact);
box2d.b2ParticleBodyContact.prototype.index=0;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"index",box2d.b2ParticleBodyContact.prototype.index);box2d.b2ParticleBodyContact.prototype.body=null;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"body",box2d.b2ParticleBodyContact.prototype.body);box2d.b2ParticleBodyContact.prototype.fixture=null;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"fixture",box2d.b2ParticleBodyContact.prototype.fixture);
box2d.b2ParticleBodyContact.prototype.weight=0;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"weight",box2d.b2ParticleBodyContact.prototype.weight);box2d.b2ParticleBodyContact.prototype.normal=null;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"normal",box2d.b2ParticleBodyContact.prototype.normal);box2d.b2ParticleBodyContact.prototype.mass=0;goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"mass",box2d.b2ParticleBodyContact.prototype.mass);box2d.b2ParticlePair=function(){};
goog.exportSymbol("box2d.b2ParticlePair",box2d.b2ParticlePair);box2d.b2ParticlePair.prototype.indexA=0;goog.exportProperty(box2d.b2ParticlePair.prototype,"indexA",box2d.b2ParticlePair.prototype.indexA);box2d.b2ParticlePair.prototype.indexB=0;goog.exportProperty(box2d.b2ParticlePair.prototype,"indexB",box2d.b2ParticlePair.prototype.indexB);box2d.b2ParticlePair.prototype.flags=0;goog.exportProperty(box2d.b2ParticlePair.prototype,"flags",box2d.b2ParticlePair.prototype.flags);
box2d.b2ParticlePair.prototype.strength=0;goog.exportProperty(box2d.b2ParticlePair.prototype,"strength",box2d.b2ParticlePair.prototype.strength);box2d.b2ParticlePair.prototype.distance=0;goog.exportProperty(box2d.b2ParticlePair.prototype,"distance",box2d.b2ParticlePair.prototype.distance);box2d.b2ParticleTriad=function(){this.pa=new box2d.b2Vec2(0,0);this.pb=new box2d.b2Vec2(0,0);this.pc=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2ParticleTriad",box2d.b2ParticleTriad);
box2d.b2ParticleTriad.prototype.indexA=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexA",box2d.b2ParticleTriad.prototype.indexA);box2d.b2ParticleTriad.prototype.indexB=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexB",box2d.b2ParticleTriad.prototype.indexB);box2d.b2ParticleTriad.prototype.indexC=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexC",box2d.b2ParticleTriad.prototype.indexC);box2d.b2ParticleTriad.prototype.flags=0;
goog.exportProperty(box2d.b2ParticleTriad.prototype,"flags",box2d.b2ParticleTriad.prototype.flags);box2d.b2ParticleTriad.prototype.strength=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"strength",box2d.b2ParticleTriad.prototype.strength);box2d.b2ParticleTriad.prototype.pa=null;goog.exportProperty(box2d.b2ParticleTriad.prototype,"pa",box2d.b2ParticleTriad.prototype.pa);box2d.b2ParticleTriad.prototype.pb=null;goog.exportProperty(box2d.b2ParticleTriad.prototype,"pb",box2d.b2ParticleTriad.prototype.pb);
box2d.b2ParticleTriad.prototype.pc=null;goog.exportProperty(box2d.b2ParticleTriad.prototype,"pc",box2d.b2ParticleTriad.prototype.pc);box2d.b2ParticleTriad.prototype.ka=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"ka",box2d.b2ParticleTriad.prototype.ka);box2d.b2ParticleTriad.prototype.kb=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"kb",box2d.b2ParticleTriad.prototype.kb);box2d.b2ParticleTriad.prototype.kc=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"kc",box2d.b2ParticleTriad.prototype.kc);
box2d.b2ParticleTriad.prototype.s=0;goog.exportProperty(box2d.b2ParticleTriad.prototype,"s",box2d.b2ParticleTriad.prototype.s);box2d.b2ParticleSystemDef=function(){};goog.exportSymbol("box2d.b2ParticleSystemDef",box2d.b2ParticleSystemDef);box2d.b2ParticleSystemDef.prototype.strictContactCheck=!1;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"strictContactCheck",box2d.b2ParticleSystemDef.prototype.strictContactCheck);box2d.b2ParticleSystemDef.prototype.density=1;
goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"density",box2d.b2ParticleSystemDef.prototype.density);box2d.b2ParticleSystemDef.prototype.gravityScale=1;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"gravityScale",box2d.b2ParticleSystemDef.prototype.gravityScale);box2d.b2ParticleSystemDef.prototype.radius=1;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"radius",box2d.b2ParticleSystemDef.prototype.radius);box2d.b2ParticleSystemDef.prototype.maxCount=0;
goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"maxCount",box2d.b2ParticleSystemDef.prototype.maxCount);box2d.b2ParticleSystemDef.prototype.pressureStrength=.005;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"pressureStrength",box2d.b2ParticleSystemDef.prototype.pressureStrength);box2d.b2ParticleSystemDef.prototype.dampingStrength=1;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"dampingStrength",box2d.b2ParticleSystemDef.prototype.dampingStrength);
box2d.b2ParticleSystemDef.prototype.elasticStrength=.25;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"elasticStrength",box2d.b2ParticleSystemDef.prototype.elasticStrength);box2d.b2ParticleSystemDef.prototype.springStrength=.25;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"springStrength",box2d.b2ParticleSystemDef.prototype.springStrength);box2d.b2ParticleSystemDef.prototype.viscousStrength=.25;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"viscousStrength",box2d.b2ParticleSystemDef.prototype.viscousStrength);
box2d.b2ParticleSystemDef.prototype.surfaceTensionPressureStrength=.2;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"surfaceTensionPressureStrength",box2d.b2ParticleSystemDef.prototype.surfaceTensionPressureStrength);box2d.b2ParticleSystemDef.prototype.surfaceTensionNormalStrength=.2;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"surfaceTensionNormalStrength",box2d.b2ParticleSystemDef.prototype.surfaceTensionNormalStrength);
box2d.b2ParticleSystemDef.prototype.repulsiveStrength=1;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"repulsiveStrength",box2d.b2ParticleSystemDef.prototype.repulsiveStrength);box2d.b2ParticleSystemDef.prototype.powderStrength=.5;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"powderStrength",box2d.b2ParticleSystemDef.prototype.powderStrength);box2d.b2ParticleSystemDef.prototype.ejectionStrength=.5;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"ejectionStrength",box2d.b2ParticleSystemDef.prototype.ejectionStrength);
box2d.b2ParticleSystemDef.prototype.staticPressureStrength=.2;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureStrength",box2d.b2ParticleSystemDef.prototype.staticPressureStrength);box2d.b2ParticleSystemDef.prototype.staticPressureRelaxation=.2;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureRelaxation",box2d.b2ParticleSystemDef.prototype.staticPressureRelaxation);box2d.b2ParticleSystemDef.prototype.staticPressureIterations=8;
goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureIterations",box2d.b2ParticleSystemDef.prototype.staticPressureIterations);box2d.b2ParticleSystemDef.prototype.colorMixingStrength=.5;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"colorMixingStrength",box2d.b2ParticleSystemDef.prototype.colorMixingStrength);box2d.b2ParticleSystemDef.prototype.destroyByAge=!0;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"destroyByAge",box2d.b2ParticleSystemDef.prototype.destroyByAge);
box2d.b2ParticleSystemDef.prototype.lifetimeGranularity=1/60;goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"lifetimeGranularity",box2d.b2ParticleSystemDef.prototype.lifetimeGranularity);
box2d.b2ParticleSystemDef.prototype.Copy=function(a){this.strictContactCheck=a.strictContactCheck;this.density=a.density;this.gravityScale=a.gravityScale;this.radius=a.radius;this.maxCount=a.maxCount;this.pressureStrength=a.pressureStrength;this.dampingStrength=a.dampingStrength;this.elasticStrength=a.elasticStrength;this.springStrength=a.springStrength;this.viscousStrength=a.viscousStrength;this.surfaceTensionPressureStrength=a.surfaceTensionPressureStrength;this.surfaceTensionNormalStrength=a.surfaceTensionNormalStrength;
this.repulsiveStrength=a.repulsiveStrength;this.powderStrength=a.powderStrength;this.ejectionStrength=a.ejectionStrength;this.staticPressureStrength=a.staticPressureStrength;this.staticPressureRelaxation=a.staticPressureRelaxation;this.staticPressureIterations=a.staticPressureIterations;this.colorMixingStrength=a.colorMixingStrength;this.destroyByAge=a.destroyByAge;this.lifetimeGranularity=a.lifetimeGranularity;return this};box2d.b2ParticleSystemDef.prototype.Clone=function(){return(new box2d.b2ParticleSystemDef).Copy(this)};
box2d.b2ParticleSystem=function(a,c){this._ctor_(a,c)};goog.exportSymbol("box2d.b2ParticleSystem",box2d.b2ParticleSystem);box2d.b2ParticleSystem.prototype.m_paused=!1;box2d.b2ParticleSystem.prototype.m_timestamp=0;box2d.b2ParticleSystem.prototype.m_allParticleFlags=0;box2d.b2ParticleSystem.prototype.m_needsUpdateAllParticleFlags=!1;box2d.b2ParticleSystem.prototype.m_allGroupFlags=0;box2d.b2ParticleSystem.prototype.m_needsUpdateAllGroupFlags=!1;box2d.b2ParticleSystem.prototype.m_hasForce=!1;
box2d.b2ParticleSystem.prototype.m_iterationIndex=0;box2d.b2ParticleSystem.prototype.m_inverseDensity=0;box2d.b2ParticleSystem.prototype.m_particleDiameter=0;box2d.b2ParticleSystem.prototype.m_inverseDiameter=0;box2d.b2ParticleSystem.prototype.m_squaredDiameter=0;box2d.b2ParticleSystem.prototype.m_count=0;box2d.b2ParticleSystem.prototype.m_internalAllocatedCapacity=0;box2d.b2ParticleSystem.prototype.m_handleAllocator=null;box2d.b2ParticleSystem.prototype.m_handleIndexBuffer=null;
box2d.b2ParticleSystem.prototype.m_flagsBuffer=null;box2d.b2ParticleSystem.prototype.m_positionBuffer=null;box2d.b2ParticleSystem.prototype.m_velocityBuffer=null;box2d.b2ParticleSystem.prototype.m_forceBuffer=null;box2d.b2ParticleSystem.prototype.m_weightBuffer=null;box2d.b2ParticleSystem.prototype.m_staticPressureBuffer=null;box2d.b2ParticleSystem.prototype.m_accumulationBuffer=null;box2d.b2ParticleSystem.prototype.m_accumulation2Buffer=null;box2d.b2ParticleSystem.prototype.m_depthBuffer=null;
box2d.b2ParticleSystem.prototype.m_colorBuffer=null;box2d.b2ParticleSystem.prototype.m_groupBuffer=null;box2d.b2ParticleSystem.prototype.m_userDataBuffer=null;box2d.b2ParticleSystem.prototype.m_stuckThreshold=0;box2d.b2ParticleSystem.prototype.m_lastBodyContactStepBuffer=null;box2d.b2ParticleSystem.prototype.m_bodyContactCountBuffer=null;box2d.b2ParticleSystem.prototype.m_consecutiveContactStepsBuffer=null;box2d.b2ParticleSystem.prototype.m_stuckParticleBuffer=null;
box2d.b2ParticleSystem.prototype.m_proxyBuffer=null;box2d.b2ParticleSystem.prototype.m_contactBuffer=null;box2d.b2ParticleSystem.prototype.m_bodyContactBuffer=null;box2d.b2ParticleSystem.prototype.m_pairBuffer=null;box2d.b2ParticleSystem.prototype.m_triadBuffer=null;box2d.b2ParticleSystem.prototype.m_expirationTimeBuffer=null;box2d.b2ParticleSystem.prototype.m_indexByExpirationTimeBuffer=null;box2d.b2ParticleSystem.prototype.m_timeElapsed=0;
box2d.b2ParticleSystem.prototype.m_expirationTimeBufferRequiresSorting=!1;box2d.b2ParticleSystem.prototype.m_groupCount=0;box2d.b2ParticleSystem.prototype.m_groupList=null;box2d.b2ParticleSystem.prototype.m_def=null;box2d.b2ParticleSystem.prototype.m_world=null;box2d.b2ParticleSystem.prototype.m_prev=null;box2d.b2ParticleSystem.prototype.m_next=null;box2d.b2ParticleSystem.xTruncBits=12;box2d.b2ParticleSystem.yTruncBits=12;box2d.b2ParticleSystem.tagBits=32;
box2d.b2ParticleSystem.yOffset=1<<box2d.b2ParticleSystem.yTruncBits-1;box2d.b2ParticleSystem.yShift=box2d.b2ParticleSystem.tagBits-box2d.b2ParticleSystem.yTruncBits;box2d.b2ParticleSystem.xShift=box2d.b2ParticleSystem.tagBits-box2d.b2ParticleSystem.yTruncBits-box2d.b2ParticleSystem.xTruncBits;box2d.b2ParticleSystem.xScale=1<<box2d.b2ParticleSystem.xShift;box2d.b2ParticleSystem.xOffset=box2d.b2ParticleSystem.xScale*(1<<box2d.b2ParticleSystem.xTruncBits-1);
box2d.b2ParticleSystem.yMask=(1<<box2d.b2ParticleSystem.yTruncBits)-1<<box2d.b2ParticleSystem.yShift;box2d.b2ParticleSystem.xMask=~box2d.b2ParticleSystem.yMask;box2d.b2ParticleSystem.computeTag=function(a,c){return(c+box2d.b2ParticleSystem.yOffset>>>0<<box2d.b2ParticleSystem.yShift)+(box2d.b2ParticleSystem.xScale*a+box2d.b2ParticleSystem.xOffset>>>0)>>>0};box2d.b2ParticleSystem.computeRelativeTag=function(a,c,b){return a+(b<<box2d.b2ParticleSystem.yShift)+(c<<box2d.b2ParticleSystem.xShift)>>>0};
box2d.b2ParticleSystem.FixedSetAllocator=function(){};box2d.b2ParticleSystem.FixedSetAllocator.prototype.Invalidate=function(a){};box2d.b2ParticleSystem.FixtureParticle=function(a,c){this.first=a;this.second=c};box2d.b2ParticleSystem.FixtureParticle.prototype.first=null;box2d.b2ParticleSystem.FixtureParticle.prototype.second=box2d.b2_invalidParticleIndex;box2d.b2ParticleSystem.FixtureParticleSet=function(){};goog.inherits(box2d.b2ParticleSystem.FixtureParticleSet,box2d.b2ParticleSystem.FixedSetAllocator);
box2d.b2ParticleSystem.FixtureParticleSet.prototype.Initialize=function(a,c){};box2d.b2ParticleSystem.FixtureParticleSet.prototype.Find=function(a){};box2d.b2ParticleSystem.ParticlePair=function(a,c){};box2d.b2ParticleSystem.ParticlePair.prototype.first=box2d.b2_invalidParticleIndex;box2d.b2ParticleSystem.ParticlePair.prototype.second=box2d.b2_invalidParticleIndex;box2d.b2ParticleSystem.b2ParticlePairSet=function(){};goog.inherits(box2d.b2ParticleSystem.b2ParticlePairSet,box2d.b2ParticleSystem.FixedSetAllocator);
box2d.b2ParticleSystem.b2ParticlePairSet.prototype.Initialize=function(a,c){};box2d.b2ParticleSystem.b2ParticlePairSet.prototype.Find=function(a){};box2d.b2ParticleSystem.ConnectionFilter=function(){};box2d.b2ParticleSystem.ConnectionFilter.prototype.IsNecessary=function(a){return!0};box2d.b2ParticleSystem.ConnectionFilter.prototype.ShouldCreatePair=function(a,c){return!0};box2d.b2ParticleSystem.ConnectionFilter.prototype.ShouldCreateTriad=function(a,c,b){return!0};
box2d.b2ParticleSystem.prototype._ctor_=function(a,c){this.m_handleIndexBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_flagsBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_positionBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_velocityBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_forceBuffer=[];this.m_weightBuffer=[];this.m_staticPressureBuffer=[];this.m_accumulationBuffer=[];this.m_accumulation2Buffer=[];this.m_depthBuffer=[];this.m_colorBuffer=
new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_groupBuffer=[];this.m_userDataBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_lastBodyContactStepBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_bodyContactCountBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_consecutiveContactStepsBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_stuckParticleBuffer=new box2d.b2GrowableBuffer(function(){return 0});this.m_proxyBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleSystem.Proxy});
this.m_contactBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleContact});this.m_bodyContactBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleBodyContact});this.m_pairBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticlePair});this.m_triadBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleTriad});this.m_expirationTimeBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;this.m_indexByExpirationTimeBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer;
this.m_def=new box2d.b2ParticleSystemDef;box2d.b2Assert(null!==a);this.SetStrictContactCheck(a.strictContactCheck);this.SetDensity(a.density);this.SetGravityScale(a.gravityScale);this.SetRadius(a.radius);this.SetMaxParticleCount(a.maxCount);box2d.b2Assert(0<a.lifetimeGranularity);this.m_def=a.Clone();this.m_world=c;this.SetDestructionByAge(this.m_def.destroyByAge)};
box2d.b2ParticleSystem.prototype._dtor_=function(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer);this.FreeUserOverridableBuffer(this.m_flagsBuffer);this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer);this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer);this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer);this.FreeUserOverridableBuffer(this.m_positionBuffer);this.FreeUserOverridableBuffer(this.m_velocityBuffer);
this.FreeUserOverridableBuffer(this.m_colorBuffer);this.FreeUserOverridableBuffer(this.m_userDataBuffer);this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer);this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer);this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity);this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity);this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity);this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity);
this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity);this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity);this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)};box2d.b2ParticleSystem.prototype.Drop=function(){this._dtor_()};
box2d.b2ParticleSystem.prototype.CreateParticle=function(a){box2d.b2Assert(!1===this.m_world.IsLocked());if(this.m_world.IsLocked())return 0;this.m_count>=this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(this.m_count?2*this.m_count:box2d.b2_minParticleSystemBufferCapacity);if(this.m_count>=this.m_internalAllocatedCapacity)if(this.m_def.destroyByAge)this.DestroyOldestParticle(0,!1),this.SolveZombie();else return box2d.b2_invalidParticleIndex;var c=this.m_count++;this.m_flagsBuffer.data[c]=
0;this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[c]=0);this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[c]=0);this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[c]=0);this.m_positionBuffer.data[c]=a.position.Clone();this.m_velocityBuffer.data[c]=a.velocity.Clone();this.m_weightBuffer[c]=0;this.m_forceBuffer[c]=box2d.b2Vec2_zero.Clone();this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[c]=0);this.m_depthBuffer&&
(this.m_depthBuffer[c]=0);if(this.m_colorBuffer.data||!a.color.IsZero())this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[c]=a.color.Clone();if(this.m_userDataBuffer.data||a.userData)this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[c]=a.userData;this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[c]=null);var b=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],d=0<a.lifetime;if(this.m_expirationTimeBuffer.data||
d)this.SetParticleLifetime(c,d?a.lifetime:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),this.m_indexByExpirationTimeBuffer.data[c]=c;b.index=c;b=a.group;if(this.m_groupBuffer[c]=b)b.m_firstIndex<b.m_lastIndex?(this.RotateBuffer(b.m_firstIndex,b.m_lastIndex,c),box2d.b2Assert(b.m_lastIndex===c)):b.m_firstIndex=c,b.m_lastIndex=c+1;this.SetParticleFlags(c,a.flags);return c};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticle",box2d.b2ParticleSystem.prototype.CreateParticle);
box2d.b2ParticleSystem.prototype.GetParticleHandleFromIndex=function(a){box2d.b2Assert(0<=a&&a<this.GetParticleCount()&&a!==box2d.b2_invalidParticleIndex);this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);var c=this.m_handleIndexBuffer.data[a];if(c)return c;c=new box2d.b2ParticleHandle;box2d.b2Assert(null!==c);c.SetIndex(a);return this.m_handleIndexBuffer.data[a]=c};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleHandleFromIndex",box2d.b2ParticleSystem.prototype.GetParticleHandleFromIndex);
box2d.b2ParticleSystem.prototype.DestroyParticle=function(a,c){var b=box2d.b2ParticleFlag.b2_zombieParticle;c&&(b|=box2d.b2ParticleFlag.b2_destructionListenerParticle);this.SetParticleFlags(a,this.m_flagsBuffer.data[a]|b)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticle",box2d.b2ParticleSystem.prototype.DestroyParticle);
box2d.b2ParticleSystem.prototype.DestroyOldestParticle=function(a,c){var b=this.GetParticleCount();box2d.b2Assert(0<=a&&a<b);box2d.b2Assert(null!==this.m_indexByExpirationTimeBuffer.data);var b=this.m_indexByExpirationTimeBuffer.data[b-(a+1)],d=this.m_indexByExpirationTimeBuffer.data[a];this.DestroyParticle(0<this.m_expirationTimeBuffer.data[b]?b:d,c)};
box2d.b2ParticleSystem.DestroyParticlesInShapeCallback=function(a,c,b,d){this.m_system=a;this.m_shape=c;this.m_xf=b;this.m_callDestructionListener=d;this.m_destroyed=0};goog.inherits(box2d.b2ParticleSystem.DestroyParticlesInShapeCallback,box2d.b2QueryCallback);box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_system=null;box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_shape=null;box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_xf=null;
box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_callDestructionListener=!1;box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_destroyed=0;box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.ReportFixture=function(a){return!1};
box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.ReportParticle=function(a,c){if(a!==this.m_system)return!1;box2d.b2Assert(0<=c&&c<this.m_system.m_count);this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[c])&&(this.m_system.DestroyParticle(c,this.m_callDestructionListener),this.m_destroyed++);return!0};box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.Destroyed=function(){return this.m_destroyed};
box2d.b2ParticleSystem.prototype.DestroyParticlesInShape=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.DestroyParticlesInShape.s_aabb;box2d.b2Assert(!1===this.m_world.IsLocked());if(this.m_world.IsLocked())return 0;b=new box2d.b2ParticleSystem.DestroyParticlesInShapeCallback(this,a,c,b);a.ComputeAABB(d,c,0);this.m_world.QueryAABB(b,d);return b.Destroyed()};goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticlesInShape",box2d.b2ParticleSystem.prototype.DestroyParticlesInShape);
box2d.b2ParticleSystem.prototype.DestroyParticlesInShape.s_aabb=new box2d.b2AABB;
box2d.b2ParticleSystem.prototype.CreateParticleGroup=function(a){var c=box2d.b2ParticleSystem.prototype.CreateParticleGroup.s_transform;box2d.b2Assert(!1===this.m_world.IsLocked());if(this.m_world.IsLocked())return null;c.Set(a.position,a.angle);var b=this.m_count;a.shape&&this.CreateParticlesWithShapeForGroup(a.shape,a,c);a.shapes&&this.CreateParticlesWithShapesForGroup(a.shapes,a.shapeCount,a,c);if(a.particleCount){box2d.b2Assert(null!==a.positionData);for(var d=0;d<a.particleCount;d++)this.CreateParticleForGroup(a,
c,a.positionData[d])}var e=this.m_count,f=new box2d.b2ParticleGroup;f.m_system=this;f.m_firstIndex=b;f.m_lastIndex=e;f.m_strength=a.strength;f.m_userData=a.userData;f.m_transform.Copy(c);f.m_prev=null;if(f.m_next=this.m_groupList)this.m_groupList.m_prev=f;this.m_groupList=f;++this.m_groupCount;for(d=b;d<e;d++)this.m_groupBuffer[d]=f;this.SetGroupFlags(f,a.groupFlags);c=new box2d.b2ParticleSystem.ConnectionFilter;this.UpdateContacts(!0);this.UpdatePairsAndTriads(b,e,c);a.group&&(this.JoinParticleGroups(a.group,
f),f=a.group);return f};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticleGroup",box2d.b2ParticleSystem.prototype.CreateParticleGroup);box2d.b2ParticleSystem.prototype.CreateParticleGroup.s_transform=new box2d.b2Transform;box2d.b2ParticleSystem.JoinParticleGroupsFilter=function(a){this.m_threshold=a};goog.inherits(box2d.b2ParticleSystem.JoinParticleGroupsFilter,box2d.b2ParticleSystem.ConnectionFilter);box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.m_threshold=0;
box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.ShouldCreatePair=function(a,c){return a<this.m_threshold&&this.m_threshold<=c||c<this.m_threshold&&this.m_threshold<=a};box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.ShouldCreateTriad=function(a,c,b){return(a<this.m_threshold||c<this.m_threshold||b<this.m_threshold)&&(this.m_threshold<=a||this.m_threshold<=c||this.m_threshold<=b)};
box2d.b2ParticleSystem.prototype.JoinParticleGroups=function(a,c){box2d.b2Assert(!1===this.m_world.IsLocked());if(!this.m_world.IsLocked()){box2d.b2Assert(a!==c);this.RotateBuffer(c.m_firstIndex,c.m_lastIndex,this.m_count);box2d.b2Assert(c.m_lastIndex===this.m_count);this.RotateBuffer(a.m_firstIndex,a.m_lastIndex,c.m_firstIndex);box2d.b2Assert(a.m_lastIndex===c.m_firstIndex);var b=new box2d.b2ParticleSystem.JoinParticleGroupsFilter(c.m_firstIndex);this.UpdateContacts(!0);this.UpdatePairsAndTriads(a.m_firstIndex,
c.m_lastIndex,b);for(b=c.m_firstIndex;b<c.m_lastIndex;b++)this.m_groupBuffer[b]=a;this.SetGroupFlags(a,a.m_groupFlags|c.m_groupFlags);a.m_lastIndex=c.m_lastIndex;c.m_firstIndex=c.m_lastIndex;this.DestroyParticleGroup(c)}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"JoinParticleGroups",box2d.b2ParticleSystem.prototype.JoinParticleGroups);
box2d.b2ParticleSystem.prototype.SplitParticleGroup=function(a){this.UpdateContacts(!0);var c=a.GetParticleCount(),c=box2d.b2MakeArray(c,function(a){return new box2d.b2ParticleSystem.ParticleListNode});box2d.b2ParticleSystem.InitializeParticleLists(a,c);this.MergeParticleListsInContact(a,c);var b=box2d.b2ParticleSystem.FindLongestParticleList(a,c);this.MergeZombieParticleListNodes(a,c,b);this.CreateParticleGroupsFromParticleList(a,c,b);this.UpdatePairsAndTriadsWithParticleList(a,c)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"SplitParticleGroup",box2d.b2ParticleSystem.prototype.SplitParticleGroup);box2d.b2ParticleSystem.prototype.GetParticleGroupList=function(){return this.m_groupList};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleGroupList",box2d.b2ParticleSystem.prototype.GetParticleGroupList);box2d.b2ParticleSystem.prototype.GetParticleGroupCount=function(){return this.m_groupCount};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleGroupCount",box2d.b2ParticleSystem.prototype.GetParticleGroupCount);box2d.b2ParticleSystem.prototype.GetParticleCount=function(){return this.m_count};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleCount",box2d.b2ParticleSystem.prototype.GetParticleCount);box2d.b2ParticleSystem.prototype.GetMaxParticleCount=function(){return this.m_def.maxCount};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetMaxParticleCount",box2d.b2ParticleSystem.prototype.GetMaxParticleCount);box2d.b2ParticleSystem.prototype.SetMaxParticleCount=function(a){box2d.b2Assert(this.m_count<=a);this.m_def.maxCount=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetMaxParticleCount",box2d.b2ParticleSystem.prototype.SetMaxParticleCount);box2d.b2ParticleSystem.prototype.GetAllParticleFlags=function(){return this.m_allParticleFlags};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetAllParticleFlags",box2d.b2ParticleSystem.prototype.GetAllParticleFlags);box2d.b2ParticleSystem.prototype.GetAllGroupFlags=function(){return this.m_allGroupFlags};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetAllGroupFlags",box2d.b2ParticleSystem.prototype.GetAllGroupFlags);box2d.b2ParticleSystem.prototype.SetPaused=function(a){this.m_paused=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetPaused",box2d.b2ParticleSystem.prototype.SetPaused);
box2d.b2ParticleSystem.prototype.GetPaused=function(){return this.m_paused};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPaused",box2d.b2ParticleSystem.prototype.GetPaused);box2d.b2ParticleSystem.prototype.SetDensity=function(a){this.m_def.density=a;this.m_inverseDensity=1/this.m_def.density};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDensity",box2d.b2ParticleSystem.prototype.SetDensity);box2d.b2ParticleSystem.prototype.GetDensity=function(){return this.m_def.density};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDensity",box2d.b2ParticleSystem.prototype.GetDensity);box2d.b2ParticleSystem.prototype.SetGravityScale=function(a){this.m_def.gravityScale=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetGravityScale",box2d.b2ParticleSystem.prototype.SetGravityScale);box2d.b2ParticleSystem.prototype.GetGravityScale=function(){return this.m_def.gravityScale};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetGravityScale",box2d.b2ParticleSystem.prototype.GetGravityScale);
box2d.b2ParticleSystem.prototype.SetDamping=function(a){this.m_def.dampingStrength=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDamping",box2d.b2ParticleSystem.prototype.SetDamping);box2d.b2ParticleSystem.prototype.GetDamping=function(){return this.m_def.dampingStrength};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDamping",box2d.b2ParticleSystem.prototype.GetDamping);
box2d.b2ParticleSystem.prototype.SetStaticPressureIterations=function(a){this.m_def.staticPressureIterations=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetStaticPressureIterations",box2d.b2ParticleSystem.prototype.SetStaticPressureIterations);box2d.b2ParticleSystem.prototype.GetStaticPressureIterations=function(){return this.m_def.staticPressureIterations};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStaticPressureIterations",box2d.b2ParticleSystem.prototype.GetStaticPressureIterations);
box2d.b2ParticleSystem.prototype.SetRadius=function(a){this.m_particleDiameter=2*a;this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter;this.m_inverseDiameter=1/this.m_particleDiameter};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetRadius",box2d.b2ParticleSystem.prototype.SetRadius);box2d.b2ParticleSystem.prototype.GetRadius=function(){return this.m_particleDiameter/2};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetRadius",box2d.b2ParticleSystem.prototype.GetRadius);
box2d.b2ParticleSystem.prototype.GetPositionBuffer=function(){return this.m_positionBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPositionBuffer",box2d.b2ParticleSystem.prototype.GetPositionBuffer);box2d.b2ParticleSystem.prototype.GetVelocityBuffer=function(){return this.m_velocityBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetVelocityBuffer",box2d.b2ParticleSystem.prototype.GetVelocityBuffer);
box2d.b2ParticleSystem.prototype.GetColorBuffer=function(){this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data);return this.m_colorBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetColorBuffer",box2d.b2ParticleSystem.prototype.GetColorBuffer);box2d.b2ParticleSystem.prototype.GetGroupBuffer=function(){return this.m_groupBuffer};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetGroupBuffer",box2d.b2ParticleSystem.prototype.GetGroupBuffer);
box2d.b2ParticleSystem.prototype.GetWeightBuffer=function(){return this.m_weightBuffer};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetWeightBuffer",box2d.b2ParticleSystem.prototype.GetWeightBuffer);box2d.b2ParticleSystem.prototype.GetUserDataBuffer=function(){this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data);return this.m_userDataBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetUserDataBuffer",box2d.b2ParticleSystem.prototype.GetUserDataBuffer);
box2d.b2ParticleSystem.prototype.GetFlagsBuffer=function(){return this.m_flagsBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetFlagsBuffer",box2d.b2ParticleSystem.prototype.GetFlagsBuffer);
box2d.b2ParticleSystem.prototype.SetParticleFlags=function(a,c){this.m_flagsBuffer.data[a]&~c&&(this.m_needsUpdateAllParticleFlags=!0);~this.m_allParticleFlags&c&&(c&box2d.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),c&box2d.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=c);this.m_flagsBuffer.data[a]=c};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetParticleFlags",box2d.b2ParticleSystem.prototype.SetParticleFlags);box2d.b2ParticleSystem.prototype.GetParticleFlags=function(a){return this.m_flagsBuffer.data[a]};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleFlags",box2d.b2ParticleSystem.prototype.GetParticleFlags);box2d.b2ParticleSystem.prototype.SetFlagsBuffer=function(a,c){this.SetUserOverridableBuffer(this.m_flagsBuffer,a,c)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetFlagsBuffer",box2d.b2ParticleSystem.prototype.SetFlagsBuffer);box2d.b2ParticleSystem.prototype.SetPositionBuffer=function(a,c){this.SetUserOverridableBuffer(this.m_positionBuffer,a,c)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetPositionBuffer",box2d.b2ParticleSystem.prototype.SetPositionBuffer);box2d.b2ParticleSystem.prototype.SetVelocityBuffer=function(a,c){this.SetUserOverridableBuffer(this.m_velocityBuffer,a,c)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetVelocityBuffer",box2d.b2ParticleSystem.prototype.SetVelocityBuffer);box2d.b2ParticleSystem.prototype.SetColorBuffer=function(a,c){this.SetUserOverridableBuffer(this.m_colorBuffer,a,c)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetColorBuffer",box2d.b2ParticleSystem.prototype.SetColorBuffer);box2d.b2ParticleSystem.prototype.SetUserDataBuffer=function(a,c){this.SetUserOverridableBuffer(this.m_userDataBuffer,a,c)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetUserDataBuffer",box2d.b2ParticleSystem.prototype.SetUserDataBuffer);box2d.b2ParticleSystem.prototype.GetContacts=function(){return this.m_contactBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetContacts",box2d.b2ParticleSystem.prototype.GetContacts);box2d.b2ParticleSystem.prototype.GetContactCount=function(){return this.m_contactBuffer.count};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetContactCount",box2d.b2ParticleSystem.prototype.GetContactCount);
box2d.b2ParticleSystem.prototype.GetBodyContacts=function(){return this.m_bodyContactBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetBodyContacts",box2d.b2ParticleSystem.prototype.GetBodyContacts);box2d.b2ParticleSystem.prototype.GetBodyContactCount=function(){return this.m_bodyContactBuffer.count};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetBodyContactCount",box2d.b2ParticleSystem.prototype.GetBodyContactCount);box2d.b2ParticleSystem.prototype.GetPairs=function(){return this.m_pairBuffer.data};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPairs",box2d.b2ParticleSystem.prototype.GetPairs);box2d.b2ParticleSystem.prototype.GetPairCount=function(){return this.m_pairBuffer.count};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPairCount",box2d.b2ParticleSystem.prototype.GetPairCount);box2d.b2ParticleSystem.prototype.GetTriads=function(){return this.m_triadBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetTriads",box2d.b2ParticleSystem.prototype.GetTriads);
box2d.b2ParticleSystem.prototype.GetTriadCount=function(){return this.m_triadBuffer.count};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetTriadCount",box2d.b2ParticleSystem.prototype.GetTriadCount);
box2d.b2ParticleSystem.prototype.SetStuckThreshold=function(a){this.m_stuckThreshold=a;0<a&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))};box2d.b2ParticleSystem.prototype.GetStuckCandidates=function(){return this.m_stuckParticleBuffer.Data()};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStuckCandidates",box2d.b2ParticleSystem.prototype.GetStuckCandidates);box2d.b2ParticleSystem.prototype.GetStuckCandidateCount=function(){return this.m_stuckParticleBuffer.GetCount()};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStuckCandidateCount",box2d.b2ParticleSystem.prototype.GetStuckCandidateCount);
box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy=function(){for(var a=box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy.s_v,c=this.m_velocityBuffer.data,b=0,d=0;d<this.m_contactBuffer.count;d++){var e=this.m_contactBuffer.data[d],f=e.normal,e=box2d.b2Sub_V2_V2(c[e.indexB],c[e.indexA],a),f=box2d.b2Dot_V2_V2(e,f);0>f&&(b+=f*f)}return.5*this.GetParticleMass()*b};goog.exportProperty(box2d.b2ParticleSystem.prototype,"ComputeCollisionEnergy",box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy);
box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SetStrictContactCheck=function(a){this.m_def.strictContactCheck=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetStrictContactCheck",box2d.b2ParticleSystem.prototype.SetStrictContactCheck);box2d.b2ParticleSystem.prototype.GetStrictContactCheck=function(){return this.m_def.strictContactCheck};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStrictContactCheck",box2d.b2ParticleSystem.prototype.GetStrictContactCheck);
box2d.b2ParticleSystem.prototype.SetParticleLifetime=function(a,c){box2d.b2Assert(this.ValidateParticleIndex(a));var b=null===this.m_indexByExpirationTimeBuffer.data;this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data);this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data);if(b)for(var b=this.GetParticleCount(),d=0;d<b;++d)this.m_indexByExpirationTimeBuffer.data[d]=d;b=c/this.m_def.lifetimeGranularity;b=0<b?this.GetQuantizedTimeElapsed()+
b:b;b!==this.m_expirationTimeBuffer.data[a]&&(this.m_expirationTimeBuffer.data[a]=b,this.m_expirationTimeBufferRequiresSorting=!0)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetParticleLifetime",box2d.b2ParticleSystem.prototype.SetParticleLifetime);box2d.b2ParticleSystem.prototype.GetParticleLifetime=function(a){box2d.b2Assert(this.ValidateParticleIndex(a));return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[a])};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleLifetime",box2d.b2ParticleSystem.prototype.GetParticleLifetime);box2d.b2ParticleSystem.prototype.SetDestructionByAge=function(a){a&&this.GetExpirationTimeBuffer();this.m_def.destroyByAge=a};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDestructionByAge",box2d.b2ParticleSystem.prototype.SetDestructionByAge);box2d.b2ParticleSystem.prototype.GetDestructionByAge=function(){return this.m_def.destroyByAge};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDestructionByAge",box2d.b2ParticleSystem.prototype.GetDestructionByAge);box2d.b2ParticleSystem.prototype.GetExpirationTimeBuffer=function(){this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data);return this.m_expirationTimeBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetExpirationTimeBuffer",box2d.b2ParticleSystem.prototype.GetExpirationTimeBuffer);
box2d.b2ParticleSystem.prototype.ExpirationTimeToLifetime=function(a){return(0<a?a-this.GetQuantizedTimeElapsed():a)*this.m_def.lifetimeGranularity};goog.exportProperty(box2d.b2ParticleSystem.prototype,"ExpirationTimeToLifetime",box2d.b2ParticleSystem.prototype.ExpirationTimeToLifetime);
box2d.b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer=function(){this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data);return this.m_indexByExpirationTimeBuffer.data};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetIndexByExpirationTimeBuffer",box2d.b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer);
box2d.b2ParticleSystem.prototype.ParticleApplyLinearImpulse=function(a,c){this.ApplyLinearImpulse(a,a+1,c)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"ParticleApplyLinearImpulse",box2d.b2ParticleSystem.prototype.ParticleApplyLinearImpulse);box2d.b2ParticleSystem.prototype.ApplyLinearImpulse=function(a,c,b){var d=this.m_velocityBuffer.data,e=(c-a)*this.GetParticleMass();for(b=b.Clone().SelfMul(1/e);a<c;a++)d[a].SelfAdd(b)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"ApplyLinearImpulse",box2d.b2ParticleSystem.prototype.ApplyLinearImpulse);box2d.b2ParticleSystem.IsSignificantForce=function(a){return 0!==a.x||0!==a.y};box2d.b2ParticleSystem.prototype.ParticleApplyForce=function(a,c){box2d.b2ParticleSystem.IsSignificantForce(c)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[a])&&(this.PrepareForceBuffer(),this.m_forceBuffer[a].SelfAdd(c))};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"ParticleApplyForce",box2d.b2ParticleSystem.prototype.ParticleApplyForce);box2d.b2ParticleSystem.prototype.ApplyForce=function(a,c,b){for(var d=0,e=a;e<c;e++)d|=this.m_flagsBuffer.data[e];box2d.b2Assert(this.ForceCanBeApplied(d));b=b.Clone().SelfMul(1/(c-a));if(box2d.b2ParticleSystem.IsSignificantForce(b))for(this.PrepareForceBuffer(),e=a;e<c;e++)this.m_forceBuffer[e].SelfAdd(b)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"ApplyForce",box2d.b2ParticleSystem.prototype.ApplyForce);box2d.b2ParticleSystem.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetNext",box2d.b2ParticleSystem.prototype.GetNext);
box2d.b2ParticleSystem.prototype.QueryAABB=function(a,c){if(0!==this.m_proxyBuffer.count)for(var b=this.m_proxyBuffer.count,d=box2d.std_lower_bound(this.m_proxyBuffer.data,0,b,box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*c.lowerBound.x,this.m_inverseDiameter*c.lowerBound.y),box2d.b2ParticleSystem.Proxy.CompareProxyTag),b=box2d.std_upper_bound(this.m_proxyBuffer.data,d,b,box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*c.upperBound.x,this.m_inverseDiameter*c.upperBound.y),box2d.b2ParticleSystem.Proxy.CompareTagProxy),
e=this.m_positionBuffer.data;d<b;++d){var f=this.m_proxyBuffer.data[d].index,g=e[f];if(c.lowerBound.x<g.x&&g.x<c.upperBound.x&&c.lowerBound.y<g.y&&g.y<c.upperBound.y&&!a.ReportParticle(this,f))break}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryAABB",box2d.b2ParticleSystem.prototype.QueryAABB);box2d.b2ParticleSystem.prototype.QueryShapeAABB=function(a,c,b,d){var e=box2d.b2ParticleSystem.prototype.QueryShapeAABB.s_aabb;c.ComputeAABB(e,b,d||0);this.QueryAABB(a,e)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryShapeAABB",box2d.b2ParticleSystem.prototype.QueryShapeAABB);box2d.b2ParticleSystem.prototype.QueryShapeAABB.s_aabb=new box2d.b2AABB;box2d.b2ParticleSystem.prototype.QueryPointAABB=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.QueryPointAABB.s_aabb;b="number"===typeof b?b:box2d.b2_linearSlop;d.lowerBound.Set(c.x-b,c.y-b);d.upperBound.Set(c.x+b,c.y+b);this.QueryAABB(a,d)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryPointAABB",box2d.b2ParticleSystem.prototype.QueryPointAABB);box2d.b2ParticleSystem.prototype.QueryPointAABB.s_aabb=new box2d.b2AABB;
box2d.b2ParticleSystem.prototype.RayCast=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.RayCast.s_aabb,e=box2d.b2ParticleSystem.prototype.RayCast.s_p,f=box2d.b2ParticleSystem.prototype.RayCast.s_v,g=box2d.b2ParticleSystem.prototype.RayCast.s_n,h=box2d.b2ParticleSystem.prototype.RayCast.s_point;if(0!==this.m_proxyBuffer.count){var k=this.m_positionBuffer.data;box2d.b2Min_V2_V2(c,b,d.lowerBound);box2d.b2Max_V2_V2(c,b,d.upperBound);var l=1;b=box2d.b2Sub_V2_V2(b,c,f);for(var f=box2d.b2Dot_V2_V2(b,
b),d=this.GetInsideBoundsEnumerator(d),m;0<=(m=d.GetNext());){var n=box2d.b2Sub_V2_V2(c,k[m],e),p=box2d.b2Dot_V2_V2(n,b),q=box2d.b2Dot_V2_V2(n,n),q=p*p-f*(q-this.m_squaredDiameter);if(0<=q){var r=box2d.b2Sqrt(q),q=(-p-r)/f;if(!(q>l)){if(0>q&&(q=(-p+r)/f,0>q||q>l))continue;n=box2d.b2AddMul_V2_S_V2(n,q,b,g);n.Normalize();m=a.ReportParticle(this,m,box2d.b2AddMul_V2_S_V2(c,q,b,h),n,q);l=box2d.b2Min(l,m);if(0>=l)break}}}}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"RayCast",box2d.b2ParticleSystem.prototype.RayCast);
box2d.b2ParticleSystem.prototype.RayCast.s_aabb=new box2d.b2AABB;box2d.b2ParticleSystem.prototype.RayCast.s_p=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.RayCast.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.RayCast.s_n=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.RayCast.s_point=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.ComputeAABB=function(a){var c=this.GetParticleCount();box2d.b2Assert(null!==a);a.lowerBound.x=+box2d.b2_maxFloat;a.lowerBound.y=+box2d.b2_maxFloat;a.upperBound.x=-box2d.b2_maxFloat;a.upperBound.y=-box2d.b2_maxFloat;for(var b=this.m_positionBuffer.data,d=0;d<c;d++){var e=b[d];box2d.b2Min_V2_V2(a.lowerBound,e,a.lowerBound);box2d.b2Max_V2_V2(a.upperBound,e,a.upperBound)}a.lowerBound.x-=this.m_particleDiameter;a.lowerBound.y-=this.m_particleDiameter;a.upperBound.x+=this.m_particleDiameter;
a.upperBound.y+=this.m_particleDiameter};goog.exportProperty(box2d.b2ParticleSystem.prototype,"ComputeAABB",box2d.b2ParticleSystem.prototype.ComputeAABB);box2d.b2ParticleSystem.UserOverridableBuffer=function(){};box2d.b2ParticleSystem.UserOverridableBuffer.prototype.data=null;box2d.b2ParticleSystem.UserOverridableBuffer.prototype.userSuppliedCapacity=0;box2d.b2ParticleSystem.Proxy=function(){};box2d.b2ParticleSystem.Proxy.prototype.index=box2d.b2_invalidParticleIndex;
box2d.b2ParticleSystem.Proxy.prototype.tag=0;box2d.b2ParticleSystem.Proxy.CompareProxyProxy=function(a,c){return a.tag<c.tag};box2d.b2ParticleSystem.Proxy.CompareTagProxy=function(a,c){return a<c.tag};box2d.b2ParticleSystem.Proxy.CompareProxyTag=function(a,c){return a.tag<c};
box2d.b2ParticleSystem.InsideBoundsEnumerator=function(a,c,b,d,e){this.m_system=a;this.m_xLower=(c&box2d.b2ParticleSystem.xMask)>>>0;this.m_xUpper=(b&box2d.b2ParticleSystem.xMask)>>>0;this.m_yLower=(c&box2d.b2ParticleSystem.yMask)>>>0;this.m_yUpper=(b&box2d.b2ParticleSystem.yMask)>>>0;this.m_first=d;this.m_last=e;box2d.b2Assert(this.m_first<=this.m_last)};
box2d.b2ParticleSystem.InsideBoundsEnumerator.prototype.GetNext=function(){for(;this.m_first<this.m_last;){var a=(this.m_system.m_proxyBuffer.data[this.m_first].tag&box2d.b2ParticleSystem.xMask)>>>0,c=(this.m_system.m_proxyBuffer.data[this.m_first].tag&box2d.b2ParticleSystem.yMask)>>>0;box2d.b2Assert(c>=this.m_yLower);box2d.b2Assert(c<=this.m_yUpper);if(a>=this.m_xLower&&a<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return box2d.b2_invalidParticleIndex};
box2d.b2ParticleSystem.ParticleListNode=function(){};box2d.b2ParticleSystem.ParticleListNode.prototype.list=null;box2d.b2ParticleSystem.ParticleListNode.prototype.next=null;box2d.b2ParticleSystem.ParticleListNode.prototype.count=0;box2d.b2ParticleSystem.ParticleListNode.prototype.index=0;box2d.b2ParticleSystem.k_pairFlags=box2d.b2ParticleFlag.b2_springParticle;box2d.b2ParticleSystem.k_triadFlags=box2d.b2ParticleFlag.b2_elasticParticle;
box2d.b2ParticleSystem.k_noPressureFlags=box2d.b2ParticleFlag.b2_powderParticle|box2d.b2ParticleFlag.b2_tensileParticle;box2d.b2ParticleSystem.k_extraDampingFlags=box2d.b2ParticleFlag.b2_staticPressureParticle;box2d.b2ParticleSystem.k_barrierWallFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_wallParticle;box2d.b2ParticleSystem.prototype.FreeBuffer=function(a,c){null!==a&&(a.length=0)};
box2d.b2ParticleSystem.prototype.FreeUserOverridableBuffer=function(a){0==a.userSuppliedCapacity&&this.FreeBuffer(a.data,this.m_internalAllocatedCapacity)};box2d.b2ParticleSystem.prototype.ReallocateBuffer3=function(a,c,b){box2d.b2Assert(b>c);a=a?a.slice():[];a.length=b;return a};box2d.b2ParticleSystem.prototype.ReallocateBuffer5=function(a,c,b,d,e){box2d.b2Assert(d>b);box2d.b2Assert(!c||d<=c);e&&!a||c||(a=this.ReallocateBuffer3(a,b,d));return a};
box2d.b2ParticleSystem.prototype.ReallocateBuffer4=function(a,c,b,d){box2d.b2Assert(b>c);return this.ReallocateBuffer5(a.data,a.userSuppliedCapacity,c,b,d)};box2d.b2ParticleSystem.prototype.RequestBuffer=function(a){a||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(box2d.b2_minParticleSystemBufferCapacity),a=[],a.length=this.m_internalAllocatedCapacity);return a};
box2d.b2ParticleSystem.prototype.ReallocateHandleBuffers=function(a){box2d.b2Assert(a>this.m_internalAllocatedCapacity);this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,a,!0)};
box2d.b2ParticleSystem.prototype.ReallocateInternalAllocatedBuffers=function(a){function c(a,b){return b&&a>b?b:a}a=c(a,this.m_def.maxCount);a=c(a,this.m_flagsBuffer.userSuppliedCapacity);a=c(a,this.m_positionBuffer.userSuppliedCapacity);a=c(a,this.m_velocityBuffer.userSuppliedCapacity);a=c(a,this.m_colorBuffer.userSuppliedCapacity);a=c(a,this.m_userDataBuffer.userSuppliedCapacity);if(this.m_internalAllocatedCapacity<a){this.ReallocateHandleBuffers(a);this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,
this.m_internalAllocatedCapacity,a,!1);var b=0<this.m_stuckThreshold;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,a,b);this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,a,b);this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,a,b);this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,
this.m_internalAllocatedCapacity,a,!1);this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,a,!1);this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,a,!1);this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,a,!1);this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,a,!0);this.m_accumulationBuffer=
this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,a,!1);this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,a,!0);this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,a,!0);this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,a,!0);this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,
a,!1);this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,a,!0);this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,a,!0);this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,a,!1);this.m_internalAllocatedCapacity=a}};
box2d.b2ParticleSystem.prototype.CreateParticleForGroup=function(a,c,b){var d=new box2d.b2ParticleDef;d.flags=a.flags;box2d.b2Mul_X_V2(c,b,d.position);box2d.b2Add_V2_V2(a.linearVelocity,box2d.b2Cross_S_V2(a.angularVelocity,box2d.b2Sub_V2_V2(d.position,a.position,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),d.velocity);d.color.Copy(a.color);d.lifetime=a.lifetime;d.userData=a.userData;this.CreateParticle(d)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticleForGroup",box2d.b2ParticleSystem.prototype.CreateParticleForGroup);
box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_edge,e=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_d,f=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_p,g=c.stride;0===g&&(g=this.GetParticleStride());for(var h=0,k=a.GetChildCount(),l=0;l<k;l++){var m=null;a.GetType()===box2d.b2ShapeType.e_edgeShape?m=a:(box2d.b2Assert(a.GetType()===box2d.b2ShapeType.e_chainShape),
m=d,a.GetChildEdge(m,l));for(var n=box2d.b2Sub_V2_V2(m.m_vertex2,m.m_vertex1,e),p=n.Length();h<p;){var q=box2d.b2AddMul_V2_S_V2(m.m_vertex1,h/p,n,f);this.CreateParticleForGroup(c,b,q);h+=g}h-=p}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesStrokeShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup);box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_edge=new box2d.b2EdgeShape;
box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_d=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_p=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_aabb,e=box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_p,f=c.stride;0===f&&(f=this.GetParticleStride());var g=box2d.b2Transform.IDENTITY;box2d.b2Assert(1===a.GetChildCount());a.ComputeAABB(d,g,0);for(var h=Math.floor(d.lowerBound.y/f)*f;h<d.upperBound.y;h+=f)for(var k=Math.floor(d.lowerBound.x/f)*f;k<d.upperBound.x;k+=f){var l=
e.Set(k,h);a.TestPoint(g,l)&&this.CreateParticleForGroup(c,b,l)}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesFillShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup);box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_aabb=new box2d.b2AABB;box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_p=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup=function(a,c,b){switch(a.GetType()){case box2d.b2ShapeType.e_edgeShape:case box2d.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(a,c,b);break;case box2d.b2ShapeType.e_polygonShape:case box2d.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(a,c,b);break;default:box2d.b2Assert(!1)}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesWithShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup);
box2d.b2ParticleSystem.CompositeShape=function(a,c){this.m_shapes=a;this.m_shapeCount=c};goog.inherits(box2d.b2ParticleSystem.CompositeShape,box2d.b2Shape);box2d.b2ParticleSystem.CompositeShape.prototype.m_shapes=null;box2d.b2ParticleSystem.CompositeShape.prototype.m_shapeCount=0;box2d.b2ParticleSystem.CompositeShape.prototype.Clone=function(){box2d.b2Assert(!1);return null};box2d.b2ParticleSystem.CompositeShape.prototype.GetChildCount=function(){return 1};
box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint=function(a,c){for(var b=0;b<this.m_shapeCount;b++)if(this.m_shapes[b].TestPoint(a,c))return!0;return!1};goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint",box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint);box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance=function(a,c,b,d){box2d.b2Assert(!1)};goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance);
box2d.b2ParticleSystem.CompositeShape.prototype.RayCast=function(a,c,b,d){box2d.b2Assert(!1);return!1};goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.RayCast",box2d.b2ParticleSystem.CompositeShape.prototype.RayCast);
box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB=function(a,c,b){var d=new box2d.b2AABB;a.lowerBound.x=+box2d.b2_maxFloat;a.lowerBound.y=+box2d.b2_maxFloat;a.upperBound.x=-box2d.b2_maxFloat;a.upperBound.y=-box2d.b2_maxFloat;box2d.b2Assert(0===b);for(b=0;b<this.m_shapeCount;b++)for(var e=this.m_shapes[b].GetChildCount(),f=0;f<e;f++){var g=d;this.m_shapes[b].ComputeAABB(g,c,f);a.Combine1(g)}};goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB);
box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass=function(a,c){box2d.b2Assert(!1)};goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass);box2d.b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup=function(a,c,b,d){a=new box2d.b2ParticleSystem.CompositeShape(a,c);this.CreateParticlesFillShapeForGroup(a,b,d)};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesWithShapesForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup);
box2d.b2ParticleSystem.prototype.CloneParticle=function(a,c){var b=new box2d.b2ParticleDef;b.flags=this.m_flagsBuffer.data[a];b.position.Copy(this.m_positionBuffer.data[a]);b.velocity.Copy(this.m_velocityBuffer.data[a]);this.m_colorBuffer.data&&b.color.Copy(this.m_colorBuffer.data[a]);this.m_userDataBuffer.data&&(b.userData=this.m_userDataBuffer.data[a]);b.group=c;b=this.CreateParticle(b);if(this.m_handleIndexBuffer.data){var d=this.m_handleIndexBuffer.data[a];d&&d.SetIndex(b);this.m_handleIndexBuffer.data[b]=
d;this.m_handleIndexBuffer.data[a]=null}this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[b]=this.m_lastBodyContactStepBuffer.data[a]);this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[b]=this.m_bodyContactCountBuffer.data[a]);this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[b]=this.m_consecutiveContactStepsBuffer.data[a]);this.m_hasForce&&(this.m_forceBuffer[b]=this.m_forceBuffer[a]);this.m_staticPressureBuffer&&
(this.m_staticPressureBuffer[b]=this.m_staticPressureBuffer[a]);this.m_depthBuffer&&(this.m_depthBuffer[b]=this.m_depthBuffer[a]);this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[b]=this.m_expirationTimeBuffer.data[a]);return b};goog.exportProperty(box2d.b2ParticleSystem.prototype,"CloneParticle",box2d.b2ParticleSystem.prototype.CloneParticle);
box2d.b2ParticleSystem.prototype.DestroyParticlesInGroup=function(a,c){for(var b=a.m_firstIndex;b<a.m_lastIndex;b++)this.DestroyParticle(b,c)};goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticlesInGroup",box2d.b2ParticleSystem.prototype.DestroyParticlesInGroup);
box2d.b2ParticleSystem.prototype.DestroyParticleGroup=function(a){box2d.b2Assert(0<this.m_groupCount);box2d.b2Assert(null!==a);this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(a);this.SetGroupFlags(a,0);for(var c=a.m_firstIndex;c<a.m_lastIndex;c++)this.m_groupBuffer[c]=null;a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a===this.m_groupList&&(this.m_groupList=a.m_next);--this.m_groupCount};
goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticleGroup",box2d.b2ParticleSystem.prototype.DestroyParticleGroup);box2d.b2ParticleSystem.ParticleCanBeConnected=function(a,c){return 0!==(a&(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_elasticParticle))||null!==c&&0!==(c.GetGroupFlags()&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup)};
box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dab,e=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dbc,f=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dca,g=this.m_positionBuffer.data;box2d.b2Assert(a<=c);for(var h=0,k=a;k<c;k++)h|=this.m_flagsBuffer.data[k];if(h&box2d.b2ParticleSystem.k_pairFlags)for(k=0;k<this.m_contactBuffer.count;k++){var l=this.m_contactBuffer.data[k],m=l.indexA,n=l.indexB,
p=this.m_flagsBuffer.data[m],q=this.m_flagsBuffer.data[n],r=this.m_groupBuffer[m],u=this.m_groupBuffer[n];m>=a&&m<c&&n>=a&&n<c&&!((p|q)&box2d.b2ParticleFlag.b2_zombieParticle)&&(p|q)&box2d.b2ParticleSystem.k_pairFlags&&(b.IsNecessary(m)||b.IsNecessary(n))&&box2d.b2ParticleSystem.ParticleCanBeConnected(p,r)&&box2d.b2ParticleSystem.ParticleCanBeConnected(q,u)&&b.ShouldCreatePair(m,n)&&(p=this.m_pairBuffer.data[this.m_pairBuffer.Append()],p.indexA=m,p.indexB=n,p.flags=l.flags,p.strength=box2d.b2Min(r?
r.m_strength:1,u?u.m_strength:1),p.distance=box2d.b2Distance(g[m],g[n]));box2d.std_stable_sort(this.m_pairBuffer.data,0,this.m_pairBuffer.count,box2d.b2ParticleSystem.ComparePairIndices);this.m_pairBuffer.Unique(box2d.b2ParticleSystem.MatchPairIndices)}if(h&box2d.b2ParticleSystem.k_triadFlags){h=new box2d.b2VoronoiDiagram(c-a);l=0;for(k=a;k<c;k++)m=this.m_flagsBuffer.data[k],n=this.m_groupBuffer[k],m&box2d.b2ParticleFlag.b2_zombieParticle||!box2d.b2ParticleSystem.ParticleCanBeConnected(m,n)||(b.IsNecessary(k)&&
++l,h.AddGenerator(g[k],k,b.IsNecessary(k)));if(0===l)for(k=a;k<c;k++)b.IsNecessary(k);a=this.GetParticleStride();h.Generate(a/2,2*a);var t=this;h.GetNodes(function(a,c,h){var k=t.m_flagsBuffer.data[a],l=t.m_flagsBuffer.data[c],m=t.m_flagsBuffer.data[h];if((k|l|m)&box2d.b2ParticleSystem.k_triadFlags&&b.ShouldCreateTriad(a,c,h)){var n=g[a],p=g[c],q=g[h],r=box2d.b2Sub_V2_V2(n,p,d),u=box2d.b2Sub_V2_V2(p,q,e),C=box2d.b2Sub_V2_V2(q,n,f),A=box2d.b2_maxTriadDistanceSquared*t.m_squaredDiameter;if(!(box2d.b2Dot_V2_V2(r,
r)>A||box2d.b2Dot_V2_V2(u,u)>A||box2d.b2Dot_V2_V2(C,C)>A)){var K=t.m_groupBuffer[a],J=t.m_groupBuffer[c],D=t.m_groupBuffer[h],A=t.m_triadBuffer.data[t.m_triadBuffer.Append()];A.indexA=a;A.indexB=c;A.indexC=h;A.flags=k|l|m;A.strength=box2d.b2Min(box2d.b2Min(K?K.m_strength:1,J?J.m_strength:1),D?D.m_strength:1);a=(n.x+p.x+q.x)/3;c=(n.y+p.y+q.y)/3;A.pa.x=n.x-a;A.pa.y=n.y-c;A.pb.x=p.x-a;A.pb.y=p.y-c;A.pc.x=q.x-a;A.pc.y=q.y-c;A.ka=-box2d.b2Dot_V2_V2(C,r);A.kb=-box2d.b2Dot_V2_V2(r,u);A.kc=-box2d.b2Dot_V2_V2(u,
C);A.s=box2d.b2Cross_V2_V2(n,p)+box2d.b2Cross_V2_V2(p,q)+box2d.b2Cross_V2_V2(q,n)}}});box2d.std_stable_sort(this.m_triadBuffer.data,0,this.m_triadBuffer.count,box2d.b2ParticleSystem.CompareTriadIndices);this.m_triadBuffer.Unique(box2d.b2ParticleSystem.MatchTriadIndices)}};box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dab=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dbc=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dca=new box2d.b2Vec2;
box2d.b2ParticleSystem.ReactiveFilter=function(a){this.m_flagsBuffer=a};goog.inherits(box2d.b2ParticleSystem.ReactiveFilter,box2d.b2ParticleSystem.ConnectionFilter);box2d.b2ParticleSystem.ReactiveFilter.prototype.m_flagsBuffer=null;box2d.b2ParticleSystem.ReactiveFilter.prototype.IsNecessary=function(a){return 0!==(this.m_flagsBuffer[a]&box2d.b2ParticleFlag.b2_reactiveParticle)};
box2d.b2ParticleSystem.prototype.UpdatePairsAndTriadsWithReactiveParticles=function(){var a=new box2d.b2ParticleSystem.ReactiveFilter(this.m_flagsBuffer);this.UpdatePairsAndTriads(0,this.m_count,a);for(a=0;a<this.m_count;a++)this.m_flagsBuffer.data[a]&=~box2d.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~box2d.b2ParticleFlag.b2_reactiveParticle};box2d.b2ParticleSystem.ComparePairIndices=function(a,c){var b=a.indexA-c.indexA;return 0!==b?0>b:a.indexB<c.indexB};
box2d.b2ParticleSystem.MatchPairIndices=function(a,c){return a.indexA===c.indexA&&a.indexB===c.indexB};box2d.b2ParticleSystem.CompareTriadIndices=function(a,c){var b=a.indexA-c.indexA;if(0!==b)return 0>b;b=a.indexB-c.indexB;return 0!==b?0>b:a.indexC<c.indexC};box2d.b2ParticleSystem.MatchTriadIndices=function(a,c){return a.indexA===c.indexA&&a.indexB===c.indexB&&a.indexC===c.indexC};
box2d.b2ParticleSystem.InitializeParticleLists=function(a,c){for(var b=a.GetBufferIndex(),d=a.GetParticleCount(),e=0;e<d;e++){var f=c[e];f.list=f;f.next=null;f.count=1;f.index=e+b}};
box2d.b2ParticleSystem.prototype.MergeParticleListsInContact=function(a,c){for(var b=a.GetBufferIndex(),d=0;d<this.m_contactBuffer.count;d++){var e=this.m_contactBuffer.data[d],f=e.indexA,e=e.indexB;if(a.ContainsParticle(f)&&a.ContainsParticle(e)&&(f=c[f-b].list,e=c[e-b].list,f!==e)){if(f.count<e.count)var g=f,f=e,e=g;box2d.b2Assert(f.count>=e.count);box2d.b2ParticleSystem.MergeParticleLists(f,e)}}};
box2d.b2ParticleSystem.MergeParticleLists=function(a,c){box2d.b2Assert(a!==c);for(var b=c;;){b.list=a;var d=b.next;if(d)b=d;else{b.next=a.next;break}}a.next=c;a.count+=c.count;c.count=0};box2d.b2ParticleSystem.FindLongestParticleList=function(a,c){for(var b=a.GetParticleCount(),d=c[0],e=0;e<b;e++){var f=c[e];d.count<f.count&&(d=f)}return d};
box2d.b2ParticleSystem.prototype.MergeZombieParticleListNodes=function(a,c,b){a=a.GetParticleCount();for(var d=0;d<a;d++){var e=c[d];e!==b&&this.m_flagsBuffer.data[e.index]&box2d.b2ParticleFlag.b2_zombieParticle&&box2d.b2ParticleSystem.MergeParticleListAndNode(b,e)}};box2d.b2ParticleSystem.MergeParticleListAndNode=function(a,c){box2d.b2Assert(c!==a);box2d.b2Assert(c.list===c);box2d.b2Assert(1===c.count);c.list=a;c.next=a.next;a.next=c;a.count++;c.count=0};
box2d.b2ParticleSystem.prototype.CreateParticleGroupsFromParticleList=function(a,c,b){var d=a.GetParticleCount(),e=new box2d.b2ParticleGroupDef;e.groupFlags=a.GetGroupFlags();e.userData=a.GetUserData();for(a=0;a<d;a++){var f=c[a];if(f.count&&f!==b){box2d.b2Assert(f.list===f);for(var g=this.CreateParticleGroup(e);f;f=f.next){var h=f.index;box2d.b2Assert(!(this.m_flagsBuffer.data[h]&box2d.b2ParticleFlag.b2_zombieParticle));var k=this.CloneParticle(h,g);this.m_flagsBuffer.data[h]|=box2d.b2ParticleFlag.b2_zombieParticle;
f.index=k}}}};
box2d.b2ParticleSystem.prototype.UpdatePairsAndTriadsWithParticleList=function(a,c){for(var b=a.GetBufferIndex(),d=0;d<this.m_pairBuffer.count;d++){var e=this.m_pairBuffer.data[d],f=e.indexA,g=e.indexB;a.ContainsParticle(f)&&(e.indexA=c[f-b].index);a.ContainsParticle(g)&&(e.indexB=c[g-b].index)}for(d=0;d<this.m_triadBuffer.count;d++){var e=this.m_triadBuffer.data[d],f=e.indexA,g=e.indexB,h=e.indexC;a.ContainsParticle(f)&&(e.indexA=c[f-b].index);a.ContainsParticle(g)&&(e.indexB=c[g-b].index);a.ContainsParticle(h)&&
(e.indexC=c[h-b].index)}};
box2d.b2ParticleSystem.prototype.ComputeDepth=function(){for(var a=[],c=0,b=0;b<this.m_contactBuffer.count;b++){var d=this.m_contactBuffer.data[b],e=d.indexA,f=d.indexB,g=this.m_groupBuffer[e],h=this.m_groupBuffer[f];g&&g===h&&g.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(a[c++]=d)}g=[];h=0;for(b=this.m_groupList;b;b=b.GetNext())if(b.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)for(g[h++]=b,this.SetGroupFlags(b,b.m_groupFlags&~box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),
f=b.m_firstIndex;f<b.m_lastIndex;f++)this.m_accumulationBuffer[f]=0;for(b=0;b<c;b++){var d=a[b],e=d.indexA,f=d.indexB,k=d.weight;this.m_accumulationBuffer[e]+=k;this.m_accumulationBuffer[f]+=k}box2d.b2Assert(null!==this.m_depthBuffer);for(f=0;f<h;f++)for(b=g[f],f=b.m_firstIndex;f<b.m_lastIndex;f++)k=this.m_accumulationBuffer[f],this.m_depthBuffer[f]=.8>k?0:box2d.b2_maxFloat;for(var k=box2d.b2Sqrt(this.m_count)>>0,l=0;l<k;l++){for(var m=!1,b=0;b<c;b++){var d=a[b],e=d.indexA,f=d.indexB,n=1-d.weight,
d=this.m_depthBuffer[e],p=this.m_depthBuffer[f],q=p+n,n=d+n;d>q&&(this.m_depthBuffer[e]=q,m=!0);p>n&&(this.m_depthBuffer[f]=n,m=!0)}if(!m)break}for(f=0;f<h;f++)for(b=g[f],f=b.m_firstIndex;f<b.m_lastIndex;f++)this.m_depthBuffer[f]=this.m_depthBuffer[f]<box2d.b2_maxFloat?this.m_depthBuffer[f]*this.m_particleDiameter:0};
box2d.b2ParticleSystem.prototype.GetInsideBoundsEnumerator=function(a){var c=box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*a.lowerBound.x-1,this.m_inverseDiameter*a.lowerBound.y-1);a=box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*a.upperBound.x+1,this.m_inverseDiameter*a.upperBound.y+1);var b=this.m_proxyBuffer.count,d=box2d.std_lower_bound(this.m_proxyBuffer.data,0,b,c,box2d.b2ParticleSystem.Proxy.CompareProxyTag),e=box2d.std_upper_bound(this.m_proxyBuffer.data,0,b,a,box2d.b2ParticleSystem.Proxy.CompareTagProxy);
box2d.b2Assert(0<=d);box2d.b2Assert(d<=e);box2d.b2Assert(e<=b);return new box2d.b2ParticleSystem.InsideBoundsEnumerator(this,c,a,d,e)};box2d.b2ParticleSystem.prototype.UpdateAllParticleFlags=function(){for(var a=this.m_allParticleFlags=0;a<this.m_count;a++)this.m_allParticleFlags|=this.m_flagsBuffer.data[a];this.m_needsUpdateAllParticleFlags=!1};
box2d.b2ParticleSystem.prototype.UpdateAllGroupFlags=function(){this.m_allGroupFlags=0;for(var a=this.m_groupList;a;a=a.GetNext())this.m_allGroupFlags|=a.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1};
box2d.b2ParticleSystem.prototype.AddContact=function(a,c,b){var d=box2d.b2ParticleSystem.prototype.AddContact.s_d,e=this.m_positionBuffer.data;box2d.b2Assert(b===this.m_contactBuffer);b=box2d.b2Sub_V2_V2(e[c],e[a],d);d=box2d.b2Dot_V2_V2(b,b);if(d<this.m_squaredDiameter){e=box2d.b2InvSqrt(d);isFinite(e)||(e=1.9817753699999998E19);var f=this.m_contactBuffer.data[this.m_contactBuffer.Append()];f.indexA=a;f.indexB=c;f.flags=this.m_flagsBuffer.data[a]|this.m_flagsBuffer.data[c];f.weight=1-d*e*this.m_inverseDiameter;
box2d.b2Mul_S_V2(e,b,f.normal)}};box2d.b2ParticleSystem.prototype.AddContact.s_d=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.FindContacts_Reference=function(a){box2d.b2Assert(a===this.m_contactBuffer);a=this.m_proxyBuffer.count;for(var c=this.m_contactBuffer.count=0,b=0;c<a;c++){for(var d=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[c].tag,1,0),e=c+1;e<a&&!(d<this.m_proxyBuffer.data[e].tag);e++)this.AddContact(this.m_proxyBuffer.data[c].index,this.m_proxyBuffer.data[e].index,this.m_contactBuffer);for(e=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[c].tag,
-1,1);b<a&&!(e<=this.m_proxyBuffer.data[b].tag);b++);d=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[c].tag,1,1);for(e=b;e<a&&!(d<this.m_proxyBuffer.data[e].tag);e++)this.AddContact(this.m_proxyBuffer.data[c].index,this.m_proxyBuffer.data[e].index,this.m_contactBuffer)}};box2d.b2ParticleSystem.prototype.FindContacts=function(a){this.FindContacts_Reference(a)};
box2d.b2ParticleSystem.prototype.UpdateProxies_Reference=function(a){box2d.b2Assert(a===this.m_proxyBuffer);a=this.m_positionBuffer.data;for(var c=this.m_inverseDiameter,b=0;b<this.m_proxyBuffer.count;++b){var d=this.m_proxyBuffer.data[b],e=a[d.index];d.tag=box2d.b2ParticleSystem.computeTag(c*e.x,c*e.y)}};box2d.b2ParticleSystem.prototype.UpdateProxies=function(a){this.UpdateProxies_Reference(a)};
box2d.b2ParticleSystem.prototype.SortProxies=function(a){box2d.b2Assert(a===this.m_proxyBuffer);box2d.std_sort(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,box2d.b2ParticleSystem.Proxy.CompareProxyProxy)};
box2d.b2ParticleSystem.prototype.FilterContacts=function(a){var c=this.GetParticleContactFilter();if(null!==c){box2d.b2Assert(a===this.m_contactBuffer);var b=this;this.m_contactBuffer.RemoveIf(function(a){return a.flags&box2d.b2ParticleFlag.b2_particleContactFilterParticle&&!c.ShouldCollideParticleParticle(b,a.indexA,a.indexB)})}};box2d.b2ParticleSystem.prototype.NotifyContactListenerPreContact=function(a){if(null!==this.GetParticleContactListener()){debugger;a.Initialize(this.m_contactBuffer,this.m_flagsBuffer)}};
box2d.b2ParticleSystem.prototype.NotifyContactListenerPostContact=function(a){a=this.GetParticleContactListener();if(null!==a){debugger;for(var c=0;c<this.m_contactBuffer.count;++c)a.BeginContactParticleParticle(this,this.m_contactBuffer.data[c])}};box2d.b2ParticleSystem.b2ParticleContactIsZombie=function(a){return(a.flags&box2d.b2ParticleFlag.b2_zombieParticle)===box2d.b2ParticleFlag.b2_zombieParticle};
box2d.b2ParticleSystem.prototype.UpdateContacts=function(a){this.UpdateProxies(this.m_proxyBuffer);this.SortProxies(this.m_proxyBuffer);var c=new box2d.b2ParticleSystem.b2ParticlePairSet;this.NotifyContactListenerPreContact(c);this.FindContacts(this.m_contactBuffer);this.FilterContacts(this.m_contactBuffer);this.NotifyContactListenerPostContact(c);a&&this.m_contactBuffer.RemoveIf(box2d.b2ParticleSystem.b2ParticleContactIsZombie)};
box2d.b2ParticleSystem.prototype.NotifyBodyContactListenerPreContact=function(a){if(null!==this.GetFixtureContactListener()){debugger;a.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer)}};box2d.b2ParticleSystem.prototype.NotifyBodyContactListenerPostContact=function(a){a=this.GetFixtureContactListener();if(null!==a){debugger;for(var c=0;c<this.m_bodyContactBuffer.count;c++){var b=this.m_bodyContactBuffer.data[c];box2d.b2Assert(null!==b);a.BeginContactFixtureParticle(this,b)}}};
box2d.b2ParticleSystem.UpdateBodyContactsCallback=function(a,c){box2d.b2FixtureParticleQueryCallback.call(this,a);this.m_contactFilter=c};goog.inherits(box2d.b2ParticleSystem.UpdateBodyContactsCallback,box2d.b2FixtureParticleQueryCallback);
box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle=function(a,c,b){return this.m_contactFilter&&this.m_system.GetFlagsBuffer()[b]&box2d.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_contactFilter.ShouldCollideFixtureParticle(a,this.m_system,b):!0};goog.exportSymbol("box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle",box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle);
box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle=function(a,c,b){var d=box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_rp,e=this.m_system.m_positionBuffer.data[b],f=box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_n;c=a.ComputeDistance(e,f,c);if(c<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(a,this.m_system,b)){var g=a.GetBody(),h=g.GetWorldCenter(),k=g.GetMass(),
l=g.GetInertia()-k*g.GetLocalCenter().LengthSquared(),k=0<k?1/k:0,l=0<l?1/l:0,m=this.m_system.m_flagsBuffer.data[b]&box2d.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),d=box2d.b2Sub_V2_V2(e,h,d),d=box2d.b2Cross_V2_V2(d,f),d=m+k+l*d*d,e=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];e.index=b;e.body=g;e.fixture=a;e.weight=1-c*this.m_system.m_inverseDiameter;e.normal.Copy(f.SelfNeg());e.mass=0<d?1/d:0;this.m_system.DetectStuckParticle(b)}};
goog.exportSymbol("box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle",box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle);box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_n=new box2d.b2Vec2;box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_rp=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.UpdateBodyContacts=function(){var a=box2d.b2ParticleSystem.prototype.UpdateBodyContacts.s_aabb,c=new box2d.b2ParticleSystem.FixtureParticleSet;this.NotifyBodyContactListenerPreContact(c);if(0<this.m_stuckThreshold)for(var b=this.GetParticleCount(),d=0;d<b;d++)this.m_bodyContactCountBuffer.data[d]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[d]+1&&(this.m_consecutiveContactStepsBuffer.data[d]=0);this.m_bodyContactBuffer.SetCount(0);this.m_stuckParticleBuffer.SetCount(0);
this.ComputeAABB(a);b=new box2d.b2ParticleSystem.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(b,a);this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts();this.NotifyBodyContactListenerPostContact(c)};box2d.b2ParticleSystem.prototype.UpdateBodyContacts.s_aabb=new box2d.b2AABB;
box2d.b2ParticleSystem.prototype.Solve=function(a){var c=box2d.b2ParticleSystem.prototype.Solve.s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(a),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<a.particleIterations;this.m_iterationIndex++){++this.m_timestamp;
var b=c.Copy(a);b.dt/=a.particleIterations;b.inv_dt*=a.particleIterations;this.UpdateContacts(!1);this.UpdateBodyContacts();this.ComputeWeight();this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth();this.m_allParticleFlags&box2d.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles();this.m_hasForce&&this.SolveForce(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous();this.m_allParticleFlags&
box2d.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(b);this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing();this.SolveGravity(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_staticPressureParticle&&
this.SolveStaticPressure(b);this.SolvePressure(b);this.SolveDamping(b);this.m_allParticleFlags&box2d.b2ParticleSystem.k_extraDampingFlags&&this.SolveExtraDamping();this.m_allParticleFlags&box2d.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_springParticle&&this.SolveSpring(b);this.LimitVelocity(b);this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping();this.m_allParticleFlags&box2d.b2ParticleFlag.b2_barrierParticle&&
this.SolveBarrier(b);this.SolveCollision(b);this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(b);this.m_allParticleFlags&box2d.b2ParticleFlag.b2_wallParticle&&this.SolveWall();for(var d=0;d<this.m_count;d++)this.m_positionBuffer.data[d].SelfMulAdd(b.dt,this.m_velocityBuffer.data[d])}};goog.exportProperty(box2d.b2ParticleSystem.prototype,"Solve",box2d.b2ParticleSystem.prototype.Solve);box2d.b2ParticleSystem.prototype.Solve.s_subStep=new box2d.b2TimeStep;
box2d.b2ParticleSystem.SolveCollisionCallback=function(a,c){box2d.b2FixtureParticleQueryCallback.call(this,a);this.m_step=c};goog.inherits(box2d.b2ParticleSystem.SolveCollisionCallback,box2d.b2FixtureParticleQueryCallback);
box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle=function(a,c,b){var d=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p1,e=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_output,f=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_input,g=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p,h=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_v,
k=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_f,l=a.GetBody(),m=this.m_system.m_positionBuffer.data[b],n=this.m_system.m_velocityBuffer.data[b];0===this.m_system.m_iterationIndex?(d=box2d.b2MulT_X_V2(l.m_xf0,m,d),a.GetShape().GetType()===box2d.b2ShapeType.e_circleShape&&(d.SelfSub(l.GetLocalCenter()),box2d.b2Mul_R_V2(l.m_xf0.q,d,d),box2d.b2MulT_R_V2(l.m_xf.q,d,d),d.SelfAdd(l.GetLocalCenter())),box2d.b2Mul_X_V2(l.m_xf,d,f.p1)):f.p1.Copy(m);box2d.b2AddMul_V2_S_V2(m,
this.m_step.dt,n,f.p2);f.maxFraction=1;a.RayCast(e,f,c)&&(a=e.normal,g.x=(1-e.fraction)*f.p1.x+e.fraction*f.p2.x+box2d.b2_linearSlop*a.x,g.y=(1-e.fraction)*f.p1.y+e.fraction*f.p2.y+box2d.b2_linearSlop*a.y,h.x=this.m_step.inv_dt*(g.x-m.x),h.y=this.m_step.inv_dt*(g.y-m.y),this.m_system.m_velocityBuffer.data[b].Copy(h),k.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(n.x-h.x),k.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(n.y-h.y),this.m_system.ParticleApplyForce(b,k))};
goog.exportSymbol("box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle",box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle);box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p1=new box2d.b2Vec2;box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_output=new box2d.b2RayCastOutput;box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_input=new box2d.b2RayCastInput;
box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p=new box2d.b2Vec2;box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_f=new box2d.b2Vec2;box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle=function(a,c){return!1};goog.exportSymbol("box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle",box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle);
box2d.b2ParticleSystem.prototype.SolveCollision=function(a){var c=this.m_positionBuffer.data,b=this.m_velocityBuffer.data,d=box2d.b2ParticleSystem.prototype.SolveCollision.s_aabb;d.lowerBound.x=+box2d.b2_maxFloat;d.lowerBound.y=+box2d.b2_maxFloat;d.upperBound.x=-box2d.b2_maxFloat;d.upperBound.y=-box2d.b2_maxFloat;for(var e=0;e<this.m_count;e++){var f=b[e],g=c[e],h=g.x+a.dt*f.x,f=g.y+a.dt*f.y;d.lowerBound.x=box2d.b2Min(d.lowerBound.x,box2d.b2Min(g.x,h));d.lowerBound.y=box2d.b2Min(d.lowerBound.y,box2d.b2Min(g.y,
f));d.upperBound.x=box2d.b2Max(d.upperBound.x,box2d.b2Max(g.x,h));d.upperBound.y=box2d.b2Max(d.upperBound.y,box2d.b2Max(g.y,f))}a=new box2d.b2ParticleSystem.SolveCollisionCallback(this,a);this.m_world.QueryAABB(a,d)};box2d.b2ParticleSystem.prototype.SolveCollision.s_aabb=new box2d.b2AABB;
box2d.b2ParticleSystem.prototype.LimitVelocity=function(a){var c=this.m_velocityBuffer.data;a=this.GetCriticalVelocitySquared(a);for(var b=0;b<this.m_count;b++){var d=c[b],e=box2d.b2Dot_V2_V2(d,d);e>a&&d.SelfMul(box2d.b2Sqrt(a/e))}};box2d.b2ParticleSystem.prototype.SolveGravity=function(a){var c=box2d.b2ParticleSystem.prototype.SolveGravity.s_gravity,b=this.m_velocityBuffer.data;a=box2d.b2Mul_S_V2(a.dt*this.m_def.gravityScale,this.m_world.GetGravity(),c);for(c=0;c<this.m_count;c++)b[c].SelfAdd(a)};
box2d.b2ParticleSystem.prototype.SolveGravity.s_gravity=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveBarrier=function(a){for(var c=box2d.b2ParticleSystem.prototype.SolveBarrier.s_aabb,b=box2d.b2ParticleSystem.prototype.SolveBarrier.s_va,d=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vb,e=box2d.b2ParticleSystem.prototype.SolveBarrier.s_pba,f=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vba,g=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vc,h=box2d.b2ParticleSystem.prototype.SolveBarrier.s_pca,k=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vca,l=box2d.b2ParticleSystem.prototype.SolveBarrier.s_qba,
m=box2d.b2ParticleSystem.prototype.SolveBarrier.s_qca,n=box2d.b2ParticleSystem.prototype.SolveBarrier.s_dv,p=box2d.b2ParticleSystem.prototype.SolveBarrier.s_f,q=this.m_positionBuffer.data,r=this.m_velocityBuffer.data,u=0;u<this.m_count;u++)0!==(this.m_flagsBuffer.data[u]&box2d.b2ParticleSystem.k_barrierWallFlags)&&r[u].SetZero();for(var u=box2d.b2_barrierCollisionTime*a.dt,t=this.GetParticleMass(),w=0;w<this.m_pairBuffer.count;w++){var x=this.m_pairBuffer.data[w];if(x.flags&box2d.b2ParticleFlag.b2_barrierParticle){var v=
x.indexA,y=x.indexB,x=q[v],z=q[y],B=c;box2d.b2Min_V2_V2(x,z,B.lowerBound);box2d.b2Max_V2_V2(x,z,B.upperBound);for(var E=this.m_groupBuffer[v],F=this.m_groupBuffer[y],v=this.GetLinearVelocity(E,v,x,b),y=this.GetLinearVelocity(F,y,z,d),z=box2d.b2Sub_V2_V2(z,x,e),y=box2d.b2Sub_V2_V2(y,v,f),B=this.GetInsideBoundsEnumerator(B),G;0<=(G=B.GetNext());){var H=q[G],I=this.m_groupBuffer[G];if(E!==I&&F!==I){var C=this.GetLinearVelocity(I,G,H,g),A=box2d.b2Sub_V2_V2(H,x,h),K=box2d.b2Sub_V2_V2(C,v,k),J=box2d.b2Cross_V2_V2(y,
K),D=box2d.b2Cross_V2_V2(z,K)-box2d.b2Cross_V2_V2(A,y),L=box2d.b2Cross_V2_V2(z,A),M=l,N=m;if(0===J){if(0===D)continue;L=-L/D;if(!(0<=L&&L<u))continue;box2d.b2AddMul_V2_S_V2(z,L,y,M);box2d.b2AddMul_V2_S_V2(A,L,K,N);D=box2d.b2Dot_V2_V2(M,N)/box2d.b2Dot_V2_V2(M,M);if(!(0<=D&&1>=D))continue}else{L=D*D-4*L*J;if(0>L)continue;var O=box2d.b2Sqrt(L),L=(-D-O)/(2*J),J=(-D+O)/(2*J);L>J&&(D=L,L=J,J=D);box2d.b2AddMul_V2_S_V2(z,L,y,M);box2d.b2AddMul_V2_S_V2(A,L,K,N);D=box2d.b2Dot_V2_V2(M,N)/box2d.b2Dot_V2_V2(M,
M);if(!(0<=L&&L<u&&0<=D&&1>=D)){L=J;if(!(0<=L&&L<u))continue;box2d.b2AddMul_V2_S_V2(z,L,y,M);box2d.b2AddMul_V2_S_V2(A,L,K,N);D=box2d.b2Dot_V2_V2(M,N)/box2d.b2Dot_V2_V2(M,M);if(!(0<=D&&1>=D))continue}}A=n;A.x=v.x+D*y.x-C.x;A.y=v.y+D*y.y-C.y;C=box2d.b2Mul_S_V2(t,A,p);this.IsRigidGroup(I)?(t=I.GetMass(),A=I.GetInertia(),0<t&&I.m_linearVelocity.SelfMulAdd(1/t,C),0<A&&(I.m_angularVelocity+=box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(H,I.GetCenter(),box2d.b2Vec2.s_t0),C)/A)):r[G].SelfAdd(A);this.ParticleApplyForce(G,
C.SelfMul(-a.inv_dt))}}}}};box2d.b2ParticleSystem.prototype.SolveBarrier.s_aabb=new box2d.b2AABB;box2d.b2ParticleSystem.prototype.SolveBarrier.s_va=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_vb=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_pba=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_vba=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_vc=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_pca=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveBarrier.s_vca=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_qba=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_qca=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_dv=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveBarrier.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveStaticPressure=function(a){this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);var c=this.GetCriticalPressure(a);a=this.m_def.staticPressureStrength*c;for(var c=box2d.b2_maxParticlePressure*c,b=this.m_def.staticPressureRelaxation,d=0;d<this.m_def.staticPressureIterations;d++){for(var e=0;e<this.m_count;e++)this.m_accumulationBuffer[e]=0;for(e=0;e<this.m_contactBuffer.count;e++){var f=this.m_contactBuffer.data[e];if(f.flags&box2d.b2ParticleFlag.b2_staticPressureParticle){var g=
f.indexA,h=f.indexB,f=f.weight;this.m_accumulationBuffer[g]+=f*this.m_staticPressureBuffer[h];this.m_accumulationBuffer[h]+=f*this.m_staticPressureBuffer[g]}}for(e=0;e<this.m_count;e++)f=this.m_weightBuffer[e],this.m_staticPressureBuffer[e]=this.m_flagsBuffer.data[e]&box2d.b2ParticleFlag.b2_staticPressureParticle?box2d.b2Clamp((this.m_accumulationBuffer[e]+a*(f-box2d.b2_minParticleWeight))/(f+b),0,c):0}};
box2d.b2ParticleSystem.prototype.ComputeWeight=function(){for(var a=0;a<this.m_count;a++)this.m_weightBuffer[a]=0;for(a=0;a<this.m_bodyContactBuffer.count;a++){var c=this.m_bodyContactBuffer.data[a],b=c.index,c=c.weight;this.m_weightBuffer[b]+=c}for(a=0;a<this.m_contactBuffer.count;a++){var c=this.m_contactBuffer.data[a],b=c.indexA,d=c.indexB,c=c.weight;this.m_weightBuffer[b]+=c;this.m_weightBuffer[d]+=c}};
box2d.b2ParticleSystem.prototype.SolvePressure=function(a){for(var c=box2d.b2ParticleSystem.prototype.SolvePressure.s_f,b=this.m_positionBuffer.data,d=this.m_velocityBuffer.data,e=this.GetCriticalPressure(a),f=this.m_def.pressureStrength*e,g=box2d.b2_maxParticlePressure*e,h=0;h<this.m_count;h++){var e=this.m_weightBuffer[h],k=f*box2d.b2Max(0,e-box2d.b2_minParticleWeight);this.m_accumulationBuffer[h]=box2d.b2Min(k,g)}if(this.m_allParticleFlags&box2d.b2ParticleSystem.k_noPressureFlags)for(h=0;h<this.m_count;h++)this.m_flagsBuffer.data[h]&
box2d.b2ParticleSystem.k_noPressureFlags&&(this.m_accumulationBuffer[h]=0);if(this.m_allParticleFlags&box2d.b2ParticleFlag.b2_staticPressureParticle)for(box2d.b2Assert(null!==this.m_staticPressureBuffer),h=0;h<this.m_count;h++)this.m_flagsBuffer.data[h]&box2d.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[h]+=this.m_staticPressureBuffer[h]);a=a.dt/(this.m_def.density*this.m_particleDiameter);g=this.GetParticleInvMass();for(h=0;h<this.m_bodyContactBuffer.count;h++){var k=this.m_bodyContactBuffer.data[h],
l=k.index,m=k.body,e=k.weight,n=k.mass,p=k.normal,q=b[l],k=this.m_accumulationBuffer[l]+f*e,e=box2d.b2Mul_S_V2(a*e*n*k,p,c);d[l].SelfMulSub(g,e);m.ApplyLinearImpulse(e,q,!0)}for(h=0;h<this.m_contactBuffer.count;h++)k=this.m_contactBuffer.data[h],l=k.indexA,m=k.indexB,e=k.weight,p=k.normal,k=this.m_accumulationBuffer[l]+this.m_accumulationBuffer[m],e=box2d.b2Mul_S_V2(a*e*k,p,c),d[l].SelfSub(e),d[m].SelfAdd(e)};box2d.b2ParticleSystem.prototype.SolvePressure.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveDamping=function(a){var c=box2d.b2ParticleSystem.prototype.SolveDamping.s_v,b=box2d.b2ParticleSystem.prototype.SolveDamping.s_f,d=this.m_positionBuffer.data,e=this.m_velocityBuffer.data,f=this.m_def.dampingStrength;a=1/this.GetCriticalVelocity(a);for(var g=this.GetParticleInvMass(),h=0;h<this.m_bodyContactBuffer.count;h++){var k=this.m_bodyContactBuffer.data[h],l=k.index,m=k.body,n=k.weight,p=k.mass,q=k.normal,k=d[l],r=box2d.b2Sub_V2_V2(m.GetLinearVelocityFromWorldPoint(k,
box2d.b2Vec2.s_t0),e[l],c),r=box2d.b2Dot_V2_V2(r,q);0>r&&(n=box2d.b2Max(f*n,box2d.b2Min(-a*r,.5)),p=box2d.b2Mul_S_V2(n*p*r,q,b),e[l].SelfMulAdd(g,p),m.ApplyLinearImpulse(p.SelfNeg(),k,!0))}for(h=0;h<this.m_contactBuffer.count;h++)k=this.m_contactBuffer.data[h],l=k.indexA,m=k.indexB,n=k.weight,q=k.normal,r=box2d.b2Sub_V2_V2(e[m],e[l],c),r=box2d.b2Dot_V2_V2(r,q),0>r&&(n=box2d.b2Max(f*n,box2d.b2Min(-a*r,.5)),p=box2d.b2Mul_S_V2(n*r,q,b),e[l].SelfAdd(p),e[m].SelfSub(p))};
box2d.b2ParticleSystem.prototype.SolveDamping.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveDamping.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveRigidDamping=function(){for(var a=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t0,c=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t1,b=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_p,d=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_v,e=[0],f=[0],g=[0],h=[0],k=[0],l=[0],m=this.m_positionBuffer.data,n=this.m_def.dampingStrength,p=0;p<this.m_bodyContactBuffer.count;p++){var q=this.m_bodyContactBuffer.data[p],r=q.index,u=this.m_groupBuffer[r];
if(this.IsRigidGroup(u)){var t=q.body,w=q.normal,x=q.weight,q=m[r],v=box2d.b2Sub_V2_V2(t.GetLinearVelocityFromWorldPoint(q,a),u.GetLinearVelocityFromWorldPoint(q,c),d),v=box2d.b2Dot_V2_V2(v,w);0>v&&(this.InitDampingParameterWithRigidGroupOrParticle(e,f,g,!0,u,r,q,w),this.InitDampingParameter(h,k,l,t.GetMass(),t.GetInertia()-t.GetMass()*t.GetLocalCenter().LengthSquared(),t.GetWorldCenter(),q,w),x=n*box2d.b2Min(x,1)*this.ComputeDampingImpulse(e[0],f[0],g[0],h[0],k[0],l[0],v),this.ApplyDamping(e[0],
f[0],g[0],!0,u,r,x,w),t.ApplyLinearImpulse(box2d.b2Mul_S_V2(-x,w,box2d.b2Vec2.s_t0),q,!0))}}for(p=0;p<this.m_contactBuffer.count;p++){var q=this.m_contactBuffer.data[p],r=q.indexA,t=q.indexB,w=q.normal,x=q.weight,u=this.m_groupBuffer[r],y=this.m_groupBuffer[t],z=this.IsRigidGroup(u),B=this.IsRigidGroup(y);u!==y&&(z||B)&&(q=box2d.b2Mid_V2_V2(m[r],m[t],b),v=box2d.b2Sub_V2_V2(this.GetLinearVelocity(y,t,q,a),this.GetLinearVelocity(u,r,q,c),d),v=box2d.b2Dot_V2_V2(v,w),0>v&&(this.InitDampingParameterWithRigidGroupOrParticle(e,
f,g,z,u,r,q,w),this.InitDampingParameterWithRigidGroupOrParticle(h,k,l,B,y,t,q,w),x=n*x*this.ComputeDampingImpulse(e[0],f[0],g[0],h[0],k[0],l[0],v),this.ApplyDamping(e[0],f[0],g[0],z,u,r,x,w),this.ApplyDamping(h[0],k[0],l[0],B,y,t,-x,w)))}};box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t0=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t1=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_p=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_v=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveExtraDamping=function(){for(var a=box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_v,c=box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_f,b=this.m_velocityBuffer.data,d=this.m_positionBuffer.data,e=this.GetParticleInvMass(),f=0;f<this.m_bodyContactBuffer.count;f++){var g=this.m_bodyContactBuffer.data[f],h=g.index;if(this.m_flagsBuffer.data[h]&box2d.b2ParticleSystem.k_extraDampingFlags){var k=g.body,l=g.mass,m=g.normal,g=d[h],n=box2d.b2Sub_V2_V2(k.GetLinearVelocityFromWorldPoint(g,
box2d.b2Vec2.s_t0),b[h],a),n=box2d.b2Dot_V2_V2(n,m);0>n&&(l=box2d.b2Mul_S_V2(.5*l*n,m,c),b[h].SelfMulAdd(e,l),k.ApplyLinearImpulse(l.SelfNeg(),g,!0))}}};box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_f=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveWall=function(){for(var a=this.m_velocityBuffer.data,c=0;c<this.m_count;c++)this.m_flagsBuffer.data[c]&box2d.b2ParticleFlag.b2_wallParticle&&a[c].SetZero()};
box2d.b2ParticleSystem.prototype.SolveRigid=function(a){for(var c=box2d.b2ParticleSystem.prototype.SolveRigid.s_position,b=box2d.b2ParticleSystem.prototype.SolveRigid.s_rotation,d=box2d.b2ParticleSystem.prototype.SolveRigid.s_transform,e=box2d.b2ParticleSystem.prototype.SolveRigid.s_velocityTransform,f=this.m_positionBuffer.data,g=this.m_velocityBuffer.data,h=this.m_groupList;h;h=h.GetNext())if(h.m_groupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup){h.UpdateStatistics();var k=b;k.SetAngle(a.dt*
h.m_angularVelocity);var l=box2d.b2Add_V2_V2(h.m_center,box2d.b2Sub_V2_V2(box2d.b2Mul_S_V2(a.dt,h.m_linearVelocity,box2d.b2Vec2.s_t0),box2d.b2Mul_R_V2(k,h.m_center,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),c),m=d;m.SetPositionRotation(l,k);box2d.b2Mul_X_X(m,h.m_transform,h.m_transform);k=e;k.p.x=a.inv_dt*m.p.x;k.p.y=a.inv_dt*m.p.y;k.q.s=a.inv_dt*m.q.s;k.q.c=a.inv_dt*(m.q.c-1);for(m=h.m_firstIndex;m<h.m_lastIndex;m++)box2d.b2Mul_X_V2(k,f[m],g[m])}};
box2d.b2ParticleSystem.prototype.SolveRigid.s_position=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveRigid.s_rotation=new box2d.b2Rot;box2d.b2ParticleSystem.prototype.SolveRigid.s_transform=new box2d.b2Transform;box2d.b2ParticleSystem.prototype.SolveRigid.s_velocityTransform=new box2d.b2Transform;
box2d.b2ParticleSystem.prototype.SolveElastic=function(a){for(var c=box2d.b2ParticleSystem.prototype.SolveElastic.s_pa,b=box2d.b2ParticleSystem.prototype.SolveElastic.s_pb,d=box2d.b2ParticleSystem.prototype.SolveElastic.s_pc,e=box2d.b2ParticleSystem.prototype.SolveElastic.s_r,f=box2d.b2ParticleSystem.prototype.SolveElastic.s_t0,g=this.m_positionBuffer.data,h=this.m_velocityBuffer.data,k=a.inv_dt*this.m_def.elasticStrength,l=0;l<this.m_triadBuffer.count;l++){var m=this.m_triadBuffer.data[l];if(m.flags&
box2d.b2ParticleFlag.b2_elasticParticle){var n=m.indexA,p=m.indexB,q=m.indexC,r=m.pa,u=m.pb,t=m.pc,w=c.Copy(g[n]),x=b.Copy(g[p]),v=d.Copy(g[q]),n=h[n],p=h[p],q=h[q];w.SelfMulAdd(a.dt,n);x.SelfMulAdd(a.dt,p);v.SelfMulAdd(a.dt,q);var y=(w.x+x.x+v.x)/3,z=(w.y+x.y+v.y)/3;w.x-=y;w.y-=z;x.x-=y;x.y-=z;v.x-=y;v.y-=z;y=e;y.s=box2d.b2Cross_V2_V2(r,w)+box2d.b2Cross_V2_V2(u,x)+box2d.b2Cross_V2_V2(t,v);y.c=box2d.b2Dot_V2_V2(r,w)+box2d.b2Dot_V2_V2(u,x)+box2d.b2Dot_V2_V2(t,v);z=box2d.b2InvSqrt(y.s*y.s+y.c*y.c);
isFinite(z)||(z=1.9817753699999998E19);y.s*=z;y.c*=z;y.angle=Math.atan2(y.s,y.c);m=k*m.strength;box2d.b2Mul_R_V2(y,r,f);box2d.b2Sub_V2_V2(f,w,f);box2d.b2Mul_S_V2(m,f,f);n.SelfAdd(f);box2d.b2Mul_R_V2(y,u,f);box2d.b2Sub_V2_V2(f,x,f);box2d.b2Mul_S_V2(m,f,f);p.SelfAdd(f);box2d.b2Mul_R_V2(y,t,f);box2d.b2Sub_V2_V2(f,v,f);box2d.b2Mul_S_V2(m,f,f);q.SelfAdd(f)}}};box2d.b2ParticleSystem.prototype.SolveElastic.s_pa=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveElastic.s_pb=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveElastic.s_pc=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveElastic.s_r=new box2d.b2Rot;box2d.b2ParticleSystem.prototype.SolveElastic.s_t0=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveSpring=function(a){for(var c=box2d.b2ParticleSystem.prototype.SolveSpring.s_pa,b=box2d.b2ParticleSystem.prototype.SolveSpring.s_pb,d=box2d.b2ParticleSystem.prototype.SolveSpring.s_d,e=box2d.b2ParticleSystem.prototype.SolveSpring.s_f,f=this.m_positionBuffer.data,g=this.m_velocityBuffer.data,h=a.inv_dt*this.m_def.springStrength,k=0;k<this.m_pairBuffer.count;k++){var l=this.m_pairBuffer.data[k];if(l.flags&box2d.b2ParticleFlag.b2_springParticle){var m=l.indexA,n=
l.indexB,p=c.Copy(f[m]),q=b.Copy(f[n]),m=g[m],n=g[n];p.SelfMulAdd(a.dt,m);q.SelfMulAdd(a.dt,n);var p=box2d.b2Sub_V2_V2(q,p,d),q=l.distance,r=p.Length(),l=box2d.b2Mul_S_V2(h*l.strength*(q-r)/r,p,e);m.SelfSub(l);n.SelfAdd(l)}}};box2d.b2ParticleSystem.prototype.SolveSpring.s_pa=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveSpring.s_pb=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveSpring.s_d=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveSpring.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveTensile=function(a){var c=box2d.b2ParticleSystem.prototype.SolveTensile.s_weightedNormal,b=box2d.b2ParticleSystem.prototype.SolveTensile.s_s,d=box2d.b2ParticleSystem.prototype.SolveTensile.s_f,e=this.m_velocityBuffer.data;box2d.b2Assert(null!==this.m_accumulation2Buffer);for(var f=0;f<this.m_count;f++)this.m_accumulation2Buffer[f]=box2d.b2Vec2_zero.Clone(),this.m_accumulation2Buffer[f].SetZero();for(f=0;f<this.m_contactBuffer.count;f++){var g=this.m_contactBuffer.data[f];
if(g.flags&box2d.b2ParticleFlag.b2_tensileParticle){var h=g.indexA,k=g.indexB,l=g.weight,g=g.normal,l=box2d.b2Mul_S_V2((1-l)*l,g,c);this.m_accumulation2Buffer[h].SelfSub(l);this.m_accumulation2Buffer[k].SelfAdd(l)}}f=this.GetCriticalVelocity(a);a=this.m_def.surfaceTensionPressureStrength*f;for(var c=this.m_def.surfaceTensionNormalStrength*f,m=box2d.b2_maxParticleForce*f,f=0;f<this.m_contactBuffer.count;f++)if(g=this.m_contactBuffer.data[f],g.flags&box2d.b2ParticleFlag.b2_tensileParticle){var h=g.indexA,
k=g.indexB,l=g.weight,g=g.normal,n=this.m_weightBuffer[h]+this.m_weightBuffer[k],p=box2d.b2Sub_V2_V2(this.m_accumulation2Buffer[k],this.m_accumulation2Buffer[h],b),l=box2d.b2Min(a*(n-2)+c*box2d.b2Dot_V2_V2(p,g),m)*l,l=box2d.b2Mul_S_V2(l,g,d);e[h].SelfSub(l);e[k].SelfAdd(l)}};box2d.b2ParticleSystem.prototype.SolveTensile.s_weightedNormal=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveTensile.s_s=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveTensile.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveViscous=function(){for(var a=box2d.b2ParticleSystem.prototype.SolveViscous.s_v,c=box2d.b2ParticleSystem.prototype.SolveViscous.s_f,b=this.m_positionBuffer.data,d=this.m_velocityBuffer.data,e=this.m_def.viscousStrength,f=this.GetParticleInvMass(),g=0;g<this.m_bodyContactBuffer.count;g++){var h=this.m_bodyContactBuffer.data[g],k=h.index;if(this.m_flagsBuffer.data[k]&box2d.b2ParticleFlag.b2_viscousParticle){var l=h.body,m=h.weight,n=h.mass,h=b[k],p=box2d.b2Sub_V2_V2(l.GetLinearVelocityFromWorldPoint(h,
box2d.b2Vec2.s_t0),d[k],a),m=box2d.b2Mul_S_V2(e*n*m,p,c);d[k].SelfMulAdd(f,m);l.ApplyLinearImpulse(m.SelfNeg(),h,!0)}}for(g=0;g<this.m_contactBuffer.count;g++)h=this.m_contactBuffer.data[g],h.flags&box2d.b2ParticleFlag.b2_viscousParticle&&(k=h.indexA,l=h.indexB,m=h.weight,p=box2d.b2Sub_V2_V2(d[l],d[k],a),m=box2d.b2Mul_S_V2(e*m,p,c),d[k].SelfAdd(m),d[l].SelfSub(m))};box2d.b2ParticleSystem.prototype.SolveViscous.s_v=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveViscous.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveRepulsive=function(a){var c=box2d.b2ParticleSystem.prototype.SolveRepulsive.s_f,b=this.m_velocityBuffer.data;a=this.m_def.repulsiveStrength*this.GetCriticalVelocity(a);for(var d=0;d<this.m_contactBuffer.count;d++){var e=this.m_contactBuffer.data[d];if(e.flags&box2d.b2ParticleFlag.b2_repulsiveParticle){var f=e.indexA,g=e.indexB;this.m_groupBuffer[f]!==this.m_groupBuffer[g]&&(e=box2d.b2Mul_S_V2(a*e.weight,e.normal,c),b[f].SelfSub(e),b[g].SelfAdd(e))}}};
box2d.b2ParticleSystem.prototype.SolveRepulsive.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolvePowder=function(a){var c=box2d.b2ParticleSystem.prototype.SolvePowder.s_f,b=this.m_positionBuffer.data,d=this.m_velocityBuffer.data;a=this.m_def.powderStrength*this.GetCriticalVelocity(a);for(var e=1-box2d.b2_particleStride,f=this.GetParticleInvMass(),g=0;g<this.m_bodyContactBuffer.count;g++){var h=this.m_bodyContactBuffer.data[g],k=h.index;if(this.m_flagsBuffer.data[k]&box2d.b2ParticleFlag.b2_powderParticle){var l=h.weight;if(l>e){var m=h.body,n=b[k],p=h.normal,
h=box2d.b2Mul_S_V2(a*h.mass*(l-e),p,c);d[k].SelfMulSub(f,h);m.ApplyLinearImpulse(h,n,!0)}}}for(g=0;g<this.m_contactBuffer.count;g++)h=this.m_contactBuffer.data[g],h.flags&box2d.b2ParticleFlag.b2_powderParticle&&(l=h.weight,l>e&&(k=h.indexA,m=h.indexB,p=h.normal,h=box2d.b2Mul_S_V2(a*(l-e),p,c),d[k].SelfSub(h),d[m].SelfAdd(h)))};box2d.b2ParticleSystem.prototype.SolvePowder.s_f=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.SolveSolid=function(a){var c=box2d.b2ParticleSystem.prototype.SolveSolid.s_f,b=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);a=a.inv_dt*this.m_def.ejectionStrength;for(var d=0;d<this.m_contactBuffer.count;d++){var e=this.m_contactBuffer.data[d],f=e.indexA,g=e.indexB;this.m_groupBuffer[f]!==this.m_groupBuffer[g]&&(e=box2d.b2Mul_S_V2(a*(this.m_depthBuffer[f]+this.m_depthBuffer[g])*e.weight,e.normal,c),b[f].SelfSub(e),b[g].SelfAdd(e))}};
box2d.b2ParticleSystem.prototype.SolveSolid.s_f=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.SolveForce=function(a){var c=this.m_velocityBuffer.data;a=a.dt*this.GetParticleInvMass();for(var b=0;b<this.m_count;b++)c[b].SelfMulAdd(a,this.m_forceBuffer[b]);this.m_hasForce=!1};
box2d.b2ParticleSystem.prototype.SolveColorMixing=function(){box2d.b2Assert(null!==this.m_colorBuffer.data);var a=Math.floor(128*this.m_def.colorMixingStrength);if(a)for(var c=0;c<this.m_contactBuffer.count;c++){var b=this.m_contactBuffer.data[c],d=b.indexA,b=b.indexB;this.m_flagsBuffer.data[d]&this.m_flagsBuffer.data[b]&box2d.b2ParticleFlag.b2_colorMixingParticle&&box2d.b2ParticleColor.MixColors(this.m_colorBuffer.data[d],this.m_colorBuffer.data[b],a)}};
box2d.b2ParticleSystem.prototype.SolveZombie=function(){for(var a=0,c=[],b=0;b<this.m_count;b++)c[b]=box2d.b2_invalidParticleIndex;box2d.b2Assert(c.length===this.m_count);for(var d=0,b=0;b<this.m_count;b++){var e=this.m_flagsBuffer.data[b];if(e&box2d.b2ParticleFlag.b2_zombieParticle){var f=this.m_world.m_destructionListener;e&box2d.b2ParticleFlag.b2_destructionListenerParticle&&f&&f.SayGoodbyeParticle(this,b);this.m_handleIndexBuffer.data&&(f=this.m_handleIndexBuffer.data[b])&&(f.SetIndex(box2d.b2_invalidParticleIndex),
this.m_handleIndexBuffer.data[b]=null);c[b]=box2d.b2_invalidParticleIndex}else c[b]=a,b!==a&&(this.m_handleIndexBuffer.data&&((f=this.m_handleIndexBuffer.data[b])&&f.SetIndex(a),this.m_handleIndexBuffer.data[a]=f),this.m_flagsBuffer.data[a]=this.m_flagsBuffer.data[b],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[a]=this.m_lastBodyContactStepBuffer.data[b]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[a]=this.m_bodyContactCountBuffer.data[b]),
this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[a]=this.m_consecutiveContactStepsBuffer.data[b]),this.m_positionBuffer.data[a].Copy(this.m_positionBuffer.data[b]),this.m_velocityBuffer.data[a].Copy(this.m_velocityBuffer.data[b]),this.m_groupBuffer[a]=this.m_groupBuffer[b],this.m_hasForce&&this.m_forceBuffer[a].Copy(this.m_forceBuffer[b]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[a]=this.m_staticPressureBuffer[b]),this.m_depthBuffer&&(this.m_depthBuffer[a]=
this.m_depthBuffer[b]),this.m_colorBuffer.data&&this.m_colorBuffer.data[a].Copy(this.m_colorBuffer.data[b]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[a]=this.m_userDataBuffer.data[b]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[a]=this.m_expirationTimeBuffer.data[b])),a++,d|=e}for(b=0;b<this.m_proxyBuffer.count;b++)e=this.m_proxyBuffer.data[b],e.index=c[e.index];this.m_proxyBuffer.RemoveIf(function(a){return 0>a.index});for(b=0;b<this.m_contactBuffer.count;b++)e=
this.m_contactBuffer.data[b],e.indexA=c[e.indexA],e.indexB=c[e.indexB];this.m_contactBuffer.RemoveIf(function(a){return 0>a.indexA||0>a.indexB});for(b=0;b<this.m_bodyContactBuffer.count;b++)e=this.m_bodyContactBuffer.data[b],e.index=c[e.index];this.m_bodyContactBuffer.RemoveIf(function(a){return 0>a.index});for(b=0;b<this.m_pairBuffer.count;b++)e=this.m_pairBuffer.data[b],e.indexA=c[e.indexA],e.indexB=c[e.indexB];this.m_pairBuffer.RemoveIf(function(a){return 0>a.indexA||0>a.indexB});for(b=0;b<this.m_triadBuffer.count;b++)e=
this.m_triadBuffer.data[b],e.indexA=c[e.indexA],e.indexB=c[e.indexB],e.indexC=c[e.indexC];this.m_triadBuffer.RemoveIf(function(a){return 0>a.indexA||0>a.indexB||0>a.indexC});if(this.m_indexByExpirationTimeBuffer.data)for(e=b=0;e<this.m_count;e++)f=c[this.m_indexByExpirationTimeBuffer.data[e]],f!==box2d.b2_invalidParticleIndex&&(this.m_indexByExpirationTimeBuffer.data[b++]=f);for(e=this.m_groupList;e;e=e.GetNext()){for(var f=a,g=0,h=!1,b=e.m_firstIndex;b<e.m_lastIndex;b++){var k=c[b];0<=k?(f=box2d.b2Min(f,
k),g=box2d.b2Max(g,k+1)):h=!0}f<g?(e.m_firstIndex=f,e.m_lastIndex=g,h&&e.m_groupFlags&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(e,e.m_groupFlags|box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(e.m_firstIndex=0,e.m_lastIndex=0,e.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(e,e.m_groupFlags|box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=a;this.m_allParticleFlags=d;this.m_needsUpdateAllParticleFlags=
!1;for(e=this.m_groupList;e;)a=e.GetNext(),e.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(e),e=a};
box2d.b2ParticleSystem.prototype.SolveLifetimes=function(a){box2d.b2Assert(null!==this.m_expirationTimeBuffer.data);box2d.b2Assert(null!==this.m_indexByExpirationTimeBuffer.data);this.m_timeElapsed=this.LifetimeToExpirationTime(a.dt);a=this.GetQuantizedTimeElapsed();var c=this.m_expirationTimeBuffer.data,b=this.m_indexByExpirationTimeBuffer.data,d=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(box2d.std_sort(b,0,d,function(a,b){var d=c[a],e=c[b],f=0>=d;return f===0>=e?d>e:f}),
this.m_expirationTimeBufferRequiresSorting=!1);for(--d;0<=d;--d){var e=b[d],f=c[e];if(a<f||0>=f)break;this.DestroyParticle(e)}};
box2d.b2ParticleSystem.prototype.RotateBuffer=function(a,c,b){function d(d){return d<a?d:d<c?d+b-c:d<b?d+a-c:d}if(a!==c&&c!==b){box2d.b2Assert(c>=a&&c<=b);box2d.std_rotate(this.m_flagsBuffer.data,a,c,b);this.m_lastBodyContactStepBuffer.data&&box2d.std_rotate(this.m_lastBodyContactStepBuffer.data,a,c,b);this.m_bodyContactCountBuffer.data&&box2d.std_rotate(this.m_bodyContactCountBuffer.data,a,c,b);this.m_consecutiveContactStepsBuffer.data&&box2d.std_rotate(this.m_consecutiveContactStepsBuffer.data,
a,c,b);box2d.std_rotate(this.m_positionBuffer.data,a,c,b);box2d.std_rotate(this.m_velocityBuffer.data,a,c,b);box2d.std_rotate(this.m_groupBuffer,a,c,b);this.m_hasForce&&box2d.std_rotate(this.m_forceBuffer,a,c,b);this.m_staticPressureBuffer&&box2d.std_rotate(this.m_staticPressureBuffer,a,c,b);this.m_depthBuffer&&box2d.std_rotate(this.m_depthBuffer,a,c,b);this.m_colorBuffer.data&&box2d.std_rotate(this.m_colorBuffer.data,a,c,b);this.m_userDataBuffer.data&&box2d.std_rotate(this.m_userDataBuffer.data,
a,c,b);if(this.m_handleIndexBuffer.data){box2d.std_rotate(this.m_handleIndexBuffer.data,a,c,b);for(var e=a;e<b;++e){var f=this.m_handleIndexBuffer.data[e];f&&f.SetIndex(d(f.GetIndex()))}}if(this.m_expirationTimeBuffer.data){box2d.std_rotate(this.m_expirationTimeBuffer.data,a,c,b);for(var f=this.GetParticleCount(),g=this.m_indexByExpirationTimeBuffer.data,e=0;e<f;++e)g[e]=d(g[e])}for(e=0;e<this.m_proxyBuffer.count;e++)f=this.m_proxyBuffer.data[e],f.index=d(f.index);for(e=0;e<this.m_contactBuffer.count;e++)f=
this.m_contactBuffer.data[e],f.indexA=d(f.indexA),f.indexB=d(f.indexB);for(e=0;e<this.m_bodyContactBuffer.count;e++)f=this.m_bodyContactBuffer.data[e],f.index=d(f.index);for(e=0;e<this.m_pairBuffer.count;e++)f=this.m_pairBuffer.data[e],f.indexA=d(f.indexA),f.indexB=d(f.indexB);for(e=0;e<this.m_triadBuffer.count;e++)f=this.m_triadBuffer.data[e],f.indexA=d(f.indexA),f.indexB=d(f.indexB),f.indexC=d(f.indexC);for(e=this.m_groupList;e;e=e.GetNext())e.m_firstIndex=d(e.m_firstIndex),e.m_lastIndex=d(e.m_lastIndex-
1)+1}};box2d.b2ParticleSystem.prototype.GetCriticalVelocity=function(a){return this.m_particleDiameter*a.inv_dt};box2d.b2ParticleSystem.prototype.GetCriticalVelocitySquared=function(a){a=this.GetCriticalVelocity(a);return a*a};box2d.b2ParticleSystem.prototype.GetCriticalPressure=function(a){return this.m_def.density*this.GetCriticalVelocitySquared(a)};box2d.b2ParticleSystem.prototype.GetParticleStride=function(){return box2d.b2_particleStride*this.m_particleDiameter};
box2d.b2ParticleSystem.prototype.GetParticleMass=function(){var a=this.GetParticleStride();return this.m_def.density*a*a};box2d.b2ParticleSystem.prototype.GetParticleInvMass=function(){var a=1/box2d.b2_particleStride*this.m_inverseDiameter;return this.m_inverseDensity*a*a};box2d.b2ParticleSystem.prototype.GetFixtureContactFilter=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null};
box2d.b2ParticleSystem.prototype.GetParticleContactFilter=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null};box2d.b2ParticleSystem.prototype.GetFixtureContactListener=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null};
box2d.b2ParticleSystem.prototype.GetParticleContactListener=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null};box2d.b2ParticleSystem.prototype.SetUserOverridableBuffer=function(a,c,b){box2d.b2Assert(null!==c&&0<b||null===c&&0===b);a.data=c;a.userSuppliedCapacity=b};
box2d.b2ParticleSystem.prototype.SetGroupFlags=function(a,c){var b=a.m_groupFlags;(b^c)&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&(c|=box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);b&~c&&(this.m_needsUpdateAllGroupFlags=!0);~this.m_allGroupFlags&c&&(c&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=c);a.m_groupFlags=c};
box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts=function(){box2d.std_sort(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,box2d.b2ParticleSystem.BodyContactCompare);var a=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_n,c=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_pos,b=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_normal,d=this,e=-1,f=0,g=0;this.m_bodyContactBuffer.count=box2d.std_remove_if(this.m_bodyContactBuffer.data,
function(h){h.index!==e&&(f=0,e=h.index);if(3<f++)return++g,!0;var k=a.Copy(h.normal);k.SelfMul(d.m_particleDiameter*(1-h.weight));k=box2d.b2Add_V2_V2(d.m_positionBuffer.data[h.index],k,c);if(!h.fixture.TestPoint(k)){for(var l=h.fixture.GetShape().GetChildCount(),m=0;m<l;m++)if(h.fixture.ComputeDistance(k,b,m)<box2d.b2_linearSlop)return!1;++g;return!0}return!1},this.m_bodyContactBuffer.count)};box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_n=new box2d.b2Vec2;
box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_pos=new box2d.b2Vec2;box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_normal=new box2d.b2Vec2;box2d.b2ParticleSystem.BodyContactCompare=function(a,c){return a.index===c.index?a.weight>c.weight:a.index<c.index};
box2d.b2ParticleSystem.prototype.DetectStuckParticle=function(a){0>=this.m_stuckThreshold||(++this.m_bodyContactCountBuffer.data[a],2===this.m_bodyContactCountBuffer.data[a]&&(++this.m_consecutiveContactStepsBuffer.data[a],this.m_consecutiveContactStepsBuffer.data[a]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=a)),this.m_lastBodyContactStepBuffer.data[a]=this.m_timestamp)};
box2d.b2ParticleSystem.prototype.ValidateParticleIndex=function(a){return 0<=a&&a<this.GetParticleCount()&&a!==box2d.b2_invalidParticleIndex};box2d.b2ParticleSystem.prototype.GetQuantizedTimeElapsed=function(){return Math.floor(this.m_timeElapsed/4294967296)};box2d.b2ParticleSystem.prototype.LifetimeToExpirationTime=function(a){return this.m_timeElapsed+Math.floor(a/this.m_def.lifetimeGranularity*4294967296)};box2d.b2ParticleSystem.prototype.ForceCanBeApplied=function(a){return!(a&box2d.b2ParticleFlag.b2_wallParticle)};
box2d.b2ParticleSystem.prototype.PrepareForceBuffer=function(){if(!this.m_hasForce){for(var a=0;a<this.m_count;a++)this.m_forceBuffer[a].SetZero();this.m_hasForce=!0}};box2d.b2ParticleSystem.prototype.IsRigidGroup=function(a){return null!==a&&0!==(a.m_groupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup)};box2d.b2ParticleSystem.prototype.GetLinearVelocity=function(a,c,b,d){return this.IsRigidGroup(a)?a.GetLinearVelocityFromWorldPoint(b,d):d.Copy(this.m_velocityBuffer.data[c])};
box2d.b2ParticleSystem.prototype.InitDampingParameter=function(a,c,b,d,e,f,g,h){a[0]=0<d?1/d:0;c[0]=0<e?1/e:0;b[0]=box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(g,f,box2d.b2Vec2.s_t0),h)};box2d.b2ParticleSystem.prototype.InitDampingParameterWithRigidGroupOrParticle=function(a,c,b,d,e,f,g,h){d?this.InitDampingParameter(a,c,b,e.GetMass(),e.GetInertia(),e.GetCenter(),g,h):this.InitDampingParameter(a,c,b,this.m_flagsBuffer.data[f]&box2d.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,g,g,h)};
box2d.b2ParticleSystem.prototype.ComputeDampingImpulse=function(a,c,b,d,e,f,g){a=a+c*b*b+d+e*f*f;return 0<a?g/a:0};box2d.b2ParticleSystem.prototype.ApplyDamping=function(a,c,b,d,e,f,g,h){d?(e.m_linearVelocity.SelfMulAdd(g*a,h),e.m_angularVelocity+=g*b*c):this.m_velocityBuffer.data[f].SelfMulAdd(g*a,h)};box2d.Testbed.EmittedParticleCallback=function(){};goog.exportSymbol("box2d.Testbed.EmittedParticleCallback",box2d.Testbed.EmittedParticleCallback);box2d.Testbed.EmittedParticleCallback.prototype.ParticleCreated=function(a,c){};box2d.Testbed.RadialEmitter=function(){this._ctor_()};goog.exportSymbol("box2d.Testbed.RadialEmitter",box2d.Testbed.RadialEmitter);box2d.Testbed.RadialEmitter.prototype.m_particleSystem=null;box2d.Testbed.RadialEmitter.prototype.m_callback=null;
box2d.Testbed.RadialEmitter.prototype.m_speed=0;box2d.Testbed.RadialEmitter.prototype.m_halfSize=null;box2d.Testbed.RadialEmitter.prototype.m_emitRate=1;box2d.Testbed.RadialEmitter.prototype.m_emitRemainder=0;box2d.Testbed.RadialEmitter.prototype.m_flags=box2d.b2ParticleFlag.b2_waterParticle;box2d.Testbed.RadialEmitter.prototype.m_group=null;box2d.Testbed.RadialEmitter.Random=function(){return Math.random()};
box2d.Testbed.RadialEmitter.prototype._ctor_=function(){this.m_origin=new box2d.b2Vec2;this.m_startingVelocity=new box2d.b2Vec2;this.m_halfSize=new box2d.b2Vec2;this.m_color=new box2d.b2ParticleColor};box2d.Testbed.RadialEmitter.prototype._dtor_=function(){this.SetGroup(null)};box2d.Testbed.RadialEmitter.prototype.SetPosition=function(a){this.m_origin.Copy(a)};box2d.Testbed.RadialEmitter.prototype.GetPosition=function(a){return a.Copy(this.m_origin)};
box2d.Testbed.RadialEmitter.prototype.SetSize=function(a){this.m_halfSize.Copy(a).SelfMul(.5)};box2d.Testbed.RadialEmitter.prototype.GetSize=function(a){return a.Copy(this.m_halfSize).SelfMul(2)};box2d.Testbed.RadialEmitter.prototype.SetVelocity=function(a){this.m_startingVelocity.Copy(a)};box2d.Testbed.RadialEmitter.prototype.GetVelocity=function(a){return a.Copy(this.m_startingVelocity)};box2d.Testbed.RadialEmitter.prototype.SetSpeed=function(a){this.m_speed=a};
box2d.Testbed.RadialEmitter.prototype.GetSpeed=function(){return this.m_speed};box2d.Testbed.RadialEmitter.prototype.SetParticleFlags=function(a){this.m_flags=a};box2d.Testbed.RadialEmitter.prototype.GetParticleFlags=function(){return this.m_flags};box2d.Testbed.RadialEmitter.prototype.SetColor=function(a){this.m_color.Copy(a)};box2d.Testbed.RadialEmitter.prototype.GetColor=function(a){return a.Copy(this.m_color)};box2d.Testbed.RadialEmitter.prototype.SetEmitRate=function(a){this.m_emitRate=a};
box2d.Testbed.RadialEmitter.prototype.GetEmitRate=function(){return this.m_emitRate};box2d.Testbed.RadialEmitter.prototype.SetParticleSystem=function(a){this.m_particleSystem=a};box2d.Testbed.RadialEmitter.prototype.GetParticleSystem=function(){return this.m_particleSystem};box2d.Testbed.RadialEmitter.prototype.SetCallback=function(a){this.m_callback=a};box2d.Testbed.RadialEmitter.prototype.GetCallback=function(){return this.m_callback};
box2d.Testbed.RadialEmitter.prototype.SetGroup=function(a){this.m_group&&this.m_group.SetGroupFlags(this.m_group.GetGroupFlags()&~box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty);(this.m_group=a)&&this.m_group.SetGroupFlags(this.m_group.GetGroupFlags()|box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty)};box2d.Testbed.RadialEmitter.prototype.GetGroup=function(){return this.m_group};
box2d.Testbed.RadialEmitter.prototype.Step=function(a,c,b){box2d.b2Assert(null!==this.m_particleSystem);var d=0;this.m_emitRemainder+=this.m_emitRate*a;a=new box2d.b2ParticleDef;a.color.Copy(this.m_color);a.flags=this.m_flags;for(a.group=this.m_group;1<this.m_emitRemainder;){--this.m_emitRemainder;var e=2*box2d.Testbed.RadialEmitter.Random()*box2d.b2_pi,f=box2d.Testbed.RadialEmitter.Random(),e=new box2d.b2Vec2(Math.sin(e),Math.cos(e));a.position.Set(this.m_origin.x+e.x*f*this.m_halfSize.x,this.m_origin.y+
e.y*f*this.m_halfSize.y);a.velocity.Copy(this.m_startingVelocity);0!==this.m_speed&&a.velocity.SelfMulAdd(this.m_speed,e);f=this.m_particleSystem.CreateParticle(a);this.m_callback&&this.m_callback.ParticleCreated(this.m_particleSystem,f);null!==c&&d<b&&(c[d]=f);++d}return d};box2d.b2StackQueue=function(a){this.m_buffer=box2d.b2MakeArray(a);this.m_end=a};box2d.b2StackQueue.prototype.m_buffer=null;box2d.b2StackQueue.prototype.m_front=0;box2d.b2StackQueue.prototype.m_back=0;box2d.b2StackQueue.prototype.m_capacity=0;
box2d.b2StackQueue.prototype.Push=function(a){if(this.m_back>=this.m_capacity){for(var c=this.m_front;c<this.m_back;c++)this.m_buffer[c-this.m_front]=this.m_buffer[c];this.m_back-=this.m_front;this.m_front=0;this.m_back>=this.m_capacity&&(0<this.m_capacity?(this.m_buffer.concat(box2d.b2MakeArray(this.m_capacity)),this.m_capacity*=2):(this.m_buffer.concat(box2d.b2MakeArray(1)),this.m_capacity=1))}this.m_buffer[this.m_back]=a;this.m_back++};
box2d.b2StackQueue.prototype.Pop=function(){box2d.b2Assert(this.m_front<this.m_back);this.m_buffer[this.m_front]=null;this.m_front++};box2d.b2StackQueue.prototype.Empty=function(){box2d.b2Assert(this.m_front<=this.m_back);return this.m_front===this.m_back};box2d.b2StackQueue.prototype.Front=function(){return this.m_buffer[this.m_front]};box2d.b2VoronoiDiagram=function(a){this.m_generatorBuffer=box2d.b2MakeArray(a,function(a){return new box2d.b2VoronoiDiagram.Generator});this.m_generatorCapacity=a};goog.exportSymbol("box2d.b2VoronoiDiagram",box2d.b2VoronoiDiagram);box2d.b2VoronoiDiagram.prototype.m_generatorBuffer=null;goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"m_generatorBuffer",box2d.b2VoronoiDiagram.prototype.m_generatorBuffer);box2d.b2VoronoiDiagram.prototype.m_generatorCapacity=0;
box2d.b2VoronoiDiagram.prototype.m_generatorCount=0;box2d.b2VoronoiDiagram.prototype.m_countX=0;box2d.b2VoronoiDiagram.prototype.m_countY=0;box2d.b2VoronoiDiagram.prototype.m_diagram=null;box2d.b2VoronoiDiagram.Generator=function(){this.center=new box2d.b2Vec2};box2d.b2VoronoiDiagram.Generator.prototype.center=null;box2d.b2VoronoiDiagram.Generator.prototype.tag=0;box2d.b2VoronoiDiagram.b2VoronoiDiagramTask=function(a,c,b,d){this.m_x=a;this.m_y=c;this.m_i=b;this.m_generator=d};
box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_x=0;box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_y=0;box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_i=0;box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_generator=null;box2d.b2VoronoiDiagram.prototype.AddGenerator=function(a,c,b){box2d.b2Assert(this.m_generatorCount<this.m_generatorCapacity);var d=this.m_generatorBuffer[this.m_generatorCount++];d.center.Copy(a);d.tag=c;d.necessary=b};
goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"AddGenerator",box2d.b2VoronoiDiagram.prototype.AddGenerator);
box2d.b2VoronoiDiagram.prototype.Generate=function(a,c){box2d.b2Assert(null===this.m_diagram);for(var b=1/a,d=new box2d.b2Vec2(+box2d.b2_maxFloat,+box2d.b2_maxFloat),e=new box2d.b2Vec2(-box2d.b2_maxFloat,-box2d.b2_maxFloat),f=0,g=0;g<this.m_generatorCount;g++){var h=this.m_generatorBuffer[g];h.necessary&&(box2d.b2Min_V2_V2(d,h.center,d),box2d.b2Max_V2_V2(e,h.center,e),++f)}if(0===f)this.m_countY=this.m_countX=0;else{d.x-=c;d.y-=c;e.x+=c;e.y+=c;this.m_countX=1+Math.floor(b*(e.x-d.x));this.m_countY=
1+Math.floor(b*(e.y-d.y));this.m_diagram=box2d.b2MakeArray(this.m_countX*this.m_countY);e=new box2d.b2StackQueue(4*this.m_countX*this.m_countY);for(g=0;g<this.m_generatorCount;g++){h=this.m_generatorBuffer[g];h.center.SelfSub(d).SelfMul(b);var f=Math.floor(h.center.x),k=Math.floor(h.center.y);0<=f&&0<=k&&f<this.m_countX&&k<this.m_countY&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k,f+k*this.m_countX,h))}for(;!e.Empty();)g=e.Front(),f=g.m_x,k=g.m_y,b=g.m_i,h=g.m_generator,e.Pop(),this.m_diagram[b]||
(this.m_diagram[b]=h,0<f&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f-1,k,b-1,h)),0<k&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k-1,b-this.m_countX,h)),f<this.m_countX-1&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f+1,k,b+1,h)),k<this.m_countY-1&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k+1,b+this.m_countX,h)));for(k=0;k<this.m_countY;k++)for(f=0;f<this.m_countX-1;f++)b=f+k*this.m_countX,d=this.m_diagram[b],g=this.m_diagram[b+1],d!==g&&(e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,
k,b,g)),e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f+1,k,b+1,d)));for(k=0;k<this.m_countY-1;k++)for(f=0;f<this.m_countX;f++)b=f+k*this.m_countX,d=this.m_diagram[b],g=this.m_diagram[b+this.m_countX],d!==g&&(e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k,b,g)),e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k+1,b+this.m_countX,d)));for(;!e.Empty();)if(g=e.Front(),f=g.m_x,k=g.m_y,b=g.m_i,g=g.m_generator,e.Pop(),d=this.m_diagram[b],d!==g){var h=d.center.x-f,d=d.center.y-
k,l=g.center.x-f,m=g.center.y-k;h*h+d*d>l*l+m*m&&(this.m_diagram[b]=g,0<f&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f-1,k,b-1,g)),0<k&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k-1,b-this.m_countX,g)),f<this.m_countX-1&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f+1,k,b+1,g)),k<this.m_countY-1&&e.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(f,k+1,b+this.m_countX,g)))}}};goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"Generate",box2d.b2VoronoiDiagram.prototype.Generate);
box2d.b2VoronoiDiagram.prototype.GetNodes=function(a){for(var c=0;c<this.m_countY-1;c++)for(var b=0;b<this.m_countX-1;b++){var d=b+c*this.m_countX,e=this.m_diagram[d],f=this.m_diagram[d+1],g=this.m_diagram[d+this.m_countX],d=this.m_diagram[d+1+this.m_countX];f!==g&&(e!==f&&e!==g&&(e.necessary||f.necessary||g.necessary)&&a(e.tag,f.tag,g.tag),d!==f&&d!==g&&(e.necessary||f.necessary||g.necessary)&&a(f.tag,d.tag,g.tag))}};goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"GetNodes",box2d.b2VoronoiDiagram.prototype.GetNodes);box2d.b2RopeDef=function(){this.vertices=[];this.masses=[];this.gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2RopeDef",box2d.b2RopeDef);box2d.b2RopeDef.prototype.vertices=null;box2d.b2RopeDef.prototype.count=0;box2d.b2RopeDef.prototype.masses=null;box2d.b2RopeDef.prototype.gravity=null;box2d.b2RopeDef.prototype.damping=.1;box2d.b2RopeDef.prototype.k2=.9;box2d.b2RopeDef.prototype.k3=.1;box2d.b2Rope=function(){this.m_gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Rope",box2d.b2Rope);
box2d.b2Rope.prototype.m_count=0;box2d.b2Rope.prototype.m_ps=null;box2d.b2Rope.prototype.m_p0s=null;box2d.b2Rope.prototype.m_vs=null;box2d.b2Rope.prototype.m_ims=null;box2d.b2Rope.prototype.m_Ls=null;box2d.b2Rope.prototype.m_as=null;box2d.b2Rope.prototype.m_gravity=null;box2d.b2Rope.prototype.m_damping=0;box2d.b2Rope.prototype.m_k2=1;box2d.b2Rope.prototype.m_k3=.1;box2d.b2Rope.prototype.GetVertexCount=function(){return this.m_count};goog.exportProperty(box2d.b2Rope.prototype,"GetVertexCount",box2d.b2Rope.prototype.GetVertexCount);
box2d.b2Rope.prototype.GetVertices=function(){return this.m_ps};goog.exportProperty(box2d.b2Rope.prototype,"GetVertices",box2d.b2Rope.prototype.GetVertices);
box2d.b2Rope.prototype.Initialize=function(a){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=a.count);this.m_count=a.count;this.m_ps=box2d.b2Vec2.MakeArray(this.m_count);this.m_p0s=box2d.b2Vec2.MakeArray(this.m_count);this.m_vs=box2d.b2Vec2.MakeArray(this.m_count);this.m_ims=box2d.b2MakeNumberArray(this.m_count);for(var c=0;c<this.m_count;++c){this.m_ps[c].Copy(a.vertices[c]);this.m_p0s[c].Copy(a.vertices[c]);this.m_vs[c].SetZero();var b=a.masses[c];this.m_ims[c]=0<b?1/b:0}var d=this.m_count-1,b=this.m_count-
2;this.m_Ls=box2d.b2MakeNumberArray(d);this.m_as=box2d.b2MakeNumberArray(b);for(c=0;c<d;++c){var e=this.m_ps[c],f=this.m_ps[c+1];this.m_Ls[c]=box2d.b2Distance(e,f)}for(c=0;c<b;++c)e=this.m_ps[c],f=this.m_ps[c+1],d=this.m_ps[c+2],e=box2d.b2Sub_V2_V2(f,e,box2d.b2Vec2.s_t0),d=box2d.b2Sub_V2_V2(d,f,box2d.b2Vec2.s_t1),f=box2d.b2Cross_V2_V2(e,d),e=box2d.b2Dot_V2_V2(e,d),this.m_as[c]=box2d.b2Atan2(f,e);this.m_gravity.Copy(a.gravity);this.m_damping=a.damping;this.m_k2=a.k2;this.m_k3=a.k3};
goog.exportProperty(box2d.b2Rope.prototype,"Initialize",box2d.b2Rope.prototype.Initialize);
box2d.b2Rope.prototype.Step=function(a,c){if(0!==a){for(var b=Math.exp(-a*this.m_damping),d=0;d<this.m_count;++d)this.m_p0s[d].Copy(this.m_ps[d]),0<this.m_ims[d]&&this.m_vs[d].SelfMulAdd(a,this.m_gravity),this.m_vs[d].SelfMul(b),this.m_ps[d].SelfMulAdd(a,this.m_vs[d]);for(d=0;d<c;++d)this.SolveC2(),this.SolveC3(),this.SolveC2();b=1/a;for(d=0;d<this.m_count;++d)box2d.b2Mul_S_V2(b,box2d.b2Sub_V2_V2(this.m_ps[d],this.m_p0s[d],box2d.b2Vec2.s_t0),this.m_vs[d])}};
goog.exportProperty(box2d.b2Rope.prototype,"Step",box2d.b2Rope.prototype.Step);box2d.b2Rope.prototype.SolveC2=function(){for(var a=this.m_count-1,c=0;c<a;++c){var b=this.m_ps[c],d=this.m_ps[c+1],e=box2d.b2Sub_V2_V2(d,b,box2d.b2Rope.s_d),f=e.Normalize(),g=this.m_ims[c],h=this.m_ims[c+1];if(0!==g+h){var k=h/(g+h);b.SelfMulSub(g/(g+h)*this.m_k2*(this.m_Ls[c]-f),e);d.SelfMulAdd(this.m_k2*k*(this.m_Ls[c]-f),e)}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC2",box2d.b2Rope.prototype.SolveC2);
box2d.b2Rope.s_d=new box2d.b2Vec2;box2d.b2Rope.prototype.SetAngle=function(a){for(var c=this.m_count-2,b=0;b<c;++b)this.m_as[b]=a};goog.exportProperty(box2d.b2Rope.prototype,"SetAngle",box2d.b2Rope.prototype.SetAngle);
box2d.b2Rope.prototype.SolveC3=function(){for(var a=this.m_count-2,c=0;c<a;++c){var b=this.m_ps[c],d=this.m_ps[c+1],e=this.m_ps[c+2],f=this.m_ims[c],g=this.m_ims[c+1],h=this.m_ims[c+2],k=box2d.b2Sub_V2_V2(d,b,box2d.b2Rope.s_d1),l=box2d.b2Sub_V2_V2(e,d,box2d.b2Rope.s_d2),m=k.LengthSquared(),n=l.LengthSquared();if(0!==m*n){var p=box2d.b2Cross_V2_V2(k,l),q=box2d.b2Dot_V2_V2(k,l),p=box2d.b2Atan2(p,q),k=box2d.b2Mul_S_V2(-1/m,k.SelfSkew(),box2d.b2Rope.s_Jd1),m=box2d.b2Mul_S_V2(1/n,l.SelfSkew(),box2d.b2Rope.s_Jd2),
l=box2d.b2Rope.s_J1.Copy(k).SelfNeg(),n=box2d.b2Sub_V2_V2(k,m,box2d.b2Rope.s_J2),k=m,m=f*box2d.b2Dot_V2_V2(l,l)+g*box2d.b2Dot_V2_V2(n,n)+h*box2d.b2Dot_V2_V2(k,k);if(0!==m){m=1/m;for(q=p-this.m_as[c];q>box2d.b2_pi;)p-=2*box2d.b2_pi,q=p-this.m_as[c];for(;q<-box2d.b2_pi;)p+=2*box2d.b2_pi,q=p-this.m_as[c];p=-this.m_k3*m*q;b.SelfMulAdd(f*p,l);d.SelfMulAdd(g*p,n);e.SelfMulAdd(h*p,k)}}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC3",box2d.b2Rope.prototype.SolveC3);box2d.b2Rope.s_d1=new box2d.b2Vec2;
box2d.b2Rope.s_d2=new box2d.b2Vec2;box2d.b2Rope.s_Jd1=new box2d.b2Vec2;box2d.b2Rope.s_Jd2=new box2d.b2Vec2;box2d.b2Rope.s_J1=new box2d.b2Vec2;box2d.b2Rope.s_J2=new box2d.b2Vec2;box2d.b2Rope.prototype.Draw=function(a){for(var c=new box2d.b2Color(.4,.5,.7),b=0;b<this.m_count-1;++b)a.DrawSegment(this.m_ps[b],this.m_ps[b+1],c)};goog.exportProperty(box2d.b2Rope.prototype,"Draw",box2d.b2Rope.prototype.Draw);goog.debug={};goog.debug.Error=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this);this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var a=[],c;for(c in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(c)&&a.push(goog.Disposable.instances_[Number(c)]);return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[a]}};
goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(goog.dispose,a))};goog.Disposable.prototype.addOnDisposeCallback=function(a,c){this.disposed_?a.call(c):(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(c)?goog.bind(a,c):a))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(a){return a&&"function"==typeof a.isDisposed?a.isDisposed():!1};goog.dispose=function(a){a&&"function"==typeof a.dispose&&a.dispose()};goog.disposeAll=function(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c];goog.isArrayLike(d)?goog.disposeAll.apply(null,d):goog.dispose(d)}};goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.events={};goog.events.EventId=function(a){this.id=a};goog.events.EventId.prototype.toString=function(){return this.id};goog.events.Event=function(a,c){this.type=a instanceof goog.events.EventId?String(a):a;this.currentTarget=this.target=c;this.defaultPrevented=this.propagationStopped_=!1;this.returnValue_=!0};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.object={};goog.object.forEach=function(a,c,b){for(var d in a)c.call(b,a[d],d,a)};goog.object.filter=function(a,c,b){var d={},e;for(e in a)c.call(b,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,c,b){var d={},e;for(e in a)d[e]=c.call(b,a[e],e,a);return d};goog.object.some=function(a,c,b){for(var d in a)if(c.call(b,a[d],d,a))return!0;return!1};goog.object.every=function(a,c,b){for(var d in a)if(!c.call(b,a[d],d,a))return!1;return!0};
goog.object.getCount=function(a){var c=0,b;for(b in a)c++;return c};goog.object.getAnyKey=function(a){for(var c in a)return c};goog.object.getAnyValue=function(a){for(var c in a)return a[c]};goog.object.contains=function(a,c){return goog.object.containsValue(a,c)};goog.object.getValues=function(a){var c=[],b=0,d;for(d in a)c[b++]=a[d];return c};goog.object.getKeys=function(a){var c=[],b=0,d;for(d in a)c[b++]=d;return c};
goog.object.getValueByKeys=function(a,c){for(var b=goog.isArrayLike(c),d=b?c:arguments,b=b?0:1;b<d.length&&(a=a[d[b]],goog.isDef(a));b++);return a};goog.object.containsKey=function(a,c){return c in a};goog.object.containsValue=function(a,c){for(var b in a)if(a[b]==c)return!0;return!1};goog.object.findKey=function(a,c,b){for(var d in a)if(c.call(b,a[d],d,a))return d};goog.object.findValue=function(a,c,b){return(c=goog.object.findKey(a,c,b))&&a[c]};
goog.object.isEmpty=function(a){for(var c in a)return!1;return!0};goog.object.clear=function(a){for(var c in a)delete a[c]};goog.object.remove=function(a,c){var b;(b=c in a)&&delete a[c];return b};goog.object.add=function(a,c,b){if(c in a)throw Error('The object already contains the key "'+c+'"');goog.object.set(a,c,b)};goog.object.get=function(a,c,b){return c in a?a[c]:b};goog.object.set=function(a,c,b){a[c]=b};goog.object.setIfUndefined=function(a,c,b){return c in a?a[c]:a[c]=b};
goog.object.setWithReturnValueIfNotSet=function(a,c,b){if(c in a)return a[c];b=b();return a[c]=b};goog.object.equals=function(a,c){for(var b in a)if(!(b in c)||a[b]!==c[b])return!1;for(b in c)if(!(b in a))return!1;return!0};goog.object.clone=function(a){var c={},b;for(b in a)c[b]=a[b];return c};goog.object.unsafeClone=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},b;for(b in a)c[b]=goog.object.unsafeClone(a[b]);return c}return a};
goog.object.transpose=function(a){var c={},b;for(b in a)c[a[b]]=b;return c};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(a,c){for(var b,d,e=1;e<arguments.length;e++){d=arguments[e];for(b in d)a[b]=d[b];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)b=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}};
goog.object.create=function(a){var c=arguments.length;if(1==c&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(c%2)throw Error("Uneven number of arguments");for(var b={},d=0;d<c;d+=2)b[arguments[d]]=arguments[d+1];return b};goog.object.createSet=function(a){var c=arguments.length;if(1==c&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var b={},d=0;d<c;d++)b[arguments[d]]=!0;return b};
goog.object.createImmutableView=function(a){var c=a;Object.isFrozen&&!Object.isFrozen(a)&&(c=Object.create(a),Object.freeze(c));return c};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};goog.reflect={};goog.reflect.object=function(a,c){return c};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,c){try{return goog.reflect.sinkValue(a[c]),!0}catch(b){}return!1};goog.string={};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(a,c){return 0==a.lastIndexOf(c,0)};goog.string.endsWith=function(a,c){var b=a.length-c.length;return 0<=b&&a.indexOf(c,b)==b};goog.string.caseInsensitiveStartsWith=function(a,c){return 0==goog.string.caseInsensitiveCompare(c,a.substr(0,c.length))};
goog.string.caseInsensitiveEndsWith=function(a,c){return 0==goog.string.caseInsensitiveCompare(c,a.substr(a.length-c.length,c.length))};goog.string.caseInsensitiveEquals=function(a,c){return a.toLowerCase()==c.toLowerCase()};goog.string.subs=function(a,c){for(var b=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<b.length;)d+=b.shift()+e.shift();return d+b.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};
goog.string.isEmptyOrWhitespace=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptyString=function(a){return 0==a.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(a){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(a))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};
goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"\u0080"<=a&&"\ufffd">=a};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};
goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};
goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(a,c){var b=String(a).toLowerCase(),d=String(c).toLowerCase();return b<d?-1:b==d?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(a,c){if(a==c)return 0;if(!a)return-1;if(!c)return 1;for(var b=a.toLowerCase().match(goog.string.numerateCompareRegExp_),d=c.toLowerCase().match(goog.string.numerateCompareRegExp_),e=Math.min(b.length,d.length),f=0;f<e;f++){var g=b[f],h=d[f];if(g!=h)return b=parseInt(g,10),!isNaN(b)&&(d=parseInt(h,10),!isNaN(d)&&b-d)?b-d:g<h?-1:1}return b.length!=d.length?b.length-d.length:a<c?-1:1};goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};
goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,c){return a.replace(/(\r\n|\r|\n)/g,c?"<br />":"<br>")};
goog.string.htmlEscape=function(a,c){if(c)a=a.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(a=a.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.AMP_RE_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.LT_RE_,
"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.GT_RE_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.QUOT_RE_,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(goog.string.NULL_RE_,"&#0;"));goog.string.DETECT_DOUBLE_ESCAPING&&-1!=a.indexOf("e")&&(a=a.replace(goog.string.E_RE_,"&#101;"))}return a};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;
goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesWithDocument=function(a,c){return goog.string.contains(a,"&")?goog.string.unescapeEntitiesUsingDom_(a,c):a};
goog.string.unescapeEntitiesUsingDom_=function(a,c){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d;d=c?c.createElement("div"):goog.global.document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,c){var g=b[a];if(g)return g;if("#"==c.charAt(0)){var h=Number("0"+c.substr(1));isNaN(h)||(g=String.fromCharCode(h))}g||(d.innerHTML=a+" ",g=d.firstChild.nodeValue.slice(0,-1));return b[a]=g})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,b){switch(b){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==b.charAt(0)){var d=Number("0"+b.substr(1));if(!isNaN(d))return String.fromCharCode(d)}return a}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,c){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),c)};
goog.string.preserveSpaces=function(a){return a.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(a,c){for(var b=c.length,d=0;d<b;d++){var e=1==b?c:c.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,c,b){b&&(a=goog.string.unescapeEntities(a));a.length>c&&(a=a.substring(0,c-3)+"...");b&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,c,b,d){b&&(a=goog.string.unescapeEntities(a));if(d&&a.length>c){d>c&&(d=c);var e=a.length-d;a=a.substring(0,c-d)+"..."+a.substring(e)}else a.length>c&&(d=Math.floor(c/2),e=a.length-d,a=a.substring(0,d+c%2)+"..."+a.substring(e));b&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);if(a.quote)return a.quote();for(var c=['"'],b=0;b<a.length;b++){var d=a.charAt(b),e=d.charCodeAt(0);c[b+1]=goog.string.specialEscapeChars_[d]||(31<e&&127>e?d:goog.string.escapeChar(d))}c.push('"');return c.join("")};goog.string.escapeString=function(a){for(var c=[],b=0;b<a.length;b++)c[b]=goog.string.escapeChar(a.charAt(b));return c.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var c=a,b=a.charCodeAt(0);if(31<b&&127>b)c=a;else{if(256>b){if(c="\\x",16>b||256<b)c+="0"}else c="\\u",4096>b&&(c+="0");c+=b.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=c};goog.string.contains=function(a,c){return-1!=a.indexOf(c)};
goog.string.caseInsensitiveContains=function(a,c){return goog.string.contains(a.toLowerCase(),c.toLowerCase())};goog.string.countOf=function(a,c){return a&&c?a.split(c).length-1:0};goog.string.removeAt=function(a,c,b){var d=a;0<=c&&c<a.length&&0<b&&(d=a.substr(0,c)+a.substr(c+b,a.length-c-b));return d};goog.string.remove=function(a,c){var b=new RegExp(goog.string.regExpEscape(c),"");return a.replace(b,"")};
goog.string.removeAll=function(a,c){var b=new RegExp(goog.string.regExpEscape(c),"g");return a.replace(b,"")};goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,c){return Array(c+1).join(a)};goog.string.padNumber=function(a,c,b){a=goog.isDef(b)?a.toFixed(b):String(a);b=a.indexOf(".");-1==b&&(b=a.length);return goog.string.repeat("0",Math.max(0,c-b))+a};
goog.string.makeSafe=function(a){return null==a?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(a,c){for(var b=0,d=goog.string.trim(String(a)).split("."),e=goog.string.trim(String(c)).split("."),f=Math.max(d.length,e.length),g=0;0==b&&g<f;g++){var h=d[g]||"",k=e[g]||"",l=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=l.exec(h)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;var b=0==n[1].length?0:parseInt(n[1],10),q=0==p[1].length?0:parseInt(p[1],10),b=goog.string.compareElements_(b,q)||goog.string.compareElements_(0==n[2].length,0==p[2].length)||
goog.string.compareElements_(n[2],p[2])}while(0==b)}return b};goog.string.compareElements_=function(a,c){return a<c?-1:a>c?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){for(var c=0,b=0;b<a.length;++b)c=31*c+a.charCodeAt(b),c%=goog.string.HASHCODE_MAX_;return c};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(a){var c=Number(a);return 0==c&&goog.string.isEmptyOrWhitespace(a)?NaN:c};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})};goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(a,c){var b=goog.isString(c)?goog.string.regExpEscape(c):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})};goog.string.capitalize=function(a){return String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase()};goog.string.parseInt=function(a){isFinite(a)&&(a=String(a));return goog.isString(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};
goog.string.splitLimit=function(a,c,b){a=a.split(c);for(var d=[];0<b&&a.length;)d.push(a.shift()),b--;a.length&&d.push(a.join(c));return d};goog.string.editDistance=function(a,c){var b=[],d=[];if(a==c)return 0;if(!a.length||!c.length)return Math.max(a.length,c.length);for(var e=0;e<c.length+1;e++)b[e]=e;for(e=0;e<a.length;e++){d[0]=e+1;for(var f=0;f<c.length;f++)d[f+1]=Math.min(d[f]+1,b[f+1]+1,b[f]+(a[e]!=c[f]));for(f=0;f<b.length;f++)b[f]=d[f]}return d[c.length]};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,c){c.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,c));c.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(a){throw a;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;
goog.asserts.doAssertFailure_=function(a,c,b,d){var e="Assertion failed";if(b)var e=e+(": "+b),f=d;else a&&(e+=": "+a,f=c);a=new goog.asserts.AssertionError(""+e,f||[]);goog.asserts.errorHandler_(a)};goog.asserts.setErrorHandler=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=a)};goog.asserts.assert=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,c,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.fail=function(a,c){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertString=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertFunction=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertObject=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertArray=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertBoolean=function(a,c,b){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertElement=function(a,c,b){!goog.asserts.ENABLE_ASSERTS||goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(a),a],c,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,c,b,d){!goog.asserts.ENABLE_ASSERTS||a instanceof c||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(c),goog.asserts.getType_(a)],b,Array.prototype.slice.call(arguments,3));return a};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var a in Object.prototype)goog.asserts.fail(a+" should not be enumerable in Object.prototype.")};
goog.asserts.getType_=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(a){return a[a.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,c,b)}:function(a,c,b){b=null==b?0:0>b?Math.max(0,a.length+b):b;if(goog.isString(a))return goog.isString(c)&&1==c.length?a.indexOf(c,b):-1;for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,c,null==b?a.length-1:b)}:function(a,c,b){b=null==b?a.length-1:b;0>b&&(b=Math.max(0,a.length+b));if(goog.isString(a))return goog.isString(c)&&1==c.length?a.lastIndexOf(c,b):-1;for(;0<=b;b--)if(b in a&&a[b]===c)return b;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(a,c,b){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)f in e&&c.call(b,e[f],f,a)};goog.array.forEachRight=function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;--d)d in e&&c.call(b,e[d],d,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=[],f=0,g=goog.isString(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var k=g[h];c.call(b,k,h,a)&&(e[f++]=k)}return e};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.map.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=Array(d),f=goog.isString(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=c.call(b,f[g],g,a));return e};
goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(a,c,b,d){goog.asserts.assert(null!=a.length);d&&(c=goog.bind(c,d));return goog.array.ARRAY_PROTOTYPE_.reduce.call(a,c,b)}:function(a,c,b,d){var e=b;goog.array.forEach(a,function(b,g){e=c.call(d,e,b,g,a)});return e};
goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(a,c,b,d){goog.asserts.assert(null!=a.length);d&&(c=goog.bind(c,d));return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(a,c,b)}:function(a,c,b,d){var e=b;goog.array.forEachRight(a,function(b,g){e=c.call(d,e,b,g,a)});return e};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.some.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&c.call(b,e[f],f,a))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(a,c,b){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.every.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!c.call(b,e[f],f,a))return!1;return!0};goog.array.count=function(a,c,b){var d=0;goog.array.forEach(a,function(a,f,g){c.call(b,a,f,g)&&++d},b);return d};
goog.array.find=function(a,c,b){c=goog.array.findIndex(a,c,b);return 0>c?null:goog.isString(a)?a.charAt(c):a[c]};goog.array.findIndex=function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&c.call(b,e[f],f,a))return f;return-1};goog.array.findRight=function(a,c,b){c=goog.array.findIndexRight(a,c,b);return 0>c?null:goog.isString(a)?a.charAt(c):a[c]};
goog.array.findIndexRight=function(a,c,b){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;d--)if(d in e&&c.call(b,e[d],d,a))return d;return-1};goog.array.contains=function(a,c){return 0<=goog.array.indexOf(a,c)};goog.array.isEmpty=function(a){return 0==a.length};goog.array.clear=function(a){if(!goog.isArray(a))for(var c=a.length-1;0<=c;c--)delete a[c];a.length=0};goog.array.insert=function(a,c){goog.array.contains(a,c)||a.push(c)};
goog.array.insertAt=function(a,c,b){goog.array.splice(a,b,0,c)};goog.array.insertArrayAt=function(a,c,b){goog.partial(goog.array.splice,a,b,0).apply(null,c)};goog.array.insertBefore=function(a,c,b){var d;2==arguments.length||0>(d=goog.array.indexOf(a,b))?a.push(c):goog.array.insertAt(a,c,d)};goog.array.remove=function(a,c){var b=goog.array.indexOf(a,c),d;(d=0<=b)&&goog.array.removeAt(a,b);return d};
goog.array.removeAt=function(a,c){goog.asserts.assert(null!=a.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(a,c,1).length};goog.array.removeIf=function(a,c,b){c=goog.array.findIndex(a,c,b);return 0<=c?(goog.array.removeAt(a,c),!0):!1};goog.array.removeAllIf=function(a,c,b){var d=0;goog.array.forEachRight(a,function(e,f){c.call(b,e,f,a)&&goog.array.removeAt(a,f)&&d++});return d};goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};
goog.array.join=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(a){var c=a.length;if(0<c){for(var b=Array(c),d=0;d<c;d++)b[d]=a[d];return b}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(goog.isArrayLike(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var g=0;g<f;g++)a[e+g]=d[g]}else a.push(d)}};
goog.array.splice=function(a,c,b,d){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};goog.array.slice=function(a,c,b){goog.asserts.assert(null!=a.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(a,c):goog.array.ARRAY_PROTOTYPE_.slice.call(a,c,b)};
goog.array.removeDuplicates=function(a,c,b){c=c||a;var d=function(a){return goog.isObject(g)?"o"+goog.getUid(g):(typeof g).charAt(0)+g};b=b||d;for(var d={},e=0,f=0;f<a.length;){var g=a[f++],h=b(g);Object.prototype.hasOwnProperty.call(d,h)||(d[h]=!0,c[e++]=g)}c.length=e};goog.array.binarySearch=function(a,c,b){return goog.array.binarySearch_(a,b||goog.array.defaultCompare,!1,c)};goog.array.binarySelect=function(a,c,b){return goog.array.binarySearch_(a,c,!0,void 0,b)};
goog.array.binarySearch_=function(a,c,b,d,e){for(var f=0,g=a.length,h;f<g;){var k=f+g>>1,l;l=b?c.call(e,a[k],k,a):c(d,a[k]);0<l?f=k+1:(g=k,h=!l)}return h?f:~f};goog.array.sort=function(a,c){a.sort(c||goog.array.defaultCompare)};goog.array.stableSort=function(a,c){for(var b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,b){return d(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value};
goog.array.sortByKey=function(a,c,b){var d=b||goog.array.defaultCompare;goog.array.sort(a,function(a,b){return d(c(a),c(b))})};goog.array.sortObjectsByKey=function(a,c,b){goog.array.sortByKey(a,function(a){return a[c]},b)};goog.array.isSorted=function(a,c,b){c=c||goog.array.defaultCompare;for(var d=1;d<a.length;d++){var e=c(a[d-1],a[d]);if(0<e||0==e&&b)return!1}return!0};
goog.array.equals=function(a,c,b){if(!goog.isArrayLike(a)||!goog.isArrayLike(c)||a.length!=c.length)return!1;var d=a.length;b=b||goog.array.defaultCompareEquality;for(var e=0;e<d;e++)if(!b(a[e],c[e]))return!1;return!0};goog.array.compare3=function(a,c,b){b=b||goog.array.defaultCompare;for(var d=Math.min(a.length,c.length),e=0;e<d;e++){var f=b(a[e],c[e]);if(0!=f)return f}return goog.array.defaultCompare(a.length,c.length)};goog.array.defaultCompare=function(a,c){return a>c?1:a<c?-1:0};
goog.array.inverseDefaultCompare=function(a,c){return-goog.array.defaultCompare(a,c)};goog.array.defaultCompareEquality=function(a,c){return a===c};goog.array.binaryInsert=function(a,c,b){b=goog.array.binarySearch(a,c,b);return 0>b?(goog.array.insertAt(a,c,-(b+1)),!0):!1};goog.array.binaryRemove=function(a,c,b){c=goog.array.binarySearch(a,c,b);return 0<=c?goog.array.removeAt(a,c):!1};
goog.array.bucket=function(a,c,b){for(var d={},e=0;e<a.length;e++){var f=a[e],g=c.call(b,f,e,a);goog.isDef(g)&&(d[g]||(d[g]=[])).push(f)}return d};goog.array.toObject=function(a,c,b){var d={};goog.array.forEach(a,function(e,f){d[c.call(b,e,f,a)]=e});return d};goog.array.range=function(a,c,b){var d=[],e=0,f=a;b=b||1;void 0!==c&&(e=a,f=c);if(0>b*(f-e))return[];if(0<b)for(a=e;a<f;a+=b)d.push(a);else for(a=e;a>f;a+=b)d.push(a);return d};
goog.array.repeat=function(a,c){for(var b=[],d=0;d<c;d++)b[d]=a;return b};goog.array.flatten=function(a){for(var c=[],b=0;b<arguments.length;b++){var d=arguments[b];if(goog.isArray(d))for(var e=0;e<d.length;e+=8192)for(var f=goog.array.slice(d,e,e+8192),f=goog.array.flatten.apply(null,f),g=0;g<f.length;g++)c.push(f[g]);else c.push(d)}return c};
goog.array.rotate=function(a,c){goog.asserts.assert(null!=a.length);a.length&&(c%=a.length,0<c?goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-c,c)):0>c&&goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-c)));return a};goog.array.moveItem=function(a,c,b){goog.asserts.assert(0<=c&&c<a.length);goog.asserts.assert(0<=b&&b<a.length);c=goog.array.ARRAY_PROTOTYPE_.splice.call(a,c,1);goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,0,c[0])};
goog.array.zip=function(a){if(!arguments.length)return[];for(var c=[],b=0;;b++){for(var d=[],e=0;e<arguments.length;e++){var f=arguments[e];if(b>=f.length)return c;d.push(f[b])}c.push(d)}};goog.array.shuffle=function(a,c){for(var b=c||Math.random,d=a.length-1;0<d;d--){var e=Math.floor(b()*(d+1)),f=a[d];a[d]=a[e];a[e]=f}};goog.array.copyByIndex=function(a,c){var b=[];goog.array.forEach(c,function(c){b.push(a[c])});return b};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var a=goog.labs.userAgent.util.getNavigator_();return a&&(a=a.userAgent)?a:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(a){goog.labs.userAgent.util.userAgent_=a||goog.labs.userAgent.util.getNativeUserAgentString_()};
goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(a){var c=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(c,a)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(a){var c=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(c,a)};
goog.labs.userAgent.util.extractVersionTuples=function(a){for(var c=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,b=[],d;d=c.exec(a);)b.push([d[1],d[2],d[3]||void 0]);return b};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")||goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};
goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchIE_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};
goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};
goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchIE_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};
goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;
goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};
goog.labs.userAgent.browser.getVersion=function(){function a(a){a=goog.array.find(a,d);return b[a]||""}var c=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(c);var c=goog.labs.userAgent.util.extractVersionTuples(c),b={};goog.array.forEach(c,function(a){b[a[0]]=a[1]});var d=goog.partial(goog.object.containsKey,b);return goog.labs.userAgent.browser.isOpera()?a(["Version","Opera","OPR"]):goog.labs.userAgent.browser.isChrome()?
a(["Chrome","CriOS"]):(c=c[2])&&c[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),a)};
goog.labs.userAgent.browser.getIEVersion_=function(a){var c=/rv: *([\d\.]*)/.exec(a);if(c&&c[1]||(c=/Edge\/([\d\.]+)/.exec(a)))return c[1];var c="",b=/MSIE +([\d\.]+)/.exec(a);if(b&&b[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==b[1])if(a&&a[1])switch(a[1]){case "4.0":c="8.0";break;case "5.0":c="9.0";break;case "6.0":c="10.0";break;case "7.0":c="11.0"}else c="7.0";else c=b[1];return c};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};
goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};
goog.labs.userAgent.engine.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(a){var a=goog.labs.userAgent.util.extractVersionTuples(a),c=goog.labs.userAgent.engine.getEngineTuple_(a);if(c)return"Gecko"==c[0]?goog.labs.userAgent.engine.getVersionForKey_(a,"Firefox"):c[1];var a=a[0],b;if(a&&(b=a[2])&&(b=/Trident\/([^\s;]+)/.exec(b)))return b[1]}return""};
goog.labs.userAgent.engine.getEngineTuple_=function(a){if(!goog.labs.userAgent.engine.isEdge())return a[1];for(var c=0;c<a.length;c++){var b=a[c];if("Edge"==b[0])return b}};goog.labs.userAgent.engine.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),a)};goog.labs.userAgent.engine.getVersionForKey_=function(a,c){var b=goog.array.find(a,function(a){return c==a[0]});return b&&b[1]||""};goog.labs.userAgent.platform={};goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};
goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};
goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};
goog.labs.userAgent.platform.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent(),c="";goog.labs.userAgent.platform.isWindows()?(c=/Windows (?:NT|Phone) ([0-9.]+)/,c=(a=c.exec(a))?a[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(c=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,c=(a=c.exec(a))&&a[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(c=/Mac OS X ([0-9_.]+)/,c=(a=c.exec(a))?a[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(c=/Android\s+([^\);]+)(\)|;)/,
c=(a=c.exec(a))&&a[1]):goog.labs.userAgent.platform.isChromeOS()&&(c=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,c=(a=c.exec(a))&&a[1]);return c||""};goog.labs.userAgent.platform.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),a)};goog.string.format=function(a,c){var b=Array.prototype.slice.call(arguments),d=b.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(a,c,d,h,k,l,m,n){if("%"==l)return"%";var p=b.shift();if("undefined"==typeof p)throw Error("[goog.string.format] Not enough arguments");arguments[0]=p;return goog.string.format.demuxes_[l].apply(null,arguments)})};goog.string.format.demuxes_={};
goog.string.format.demuxes_.s=function(a,c,b,d,e,f,g,h){return isNaN(b)||""==b||a.length>=b?a:a=-1<c.indexOf("-",0)?a+goog.string.repeat(" ",b-a.length):goog.string.repeat(" ",b-a.length)+a};
goog.string.format.demuxes_.f=function(a,c,b,d,e,f,g,h){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));f=0>a?"-":0<=c.indexOf("+")?"+":0<=c.indexOf(" ")?" ":"";0<=a&&(d=f+d);if(isNaN(b)||d.length>=b)return d;d=isNaN(e)?Math.abs(a).toString():Math.abs(a).toFixed(e);a=b-d.length-f.length;0<=c.indexOf("-",0)?d=f+d+goog.string.repeat(" ",a):(c=0<=c.indexOf("0",0)?"0":" ",d=f+goog.string.repeat(c,a)+d);return d};
goog.string.format.demuxes_.d=function(a,c,b,d,e,f,g,h){return goog.string.format.demuxes_.f(parseInt(a,10),c,b,d,0,f,g,h)};goog.string.format.demuxes_.i=goog.string.format.demuxes_.d;goog.string.format.demuxes_.u=goog.string.format.demuxes_.d;box2d.Testbed.DebugDraw=function(a,c){box2d.b2Draw.call(this);this.m_canvas=a;this.m_ctx=this.m_canvas.getContext("2d");this.m_settings=c};goog.inherits(box2d.Testbed.DebugDraw,box2d.b2Draw);goog.exportSymbol("box2d.Testbed.DebugDraw",box2d.Testbed.DebugDraw);box2d.Testbed.DebugDraw.prototype.m_canvas=null;goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"m_canvas",box2d.Testbed.DebugDraw.prototype.m_canvas);box2d.Testbed.DebugDraw.prototype.m_ctx=null;
goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"m_ctx",box2d.Testbed.DebugDraw.prototype.m_ctx);box2d.Testbed.DebugDraw.prototype.m_settings=null;goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"m_settings",box2d.Testbed.DebugDraw.prototype.m_settings);box2d.Testbed.DebugDraw.prototype.PushTransform=function(a){var c=this.m_ctx;c.save();c.translate(a.p.x,a.p.y);c.rotate(a.q.GetAngle())};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"PushTransform",box2d.Testbed.DebugDraw.prototype.PushTransform);
box2d.Testbed.DebugDraw.prototype.PopTransform=function(a){this.m_ctx.restore()};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"PopTransform",box2d.Testbed.DebugDraw.prototype.PopTransform);box2d.Testbed.DebugDraw.prototype.DrawPolygon=function(a,c,b){if(c){var d=this.m_ctx;d.beginPath();d.moveTo(a[0].x,a[0].y);for(var e=1;e<c;e++)d.lineTo(a[e].x,a[e].y);d.closePath();d.strokeStyle=b.MakeStyleString(1);d.stroke()}};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawPolygon",box2d.Testbed.DebugDraw.prototype.DrawPolygon);
box2d.Testbed.DebugDraw.prototype.DrawSolidPolygon=function(a,c,b){if(c){var d=this.m_ctx;d.beginPath();d.moveTo(a[0].x,a[0].y);for(var e=1;e<c;e++)d.lineTo(a[e].x,a[e].y);d.closePath();d.fillStyle=b.MakeStyleString(.5);d.fill();d.strokeStyle=b.MakeStyleString(1);d.stroke()}};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawSolidPolygon",box2d.Testbed.DebugDraw.prototype.DrawSolidPolygon);
box2d.Testbed.DebugDraw.prototype.DrawCircle=function(a,c,b){if(c){var d=this.m_ctx;d.beginPath();d.arc(a.x,a.y,c,0,2*box2d.b2_pi,!0);d.strokeStyle=b.MakeStyleString(1);d.stroke()}};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawCircle",box2d.Testbed.DebugDraw.prototype.DrawCircle);
box2d.Testbed.DebugDraw.prototype.DrawSolidCircle=function(a,c,b,d){if(c){var e=this.m_ctx,f=a.x;a=a.y;e.beginPath();e.arc(f,a,c,0,2*box2d.b2_pi,!0);e.moveTo(f,a);e.lineTo(f+b.x*c,a+b.y*c);e.fillStyle=d.MakeStyleString(.5);e.fill();e.strokeStyle=d.MakeStyleString(1);e.stroke()}};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawSolidCircle",box2d.Testbed.DebugDraw.prototype.DrawSolidCircle);
box2d.Testbed.DebugDraw.prototype.DrawParticles=function(a,c,b,d){var e=this.m_ctx,f=2*c;if(null!==b)for(var g=0;g<d;++g){var h=a[g],k=b[g];e.fillStyle="rgba("+k.r+","+k.g+","+k.b+","+k.a/255+")";e.fillRect(h.x-c,h.y-c,f,f)}else{e.fillStyle="rgba(255,255,255,0.5)";e.beginPath();for(g=0;g<d;++g)h=a[g],e.rect(h.x-c,h.y-c,f,f);e.fill()}};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawParticles",box2d.Testbed.DebugDraw.prototype.DrawParticles);
box2d.Testbed.DebugDraw.prototype.DrawSegment=function(a,c,b){var d=this.m_ctx;d.beginPath();d.moveTo(a.x,a.y);d.lineTo(c.x,c.y);d.strokeStyle=b.MakeStyleString(1);d.stroke()};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawSegment",box2d.Testbed.DebugDraw.prototype.DrawSegment);
box2d.Testbed.DebugDraw.prototype.DrawTransform=function(a){var c=this.m_ctx;this.PushTransform(a);c.beginPath();c.moveTo(0,0);c.lineTo(1,0);c.strokeStyle=box2d.b2Color.RED.MakeStyleString(1);c.stroke();c.beginPath();c.moveTo(0,0);c.lineTo(0,1);c.strokeStyle=box2d.b2Color.GREEN.MakeStyleString(1);c.stroke();this.PopTransform(a)};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawTransform",box2d.Testbed.DebugDraw.prototype.DrawTransform);
box2d.Testbed.DebugDraw.prototype.DrawPoint=function(a,c,b){var d=this.m_ctx;d.fillStyle=b.MakeStyleString();c*=this.m_settings.viewZoom;c/=this.m_settings.canvasScale;b=c/2;d.fillRect(a.x-b,a.y-b,c,c)};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawPoint",box2d.Testbed.DebugDraw.prototype.DrawPoint);
box2d.Testbed.DebugDraw.prototype.DrawString=function(a,c,b,d){var e=this.m_ctx,f=Array.prototype.slice.call(arguments),f=goog.string.format.apply(null,f.slice(2));e.save();e.setTransform(1,0,0,1,0,0);e.font="18pt helvetica";e.fillStyle=box2d.Testbed.DebugDraw.prototype.DrawString.s_color.MakeStyleString();e.fillText(f,a,c);e.restore()};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawString",box2d.Testbed.DebugDraw.prototype.DrawString);
box2d.Testbed.DebugDraw.prototype.DrawString.s_color=new box2d.b2Color(.9,.6,.6);
box2d.Testbed.DebugDraw.prototype.DrawStringWorld=function(a,c,b,d){var e=box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_p.Set(a,c);box2d.b2Sub_V2_V2(e,this.m_settings.viewCenter,e);box2d.b2MulT_R_V2(this.m_settings.viewRotation,e,e);box2d.b2Mul_S_V2(1/this.m_settings.viewZoom,e,e);box2d.b2Mul_S_V2(this.m_settings.canvasScale,e,e);e.y*=-1;var f=box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_cc.Set(.5*this.m_canvas.width,.5*this.m_canvas.height);box2d.b2Add_V2_V2(e,f,e);var f=this.m_ctx,
g=Array.prototype.slice.call(arguments),g=goog.string.format.apply(null,g.slice(2));f.save();f.setTransform(1,0,0,1,0,0);f.font="18pt helvetica";f.fillStyle=box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_color.MakeStyleString();f.fillText(g,e.x,e.y);f.restore()};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawStringWorld",box2d.Testbed.DebugDraw.prototype.DrawStringWorld);box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_p=new box2d.b2Vec2;
box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_cc=new box2d.b2Vec2;box2d.Testbed.DebugDraw.prototype.DrawStringWorld.s_color=new box2d.b2Color(.5,.9,.5);box2d.Testbed.DebugDraw.prototype.DrawAABB=function(a,c){var b=this.m_ctx;b.strokeStyle=c.MakeStyleString();b.strokeRect(a.lowerBound.x,a.lowerBound.y,a.upperBound.x-a.lowerBound.x,a.upperBound.y-a.lowerBound.y)};goog.exportProperty(box2d.Testbed.DebugDraw.prototype,"DrawAABB",box2d.Testbed.DebugDraw.prototype.DrawAABB);box2d.Testbed.DRAW_STRING_NEW_LINE=25;goog.exportSymbol("box2d.Testbed.DRAW_STRING_NEW_LINE",box2d.Testbed.DRAW_STRING_NEW_LINE);box2d.Testbed.RandomFloat=function(a,c){a="number"===typeof a?a:-1;c="number"===typeof c?c:1;var b=Math.random();return(c-a)*b+a};box2d.Testbed.Settings=function(){this.viewCenter=new box2d.b2Vec2(0,20);this.viewRotation=new box2d.b2Rot(box2d.b2DegToRad(0));this.particleIterations=box2d.b2CalculateParticleIterations(10,.04,1/this.hz)};
goog.exportSymbol("box2d.Testbed.Settings",box2d.Testbed.Settings);box2d.Testbed.Settings.prototype.canvasScale=10;goog.exportProperty(box2d.Testbed.Settings.prototype,"canvasScale",box2d.Testbed.Settings.prototype.canvasScale);box2d.Testbed.Settings.prototype.viewZoom=1;goog.exportProperty(box2d.Testbed.Settings.prototype,"viewZoom",box2d.Testbed.Settings.prototype.viewZoom);box2d.Testbed.Settings.prototype.viewCenter=null;goog.exportProperty(box2d.Testbed.Settings.prototype,"viewCenter",box2d.Testbed.Settings.prototype.viewCenter);
box2d.Testbed.Settings.prototype.viewRotation=null;goog.exportProperty(box2d.Testbed.Settings.prototype,"viewRotation",box2d.Testbed.Settings.prototype.viewRotation);box2d.Testbed.Settings.prototype.hz=60;goog.exportProperty(box2d.Testbed.Settings.prototype,"hz",box2d.Testbed.Settings.prototype.hz);box2d.Testbed.Settings.prototype.velocityIterations=8;goog.exportProperty(box2d.Testbed.Settings.prototype,"velocityIterations",box2d.Testbed.Settings.prototype.velocityIterations);
box2d.Testbed.Settings.prototype.positionIterations=3;goog.exportProperty(box2d.Testbed.Settings.prototype,"positionIterations",box2d.Testbed.Settings.prototype.positionIterations);box2d.Testbed.Settings.prototype.particleIterations=1;goog.exportProperty(box2d.Testbed.Settings.prototype,"particleIterations",box2d.Testbed.Settings.prototype.particleIterations);box2d.Testbed.Settings.prototype.drawShapes=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawShapes",box2d.Testbed.Settings.prototype.drawShapes);
box2d.Testbed.Settings.prototype.drawParticles=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawParticles",box2d.Testbed.Settings.prototype.drawParticles);box2d.Testbed.Settings.prototype.drawJoints=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawJoints",box2d.Testbed.Settings.prototype.drawJoints);box2d.Testbed.Settings.prototype.drawAABBs=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawAABBs",box2d.Testbed.Settings.prototype.drawAABBs);
box2d.Testbed.Settings.prototype.drawContactPoints=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawContactPoints",box2d.Testbed.Settings.prototype.drawContactPoints);box2d.Testbed.Settings.prototype.drawContactNormals=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawContactNormals",box2d.Testbed.Settings.prototype.drawContactNormals);box2d.Testbed.Settings.prototype.drawContactImpulse=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawContactImpulse",box2d.Testbed.Settings.prototype.drawContactImpulse);
box2d.Testbed.Settings.prototype.drawFrictionImpulse=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawFrictionImpulse",box2d.Testbed.Settings.prototype.drawFrictionImpulse);box2d.Testbed.Settings.prototype.drawCOMs=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawCOMs",box2d.Testbed.Settings.prototype.drawCOMs);box2d.Testbed.Settings.prototype.drawControllers=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawControllers",box2d.Testbed.Settings.prototype.drawControllers);
box2d.Testbed.Settings.prototype.drawStats=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawStats",box2d.Testbed.Settings.prototype.drawStats);box2d.Testbed.Settings.prototype.drawProfile=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"drawProfile",box2d.Testbed.Settings.prototype.drawProfile);box2d.Testbed.Settings.prototype.enableWarmStarting=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"enableWarmStarting",box2d.Testbed.Settings.prototype.enableWarmStarting);
box2d.Testbed.Settings.prototype.enableContinuous=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"enableContinuous",box2d.Testbed.Settings.prototype.enableContinuous);box2d.Testbed.Settings.prototype.enableSubStepping=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"enableSubStepping",box2d.Testbed.Settings.prototype.enableSubStepping);box2d.Testbed.Settings.prototype.enableSleep=!0;goog.exportProperty(box2d.Testbed.Settings.prototype,"enableSleep",box2d.Testbed.Settings.prototype.enableSleep);
box2d.Testbed.Settings.prototype.pause=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"pause",box2d.Testbed.Settings.prototype.pause);box2d.Testbed.Settings.prototype.singleStep=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"singleStep",box2d.Testbed.Settings.prototype.singleStep);box2d.Testbed.Settings.prototype.strictContacts=!1;goog.exportProperty(box2d.Testbed.Settings.prototype,"strictContacts",box2d.Testbed.Settings.prototype.strictContacts);
box2d.Testbed.TestEntry=function(a,c){this.name=a;this.createFcn=c};goog.exportSymbol("box2d.Testbed.TestEntry",box2d.Testbed.TestEntry);box2d.Testbed.TestEntry.prototype.name="unknown";goog.exportProperty(box2d.Testbed.TestEntry.prototype,"name",box2d.Testbed.TestEntry.prototype.name);box2d.Testbed.TestEntry.prototype.createFcn=function(a,c){};goog.exportProperty(box2d.Testbed.TestEntry.prototype,"createFcn",box2d.Testbed.TestEntry.prototype.createFcn);
box2d.Testbed.DestructionListener=function(a){box2d.b2DestructionListener.call(this);this.test=a};goog.inherits(box2d.Testbed.DestructionListener,box2d.b2DestructionListener);goog.exportSymbol("box2d.Testbed.DestructionListener",box2d.Testbed.DestructionListener);box2d.Testbed.DestructionListener.prototype.test=null;goog.exportProperty(box2d.Testbed.DestructionListener.prototype,"test",box2d.Testbed.DestructionListener.prototype.test);
box2d.Testbed.DestructionListener.prototype.SayGoodbyeJoint=function(a){this.test.m_mouseJoint===a?this.test.m_mouseJoint=null:this.test.JointDestroyed(a)};goog.exportProperty(box2d.Testbed.DestructionListener.prototype,"SayGoodbyeJoint",box2d.Testbed.DestructionListener.prototype.SayGoodbyeJoint);box2d.Testbed.DestructionListener.prototype.SayGoodbyeFixture=function(a){};goog.exportProperty(box2d.Testbed.DestructionListener.prototype,"SayGoodbyeFixture",box2d.Testbed.DestructionListener.prototype.SayGoodbyeFixture);
box2d.Testbed.DestructionListener.prototype.SayGoodbyeParticleGroup=function(a){this.test.ParticleGroupDestroyed(a)};goog.exportProperty(box2d.Testbed.DestructionListener.prototype,"SayGoodbyeParticleGroup",box2d.Testbed.DestructionListener.prototype.SayGoodbyeParticleGroup);box2d.Testbed.ContactPoint=function(){this.normal=new box2d.b2Vec2;this.position=new box2d.b2Vec2};goog.exportSymbol("box2d.Testbed.ContactPoint",box2d.Testbed.ContactPoint);box2d.Testbed.ContactPoint.prototype.fixtureA=null;
goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"fixtureA",box2d.Testbed.ContactPoint.prototype.fixtureA);box2d.Testbed.ContactPoint.prototype.fixtureB=null;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"fixtureB",box2d.Testbed.ContactPoint.prototype.fixtureB);box2d.Testbed.ContactPoint.prototype.normal=new box2d.b2Vec2;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"normal",box2d.Testbed.ContactPoint.prototype.normal);box2d.Testbed.ContactPoint.prototype.position=new box2d.b2Vec2;
goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"position",box2d.Testbed.ContactPoint.prototype.position);box2d.Testbed.ContactPoint.prototype.state=box2d.b2PointState.b2_nullState;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"state",box2d.Testbed.ContactPoint.prototype.state);box2d.Testbed.ContactPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"normalImpulse",box2d.Testbed.ContactPoint.prototype.normalImpulse);
box2d.Testbed.ContactPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"tangentImpulse",box2d.Testbed.ContactPoint.prototype.tangentImpulse);box2d.Testbed.ContactPoint.prototype.separation=0;goog.exportProperty(box2d.Testbed.ContactPoint.prototype,"separation",box2d.Testbed.ContactPoint.prototype.separation);
box2d.Testbed.Test=function(a,c){box2d.b2ContactListener.call(this);var b=new box2d.b2ParticleSystemDef,d=new box2d.b2Vec2(0,-10);this.m_world=new box2d.b2World(d);this.m_particleSystem=this.m_world.CreateParticleSystem(b);this.m_bomb=null;this.m_textLine=30;this.m_mouseJoint=null;this.m_points=Array(box2d.Testbed.Test.k_maxContactPoints);for(b=0;b<box2d.Testbed.Test.k_maxContactPoints;++b)this.m_points[b]=new box2d.Testbed.ContactPoint;this.m_pointCount=0;this.m_destructionListener=new box2d.Testbed.DestructionListener(this);
this.m_world.SetDestructionListener(this.m_destructionListener);this.m_world.SetContactListener(this);this.m_debugDraw=new box2d.Testbed.DebugDraw(a,c);this.m_world.SetDebugDraw(this.m_debugDraw);this.m_particleSystem.SetGravityScale(.4);this.m_particleSystem.SetDensity(1.2);this.m_bombSpawnPoint=new box2d.b2Vec2;this.m_bombSpawning=!1;this.m_mouseWorld=new box2d.b2Vec2;this.m_mouseTracing=!1;this.m_mouseTracerPosition=new box2d.b2Vec2;this.m_mouseTracerVelocity=new box2d.b2Vec2;this.m_stepCount=
0;this.m_maxProfile=new box2d.b2Profile;this.m_totalProfile=new box2d.b2Profile;b=new box2d.b2BodyDef;this.m_groundBody=this.m_world.CreateBody(b)};goog.inherits(box2d.Testbed.Test,box2d.b2ContactListener);goog.exportSymbol("box2d.Testbed.Test",box2d.Testbed.Test);box2d.Testbed.Test.k_maxContactPoints=2048;goog.exportProperty(box2d.Testbed.Test,"k_maxContactPoints",box2d.Testbed.Test.k_maxContactPoints);box2d.Testbed.Test.prototype.m_world=null;
goog.exportProperty(box2d.Testbed.Test.prototype,"m_world",box2d.Testbed.Test.prototype.m_world);box2d.Testbed.Test.prototype.m_particleSystem=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_particleSystem",box2d.Testbed.Test.prototype.m_particleSystem);box2d.Testbed.Test.prototype.m_bomb=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_bomb",box2d.Testbed.Test.prototype.m_bomb);box2d.Testbed.Test.prototype.m_textLine=30;
goog.exportProperty(box2d.Testbed.Test.prototype,"m_textLine",box2d.Testbed.Test.prototype.m_textLine);box2d.Testbed.Test.prototype.m_mouseJoint=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_mouseJoint",box2d.Testbed.Test.prototype.m_mouseJoint);box2d.Testbed.Test.prototype.m_points=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_points",box2d.Testbed.Test.prototype.m_points);box2d.Testbed.Test.prototype.m_pointCount=0;
goog.exportProperty(box2d.Testbed.Test.prototype,"m_pointCount",box2d.Testbed.Test.prototype.m_pointCount);box2d.Testbed.Test.prototype.m_destructionListener=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_destructionListener",box2d.Testbed.Test.prototype.m_destructionListener);box2d.Testbed.Test.prototype.m_debugDraw=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_debugDraw",box2d.Testbed.Test.prototype.m_debugDraw);box2d.Testbed.Test.prototype.m_bombSpawnPoint=null;
goog.exportProperty(box2d.Testbed.Test.prototype,"m_bombSpawnPoint",box2d.Testbed.Test.prototype.m_bombSpawnPoint);box2d.Testbed.Test.prototype.m_bombSpawning=!1;goog.exportProperty(box2d.Testbed.Test.prototype,"m_bombSpawning",box2d.Testbed.Test.prototype.m_bombSpawning);box2d.Testbed.Test.prototype.m_mouseWorld=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_mouseWorld",box2d.Testbed.Test.prototype.m_mouseWorld);box2d.Testbed.Test.prototype.m_mouseTracing=!1;
goog.exportProperty(box2d.Testbed.Test.prototype,"m_mouseTracing",box2d.Testbed.Test.prototype.m_mouseTracing);box2d.Testbed.Test.prototype.m_mouseTracerPosition=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_mouseTracerPosition",box2d.Testbed.Test.prototype.m_mouseTracerPosition);box2d.Testbed.Test.prototype.m_mouseTracerVelocity=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_mouseTracerVelocity",box2d.Testbed.Test.prototype.m_mouseTracerVelocity);
box2d.Testbed.Test.prototype.m_stepCount=0;goog.exportProperty(box2d.Testbed.Test.prototype,"m_stepCount",box2d.Testbed.Test.prototype.m_stepCount);box2d.Testbed.Test.prototype.m_maxProfile=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_maxProfile",box2d.Testbed.Test.prototype.m_maxProfile);box2d.Testbed.Test.prototype.m_totalProfile=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_totalProfile",box2d.Testbed.Test.prototype.m_totalProfile);
box2d.Testbed.Test.prototype.m_groundBody=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_groundBody",box2d.Testbed.Test.prototype.m_groundBody);box2d.Testbed.Test.prototype.m_particleParameters=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_particleParameters",box2d.Testbed.Test.prototype.m_particleParameters);box2d.Testbed.Test.prototype.m_particleParameterDef=null;goog.exportProperty(box2d.Testbed.Test.prototype,"m_particleParameterDef",box2d.Testbed.Test.prototype.m_particleParameterDef);
box2d.Testbed.Test.prototype.JointDestroyed=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"JointDestroyed",box2d.Testbed.Test.prototype.JointDestroyed);box2d.Testbed.Test.prototype.ParticleGroupDestroyed=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"ParticleGroupDestroyed",box2d.Testbed.Test.prototype.ParticleGroupDestroyed);box2d.Testbed.Test.prototype.BeginContact=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"BeginContact",box2d.Testbed.Test.prototype.BeginContact);
box2d.Testbed.Test.prototype.EndContact=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"EndContact",box2d.Testbed.Test.prototype.EndContact);
box2d.Testbed.Test.prototype.PreSolve=function(a,c){var b=a.GetManifold();if(0!==b.pointCount){var d=a.GetFixtureA(),e=a.GetFixtureB(),f=box2d.Testbed.Test.prototype.PreSolve.s_state2;box2d.b2GetPointStates(box2d.Testbed.Test.prototype.PreSolve.s_state1,f,c,b);var g=box2d.Testbed.Test.prototype.PreSolve.s_worldManifold;a.GetWorldManifold(g);for(var h=0;h<b.pointCount&&this.m_pointCount<box2d.Testbed.Test.k_maxContactPoints;++h){var k=this.m_points[this.m_pointCount];k.fixtureA=d;k.fixtureB=e;k.position.Copy(g.points[h]);
k.normal.Copy(g.normal);k.state=f[h];k.normalImpulse=b.points[h].normalImpulse;k.tangentImpulse=b.points[h].tangentImpulse;k.separation=g.separations[h];++this.m_pointCount}}};goog.exportProperty(box2d.Testbed.Test.prototype,"PreSolve",box2d.Testbed.Test.prototype.PreSolve);box2d.Testbed.Test.prototype.PreSolve.s_state1=Array(box2d.b2_maxManifoldPoints);box2d.Testbed.Test.prototype.PreSolve.s_state2=Array(box2d.b2_maxManifoldPoints);box2d.Testbed.Test.prototype.PreSolve.s_worldManifold=new box2d.b2WorldManifold;
box2d.Testbed.Test.prototype.PostSolve=function(a,c){};goog.exportProperty(box2d.Testbed.Test.prototype,"PostSolve",box2d.Testbed.Test.prototype.PostSolve);box2d.Testbed.Test.prototype.Keyboard=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"Keyboard",box2d.Testbed.Test.prototype.Keyboard);box2d.Testbed.Test.prototype.KeyboardUp=function(a){};goog.exportProperty(box2d.Testbed.Test.prototype,"KeyboardUp",box2d.Testbed.Test.prototype.KeyboardUp);
box2d.Testbed.Test.prototype.SetTextLine=function(a){this.m_textLine=a};goog.exportProperty(box2d.Testbed.Test.prototype,"SetTextLine",box2d.Testbed.Test.prototype.SetTextLine);box2d.Testbed.Test.prototype.DrawTitle=function(a){this.m_debugDraw.DrawString(5,box2d.Testbed.DRAW_STRING_NEW_LINE,a);this.m_textLine=2*box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Test.prototype,"DrawTitle",box2d.Testbed.Test.prototype.DrawTitle);
box2d.Testbed.Test.QueryCallback=function(a){this.m_point=a};goog.inherits(box2d.Testbed.Test.QueryCallback,box2d.b2QueryCallback);box2d.Testbed.Test.QueryCallback.prototype.m_point=null;box2d.Testbed.Test.QueryCallback.prototype.m_fixture=null;box2d.Testbed.Test.QueryCallback.prototype.ReportFixture=function(a){return a.GetBody().GetType()===box2d.b2BodyType.b2_dynamicBody&&a.TestPoint(this.m_point)?(this.m_fixture=a,!1):!0};
box2d.Testbed.Test.QueryCallback2=function(a,c,b){this.m_particleSystem=a;this.m_shape=c;this.m_velocity=b};goog.inherits(box2d.Testbed.Test.QueryCallback2,box2d.b2QueryCallback);box2d.Testbed.Test.QueryCallback2.prototype.m_particleSystem=null;box2d.Testbed.Test.QueryCallback2.prototype.m_shape=null;box2d.Testbed.Test.QueryCallback2.prototype.m_velocity=null;box2d.Testbed.Test.QueryCallback2.prototype.ReportFixture=function(a){return!1};
box2d.Testbed.Test.QueryCallback2.prototype.ReportParticle=function(a,c){if(a!==this.m_particleSystem)return!1;var b=box2d.b2Transform.IDENTITY,d=this.m_particleSystem.GetPositionBuffer()[c];this.m_shape.TestPoint(b,d)&&this.m_particleSystem.GetVelocityBuffer()[c].Copy(this.m_velocity);return!0};
box2d.Testbed.Test.prototype.MouseDown=function(a){this.m_mouseWorld.Copy(a);this.m_mouseTracing=!0;this.m_mouseTracerPosition.Copy(a);this.m_mouseTracerVelocity.SetZero();if(null===this.m_mouseJoint){var c=new box2d.b2AABB,b=new box2d.b2Vec2;b.Set(.001,.001);box2d.b2Sub_V2_V2(a,b,c.lowerBound);box2d.b2Add_V2_V2(a,b,c.upperBound);b=new box2d.Testbed.Test.QueryCallback(this.m_mouseWorld);this.m_world.QueryAABB(b,c);b.m_fixture&&(c=b.m_fixture.GetBody(),b=new box2d.b2MouseJointDef,b.bodyA=this.m_groundBody,
b.bodyB=c,b.target.Copy(a),b.maxForce=1E3*c.GetMass(),this.m_mouseJoint=this.m_world.CreateJoint(b),c.SetAwake(!0))}};goog.exportProperty(box2d.Testbed.Test.prototype,"MouseDown",box2d.Testbed.Test.prototype.MouseDown);box2d.Testbed.Test.prototype.SpawnBomb=function(a){this.m_bombSpawnPoint.Copy(a);this.m_bombSpawning=!0};goog.exportProperty(box2d.Testbed.Test.prototype,"SpawnBomb",box2d.Testbed.Test.prototype.SpawnBomb);
box2d.Testbed.Test.prototype.CompleteBombSpawn=function(a){this.m_bombSpawning&&(a=box2d.b2Sub_V2_V2(this.m_bombSpawnPoint,a,new box2d.b2Vec2),a.SelfMul(30),this.LaunchBombAt(this.m_bombSpawnPoint,a),this.m_bombSpawning=!1)};goog.exportProperty(box2d.Testbed.Test.prototype,"CompleteBombSpawn",box2d.Testbed.Test.prototype.CompleteBombSpawn);box2d.Testbed.Test.prototype.ShiftMouseDown=function(a){this.m_mouseWorld.Copy(a);null===this.m_mouseJoint&&this.SpawnBomb(a)};
goog.exportProperty(box2d.Testbed.Test.prototype,"ShiftMouseDown",box2d.Testbed.Test.prototype.ShiftMouseDown);box2d.Testbed.Test.prototype.MouseUp=function(a){this.m_mouseTracing=!1;this.m_mouseJoint&&(this.m_world.DestroyJoint(this.m_mouseJoint),this.m_mouseJoint=null);this.m_bombSpawning&&this.CompleteBombSpawn(a)};goog.exportProperty(box2d.Testbed.Test.prototype,"MouseUp",box2d.Testbed.Test.prototype.MouseUp);
box2d.Testbed.Test.prototype.MouseMove=function(a){this.m_mouseWorld.Copy(a);this.m_mouseJoint&&this.m_mouseJoint.SetTarget(a)};goog.exportProperty(box2d.Testbed.Test.prototype,"MouseMove",box2d.Testbed.Test.prototype.MouseMove);box2d.Testbed.Test.prototype.LaunchBomb=function(){var a=new box2d.b2Vec2(box2d.b2RandomRange(-15,15),30),c=box2d.b2Mul_S_V2(-5,a,new box2d.b2Vec2);this.LaunchBombAt(a,c)};goog.exportProperty(box2d.Testbed.Test.prototype,"LaunchBomb",box2d.Testbed.Test.prototype.LaunchBomb);
box2d.Testbed.Test.prototype.LaunchBombAt=function(a,c){this.m_bomb&&(this.m_world.DestroyBody(this.m_bomb),this.m_bomb=null);var b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Copy(a);b.bullet=!0;this.m_bomb=this.m_world.CreateBody(b);this.m_bomb.SetLinearVelocity(c);b=new box2d.b2CircleShape;b.m_radius=.3;var d=new box2d.b2FixtureDef;d.shape=b;d.density=20;d.restitution=0;this.m_bomb.CreateFixture(d)};goog.exportProperty(box2d.Testbed.Test.prototype,"LaunchBombAt",box2d.Testbed.Test.prototype.LaunchBombAt);
box2d.Testbed.Test.prototype.Step=function(a){var c=0<a.hz?1/a.hz:0;a.pause&&(a.singleStep?a.singleStep=!1:c=0,this.m_debugDraw.DrawString(5,this.m_textLine,"****PAUSED****"),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);var b=box2d.b2DrawFlags.e_none;a.drawShapes&&(b|=box2d.b2DrawFlags.e_shapeBit);a.drawParticles&&(b|=box2d.b2DrawFlags.e_particleBit);a.drawJoints&&(b|=box2d.b2DrawFlags.e_jointBit);a.drawAABBs&&(b|=box2d.b2DrawFlags.e_aabbBit);a.drawCOMs&&(b|=box2d.b2DrawFlags.e_centerOfMassBit);
a.drawControllers&&(b|=box2d.b2DrawFlags.e_controllerBit);this.m_debugDraw.SetFlags(b);this.m_world.SetAllowSleeping(a.enableSleep);this.m_world.SetWarmStarting(a.enableWarmStarting);this.m_world.SetContinuousPhysics(a.enableContinuous);this.m_world.SetSubStepping(a.enableSubStepping);this.m_particleSystem.SetStrictContactCheck(a.strictContacts);this.m_pointCount=0;this.m_world.Step(c,a.velocityIterations,a.positionIterations,a.particleIterations);this.m_world.DrawDebugData();0<c&&++this.m_stepCount;
if(a.drawStats){var b=this.m_world.GetBodyCount(),d=this.m_world.GetContactCount(),e=this.m_world.GetJointCount();this.m_debugDraw.DrawString(5,this.m_textLine,"bodies/contacts/joints = %d/%d/%d",b,d,e);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;var b=this.m_particleSystem.GetParticleCount(),d=this.m_particleSystem.GetParticleGroupCount(),e=this.m_particleSystem.GetPairCount(),f=this.m_particleSystem.GetTriadCount();this.m_debugDraw.DrawString(5,this.m_textLine,"particles/groups/pairs/triads = %d/%d/%d/%d",
b,d,e,f);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;b=this.m_world.GetProxyCount();d=this.m_world.GetTreeHeight();e=this.m_world.GetTreeBalance();f=this.m_world.GetTreeQuality();this.m_debugDraw.DrawString(5,this.m_textLine,"proxies/height/balance/quality = %d/%d/%d/%4.2f",b,d,e,f);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE}b=this.m_world.GetProfile();this.m_maxProfile.step=box2d.b2Max(this.m_maxProfile.step,b.step);this.m_maxProfile.collide=box2d.b2Max(this.m_maxProfile.collide,
b.collide);this.m_maxProfile.solve=box2d.b2Max(this.m_maxProfile.solve,b.solve);this.m_maxProfile.solveInit=box2d.b2Max(this.m_maxProfile.solveInit,b.solveInit);this.m_maxProfile.solveVelocity=box2d.b2Max(this.m_maxProfile.solveVelocity,b.solveVelocity);this.m_maxProfile.solvePosition=box2d.b2Max(this.m_maxProfile.solvePosition,b.solvePosition);this.m_maxProfile.solveTOI=box2d.b2Max(this.m_maxProfile.solveTOI,b.solveTOI);this.m_maxProfile.broadphase=box2d.b2Max(this.m_maxProfile.broadphase,b.broadphase);
this.m_totalProfile.step+=b.step;this.m_totalProfile.collide+=b.collide;this.m_totalProfile.solve+=b.solve;this.m_totalProfile.solveInit+=b.solveInit;this.m_totalProfile.solveVelocity+=b.solveVelocity;this.m_totalProfile.solvePosition+=b.solvePosition;this.m_totalProfile.solveTOI+=b.solveTOI;this.m_totalProfile.broadphase+=b.broadphase;a.drawProfile&&(b=this.m_world.GetProfile(),d=new box2d.b2Profile,0<this.m_stepCount&&(e=1/this.m_stepCount,d.step=e*this.m_totalProfile.step,d.collide=e*this.m_totalProfile.collide,
d.solve=e*this.m_totalProfile.solve,d.solveInit=e*this.m_totalProfile.solveInit,d.solveVelocity=e*this.m_totalProfile.solveVelocity,d.solvePosition=e*this.m_totalProfile.solvePosition,d.solveTOI=e*this.m_totalProfile.solveTOI,d.broadphase=e*this.m_totalProfile.broadphase),this.m_debugDraw.DrawString(5,this.m_textLine,"step [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.step,d.step,this.m_maxProfile.step),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"collide [ave] (max) = %5.2f [%6.2f] (%6.2f)",
b.collide,d.collide,this.m_maxProfile.collide),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"solve [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.solve,d.solve,this.m_maxProfile.solve),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"solve init [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.solveInit,d.solveInit,this.m_maxProfile.solveInit),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,
this.m_textLine,"solve velocity [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.solveVelocity,d.solveVelocity,this.m_maxProfile.solveVelocity),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"solve position [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.solvePosition,d.solvePosition,this.m_maxProfile.solvePosition),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"solveTOI [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.solveTOI,
d.solveTOI,this.m_maxProfile.solveTOI),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"broad-phase [ave] (max) = %5.2f [%6.2f] (%6.2f)",b.broadphase,d.broadphase,this.m_maxProfile.broadphase),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);this.m_mouseTracing&&!this.m_mouseJoint&&(b=new box2d.b2Vec2,b.x=20*(10*(this.m_mouseWorld.x-this.m_mouseTracerPosition.x)-this.m_mouseTracerVelocity.x),b.y=20*(10*(this.m_mouseWorld.y-this.m_mouseTracerPosition.y)-
this.m_mouseTracerVelocity.y),this.m_mouseTracerVelocity.SelfMulAdd(c,b),this.m_mouseTracerPosition.SelfMulAdd(c,this.m_mouseTracerVelocity),c=new box2d.b2CircleShape,c.m_p.Copy(this.m_mouseTracerPosition),c.m_radius=2*this.GetDefaultViewZoom(),b=new box2d.Testbed.Test.QueryCallback2(this.m_particleSystem,c,this.m_mouseTracerVelocity),d=new box2d.b2AABB,e=new box2d.b2Transform,e.SetIdentity(),c.ComputeAABB(d,e,0),this.m_world.QueryAABB(b,d));this.m_mouseJoint&&(c=this.m_mouseJoint.GetAnchorB(new box2d.b2Vec2),
b=this.m_mouseJoint.GetTarget(new box2d.b2Vec2),d=new box2d.b2Color(0,1,0),this.m_debugDraw.DrawPoint(c,4,d),this.m_debugDraw.DrawPoint(b,4,d),d.SetRGB(.8,.8,.8),this.m_debugDraw.DrawSegment(c,b,d));this.m_bombSpawning&&(d=new box2d.b2Color(0,0,1),this.m_debugDraw.DrawPoint(this.m_bombSpawnPoint,4,d),d.SetRGB(.8,.8,.8),this.m_debugDraw.DrawSegment(this.m_mouseWorld,this.m_bombSpawnPoint,d));if(a.drawContactPoints)for(d=0;d<this.m_pointCount;++d)e=this.m_points[d],e.state===box2d.b2PointState.b2_addState?
this.m_debugDraw.DrawPoint(e.position,10,new box2d.b2Color(.3,.95,.3)):e.state===box2d.b2PointState.b2_persistState&&this.m_debugDraw.DrawPoint(e.position,5,new box2d.b2Color(.3,.3,.95)),a.drawContactNormals?(c=e.position,b=box2d.b2Add_V2_V2(c,box2d.b2Mul_S_V2(.3,e.normal,box2d.b2Vec2.s_t0),new box2d.b2Vec2),this.m_debugDraw.DrawSegment(c,b,new box2d.b2Color(.9,.9,.9))):a.drawContactImpulse&&(c=e.position,b=box2d.b2AddMul_V2_S_V2(c,.1*e.normalImpulse,e.normal,new box2d.b2Vec2),this.m_debugDraw.DrawSegment(c,
b,new box2d.b2Color(.9,.9,.3))),a.drawFrictionImpulse&&(b=box2d.b2Cross_V2_S(e.normal,1,new box2d.b2Vec2),c=e.position,b=box2d.b2AddMul_V2_S_V2(c,.1*e.tangentImpulse,b,new box2d.b2Vec2),this.m_debugDraw.DrawSegment(c,b,new box2d.b2Color(.9,.9,.3)))};goog.exportProperty(box2d.Testbed.Test.prototype,"Step",box2d.Testbed.Test.prototype.Step);box2d.Testbed.Test.prototype.ShiftOrigin=function(a){this.m_world.ShiftOrigin(a)};goog.exportProperty(box2d.Testbed.Test.prototype,"ShiftOrigin",box2d.Testbed.Test.prototype.ShiftOrigin);
box2d.Testbed.Test.prototype.GetDefaultViewZoom=function(){return 1};goog.exportProperty(box2d.Testbed.Test.prototype,"GetDefaultViewZoom",box2d.Testbed.Test.prototype.GetDefaultViewZoom);
box2d.Testbed.Test.k_ParticleColors=[new box2d.b2ParticleColor(255,0,0,255),new box2d.b2ParticleColor(0,255,0,255),new box2d.b2ParticleColor(0,0,255,255),new box2d.b2ParticleColor(255,140,0,255),new box2d.b2ParticleColor(0,206,209,255),new box2d.b2ParticleColor(255,0,255,255),new box2d.b2ParticleColor(255,215,0,255),new box2d.b2ParticleColor(0,255,255,255)];box2d.Testbed.Test.k_ParticleColorsCount=box2d.Testbed.Test.k_ParticleColors.length;
box2d.Testbed.Test.prototype.ColorParticleGroup=function(a,c){box2d.b2Assert(null!==a);var b=this.m_particleSystem.GetColorBuffer(),d=a.GetParticleCount(),e=a.GetBufferIndex(),f=d+e,g=box2d.Testbed.Test.k_ParticleColors.length;c||(c=Math.floor(d/g))||(c=1);for(d=e;d<f;d++)b[d]=box2d.Testbed.Test.k_ParticleColors[Math.floor(d/c)%g].Clone()};goog.exportProperty(box2d.Testbed.Test.prototype,"ColorParticleGroup",box2d.Testbed.Test.prototype.ColorParticleGroup);
box2d.Testbed.Test.prototype.InitializeParticleParameters=function(a){var c=box2d.Testbed.ParticleParameter.k_defaultDefinition[0].numValues,b=box2d.Testbed.ParticleParameter.k_defaultDefinition[0].values;this.m_particleParameters=[];for(var d=0,e=0;e<c;e++)b[e].value&a||(this.m_particleParameters[d]=b[e],d++);this.m_particleParameterDef=new box2d.Testbed.ParticleParameter.Definition(this.m_particleParameters,d);box2d.Testbed.TestMain.SetParticleParameters([this.m_particleParameterDef],1)};
goog.exportProperty(box2d.Testbed.Test.prototype,"InitializeParticleParameters",box2d.Testbed.Test.prototype.InitializeParticleParameters);box2d.Testbed.Test.prototype.RestoreParticleParameters=function(){this.m_particleParameters&&(box2d.Testbed.TestMain.SetParticleParameters(box2d.Testbed.ParticleParameter.k_defaultDefinition,1),this.m_particleParameters=null)};goog.exportProperty(box2d.Testbed.Test.prototype,"RestoreParticleParameters",box2d.Testbed.Test.prototype.RestoreParticleParameters);box2d.Testbed.AddPair=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_world.SetGravity(new box2d.b2Vec2(0,0));var b=new box2d.b2CircleShape;b.m_p.SetZero();b.m_radius=.1;for(var d=0;400>d;++d){var e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position=new box2d.b2Vec2(box2d.b2RandomRange(-6,0),box2d.b2RandomRange(4,6));e=this.m_world.CreateBody(e);e.CreateFixture(b,.01)}b=new box2d.b2PolygonShape;b.SetAsBox(1.5,1.5);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;
e.position.Set(-40,5);e.bullet=!0;e=this.m_world.CreateBody(e);e.CreateFixture(b,1);e.SetLinearVelocity(new box2d.b2Vec2(150,0))};goog.inherits(box2d.Testbed.AddPair,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.AddPair",box2d.Testbed.AddPair);box2d.Testbed.AddPair.Create=function(a,c){return new box2d.Testbed.AddPair(a,c)};goog.exportProperty(box2d.Testbed.AddPair,"Create",box2d.Testbed.AddPair.Create);box2d.Testbed.AntiPointy=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d;for(d=-10;10>d;d+=1){var e=new box2d.b2PolygonShape,f=[new box2d.b2Vec2(d,-10),new box2d.b2Vec2(d+1,-10),new box2d.b2Vec2(0,15)];e.Set(f,3);b.CreateFixture(e,0)}for(d=-10;35>d;d+=1)e=new box2d.b2PolygonShape,f=[new box2d.b2Vec2(-10,d),new box2d.b2Vec2(-10,d+1),new box2d.b2Vec2(0,15)],e.Set(f,3),b.CreateFixture(e,0),f=[new box2d.b2Vec2(10,d),new box2d.b2Vec2(10,d+1),new box2d.b2Vec2(0,
15)],e.Set(f,3),b.CreateFixture(e,0);this.m_particlesToCreate=300;this.m_particleSystem.SetRadius(.75);box2d.Testbed.TestMain.GetParticleParameterValue()===box2d.b2ParticleFlag.b2_waterParticle&&this.m_particleSystem.SetDamping(.2)};goog.inherits(box2d.Testbed.AntiPointy,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.AntiPointy",box2d.Testbed.AntiPointy);box2d.Testbed.AntiPointy.prototype.m_particlesToCreate=0;
box2d.Testbed.AntiPointy.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);if(!(0>=this.m_particlesToCreate)){--this.m_particlesToCreate;var c=box2d.Testbed.TestMain.GetParticleParameterValue();a=new box2d.b2ParticleDef;a.position.Set(0,40);a.velocity.Set(0,-1);a.flags=c;c&(box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_elasticParticle)&&(c=this.m_particleSystem.GetParticleCount(),a.velocity.Set(c&1?-1:1,-5),a.flags|=box2d.b2ParticleFlag.b2_reactiveParticle);
this.m_particleSystem.CreateParticle(a)}};goog.exportProperty(box2d.Testbed.AntiPointy.prototype,"Step",box2d.Testbed.AntiPointy.prototype.Step);box2d.Testbed.AntiPointy.Create=function(a,c){return new box2d.Testbed.AntiPointy(a,c)};goog.exportProperty(box2d.Testbed.AntiPointy,"Create",box2d.Testbed.AntiPointy.Create);box2d.Testbed.BlobTest=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=this.m_world.CreateBody(new box2d.b2BodyDef),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(-40,25));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(40,0),new box2d.b2Vec2(40,25));b.CreateFixture(d,0);b=new box2d.b2AreaJointDef;b.world=this.m_world;for(d=0;20>d;++d){var e=2*d*Math.PI/20,f=new box2d.b2BodyDef;f.fixedRotation=
!0;var g=0+5*Math.cos(e),e=10+5*Math.sin(e);f.position.Set(g,e);f.type=box2d.b2BodyType.b2_dynamicBody;f=this.m_world.CreateBody(f);g=new box2d.b2FixtureDef;g.shape=new box2d.b2CircleShape(.5);g.density=1;f.CreateFixture(g);b.AddBody(f)}b.frquencyHz=10;b.dampingRatio=1;this.m_world.CreateJoint(b)};goog.inherits(box2d.Testbed.BlobTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.BlobTest",box2d.Testbed.BlobTest);box2d.Testbed.BlobTest.prototype.Keyboard=function(a){};
goog.exportProperty(box2d.Testbed.BlobTest.prototype,"Keyboard",box2d.Testbed.BlobTest.prototype.Keyboard);box2d.Testbed.BlobTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.BlobTest.prototype,"Step",box2d.Testbed.BlobTest.prototype.Step);box2d.Testbed.BlobTest.Create=function(a,c){return new box2d.Testbed.BlobTest(a,c)};goog.exportProperty(box2d.Testbed.BlobTest,"Create",box2d.Testbed.BlobTest.Create);box2d.Testbed.BodyTypes=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-20,0),new box2d.b2Vec2(20,0));var e=new box2d.b2FixtureDef;e.shape=d;b.CreateFixture(e);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,3);this.m_attachment=this.m_world.CreateBody(d);d=new box2d.b2PolygonShape;d.SetAsBox(.5,2);this.m_attachment.CreateFixture(d,2);d=new box2d.b2BodyDef;
d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-4,5);this.m_platform=this.m_world.CreateBody(d);d=new box2d.b2PolygonShape;d.SetAsBox(.5,4,new box2d.b2Vec2(4,0),.5*box2d.b2_pi);e=new box2d.b2FixtureDef;e.shape=d;e.friction=.6;e.density=2;this.m_platform.CreateFixture(e);d=new box2d.b2RevoluteJointDef;d.Initialize(this.m_attachment,this.m_platform,new box2d.b2Vec2(0,5));d.maxMotorTorque=50;d.enableMotor=!0;this.m_world.CreateJoint(d);d=new box2d.b2PrismaticJointDef;d.Initialize(b,this.m_platform,
new box2d.b2Vec2(0,5),new box2d.b2Vec2(1,0));d.maxMotorForce=1E3;d.enableMotor=!0;d.lowerTranslation=-10;d.upperTranslation=10;d.enableLimit=!0;this.m_world.CreateJoint(d);this.m_speed=3;d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,8);b=this.m_world.CreateBody(d);d=new box2d.b2PolygonShape;d.SetAsBox(.75,.75);e=new box2d.b2FixtureDef;e.shape=d;e.friction=.6;e.density=2;b.CreateFixture(e)};goog.inherits(box2d.Testbed.BodyTypes,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.BodyTypes",box2d.Testbed.BodyTypes);box2d.Testbed.BodyTypes.prototype.m_attachment=null;goog.exportProperty(box2d.Testbed.BodyTypes.prototype,"m_attachment",box2d.Testbed.BodyTypes.prototype.m_attachment);box2d.Testbed.BodyTypes.prototype.m_platform=null;goog.exportProperty(box2d.Testbed.BodyTypes.prototype,"m_platform",box2d.Testbed.BodyTypes.prototype.m_platform);box2d.Testbed.BodyTypes.prototype.m_speed=0;
goog.exportProperty(box2d.Testbed.BodyTypes.prototype,"m_speed",box2d.Testbed.BodyTypes.prototype.m_speed);
box2d.Testbed.BodyTypes.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.D:this.m_platform.SetType(box2d.b2BodyType.b2_dynamicBody);break;case goog.events.KeyCodes.S:this.m_platform.SetType(box2d.b2BodyType.b2_staticBody);break;case goog.events.KeyCodes.K:this.m_platform.SetType(box2d.b2BodyType.b2_kinematicBody),this.m_platform.SetLinearVelocity(new box2d.b2Vec2(-this.m_speed,0)),this.m_platform.SetAngularVelocity(0)}};
goog.exportProperty(box2d.Testbed.BodyTypes.prototype,"Keyboard",box2d.Testbed.BodyTypes.prototype.Keyboard);
box2d.Testbed.BodyTypes.prototype.Step=function(a){if(this.m_platform.GetType()===box2d.b2BodyType.b2_kinematicBody){var c=this.m_platform.GetTransform().p,b=this.m_platform.GetLinearVelocity();if(-10>c.x&&0>b.x||10<c.x&&0<b.x)b.x=-b.x,this.m_platform.SetLinearVelocity(b)}box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (d) dynamic, (s) static, (k) kinematic");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.BodyTypes.prototype,"Step",box2d.Testbed.BodyTypes.prototype.Step);box2d.Testbed.BodyTypes.Create=function(a,c){return new box2d.Testbed.BodyTypes(a,c)};goog.exportProperty(box2d.Testbed.BodyTypes,"Create",box2d.Testbed.BodyTypes.Create);box2d.Testbed.Breakable=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_velocity=new box2d.b2Vec2;this.m_shape1=new box2d.b2PolygonShape;this.m_shape2=new box2d.b2PolygonShape;var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,40);b.angle=.25*box2d.b2_pi;this.m_body1=this.m_world.CreateBody(b);this.m_shape1=
new box2d.b2PolygonShape;this.m_shape1.SetAsBox(.5,.5,new box2d.b2Vec2(-.5,0),0);this.m_piece1=this.m_body1.CreateFixture(this.m_shape1,1);this.m_shape2=new box2d.b2PolygonShape;this.m_shape2.SetAsBox(.5,.5,new box2d.b2Vec2(.5,0),0);this.m_piece2=this.m_body1.CreateFixture(this.m_shape2,1)};goog.inherits(box2d.Testbed.Breakable,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Breakable",box2d.Testbed.Breakable);box2d.Testbed.Breakable.e_count=7;
goog.exportProperty(box2d.Testbed.Breakable,"e_count",box2d.Testbed.Breakable.e_count);box2d.Testbed.Breakable.prototype.m_body1=null;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_body1",box2d.Testbed.Breakable.prototype.m_body1);box2d.Testbed.Breakable.prototype.m_velocity=null;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_velocity",box2d.Testbed.Breakable.prototype.m_velocity);box2d.Testbed.Breakable.prototype.m_angularVelocity=0;
goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_angularVelocity",box2d.Testbed.Breakable.prototype.m_angularVelocity);box2d.Testbed.Breakable.prototype.m_shape1=null;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_shape1",box2d.Testbed.Breakable.prototype.m_shape1);box2d.Testbed.Breakable.prototype.m_shape2=null;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_shape2",box2d.Testbed.Breakable.prototype.m_shape2);box2d.Testbed.Breakable.prototype.m_piece1=null;
goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_piece1",box2d.Testbed.Breakable.prototype.m_piece1);box2d.Testbed.Breakable.prototype.m_piece2=null;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_piece2",box2d.Testbed.Breakable.prototype.m_piece2);box2d.Testbed.Breakable.prototype.m_broke=!1;goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_broke",box2d.Testbed.Breakable.prototype.m_broke);box2d.Testbed.Breakable.prototype.m_break=!1;
goog.exportProperty(box2d.Testbed.Breakable.prototype,"m_break",box2d.Testbed.Breakable.prototype.m_break);box2d.Testbed.Breakable.prototype.PostSolve=function(a,c){if(!this.m_broke){for(var b=a.GetManifold().pointCount,d=0,e=0;e<b;++e)d=box2d.b2Max(d,c.normalImpulses[e]);40<d&&(this.m_break=!0)}};goog.exportProperty(box2d.Testbed.Breakable.prototype,"PostSolve",box2d.Testbed.Breakable.prototype.PostSolve);
box2d.Testbed.Breakable.prototype.Break=function(){var a=this.m_piece1.GetBody(),c=a.GetWorldCenter();a.DestroyFixture(this.m_piece2);this.m_piece2=null;var b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position=a.GetPosition();b.angle=a.GetAngle();b=this.m_world.CreateBody(b);this.m_piece2=b.CreateFixture(this.m_shape2,1);var d=a.GetWorldCenter(),e=b.GetWorldCenter(),d=box2d.b2AddCross_V2_S_V2(this.m_velocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(d,c,box2d.b2Vec2.s_t0),new box2d.b2Vec2),
c=box2d.b2AddCross_V2_S_V2(this.m_velocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(e,c,box2d.b2Vec2.s_t0),new box2d.b2Vec2);a.SetAngularVelocity(this.m_angularVelocity);a.SetLinearVelocity(d);b.SetAngularVelocity(this.m_angularVelocity);b.SetLinearVelocity(c)};goog.exportProperty(box2d.Testbed.Breakable.prototype,"Break",box2d.Testbed.Breakable.prototype.Break);
box2d.Testbed.Breakable.prototype.Step=function(a){this.m_break&&(this.Break(),this.m_broke=!0,this.m_break=!1);this.m_broke||(this.m_velocity=this.m_body1.GetLinearVelocity(),this.m_angularVelocity=this.m_body1.GetAngularVelocity());box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.Breakable.prototype,"Step",box2d.Testbed.Breakable.prototype.Step);box2d.Testbed.Breakable.Create=function(a,c){return new box2d.Testbed.Breakable(a,c)};
goog.exportProperty(box2d.Testbed.Breakable,"Create",box2d.Testbed.Breakable.Create);box2d.Testbed.Bridge=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.125);var f=new box2d.b2FixtureDef;f.shape=e;f.density=20;f.friction=.2;for(var e=new box2d.b2RevoluteJointDef,g=b,h=0;h<box2d.Testbed.Bridge.e_count;++h){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-14.5+
1*h,5);d=this.m_world.CreateBody(d);d.CreateFixture(f);var k=new box2d.b2Vec2(-15+1*h,5);e.Initialize(g,d,k);this.m_world.CreateJoint(e);h===box2d.Testbed.Bridge.e_count>>1&&(this.m_middle=d);g=d}k=new box2d.b2Vec2(-15+1*box2d.Testbed.Bridge.e_count,5);e.Initialize(g,b,k);this.m_world.CreateJoint(e);for(h=0;2>h;++h)b=[],b[0]=new box2d.b2Vec2(-.5,0),b[1]=new box2d.b2Vec2(.5,0),b[2]=new box2d.b2Vec2(0,1.5),e=new box2d.b2PolygonShape,e.Set(b),f=new box2d.b2FixtureDef,f.shape=e,f.density=1,d=new box2d.b2BodyDef,
d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-8+8*h,12),d=this.m_world.CreateBody(d),d.CreateFixture(f);for(h=0;3>h;++h)e=new box2d.b2CircleShape,e.m_radius=.5,f=new box2d.b2FixtureDef,f.shape=e,f.density=1,d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-6+6*h,10),d=this.m_world.CreateBody(d),d.CreateFixture(f)};goog.inherits(box2d.Testbed.Bridge,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Bridge",box2d.Testbed.Bridge);box2d.Testbed.Bridge.e_count=30;
goog.exportProperty(box2d.Testbed.Bridge,"e_count",box2d.Testbed.Bridge.e_count);box2d.Testbed.Bridge.prototype.m_middle=null;goog.exportProperty(box2d.Testbed.Bridge.prototype,"m_middle",box2d.Testbed.Bridge.prototype.m_middle);box2d.Testbed.Bridge.Create=function(a,c){return new box2d.Testbed.Bridge(a,c)};goog.exportProperty(box2d.Testbed.Bridge,"Create",box2d.Testbed.Bridge.Create);box2d.Testbed.BulletTest=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef;b.position.Set(0,0);var b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-10,0),new box2d.b2Vec2(10,0));b.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(.2,1,new box2d.b2Vec2(.5,1),0);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,4);d=new box2d.b2PolygonShape;d.SetAsBox(2,.1);this.m_body=this.m_world.CreateBody(b);
this.m_body.CreateFixture(d,1);d.SetAsBox(.25,.25);this.m_x=.20352793;b.position.Set(this.m_x,10);b.bullet=!0;this.m_bullet=this.m_world.CreateBody(b);this.m_bullet.CreateFixture(d,100);this.m_bullet.SetLinearVelocity(new box2d.b2Vec2(0,-50))};goog.inherits(box2d.Testbed.BulletTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.BulletTest",box2d.Testbed.BulletTest);box2d.Testbed.BulletTest.prototype.m_body=null;goog.exportProperty(box2d.Testbed.BulletTest.prototype,"m_body",box2d.Testbed.BulletTest.prototype.m_body);
box2d.Testbed.BulletTest.prototype.m_bullet=null;goog.exportProperty(box2d.Testbed.BulletTest.prototype,"m_bullet",box2d.Testbed.BulletTest.prototype.m_bullet);box2d.Testbed.BulletTest.prototype.m_x=0;goog.exportProperty(box2d.Testbed.BulletTest.prototype,"m_x",box2d.Testbed.BulletTest.prototype.m_x);
box2d.Testbed.BulletTest.prototype.Launch=function(){this.m_body.SetTransform_V2_A(new box2d.b2Vec2(0,4),0);this.m_body.SetLinearVelocity(box2d.b2Vec2_zero);this.m_body.SetAngularVelocity(0);this.m_x=box2d.b2RandomRange(-1,1);this.m_bullet.SetTransform_V2_A(new box2d.b2Vec2(this.m_x,10),0);this.m_bullet.SetLinearVelocity(new box2d.b2Vec2(0,-50));this.m_bullet.SetAngularVelocity(0);box2d.b2_gjkCalls=0;box2d.b2_gjkIters=0;box2d.b2_gjkMaxIters=0;box2d.b2_toiCalls=0;box2d.b2_toiIters=0;box2d.b2_toiMaxIters=
0;box2d.b2_toiRootIters=0;box2d.b2_toiMaxRootIters=0};goog.exportProperty(box2d.Testbed.BulletTest.prototype,"Launch",box2d.Testbed.BulletTest.prototype.Launch);
box2d.Testbed.BulletTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);0<box2d.b2_gjkCalls&&(this.m_debugDraw.DrawString(5,this.m_textLine,"gjk calls = %d, ave gjk iters = %3.1f, max gjk iters = %d",box2d.b2_gjkCalls,box2d.b2_gjkIters/box2d.b2_gjkCalls,box2d.b2_gjkMaxIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);0<box2d.b2_toiCalls&&(this.m_debugDraw.DrawString(5,this.m_textLine,"toi calls = %d, ave toi iters = %3.1f, max toi iters = %d",box2d.b2_toiCalls,
box2d.b2_toiIters/box2d.b2_toiCalls,box2d.b2_toiMaxRootIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"ave toi root iters = %3.1f, max toi root iters = %d",box2d.b2_toiRootIters/box2d.b2_toiCalls,box2d.b2_toiMaxRootIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);0===this.m_stepCount%60&&this.Launch()};goog.exportProperty(box2d.Testbed.BulletTest.prototype,"Step",box2d.Testbed.BulletTest.prototype.Step);
box2d.Testbed.BulletTest.Create=function(a,c){return new box2d.Testbed.BulletTest(a,c)};goog.exportProperty(box2d.Testbed.BulletTest,"Create",box2d.Testbed.BulletTest.Create);box2d.Testbed.BuoyancyTest=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodies=[];var b=new box2d.b2BuoyancyController;this.m_controller=b;b.normal.Set(0,1);b.offset=20;b.density=2;b.linearDrag=5;b.angularDrag=2;var b=this.m_world.CreateBody(new box2d.b2BodyDef),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(-40,25));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(40,0),new box2d.b2Vec2(40,
25));b.CreateFixture(d,0);for(b=0;5>b;b++){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(40*Math.random()-20,15*Math.random()+5);d.angle=Math.random()*Math.PI;var d=this.m_world.CreateBody(d),e=new box2d.b2FixtureDef;e.density=1;e.friction=.3;e.restitution=.1;e.shape=new box2d.b2PolygonShape;e.shape.SetAsBox(.5*Math.random()+1,.5*Math.random()+1);d.CreateFixture(e);this.m_bodies.push(d)}for(b=0;5>b;b++)d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(40*
Math.random()-20,15*Math.random()+5),d.angle=Math.random()*Math.PI,d=this.m_world.CreateBody(d),e=new box2d.b2FixtureDef,e.density=1,e.friction=.3,e.restitution=.1,e.shape=new box2d.b2CircleShape(.5*Math.random()+1),d.CreateFixture(e),this.m_bodies.push(d);for(b=0;15>b;b++){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(40*Math.random()-20,15*Math.random()+5);d.angle=Math.random()*Math.PI;d=this.m_world.CreateBody(d);e=new box2d.b2FixtureDef;e.density=1;e.friction=.3;
e.restitution=.1;e.shape=new box2d.b2PolygonShape;if(.66<Math.random())e.shape.Set([new box2d.b2Vec2(-1-1*Math.random(),1+1*Math.random()),new box2d.b2Vec2(-.5-1*Math.random(),-1-1*Math.random()),new box2d.b2Vec2(.5+1*Math.random(),-1-1*Math.random()),new box2d.b2Vec2(1+1*Math.random(),1+1*Math.random())]);else if(.5<Math.random()){var f=[];f[0]=new box2d.b2Vec2(0,1+1*Math.random());f[2]=new box2d.b2Vec2(-.5-1*Math.random(),-1-1*Math.random());f[3]=new box2d.b2Vec2(.5+1*Math.random(),-1-1*Math.random());
f[1]=new box2d.b2Vec2(f[0].x+f[2].x,f[0].y+f[2].y);f[1].SelfMul(Math.random()/2+.8);f[4]=new box2d.b2Vec2(f[3].x+f[0].x,f[3].y+f[0].y);f[4].SelfMul(Math.random()/2+.8);e.shape.Set(f)}else e.shape.Set([new box2d.b2Vec2(0,1+1*Math.random()),new box2d.b2Vec2(-.5-1*Math.random(),-1-1*Math.random()),new box2d.b2Vec2(.5+1*Math.random(),-1-1*Math.random())]);d.CreateFixture(e);this.m_bodies.push(d)}d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,40);d.angle=0;d=this.m_world.CreateBody(d);
e=new box2d.b2FixtureDef;e.density=3;e.shape=new box2d.b2PolygonShape;e.shape.SetAsBox(4,1);d.CreateFixture(e);this.m_bodies.push(d);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,30);d=this.m_world.CreateBody(d);e=new box2d.b2FixtureDef;e.density=2;e.shape=new box2d.b2CircleShape(.7);e.shape.m_p.Set(3,0);d.CreateFixture(e);e.shape.m_p.Set(-3,0);d.CreateFixture(e);e.shape.m_p.Set(0,3);d.CreateFixture(e);e.shape.m_p.Set(0,-3);d.CreateFixture(e);e.density=2;e.shape=new box2d.b2PolygonShape;
e.shape.SetAsBox(3,.2);d.CreateFixture(e);e.shape.SetAsBox(.2,3);d.CreateFixture(e);this.m_bodies.push(d);if(box2d.DEBUG){for(d=0;b<this.m_bodies.length;++b)this.m_controller.AddBody(this.m_bodies[d]);for(d=0;b<this.m_bodies.length;++b)this.m_controller.RemoveBody(this.m_bodies[d])}for(d=0;b<this.m_bodies.length;++b)this.m_controller.AddBody(this.m_bodies[d]);box2d.DEBUG&&(this.m_world.AddController(this.m_controller),this.m_world.RemoveController(this.m_controller));this.m_world.AddController(this.m_controller)};
goog.inherits(box2d.Testbed.BuoyancyTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.BuoyancyTest",box2d.Testbed.BuoyancyTest);box2d.Testbed.BuoyancyTest.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.BuoyancyTest.prototype,"m_bodies",box2d.Testbed.BuoyancyTest.prototype.m_bodies);box2d.Testbed.BuoyancyTest.prototype.m_controller=null;goog.exportProperty(box2d.Testbed.BuoyancyTest.prototype,"m_controller",box2d.Testbed.BuoyancyTest.prototype.m_controller);
box2d.Testbed.BuoyancyTest.prototype.Keyboard=function(a){};goog.exportProperty(box2d.Testbed.BuoyancyTest.prototype,"Keyboard",box2d.Testbed.BuoyancyTest.prototype.Keyboard);box2d.Testbed.BuoyancyTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.BuoyancyTest.prototype,"Step",box2d.Testbed.BuoyancyTest.prototype.Step);box2d.Testbed.BuoyancyTest.Create=function(a,c){return new box2d.Testbed.BuoyancyTest(a,c)};
goog.exportProperty(box2d.Testbed.BuoyancyTest,"Create",box2d.Testbed.BuoyancyTest.Create);box2d.Testbed.Cantilever=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.125);var f=new box2d.b2FixtureDef;f.shape=e;f.density=20;for(var e=new box2d.b2WeldJointDef,g=b,h=0;h<box2d.Testbed.Cantilever.e_count;++h){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-14.5+
1*h,5);d=this.m_world.CreateBody(d);d.CreateFixture(f);var k=new box2d.b2Vec2(-15+1*h,5);e.Initialize(g,d,k);this.m_world.CreateJoint(e);g=d}e=new box2d.b2PolygonShape;e.SetAsBox(1,.125);f=new box2d.b2FixtureDef;f.shape=e;f.density=20;e=new box2d.b2WeldJointDef;e.frequencyHz=5;e.dampingRatio=.7;g=b;for(h=0;3>h;++h)d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-14+2*h,15),d=this.m_world.CreateBody(d),d.CreateFixture(f),k=new box2d.b2Vec2(-15+2*h,15),e.Initialize(g,d,k),
this.m_world.CreateJoint(e),g=d;e=new box2d.b2PolygonShape;e.SetAsBox(.5,.125);f=new box2d.b2FixtureDef;f.shape=e;f.density=20;e=new box2d.b2WeldJointDef;g=b;for(h=0;h<box2d.Testbed.Cantilever.e_count;++h)d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-4.5+1*h,15),d=this.m_world.CreateBody(d),d.CreateFixture(f),0<h&&(k=new box2d.b2Vec2(-5+1*h,15),e.Initialize(g,d,k),this.m_world.CreateJoint(e)),g=d;e=new box2d.b2PolygonShape;e.SetAsBox(.5,.125);f=new box2d.b2FixtureDef;
f.shape=e;f.density=20;e=new box2d.b2WeldJointDef;e.frequencyHz=8;e.dampingRatio=.7;g=b;for(h=0;h<box2d.Testbed.Cantilever.e_count;++h)d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(5.5+1*h,10),d=this.m_world.CreateBody(d),d.CreateFixture(f),0<h&&(k=new box2d.b2Vec2(5+1*h,10),e.Initialize(g,d,k),this.m_world.CreateJoint(e)),g=d;for(h=0;2>h;++h)b=[],b[0]=new box2d.b2Vec2(-.5,0),b[1]=new box2d.b2Vec2(.5,0),b[2]=new box2d.b2Vec2(0,1.5),e=new box2d.b2PolygonShape,e.Set(b),
f=new box2d.b2FixtureDef,f.shape=e,f.density=1,d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-8+8*h,12),d=this.m_world.CreateBody(d),d.CreateFixture(f);for(h=0;2>h;++h)e=new box2d.b2CircleShape,e.m_radius=.5,f=new box2d.b2FixtureDef,f.shape=e,f.density=1,d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-6+6*h,10),d=this.m_world.CreateBody(d),d.CreateFixture(f)};goog.inherits(box2d.Testbed.Cantilever,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.Cantilever",box2d.Testbed.Cantilever);box2d.Testbed.Cantilever.e_count=8;goog.exportProperty(box2d.Testbed.Cantilever,"e_count",box2d.Testbed.Cantilever.e_count);box2d.Testbed.Cantilever.Create=function(a,c){return new box2d.Testbed.Cantilever(a,c)};goog.exportProperty(box2d.Testbed.Cantilever,"Create",box2d.Testbed.Cantilever.Create);box2d.Testbed.Car=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_hz=4;this.m_zeta=.7;this.m_speed=50;var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),d=new box2d.b2EdgeShape,e=new box2d.b2FixtureDef;e.shape=d;e.density=0;e.friction=.6;d.SetAsEdge(new box2d.b2Vec2(-20,0),new box2d.b2Vec2(20,0));b.CreateFixture(e);for(var f=[.25,1,4,0,0,-1,-2,-2,-1.25,0],g=20,h=0,k=0;10>k;++k){var l=f[k];d.SetAsEdge(new box2d.b2Vec2(g,h),new box2d.b2Vec2(g+5,l));b.CreateFixture(e);h=l;g+=5}for(k=
0;10>k;++k)l=f[k],d.SetAsEdge(new box2d.b2Vec2(g,h),new box2d.b2Vec2(g+5,l)),b.CreateFixture(e),h=l,g+=5;d.SetAsEdge(new box2d.b2Vec2(g,0),new box2d.b2Vec2(g+40,0));b.CreateFixture(e);g+=80;d.SetAsEdge(new box2d.b2Vec2(g,0),new box2d.b2Vec2(g+40,0));b.CreateFixture(e);g+=40;d.SetAsEdge(new box2d.b2Vec2(g,0),new box2d.b2Vec2(g+10,5));b.CreateFixture(e);g+=20;d.SetAsEdge(new box2d.b2Vec2(g,0),new box2d.b2Vec2(g+40,0));b.CreateFixture(e);g+=40;d.SetAsEdge(new box2d.b2Vec2(g,0),new box2d.b2Vec2(g,20));
b.CreateFixture(e);d=new box2d.b2BodyDef;d.position.Set(140,1);d.type=box2d.b2BodyType.b2_dynamicBody;f=this.m_world.CreateBody(d);e=new box2d.b2PolygonShape;e.SetAsBox(10,.25);f.CreateFixture(e,1);g=new box2d.b2RevoluteJointDef;g.Initialize(b,f,f.GetPosition());g.lowerAngle=-8*box2d.b2_pi/180;g.upperAngle=8*box2d.b2_pi/180;g.enableLimit=!0;this.m_world.CreateJoint(g);f.ApplyAngularImpulse(100);d=new box2d.b2PolygonShape;d.SetAsBox(1,.125);e=new box2d.b2FixtureDef;e.shape=d;e.density=1;e.friction=
.6;g=new box2d.b2RevoluteJointDef;h=b;for(k=0;20>k;++k)d=new box2d.b2BodyDef,d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(161+2*k,-.125),f=this.m_world.CreateBody(d),f.CreateFixture(e),d=new box2d.b2Vec2(160+2*k,-.125),g.Initialize(h,f,d),this.m_world.CreateJoint(g),h=f;d=new box2d.b2Vec2(200,-.125);g.Initialize(h,b,d);this.m_world.CreateJoint(g);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.5);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(230,.5);f=this.m_world.CreateBody(d);
f.CreateFixture(e,.5);d.position.Set(230,1.5);f=this.m_world.CreateBody(d);f.CreateFixture(e,.5);d.position.Set(230,2.5);f=this.m_world.CreateBody(d);f.CreateFixture(e,.5);d.position.Set(230,3.5);f=this.m_world.CreateBody(d);f.CreateFixture(e,.5);d.position.Set(230,4.5);f=this.m_world.CreateBody(d);f.CreateFixture(e,.5);b=new box2d.b2PolygonShape;e=box2d.b2Vec2.MakeArray(8);e[0].Set(-1.5,-.5);e[1].Set(1.5,-.5);e[2].Set(1.5,0);e[3].Set(0,.9);e[4].Set(-1.15,.9);e[5].Set(-1.5,.2);b.Set(e,6);k=new box2d.b2CircleShape;
k.m_radius=.4;d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,1);this.m_car=this.m_world.CreateBody(d);this.m_car.CreateFixture(b,1);e=new box2d.b2FixtureDef;e.shape=k;e.density=1;e.friction=.9;d.position.Set(-1,.35);this.m_wheel1=this.m_world.CreateBody(d);this.m_wheel1.CreateFixture(e);d.position.Set(1,.4);this.m_wheel2=this.m_world.CreateBody(d);this.m_wheel2.CreateFixture(e);g=new box2d.b2WheelJointDef;b=new box2d.b2Vec2(0,1);g.Initialize(this.m_car,this.m_wheel1,
this.m_wheel1.GetPosition(),b);g.motorSpeed=0;g.maxMotorTorque=20;g.enableMotor=!0;g.frequencyHz=this.m_hz;g.dampingRatio=this.m_zeta;this.m_spring1=this.m_world.CreateJoint(g);g.Initialize(this.m_car,this.m_wheel2,this.m_wheel2.GetPosition(),b);g.motorSpeed=0;g.maxMotorTorque=10;g.enableMotor=!1;g.frequencyHz=this.m_hz;g.dampingRatio=this.m_zeta;this.m_spring2=this.m_world.CreateJoint(g)};goog.inherits(box2d.Testbed.Car,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Car",box2d.Testbed.Car);
box2d.Testbed.Car.prototype.m_car=null;goog.exportProperty(box2d.Testbed.Car.prototype,"m_car",box2d.Testbed.Car.prototype.m_car);box2d.Testbed.Car.prototype.m_wheel1=null;goog.exportProperty(box2d.Testbed.Car.prototype,"m_wheel1",box2d.Testbed.Car.prototype.m_wheel1);box2d.Testbed.Car.prototype.m_wheel2=null;goog.exportProperty(box2d.Testbed.Car.prototype,"m_wheel2",box2d.Testbed.Car.prototype.m_wheel2);box2d.Testbed.Car.prototype.m_hz=0;goog.exportProperty(box2d.Testbed.Car.prototype,"m_hz",box2d.Testbed.Car.prototype.m_hz);
box2d.Testbed.Car.prototype.m_zeta=0;goog.exportProperty(box2d.Testbed.Car.prototype,"m_zeta",box2d.Testbed.Car.prototype.m_zeta);box2d.Testbed.Car.prototype.m_speed=0;goog.exportProperty(box2d.Testbed.Car.prototype,"m_speed",box2d.Testbed.Car.prototype.m_speed);box2d.Testbed.Car.prototype.m_spring1=null;goog.exportProperty(box2d.Testbed.Car.prototype,"m_spring1",box2d.Testbed.Car.prototype.m_spring1);box2d.Testbed.Car.prototype.m_spring2=null;
goog.exportProperty(box2d.Testbed.Car.prototype,"m_spring2",box2d.Testbed.Car.prototype.m_spring2);
box2d.Testbed.Car.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_spring1.SetMotorSpeed(this.m_speed);break;case goog.events.KeyCodes.S:this.m_spring1.SetMotorSpeed(0);break;case goog.events.KeyCodes.D:this.m_spring1.SetMotorSpeed(-this.m_speed);break;case goog.events.KeyCodes.Q:this.m_hz=box2d.b2Max(0,this.m_hz-1);this.m_spring1.SetSpringFrequencyHz(this.m_hz);this.m_spring2.SetSpringFrequencyHz(this.m_hz);break;case goog.events.KeyCodes.E:this.m_hz+=1,this.m_spring1.SetSpringFrequencyHz(this.m_hz),
this.m_spring2.SetSpringFrequencyHz(this.m_hz)}};goog.exportProperty(box2d.Testbed.Car.prototype,"Keyboard",box2d.Testbed.Car.prototype.Keyboard);
box2d.Testbed.Car.prototype.Step=function(a){this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: left = a, brake = s, right = d, hz down = q, hz up = e");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"frequency = %4.2f hz, damping ratio = %4.2f",this.m_hz,this.m_zeta);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a.viewCenter.x=this.m_car.GetPosition().x;box2d.Testbed.Test.prototype.Step.call(this,a)};
goog.exportProperty(box2d.Testbed.Car.prototype,"Step",box2d.Testbed.Car.prototype.Step);box2d.Testbed.Car.Create=function(a,c){return new box2d.Testbed.Car(a,c)};goog.exportProperty(box2d.Testbed.Car,"Create",box2d.Testbed.Car.Create);box2d.Testbed.Chain=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.6,.125);var f=new box2d.b2FixtureDef;f.shape=e;f.density=20;f.friction=.2;e=new box2d.b2RevoluteJointDef;e.collideConnected=!1;for(var g=0;g<box2d.Testbed.Chain.e_count;++g){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;
d.position.Set(.5+g,25);d=this.m_world.CreateBody(d);d.CreateFixture(f);var h=new box2d.b2Vec2(g,25);e.Initialize(b,d,h);this.m_world.CreateJoint(e);b=d}};goog.inherits(box2d.Testbed.Chain,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Chain",box2d.Testbed.Chain);box2d.Testbed.Chain.e_count=30;goog.exportProperty(box2d.Testbed.Chain,"e_count",box2d.Testbed.Chain.e_count);box2d.Testbed.Chain.Create=function(a,c){return new box2d.Testbed.Chain(a,c)};
goog.exportProperty(box2d.Testbed.Chain,"Create",box2d.Testbed.Chain.Create);box2d.Testbed.CharacterCollision=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-20,0),new box2d.b2Vec2(20,0));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b=this.m_world.CreateBody(b);d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-8,1),new box2d.b2Vec2(-6,1));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(-6,1),new box2d.b2Vec2(-4,1));b.CreateFixture(d,0);d.SetAsEdge(new box2d.b2Vec2(-4,
1),new box2d.b2Vec2(-2,1));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.angle=.25*box2d.b2_pi;var b=this.m_world.CreateBody(b),e=box2d.b2Vec2.MakeArray(4);e[0].Set(5,7);e[1].Set(6,8);e[2].Set(7,8);e[3].Set(8,7);d=new box2d.b2ChainShape;d.CreateChain(e,4);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b=this.m_world.CreateBody(b);d=new box2d.b2PolygonShape;d.SetAsBox(1,1,new box2d.b2Vec2(4,3),0);b.CreateFixture(d,0);d.SetAsBox(1,1,new box2d.b2Vec2(6,3),0);b.CreateFixture(d,0);d.SetAsBox(1,1,new box2d.b2Vec2(8,
3),0);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b=this.m_world.CreateBody(b);e=box2d.b2Vec2.MakeArray(4);e[0].Set(-1,3);e[1].Set(1,3);e[2].Set(1,5);e[3].Set(-1,5);d=new box2d.b2ChainShape;d.CreateChain(e,4);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.position.Set(-10,4);b=this.m_world.CreateBody(b);e=box2d.b2Vec2.MakeArray(10);e[0].Set(0,0);e[1].Set(6,0);e[2].Set(6,2);e[3].Set(4,1);e[4].Set(2,2);e[5].Set(0,2);e[6].Set(-2,2);e[7].Set(-4,3);e[8].Set(-6,2);e[9].Set(-6,0);d=new box2d.b2ChainShape;d.CreateChain(e,
10);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.position.Set(-3,8);b.type=box2d.b2BodyType.b2_dynamicBody;b.fixedRotation=!0;b.allowSleep=!1;b=this.m_world.CreateBody(b);d=new box2d.b2PolygonShape;d.SetAsBox(.5,.5);e=new box2d.b2FixtureDef;e.shape=d;e.density=20;b.CreateFixture(e);b=new box2d.b2BodyDef;b.position.Set(-5,5);b.type=box2d.b2BodyType.b2_dynamicBody;b.fixedRotation=!0;b.allowSleep=!1;b=this.m_world.CreateBody(b);d=new box2d.b2PolygonShape;d.SetAsBox(.25,.25);e=new box2d.b2FixtureDef;
e.shape=d;e.density=20;b.CreateFixture(e);b=new box2d.b2BodyDef;b.position.Set(-5,8);b.type=box2d.b2BodyType.b2_dynamicBody;b.fixedRotation=!0;b.allowSleep=!1;for(var b=this.m_world.CreateBody(b),d=0,f=box2d.b2_pi/3,e=box2d.b2Vec2.MakeArray(6),g=0;6>g;++g)e[g].Set(.5*box2d.b2Cos(d),.5*box2d.b2Sin(d)),d+=f;d=new box2d.b2PolygonShape;d.Set(e,6);e=new box2d.b2FixtureDef;e.shape=d;e.density=20;b.CreateFixture(e);b=new box2d.b2BodyDef;b.position.Set(3,5);b.type=box2d.b2BodyType.b2_dynamicBody;b.fixedRotation=
!0;b.allowSleep=!1;b=this.m_world.CreateBody(b);d=new box2d.b2CircleShape;d.m_radius=.5;e=new box2d.b2FixtureDef;e.shape=d;e.density=20;b.CreateFixture(e);b=new box2d.b2BodyDef;b.position.Set(-7,6);b.type=box2d.b2BodyType.b2_dynamicBody;b.allowSleep=!1;this.m_character=this.m_world.CreateBody(b);d=new box2d.b2CircleShape;d.m_radius=.25;e=new box2d.b2FixtureDef;e.shape=d;e.density=20;e.friction=1;this.m_character.CreateFixture(e)};goog.inherits(box2d.Testbed.CharacterCollision,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.CharacterCollision",box2d.Testbed.CharacterCollision);box2d.Testbed.CharacterCollision.prototype.m_character=null;goog.exportProperty(box2d.Testbed.CharacterCollision.prototype,"m_character",box2d.Testbed.CharacterCollision.prototype.m_character);
box2d.Testbed.CharacterCollision.prototype.Step=function(a){var c=this.m_character.GetLinearVelocity().Clone();c.x=-5;this.m_character.SetLinearVelocity(c);box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"This tests various character collision shapes");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Limitation: square and hexagon can snag on aligned boxes.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;
this.m_debugDraw.DrawString(5,this.m_textLine,"Feature: edge chains have smooth collision inside and out.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.CharacterCollision.prototype,"Step",box2d.Testbed.CharacterCollision.prototype.Step);box2d.Testbed.CharacterCollision.Create=function(a,c){return new box2d.Testbed.CharacterCollision(a,c)};goog.exportProperty(box2d.Testbed.CharacterCollision,"Create",box2d.Testbed.CharacterCollision.Create);box2d.Testbed.CollisionFiltering=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));var d=new box2d.b2FixtureDef;d.shape=b;d.friction=.3;var e=new box2d.b2BodyDef;this.m_world.CreateBody(e).CreateFixture(d);b=[];b[0]=new box2d.b2Vec2(-1,0);b[1]=new box2d.b2Vec2(1,0);b[2]=new box2d.b2Vec2(0,2);d=new box2d.b2PolygonShape;d.Set(b,3);e=new box2d.b2FixtureDef;e.shape=d;e.density=1;e.filter.groupIndex=box2d.Testbed.CollisionFiltering.k_smallGroup;
e.filter.categoryBits=box2d.Testbed.CollisionFiltering.k_triangleCategory;e.filter.maskBits=box2d.Testbed.CollisionFiltering.k_triangleMask;var f=new box2d.b2BodyDef;f.type=box2d.b2BodyType.b2_dynamicBody;f.position.Set(-5,2);this.m_world.CreateBody(f).CreateFixture(e);b[0].SelfMul(2);b[1].SelfMul(2);b[2].SelfMul(2);d.Set(b,3);e.filter.groupIndex=box2d.Testbed.CollisionFiltering.k_largeGroup;f.position.Set(-5,6);f.fixedRotation=!0;b=this.m_world.CreateBody(f);b.CreateFixture(e);e=new box2d.b2BodyDef;
e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(-5,10);e=this.m_world.CreateBody(e);f=new box2d.b2PolygonShape;f.SetAsBox(.5,1);e.CreateFixture(f,1);f=new box2d.b2PrismaticJointDef;f.bodyA=b;f.bodyB=e;f.enableLimit=!0;f.localAnchorA.Set(0,4);f.localAnchorB.SetZero();f.localAxisA.Set(0,1);f.lowerTranslation=-1;f.upperTranslation=1;this.m_world.CreateJoint(f);d.SetAsBox(1,.5);b=new box2d.b2FixtureDef;b.shape=d;b.density=1;b.restitution=.1;b.filter.groupIndex=box2d.Testbed.CollisionFiltering.k_smallGroup;
b.filter.categoryBits=box2d.Testbed.CollisionFiltering.k_boxCategory;b.filter.maskBits=box2d.Testbed.CollisionFiltering.k_boxMask;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(0,2);this.m_world.CreateBody(e).CreateFixture(b);d.SetAsBox(2,1);b.filter.groupIndex=box2d.Testbed.CollisionFiltering.k_largeGroup;e.position.Set(0,6);this.m_world.CreateBody(e).CreateFixture(b);d=new box2d.b2CircleShape;d.m_radius=1;b=new box2d.b2FixtureDef;b.shape=d;b.density=1;b.filter.groupIndex=
box2d.Testbed.CollisionFiltering.k_smallGroup;b.filter.categoryBits=box2d.Testbed.CollisionFiltering.k_circleCategory;b.filter.maskBits=box2d.Testbed.CollisionFiltering.k_circleMask;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(5,2);this.m_world.CreateBody(e).CreateFixture(b);d.m_radius*=2;b.filter.groupIndex=box2d.Testbed.CollisionFiltering.k_largeGroup;e.position.Set(5,6);this.m_world.CreateBody(e).CreateFixture(b)};goog.inherits(box2d.Testbed.CollisionFiltering,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.CollisionFiltering",box2d.Testbed.CollisionFiltering);box2d.Testbed.CollisionFiltering.k_smallGroup=1;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_smallGroup",box2d.Testbed.CollisionFiltering.k_smallGroup);box2d.Testbed.CollisionFiltering.k_largeGroup=-1;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_largeGroup",box2d.Testbed.CollisionFiltering.k_largeGroup);box2d.Testbed.CollisionFiltering.k_defaultCategory=1;
goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_defaultCategory",box2d.Testbed.CollisionFiltering.k_defaultCategory);box2d.Testbed.CollisionFiltering.k_triangleCategory=2;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_triangleCategory",box2d.Testbed.CollisionFiltering.k_triangleCategory);box2d.Testbed.CollisionFiltering.k_boxCategory=4;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_boxCategory",box2d.Testbed.CollisionFiltering.k_boxCategory);
box2d.Testbed.CollisionFiltering.k_circleCategory=8;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_circleCategory",box2d.Testbed.CollisionFiltering.k_circleCategory);box2d.Testbed.CollisionFiltering.k_triangleMask=65535;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_triangleMask",box2d.Testbed.CollisionFiltering.k_triangleMask);box2d.Testbed.CollisionFiltering.k_boxMask=65535^box2d.Testbed.CollisionFiltering.k_triangleCategory;
goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_boxMask",box2d.Testbed.CollisionFiltering.k_boxMask);box2d.Testbed.CollisionFiltering.k_circleMask=65535;goog.exportProperty(box2d.Testbed.CollisionFiltering,"k_circleMask",box2d.Testbed.CollisionFiltering.k_circleMask);box2d.Testbed.CollisionFiltering.Create=function(a,c){return new box2d.Testbed.CollisionFiltering(a,c)};goog.exportProperty(box2d.Testbed.CollisionFiltering,"Create",box2d.Testbed.CollisionFiltering.Create);box2d.Testbed.CollisionProcessing=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));var d=new box2d.b2FixtureDef;d.shape=b;b=new box2d.b2BodyDef;this.m_world.CreateBody(b).CreateFixture(d);b=Array(3);b[0]=new box2d.b2Vec2(-1,0);b[1]=new box2d.b2Vec2(1,0);b[2]=new box2d.b2Vec2(0,2);d=new box2d.b2PolygonShape;d.Set(b,3);var e=new box2d.b2FixtureDef;e.shape=d;e.density=1;var f=new box2d.b2BodyDef;f.type=box2d.b2BodyType.b2_dynamicBody;
f.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(f).CreateFixture(e);b[0].SelfMul(2);b[1].SelfMul(2);b[2].SelfMul(2);d.Set(b,3);f.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(f).CreateFixture(e);d.SetAsBox(1,.5);b=new box2d.b2FixtureDef;b.shape=d;b.density=1;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(e).CreateFixture(b);
d.SetAsBox(2,1);e.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(e).CreateFixture(b);d=new box2d.b2CircleShape;d.m_radius=1;b=new box2d.b2FixtureDef;b.shape=d;b.density=1;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(e).CreateFixture(b);d.m_radius*=2;e.position.Set(box2d.b2RandomRange(-5,5),box2d.b2RandomRange(2,35));this.m_world.CreateBody(e).CreateFixture(b)};
goog.inherits(box2d.Testbed.CollisionProcessing,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.CollisionProcessing",box2d.Testbed.CollisionProcessing);
box2d.Testbed.CollisionProcessing.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);a=Array(6);for(var c=0,b=0;b<this.m_pointCount;++b){var d=this.m_points[b],e=d.fixtureA.GetBody(),d=d.fixtureB.GetBody(),f=e.GetMass(),g=d.GetMass();if(0<f&&0<g&&(g>f?a[c++]=e:a[c++]=d,6===c))break}a.sort(function(a,b){return a-b});for(b=0;b<c;){for(e=a[b++];b<c&&a[b]===e;)++b;e!==this.m_bomb&&this.m_world.DestroyBody(e)}};
goog.exportProperty(box2d.Testbed.CollisionProcessing.prototype,"Step",box2d.Testbed.CollisionProcessing.prototype.Step);box2d.Testbed.CollisionProcessing.Create=function(a,c){return new box2d.Testbed.CollisionProcessing(a,c)};goog.exportProperty(box2d.Testbed.CollisionProcessing,"Create",box2d.Testbed.CollisionProcessing.Create);box2d.Testbed.CompoundShapes=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(50,0),new box2d.b2Vec2(-50,0));b.CreateFixture(d,0);var e=new box2d.b2CircleShape;e.m_radius=.5;e.m_p.Set(-.5,.5);var f=new box2d.b2CircleShape;f.m_radius=.5;f.m_p.Set(.5,.5);for(d=0;10>d;++d){var g=box2d.b2RandomRange(-.1,.1),b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(g+5,1.05+2.5*
d);b.angle=box2d.b2RandomRange(-box2d.b2_pi,box2d.b2_pi);b=this.m_world.CreateBody(b);b.CreateFixture(e,2);b.CreateFixture(f,0)}e=new box2d.b2PolygonShape;e.SetAsBox(.25,.5);f=new box2d.b2PolygonShape;f.SetAsBox(.25,.5,new box2d.b2Vec2(0,-.5),.5*box2d.b2_pi);for(d=0;10>d;++d)g=box2d.b2RandomRange(-.1,.1),b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(g-5,1.05+2.5*d),b.angle=box2d.b2RandomRange(-box2d.b2_pi,box2d.b2_pi),b=this.m_world.CreateBody(b),b.CreateFixture(e,2),
b.CreateFixture(f,2);d=new box2d.b2Transform;d.q.SetAngle(.3524*box2d.b2_pi);d.p.Copy(box2d.b2Mul_R_V2(d.q,new box2d.b2Vec2(1,0),new box2d.b2Vec2));b=[];e=new box2d.b2PolygonShape;b[0]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(-1,0),new box2d.b2Vec2);b[1]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(1,0),new box2d.b2Vec2);b[2]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(0,.5),new box2d.b2Vec2);e.Set(b,3);d=new box2d.b2Transform;d.q.SetAngle(-.3524*box2d.b2_pi);d.p.Copy(box2d.b2Mul_R_V2(d.q,new box2d.b2Vec2(-1,0),new box2d.b2Vec2));
f=new box2d.b2PolygonShape;b[0]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(-1,0),new box2d.b2Vec2);b[1]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(1,0),new box2d.b2Vec2);b[2]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(0,.5),new box2d.b2Vec2);f.Set(b,3);for(d=0;10>d;++d)g=box2d.b2RandomRange(-.1,.1),b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(g,2.05+2.5*d),b.angle=0,b=this.m_world.CreateBody(b),b.CreateFixture(e,2),b.CreateFixture(f,2);d=new box2d.b2PolygonShape;d.SetAsBox(1.5,.15);g=new box2d.b2PolygonShape;
g.SetAsBox(.15,2.7,new box2d.b2Vec2(-1.45,2.35),.2);e=new box2d.b2PolygonShape;e.SetAsBox(.15,2.7,new box2d.b2Vec2(1.45,2.35),-.2);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,2);b=this.m_world.CreateBody(b);b.CreateFixture(d,4);b.CreateFixture(g,4);b.CreateFixture(e,4)};goog.inherits(box2d.Testbed.CompoundShapes,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.CompoundShapes",box2d.Testbed.CompoundShapes);
box2d.Testbed.CompoundShapes.Create=function(a,c){return new box2d.Testbed.CompoundShapes(a,c)};goog.exportProperty(box2d.Testbed.CompoundShapes,"Create",box2d.Testbed.CompoundShapes.Create);box2d.Testbed.Confined=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-10,0),new box2d.b2Vec2(10,0));d.CreateFixture(b,0);b.SetAsEdge(new box2d.b2Vec2(-10,0),new box2d.b2Vec2(-10,20));d.CreateFixture(b,0);b.SetAsEdge(new box2d.b2Vec2(10,0),new box2d.b2Vec2(10,20));d.CreateFixture(b,0);b.SetAsEdge(new box2d.b2Vec2(-10,20),new box2d.b2Vec2(10,20));d.CreateFixture(b,0);b=new box2d.b2CircleShape;
b.m_p.SetZero();b.m_radius=.5;d=new box2d.b2FixtureDef;d.shape=b;d.density=1;d.friction=.1;for(var e=0;e<box2d.Testbed.Confined.e_columnCount;++e)for(var f=0;f<box2d.Testbed.Confined.e_rowCount;++f)b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(-10+.5*(2.1*e+1+.01*f),.5*(2*f+1)),this.m_world.CreateBody(b).CreateFixture(d);this.m_world.SetGravity(new box2d.b2Vec2(0,0))};goog.inherits(box2d.Testbed.Confined,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.Confined",box2d.Testbed.Confined);box2d.Testbed.Confined.e_columnCount=0;goog.exportProperty(box2d.Testbed.Confined,"e_columnCount",box2d.Testbed.Confined.e_columnCount);box2d.Testbed.Confined.e_rowCount=0;goog.exportProperty(box2d.Testbed.Confined,"e_rowCount",box2d.Testbed.Confined.e_rowCount);
box2d.Testbed.Confined.prototype.CreateCircle=function(){var a=new box2d.b2CircleShape;a.m_p.SetZero();a.m_radius=2;var c=new box2d.b2FixtureDef;c.shape=a;c.density=1;c.friction=0;var a=new box2d.b2Vec2(box2d.b2Random(),3+box2d.b2Random()),b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Copy(a);this.m_world.CreateBody(b).CreateFixture(c)};goog.exportProperty(box2d.Testbed.Confined.prototype,"CreateCircle",box2d.Testbed.Confined.prototype.CreateCircle);
box2d.Testbed.Confined.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.C:this.CreateCircle()}};goog.exportProperty(box2d.Testbed.Confined.prototype,"Keyboard",box2d.Testbed.Confined.prototype.Keyboard);
box2d.Testbed.Confined.prototype.Step=function(a){for(var c=this.m_world.GetBodyList();c;c=c.m_next)c.GetType()===box2d.b2BodyType.b2_dynamicBody&&c.IsAwake();180===this.m_stepCount&&(this.m_stepCount+=0);box2d.Testbed.Test.prototype.Step.call(this,a);for(c=this.m_world.GetBodyList();c;c=c.m_next)c.GetType()===box2d.b2BodyType.b2_dynamicBody&&(a=c.GetPosition(),-10>=a.x||10<=a.x||0>=a.y||20<=a.y)&&(a.x+=0);this.m_debugDraw.DrawString(5,this.m_textLine,"Press 'c' to create a circle.");this.m_textLine+=
box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Confined.prototype,"Step",box2d.Testbed.Confined.prototype.Step);box2d.Testbed.Confined.Create=function(a,c){return new box2d.Testbed.Confined(a,c)};goog.exportProperty(box2d.Testbed.Confined,"Create",box2d.Testbed.Confined.Create);box2d.Testbed.ContinuousTest=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef;b.position.Set(0,0);var b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-10,0),new box2d.b2Vec2(10,0));b.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(.2,1,new box2d.b2Vec2(.5,1),0);b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,20);d=new box2d.b2PolygonShape;d.SetAsBox(2,.1);this.m_body=this.m_world.CreateBody(b);
this.m_body.CreateFixture(d,1);this.m_angularVelocity=box2d.b2RandomRange(-50,50);this.m_body.SetLinearVelocity(new box2d.b2Vec2(0,-100));this.m_body.SetAngularVelocity(this.m_angularVelocity);box2d.b2_gjkCalls=0;box2d.b2_gjkIters=0;box2d.b2_gjkMaxIters=0;box2d.b2_toiCalls=0;box2d.b2_toiIters=0;box2d.b2_toiRootIters=0;box2d.b2_toiMaxRootIters=0;box2d.b2_toiTime=0;box2d.b2_toiMaxTime=0};goog.inherits(box2d.Testbed.ContinuousTest,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.ContinuousTest",box2d.Testbed.ContinuousTest);box2d.Testbed.ContinuousTest.prototype.m_body=null;goog.exportProperty(box2d.Testbed.ContinuousTest.prototype,"m_body",box2d.Testbed.ContinuousTest.prototype.m_body);box2d.Testbed.ContinuousTest.prototype.m_angularVelocity=0;goog.exportProperty(box2d.Testbed.ContinuousTest.prototype,"m_angularVelocity",box2d.Testbed.ContinuousTest.prototype.m_angularVelocity);
box2d.Testbed.ContinuousTest.prototype.Launch=function(){box2d.b2_gjkCalls=0;box2d.b2_gjkIters=0;box2d.b2_gjkMaxIters=0;box2d.b2_toiCalls=0;box2d.b2_toiIters=0;box2d.b2_toiRootIters=0;box2d.b2_toiMaxRootIters=0;box2d.b2_toiTime=0;box2d.b2_toiMaxTime=0;this.m_body.SetTransform_V2_A(new box2d.b2Vec2(0,20),0);this.m_angularVelocity=box2d.b2RandomRange(-50,50);this.m_body.SetLinearVelocity(new box2d.b2Vec2(0,-100));this.m_body.SetAngularVelocity(this.m_angularVelocity)};
goog.exportProperty(box2d.Testbed.ContinuousTest.prototype,"Launch",box2d.Testbed.ContinuousTest.prototype.Launch);
box2d.Testbed.ContinuousTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);0<box2d.b2_gjkCalls&&(this.m_debugDraw.DrawString(5,this.m_textLine,"gjk calls = %d, ave gjk iters = %3.1f, max gjk iters = %d",box2d.b2_gjkCalls,box2d.b2_gjkIters/box2d.b2_gjkCalls,box2d.b2_gjkMaxIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);0<box2d.b2_toiCalls&&(this.m_debugDraw.DrawString(5,this.m_textLine,"toi [max] calls = %d, ave toi iters = %3.1f [%d]",box2d.b2_toiCalls,box2d.b2_toiIters/
box2d.b2_toiCalls,box2d.b2_toiMaxRootIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"ave [max] toi root iters = %3.1f [%d]",box2d.b2_toiRootIters/box2d.b2_toiCalls,box2d.b2_toiMaxRootIters),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE,this.m_debugDraw.DrawString(5,this.m_textLine,"ave [max] toi time = %.1f [%.1f] (microseconds)",1E3*box2d.b2_toiTime/box2d.b2_toiCalls,1E3*box2d.b2_toiMaxTime),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE);
0===this.m_stepCount%60&&this.Launch()};goog.exportProperty(box2d.Testbed.ContinuousTest.prototype,"Step",box2d.Testbed.ContinuousTest.prototype.Step);box2d.Testbed.ContinuousTest.Create=function(a,c){return new box2d.Testbed.ContinuousTest(a,c)};goog.exportProperty(box2d.Testbed.ContinuousTest,"Create",box2d.Testbed.ContinuousTest.Create);box2d.Testbed.ConvexHull=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_test_points=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.Generate();this.m_auto=!1};goog.inherits(box2d.Testbed.ConvexHull,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ConvexHull",box2d.Testbed.ConvexHull);box2d.Testbed.ConvexHull.e_count=box2d.b2_maxPolygonVertices;goog.exportProperty(box2d.Testbed.ConvexHull,"e_count",box2d.Testbed.ConvexHull.e_count);
box2d.Testbed.ConvexHull.prototype.m_test_points=null;goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"m_test_points",box2d.Testbed.ConvexHull.prototype.m_test_points);box2d.Testbed.ConvexHull.prototype.m_count=0;goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"m_count",box2d.Testbed.ConvexHull.prototype.m_count);box2d.Testbed.ConvexHull.prototype.m_auto=!1;goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"m_auto",box2d.Testbed.ConvexHull.prototype.m_auto);
box2d.Testbed.ConvexHull.prototype.Generate=function(){for(var a=0;a<box2d.Testbed.ConvexHull.e_count;++a){var c=box2d.b2RandomRange(-10,10),b=box2d.b2RandomRange(-10,10),c=box2d.b2Clamp(c,-8,8),b=box2d.b2Clamp(b,-8,8);this.m_test_points[a].Set(c,b)}this.m_count=box2d.Testbed.ConvexHull.e_count};goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"Generate",box2d.Testbed.ConvexHull.prototype.Generate);
box2d.Testbed.ConvexHull.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_auto=!this.m_auto;break;case goog.events.KeyCodes.G:this.Generate()}};goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"Keyboard",box2d.Testbed.ConvexHull.prototype.Keyboard);
box2d.Testbed.ConvexHull.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);a=new box2d.b2PolygonShape;a.Set(this.m_test_points,this.m_count);this.m_debugDraw.DrawString(5,this.m_textLine,"Press g to generate a new random convex hull");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawPolygon(a.m_vertices,a.m_count,new box2d.b2Color(.9,.9,.9));for(var c=0;c<this.m_count;++c)this.m_debugDraw.DrawPoint(this.m_test_points[c],3,new box2d.b2Color(.3,.9,.3)),
this.m_debugDraw.DrawStringWorld(this.m_test_points[c].x+.05,this.m_test_points[c].y+.05,"%d",c);a.Validate()||(this.m_textLine+=0);this.m_auto&&this.Generate()};goog.exportProperty(box2d.Testbed.ConvexHull.prototype,"Step",box2d.Testbed.ConvexHull.prototype.Step);box2d.Testbed.ConvexHull.Create=function(a,c){return new box2d.Testbed.ConvexHull(a,c)};goog.exportProperty(box2d.Testbed.ConvexHull,"Create",box2d.Testbed.ConvexHull.Create);box2d.Testbed.ConveyorBelt=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-20,0),new box2d.b2Vec2(20,0));d.CreateFixture(b,0);b=new box2d.b2BodyDef;b.position.Set(-5,5);d=this.m_world.CreateBody(b);b=new box2d.b2PolygonShape;b.SetAsBox(10,.5);var e=new box2d.b2FixtureDef;e.shape=b;e.friction=.8;this.m_platform=d.CreateFixture(e);for(e=0;5>e;++e)b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,
b.position.Set(-10+2*e,7),d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,b.SetAsBox(.5,.5),d.CreateFixture(b,20)};goog.inherits(box2d.Testbed.ConveyorBelt,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ConveyorBelt",box2d.Testbed.ConveyorBelt);box2d.Testbed.ConveyorBelt.prototype.m_platform=null;goog.exportProperty(box2d.Testbed.ConveyorBelt.prototype,"m_platform",box2d.Testbed.ConveyorBelt.prototype.m_platform);
box2d.Testbed.ConveyorBelt.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c);var b=a.GetFixtureA(),d=a.GetFixtureB();b===this.m_platform&&a.SetTangentSpeed(5);d===this.m_platform&&a.SetTangentSpeed(-5)};goog.exportProperty(box2d.Testbed.ConveyorBelt.prototype,"PreSolve",box2d.Testbed.ConveyorBelt.prototype.PreSolve);box2d.Testbed.ConveyorBelt.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};
goog.exportProperty(box2d.Testbed.ConveyorBelt.prototype,"Step",box2d.Testbed.ConveyorBelt.prototype.Step);box2d.Testbed.ConveyorBelt.Create=function(a,c){return new box2d.Testbed.ConveyorBelt(a,c)};goog.exportProperty(box2d.Testbed.ConveyorBelt,"Create",box2d.Testbed.ConveyorBelt.Create);box2d.Testbed.CornerCase=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-20,30),new box2d.b2Vec2(-20,0),new box2d.b2Vec2(-25,0),new box2d.b2Vec2(-25,30)];b.Set(e);d.CreateFixture(b,0);var f,b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-25,0),new box2d.b2Vec2(20,15),new box2d.b2Vec2(25,0)];b.Set(e);d.CreateFixture(b,0);for(f=-20;20>f;f+=10)b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-25,0),new box2d.b2Vec2(f,
15),new box2d.b2Vec2(f+10,15)],b.Set(e),d.CreateFixture(b,0);for(f=0;30>f;f+=3)b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(25,f),new box2d.b2Vec2(25,f+3),new box2d.b2Vec2(20,15)],b.Set(e),d.CreateFixture(b,0);this.m_particleSystem.SetRadius(1);e=box2d.Testbed.TestMain.GetParticleParameterValue();b=new box2d.b2CircleShape;b.m_p.Set(0,35);b.m_radius=12;d=new box2d.b2ParticleGroupDef;d.flags=e;d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&
this.ColorParticleGroup(b,0)};goog.inherits(box2d.Testbed.CornerCase,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.CornerCase",box2d.Testbed.CornerCase);box2d.Testbed.CornerCase.Create=function(a,c){return new box2d.Testbed.CornerCase(a,c)};goog.exportProperty(box2d.Testbed.CornerCase,"Create",box2d.Testbed.CornerCase.Create);box2d.Testbed.DamBreak=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2ChainShape,e=[new box2d.b2Vec2(-2,0),new box2d.b2Vec2(2,0),new box2d.b2Vec2(2,4),new box2d.b2Vec2(-2,4)];b.CreateLoop(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.025*3);this.m_particleSystem.SetDamping(.2);b=new box2d.b2PolygonShape;b.SetAsBox(.8,1,new box2d.b2Vec2(-1.2,1.01),0);d=new box2d.b2ParticleGroupDef;d.flags=box2d.Testbed.TestMain.GetParticleParameterValue();
d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(b,0)};goog.inherits(box2d.Testbed.DamBreak,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DamBreak",box2d.Testbed.DamBreak);box2d.Testbed.DamBreak.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.DamBreak.prototype,"GetDefaultViewZoom",box2d.Testbed.DamBreak.prototype.GetDefaultViewZoom);
box2d.Testbed.DamBreak.Create=function(a,c){return new box2d.Testbed.DamBreak(a,c)};goog.exportProperty(box2d.Testbed.DamBreak,"Create",box2d.Testbed.DamBreak.Create);box2d.Testbed.DistanceTest=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_positionB=new box2d.b2Vec2;this.m_transformA=new box2d.b2Transform;this.m_transformB=new box2d.b2Transform;this.m_polygonA=new box2d.b2PolygonShape;this.m_polygonB=new box2d.b2PolygonShape;this.m_transformA.SetIdentity();this.m_transformA.p.Set(0,-.2);this.m_polygonA.SetAsBox(10,.2);this.m_positionB.Set(12.017401,.13678508);this.m_angleB=-.0109265;this.m_transformB.SetPositionRotationAngle(this.m_positionB,this.m_angleB);
this.m_polygonB.SetAsBox(2,.1)};goog.inherits(box2d.Testbed.DistanceTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DistanceTest",box2d.Testbed.DistanceTest);box2d.Testbed.DistanceTest.prototype.m_positionB=null;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_positionB",box2d.Testbed.DistanceTest.prototype.m_positionB);box2d.Testbed.DistanceTest.prototype.m_angleB=0;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_angleB",box2d.Testbed.DistanceTest.prototype.m_angleB);
box2d.Testbed.DistanceTest.prototype.m_transformA=null;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_transformA",box2d.Testbed.DistanceTest.prototype.m_transformA);box2d.Testbed.DistanceTest.prototype.m_transformB=null;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_transformB",box2d.Testbed.DistanceTest.prototype.m_transformB);box2d.Testbed.DistanceTest.prototype.m_polygonA=null;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_polygonA",box2d.Testbed.DistanceTest.prototype.m_polygonA);
box2d.Testbed.DistanceTest.prototype.m_polygonB=null;goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"m_polygonB",box2d.Testbed.DistanceTest.prototype.m_polygonB);
box2d.Testbed.DistanceTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);var c=new box2d.b2DistanceInput;c.proxyA.SetShape(this.m_polygonA,0);c.proxyB.SetShape(this.m_polygonB,0);c.transformA.Copy(this.m_transformA);c.transformB.Copy(this.m_transformB);c.useRadii=!0;var b=new box2d.b2SimplexCache;b.count=0;a=new box2d.b2DistanceOutput;box2d.b2ShapeDistance(a,b,c);this.m_debugDraw.DrawString(5,this.m_textLine,"distance = %4.2f",a.distance);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;
this.m_debugDraw.DrawString(5,this.m_textLine,"iterations = %d",a.iterations);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;for(var c=new box2d.b2Color(.9,.9,.9),b=Array(box2d.b2_maxPolygonVertices),d=0;d<this.m_polygonA.m_count;++d)b[d]=box2d.b2Mul_X_V2(this.m_transformA,this.m_polygonA.m_vertices[d],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(b,this.m_polygonA.m_count,c);for(d=0;d<this.m_polygonB.m_count;++d)b[d]=box2d.b2Mul_X_V2(this.m_transformB,this.m_polygonB.m_vertices[d],new box2d.b2Vec2);
this.m_debugDraw.DrawPolygon(b,this.m_polygonB.m_count,c);c=a.pointA;a=a.pointB;b=new box2d.b2Color(1,0,0);this.m_debugDraw.DrawPoint(c,4,b);c=new box2d.b2Color(1,1,0);this.m_debugDraw.DrawPoint(a,4,c)};goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"Step",box2d.Testbed.DistanceTest.prototype.Step);
box2d.Testbed.DistanceTest.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_positionB.x-=.1;break;case goog.events.KeyCodes.D:this.m_positionB.x+=.1;break;case goog.events.KeyCodes.S:this.m_positionB.y-=.1;break;case goog.events.KeyCodes.W:this.m_positionB.y+=.1;break;case goog.events.KeyCodes.Q:this.m_angleB+=.1*box2d.b2_pi;break;case goog.events.KeyCodes.E:this.m_angleB-=.1*box2d.b2_pi}this.m_transformB.SetPositionRotationAngle(this.m_positionB,this.m_angleB)};
goog.exportProperty(box2d.Testbed.DistanceTest.prototype,"Keyboard",box2d.Testbed.DistanceTest.prototype.Keyboard);box2d.Testbed.DistanceTest.Create=function(a,c){return new box2d.Testbed.DistanceTest(a,c)};goog.exportProperty(box2d.Testbed.DistanceTest,"Create",box2d.Testbed.DistanceTest.Create);box2d.Testbed.Dominos=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));var e=new box2d.b2BodyDef,b=this.m_world.CreateBody(e);b.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(6,.25);e=new box2d.b2BodyDef;e.position.Set(-1.5,10);var f=this.m_world.CreateBody(e);f.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(.1,1);var g=new box2d.b2FixtureDef;g.shape=d;g.density=20;g.friction=.1;for(f=
0;10>f;++f){e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(-6+1*f,11.25);var h=this.m_world.CreateBody(e);h.CreateFixture(g)}d=new box2d.b2PolygonShape;d.SetAsBox(7,.25,box2d.b2Vec2_zero,.3);e=new box2d.b2BodyDef;e.position.Set(1,6);f=this.m_world.CreateBody(e);f.CreateFixture(d,0);g=null;d=new box2d.b2PolygonShape;d.SetAsBox(.25,1.5);e=new box2d.b2BodyDef;e.position.Set(-7,4);g=this.m_world.CreateBody(e);g.CreateFixture(d,0);f=null;d=new box2d.b2PolygonShape;d.SetAsBox(6,
.125);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(-.9,1);e.angle=-.15;f=this.m_world.CreateBody(e);f.CreateFixture(d,10);var h=new box2d.b2RevoluteJointDef,k=new box2d.b2Vec2;k.Set(-2,1);h.Initialize(b,f,k);h.collideConnected=!0;this.m_world.CreateJoint(h);e=null;d=new box2d.b2PolygonShape;d.SetAsBox(.25,.25);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(-10,15);e=this.m_world.CreateBody(e);e.CreateFixture(d,10);k.Set(-7,15);h.Initialize(g,
e,k);this.m_world.CreateJoint(h);var l=null,e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(6.5,3);l=this.m_world.CreateBody(e);d=new box2d.b2PolygonShape;g=new box2d.b2FixtureDef;g.shape=d;g.density=10;g.friction=.1;d.SetAsBox(1,.1,new box2d.b2Vec2(0,-.9),0);l.CreateFixture(g);d.SetAsBox(.1,1,new box2d.b2Vec2(-.9,0),0);l.CreateFixture(g);d.SetAsBox(.1,1,new box2d.b2Vec2(.9,0),0);l.CreateFixture(g);k.Set(6,2);h.Initialize(b,l,k);this.m_world.CreateJoint(h);b=null;d=new box2d.b2PolygonShape;
d.SetAsBox(1,.1);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(6.5,4.1);b=this.m_world.CreateBody(e);b.CreateFixture(d,30);k.Set(7.5,4);h.Initialize(l,b,k);this.m_world.CreateJoint(h);b=null;d=new box2d.b2PolygonShape;d.SetAsBox(.1,1);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(7.4,1);b=this.m_world.CreateBody(e);b.CreateFixture(d,10);d=new box2d.b2DistanceJointDef;d.bodyA=f;d.bodyB=b;d.localAnchorA.Set(6,0);d.localAnchorB.Set(0,-1);b=
box2d.b2Sub_V2_V2(d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2),d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2),new box2d.b2Vec2);d.length=b.Length();this.m_world.CreateJoint(d);d=new box2d.b2CircleShape;d.m_radius=.2;for(f=0;4>f;++f)e=new box2d.b2BodyDef,e.type=box2d.b2BodyType.b2_dynamicBody,e.position.Set(5.9+.4*f,2.4),h=this.m_world.CreateBody(e),h.CreateFixture(d,10)};goog.inherits(box2d.Testbed.Dominos,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Dominos",box2d.Testbed.Dominos);
box2d.Testbed.Dominos.Create=function(a,c){return new box2d.Testbed.Dominos(a,c)};goog.exportProperty(box2d.Testbed.Dominos,"Create",box2d.Testbed.Dominos.Create);box2d.Testbed.DominoTower=function(a,c){function b(a,b,c){var e=new box2d.b2PolygonShape;e.SetAsBox(.1,.5);var g=new box2d.b2FixtureDef;g.shape=e;g.density=d;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;g.friction=.1;g.restitution=.65;e.position.Set(a,b);e.angle=c?Math.PI/2:0;f.CreateBody(e).CreateFixture(g)}box2d.Testbed.Test.call(this,a,c);var d,e=new box2d.b2Vec2(0,-10),f=this.m_world;f.SetGravity(e);var g=new box2d.b2PolygonShape;g.SetAsBox(50,10);e=new box2d.b2BodyDef;e.position.Set(0,
-10);f.CreateBody(e).CreateFixture(g,0);d=10;g=new box2d.b2PolygonShape;g.SetAsBox(.7,.7);var h=new box2d.b2FixtureDef;h.density=35;e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;h.shape=g;h.friction=0;h.restitution=.85;e.bullet=!0;e.position=new box2d.b2Vec2(30,5);g=f.CreateBody(e);g.CreateFixture(h);g.SetLinearVelocity(new box2d.b2Vec2(-25,-25));g.SetAngularVelocity(6.7);h.density=25;e.position=new box2d.b2Vec2(-30,25);g=f.CreateBody(e);g.CreateFixture(h);g.SetLinearVelocity(new box2d.b2Vec2(35,
-10));g.SetAngularVelocity(-8.3);for(h=0;25>h;++h)e=1.5*h-18.75,b(e,.5,!1),b(e,1.1,!0);e=18.75;for(g=1;25>g;++g){3<g&&(d*=.8);for(var k=.5+1.386*g,h=0;h<25-g;++h)e=1.5*h-1.5*(25-g)/2,d*=2.5,0==h&&b(e-1.25+.1,k-.2,!1),h==25-g-1&&b(e+1.25-.1,k-.2,!1),d/=2.5,b(e,k,!1),b(e,k+.6,!0),b(e,k-.6,!0)}};goog.inherits(box2d.Testbed.DominoTower,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DominoTower",box2d.Testbed.DominoTower);
box2d.Testbed.DominoTower.Create=function(a,c){return new box2d.Testbed.DominoTower(a,c)};goog.exportProperty(box2d.Testbed.DominoTower,"Create",box2d.Testbed.DominoTower.Create);box2d.Testbed.DrawingParticles=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-4,-2),new box2d.b2Vec2(4,-2),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];d.Set(e,4);b.CreateFixture(d,0);d=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,-2),new box2d.b2Vec2(-2,-2),new box2d.b2Vec2(-2,6),new box2d.b2Vec2(-4,6)];d.Set(e,4);b.CreateFixture(d,0);d=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(2,-2),new box2d.b2Vec2(4,
-2),new box2d.b2Vec2(4,6),new box2d.b2Vec2(2,6)];d.Set(e,4);b.CreateFixture(d,0);d=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,4),new box2d.b2Vec2(4,4),new box2d.b2Vec2(4,6),new box2d.b2Vec2(-4,6)];d.Set(e,4);b.CreateFixture(d,0);this.m_colorIndex=0;this.m_particleSystem.SetRadius(.1);this.m_lastGroup=null;this.m_drawing=!0;box2d.b2Assert(0===(box2d.Testbed.DrawingParticles.k_paramDef[0].CalculateValueMask()&box2d.Testbed.DrawingParticles.Parameters.e_parameterBegin));box2d.Testbed.TestMain.SetParticleParameters(box2d.Testbed.DrawingParticles.k_paramDef,
box2d.Testbed.DrawingParticles.k_paramDefCount);box2d.Testbed.TestMain.SetRestartOnParticleParameterChange(!1);this.m_particleFlags=box2d.Testbed.TestMain.GetParticleParameterValue();this.m_groupFlags=0};goog.inherits(box2d.Testbed.DrawingParticles,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DrawingParticles",box2d.Testbed.DrawingParticles);
box2d.Testbed.DrawingParticles.Parameters={e_parameterBegin:-2147483648,e_parameterMove:-2147483647,e_parameterRigid:-2147483646,e_parameterRigidBarrier:-2147483644,e_parameterElasticBarrier:-2147483640,e_parameterSpringBarrier:-2147483632,e_parameterRepulsive:-2147483616};box2d.Testbed.DrawingParticles.prototype.m_lastGroup=null;box2d.Testbed.DrawingParticles.prototype.m_drawing=!0;box2d.Testbed.DrawingParticles.prototype.m_particleFlags=0;box2d.Testbed.DrawingParticles.prototype.m_groupFlags=0;
box2d.Testbed.DrawingParticles.prototype.m_colorIndex=0;
box2d.Testbed.DrawingParticles.k_paramValues=[new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_zombieParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"erase"),new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterMove,box2d.Testbed.ParticleParameter.k_DefaultOptions,"move"),new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterRigid,box2d.Testbed.ParticleParameter.k_DefaultOptions,"rigid"),
new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterRigidBarrier,box2d.Testbed.ParticleParameter.k_DefaultOptions,"rigid barrier"),new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterElasticBarrier,box2d.Testbed.ParticleParameter.k_DefaultOptions,"elastic barrier"),new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterSpringBarrier,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"spring barrier"),new box2d.Testbed.ParticleParameter.Value(box2d.Testbed.DrawingParticles.Parameters.e_parameterRepulsive,box2d.Testbed.ParticleParameter.k_DefaultOptions,"repulsive wall")];box2d.Testbed.DrawingParticles.k_paramDef=[new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.ParticleParameter.k_particleTypes),new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.DrawingParticles.k_paramValues)];box2d.Testbed.DrawingParticles.k_paramDefCount=box2d.Testbed.DrawingParticles.k_paramDef.length;
box2d.Testbed.DrawingParticles.prototype.DetermineParticleParameter=function(){return this.m_drawing?this.m_groupFlags===(box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|box2d.b2ParticleGroupFlag.b2_solidParticleGroup)?box2d.Testbed.DrawingParticles.Parameters.e_parameterRigid:this.m_groupFlags===box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.m_particleFlags===box2d.b2ParticleFlag.b2_barrierParticle?box2d.Testbed.DrawingParticles.Parameters.e_parameterRigidBarrier:this.m_particleFlags===(box2d.b2ParticleFlag.b2_elasticParticle|
box2d.b2ParticleFlag.b2_barrierParticle)?box2d.Testbed.DrawingParticles.Parameters.e_parameterElasticBarrier:this.m_particleFlags===(box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_barrierParticle)?box2d.Testbed.DrawingParticles.Parameters.e_parameterSpringBarrier:this.m_particleFlags===(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_repulsiveParticle)?box2d.Testbed.DrawingParticles.Parameters.e_parameterRepulsive:this.m_particleFlags:box2d.Testbed.DrawingParticles.Parameters.e_parameterMove};
box2d.Testbed.DrawingParticles.prototype.Keyboard=function(a){this.m_drawing=a!==goog.events.KeyCodes.X;this.m_groupFlags=this.m_particleFlags=0;switch(a){case goog.events.KeyCodes.E:this.m_particleFlags=box2d.b2ParticleFlag.b2_elasticParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case goog.events.KeyCodes.P:this.m_particleFlags=box2d.b2ParticleFlag.b2_powderParticle;break;case goog.events.KeyCodes.R:this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|
box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case goog.events.KeyCodes.S:this.m_particleFlags=box2d.b2ParticleFlag.b2_springParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case goog.events.KeyCodes.T:this.m_particleFlags=box2d.b2ParticleFlag.b2_tensileParticle;break;case goog.events.KeyCodes.V:this.m_particleFlags=box2d.b2ParticleFlag.b2_viscousParticle;break;case goog.events.KeyCodes.W:this.m_particleFlags=box2d.b2ParticleFlag.b2_wallParticle;this.m_groupFlags=
box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case goog.events.KeyCodes.B:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_wallParticle;break;case goog.events.KeyCodes.H:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup;break;case goog.events.KeyCodes.N:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_elasticParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;
break;case goog.events.KeyCodes.M:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_springParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case goog.events.KeyCodes.F:this.m_particleFlags=box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_repulsiveParticle;break;case goog.events.KeyCodes.C:this.m_particleFlags=box2d.b2ParticleFlag.b2_colorMixingParticle;break;case goog.events.KeyCodes.Z:this.m_particleFlags=box2d.b2ParticleFlag.b2_zombieParticle}box2d.Testbed.TestMain.SetParticleParameterValue(this.DetermineParticleParameter())};
goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"Keyboard",box2d.Testbed.DrawingParticles.prototype.Keyboard);
box2d.Testbed.DrawingParticles.prototype.MouseMove=function(a){box2d.Testbed.Test.prototype.MouseMove.call(this,a);if(this.m_drawing){var c=new box2d.b2CircleShape;c.m_p.Copy(a);c.m_radius=.2;this.m_particleSystem.DestroyParticlesInShape(c,box2d.b2Transform.IDENTITY);this.m_lastGroup&&this.m_groupFlags===this.m_lastGroup.GetGroupFlags()||(this.m_colorIndex=(this.m_colorIndex+1)%box2d.Testbed.Test.k_ParticleColorsCount);a=new box2d.b2ParticleGroupDef;a.shape=c;a.flags=this.m_particleFlags;if(this.m_particleFlags&
(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_elasticParticle)||this.m_particleFlags===(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_barrierParticle))a.flags|=box2d.b2ParticleFlag.b2_reactiveParticle;a.groupFlags=this.m_groupFlags;a.color.Copy(box2d.Testbed.Test.k_ParticleColors[this.m_colorIndex]);a.group=this.m_lastGroup;this.m_lastGroup=this.m_particleSystem.CreateParticleGroup(a);this.m_mouseTracing=!1}};
goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"MouseMove",box2d.Testbed.DrawingParticles.prototype.MouseMove);box2d.Testbed.DrawingParticles.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a);this.m_lastGroup=null};goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"MouseUp",box2d.Testbed.DrawingParticles.prototype.MouseUp);
box2d.Testbed.DrawingParticles.prototype.ParticleGroupDestroyed=function(a){box2d.Testbed.Test.prototype.ParticleGroupDestroyed.call(this,a);a===this.m_lastGroup&&(this.m_lastGroup=null)};goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"ParticleGroupDestroyed",box2d.Testbed.DrawingParticles.prototype.ParticleGroupDestroyed);
box2d.Testbed.DrawingParticles.prototype.SplitParticleGroups=function(){for(var a=this.m_particleSystem.GetParticleGroupList();a;a=a.GetNext())a!==this.m_lastGroup&&a.GetGroupFlags()&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&a.GetAllParticleFlags()&box2d.b2ParticleFlag.b2_zombieParticle&&this.m_particleSystem.SplitParticleGroup(a)};
box2d.Testbed.DrawingParticles.prototype.Step=function(a){var c=box2d.Testbed.TestMain.GetParticleParameterValue();if(this.m_drawing=(c&box2d.Testbed.DrawingParticles.Parameters.e_parameterMove)!==box2d.Testbed.DrawingParticles.Parameters.e_parameterMove)switch(c){case box2d.b2ParticleFlag.b2_elasticParticle:case box2d.b2ParticleFlag.b2_springParticle:case box2d.b2ParticleFlag.b2_wallParticle:this.m_particleFlags=c;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case box2d.Testbed.DrawingParticles.Parameters.e_parameterRigid:this.m_particleFlags=
box2d.b2ParticleFlag.b2_waterParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;case box2d.Testbed.DrawingParticles.Parameters.e_parameterRigidBarrier:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup;break;case box2d.Testbed.DrawingParticles.Parameters.e_parameterElasticBarrier:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_elasticParticle;
this.m_groupFlags=0;break;case box2d.Testbed.DrawingParticles.Parameters.e_parameterSpringBarrier:this.m_particleFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_springParticle;this.m_groupFlags=0;break;case box2d.Testbed.DrawingParticles.Parameters.e_parameterRepulsive:this.m_particleFlags=box2d.b2ParticleFlag.b2_repulsiveParticle|box2d.b2ParticleFlag.b2_wallParticle;this.m_groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;break;default:this.m_particleFlags=c,this.m_groupFlags=
0}this.m_particleSystem.GetAllParticleFlags()&box2d.b2ParticleFlag.b2_zombieParticle&&this.SplitParticleGroups();box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (L) liquid, (E) elastic, (S) spring");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"(R) rigid, (W) wall, (V) viscous, (T) tensile");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"(F) repulsive wall, (B) wall barrier");
this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"(H) rigid barrier, (N) elastic barrier, (M) spring barrier");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"(C) color mixing, (Z) erase, (X) move");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"Step",box2d.Testbed.DrawingParticles.prototype.Step);
box2d.Testbed.DrawingParticles.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.DrawingParticles.prototype,"GetDefaultViewZoom",box2d.Testbed.DrawingParticles.prototype.GetDefaultViewZoom);box2d.Testbed.DrawingParticles.Create=function(a,c){return new box2d.Testbed.DrawingParticles(a,c)};goog.exportProperty(box2d.Testbed.DrawingParticles,"Create",box2d.Testbed.DrawingParticles.Create);box2d.Testbed.DumpShell=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2Vec2(0,0);this.m_world.SetGravity(b);var b=Array(4),d=Array(2),e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_staticBody;e.position.Set(0,0);e.angle=0;e.linearVelocity.Set(0,0);e.angularVelocity=0;e.linearDamping=0;e.angularDamping=0;e.allowSleep=!0;e.awake=!0;e.fixedRotation=!1;e.bullet=!1;e.active=!0;e.gravityScale=1;b[0]=this.m_world.CreateBody(e);e=new box2d.b2FixtureDef;e.friction=10;e.restitution=0;e.density=
0;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;var f=new box2d.b2EdgeShape;f.m_radius=.009999999776483;f.m_vertex0.Set(0,0);f.m_vertex1.Set(0,0);f.m_vertex2.Set(44.5217399597168,0);f.m_vertex3.Set(0,0);f.m_hasVertex0=!1;f.m_hasVertex3=!1;e.shape=f;b[0].CreateFixture(e);e=new box2d.b2FixtureDef;e.friction=10;e.restitution=0;e.density=0;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;f=new box2d.b2EdgeShape;f.m_radius=.009999999776483;
f.m_vertex0.Set(0,0);f.m_vertex1.Set(0,16.69565200805664);f.m_vertex2.Set(44.5217399597168,16.69565200805664);f.m_vertex3.Set(0,0);f.m_hasVertex0=!1;f.m_hasVertex3=!1;e.shape=f;b[0].CreateFixture(e);e=new box2d.b2FixtureDef;e.friction=10;e.restitution=0;e.density=0;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;f=new box2d.b2EdgeShape;f.m_radius=.009999999776483;f.m_vertex0.Set(0,0);f.m_vertex1.Set(0,16.69565200805664);f.m_vertex2.Set(0,0);f.m_vertex3.Set(0,0);
f.m_hasVertex0=!1;f.m_hasVertex3=!1;e.shape=f;b[0].CreateFixture(e);e=new box2d.b2FixtureDef;e.friction=10;e.restitution=0;e.density=0;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;f=new box2d.b2EdgeShape;f.m_radius=.009999999776483;f.m_vertex0.Set(0,0);f.m_vertex1.Set(44.5217399597168,16.69565200805664);f.m_vertex2.Set(44.5217399597168,0);f.m_vertex3.Set(0,0);f.m_hasVertex0=!1;f.m_hasVertex3=!1;e.shape=f;b[0].CreateFixture(e);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;
e.position.Set(.847826063632965,2.5);e.angle=0;e.linearVelocity.Set(0,0);e.angularVelocity=0;e.linearDamping=.5;e.angularDamping=.5;e.allowSleep=!0;e.awake=!0;e.fixedRotation=!1;e.bullet=!1;e.active=!0;e.gravityScale=1;b[1]=this.m_world.CreateBody(e);e=new box2d.b2FixtureDef;e.friction=1;e.restitution=.5;e.density=10;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;var f=new box2d.b2PolygonShape,g=box2d.b2Vec2.MakeArray(8);g[0].Set(6.907599925994873,.327199995517731);
g[1].Set(-.322800010442734,.282599985599518);g[2].Set(-.322800010442734,-.295700013637543);g[3].Set(6.885900020599365,-.364100009202957);f.Set(g,4);e.shape=f;b[1].CreateFixture(e);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_dynamicBody;e.position.Set(13.04347801208496,2.5);e.angle=0;e.linearVelocity.Set(0,0);e.angularVelocity=0;e.linearDamping=.5;e.angularDamping=.5;e.allowSleep=!0;e.awake=!0;e.fixedRotation=!1;e.bullet=!1;e.active=!0;e.gravityScale=1;b[2]=this.m_world.CreateBody(e);e=new box2d.b2FixtureDef;
e.friction=1;e.restitution=.5;e.density=10;e.isSensor=!1;e.filter.categoryBits=1;e.filter.maskBits=65535;e.filter.groupIndex=0;f=new box2d.b2PolygonShape;g=box2d.b2Vec2.MakeArray(8);g[0].Set(.200000002980232,-.300000011920929);g[1].Set(.200000002980232,.200000002980232);g[2].Set(-6.900000095367432,.200000002980232);g[3].Set(-6.900000095367432,-.300000011920929);f.Set(g,4);e.shape=f;b[2].CreateFixture(e);e=new box2d.b2BodyDef;e.type=box2d.b2BodyType.b2_staticBody;e.position.Set(0,0);e.angle=0;e.linearVelocity.Set(0,
0);e.angularVelocity=0;e.linearDamping=0;e.angularDamping=0;e.allowSleep=!0;e.awake=!0;e.fixedRotation=!1;e.bullet=!1;e.active=!0;e.gravityScale=1;b[3]=this.m_world.CreateBody(e);e=new box2d.b2RevoluteJointDef;e.bodyA=b[1];e.bodyB=b[0];e.collideConnected=!1;e.localAnchorA.Set(0,0);e.localAnchorB.Set(.847826063632965,2.5);e.referenceAngle=0;e.enableLimit=!1;e.lowerAngle=0;e.upperAngle=0;e.enableMotor=!1;e.motorSpeed=0;e.maxMotorTorque=0;d[0]=this.m_world.CreateJoint(e);e=new box2d.b2PrismaticJointDef;
e.bodyA=b[1];e.bodyB=b[2];e.collideConnected=!1;e.localAnchorA.Set(0,0);e.localAnchorB.Set(-12.19565200805664,0);e.localAxisA.Set(-1,0);e.referenceAngle=0;e.enableLimit=!0;e.lowerTranslation=-20;e.upperTranslation=0;e.enableMotor=!0;e.motorSpeed=0;e.maxMotorForce=10;d[1]=this.m_world.CreateJoint(e)};goog.inherits(box2d.Testbed.DumpShell,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DumpShell",box2d.Testbed.DumpShell);
box2d.Testbed.DumpShell.Create=function(a,c){return new box2d.Testbed.DumpShell(a,c)};goog.exportProperty(box2d.Testbed.DumpShell,"Create",box2d.Testbed.DumpShell.Create);box2d.Testbed.Actor=function(){this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.Testbed.Actor",box2d.Testbed.Actor);box2d.Testbed.Actor.prototype.aabb=null;goog.exportProperty(box2d.Testbed.Actor.prototype,"aabb",box2d.Testbed.Actor.prototype.aabb);box2d.Testbed.Actor.prototype.fraction=0;goog.exportProperty(box2d.Testbed.Actor.prototype,"fraction",box2d.Testbed.Actor.prototype.fraction);box2d.Testbed.Actor.prototype.overlap=!1;goog.exportProperty(box2d.Testbed.Actor.prototype,"overlap",box2d.Testbed.Actor.prototype.overlap);
box2d.Testbed.Actor.prototype.proxyId=null;goog.exportProperty(box2d.Testbed.Actor.prototype,"proxyId",box2d.Testbed.Actor.prototype.proxyId);
box2d.Testbed.DynamicTreeTest=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_tree=new box2d.b2DynamicTree;this.m_queryAABB=new box2d.b2AABB;this.m_rayCastInput=new box2d.b2RayCastInput;this.m_rayCastOutput=new box2d.b2RayCastOutput;this.m_actors=Array(box2d.Testbed.DynamicTreeTest.e_actorCount);for(var b=0;b<box2d.Testbed.DynamicTreeTest.e_actorCount;++b)this.m_actors[b]=new box2d.Testbed.Actor;this.m_worldExtent=15;this.m_proxyExtent=.5;for(b=0;b<box2d.Testbed.DynamicTreeTest.e_actorCount;++b){var d=
this.m_actors[b];this.GetRandomAABB(d.aabb);d.proxyId=this.m_tree.CreateProxy(d.aabb,d)}this.m_stepCount=0;b=this.m_worldExtent;this.m_queryAABB.lowerBound.Set(-3,-4+b);this.m_queryAABB.upperBound.Set(5,6+b);this.m_rayCastInput.p1.Set(-5,5+b);this.m_rayCastInput.p2.Set(7,-4+b);this.m_rayCastInput.maxFraction=1;this.m_automated=!1};goog.inherits(box2d.Testbed.DynamicTreeTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.DynamicTreeTest",box2d.Testbed.DynamicTreeTest);
box2d.Testbed.DynamicTreeTest.e_actorCount=128;goog.exportProperty(box2d.Testbed.DynamicTreeTest,"e_actorCount",box2d.Testbed.DynamicTreeTest.e_actorCount);box2d.Testbed.DynamicTreeTest.prototype.m_worldExtent=0;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_worldExtent",box2d.Testbed.DynamicTreeTest.prototype.m_worldExtent);box2d.Testbed.DynamicTreeTest.prototype.m_proxyExtent=0;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_proxyExtent",box2d.Testbed.DynamicTreeTest.prototype.m_proxyExtent);
box2d.Testbed.DynamicTreeTest.prototype.m_tree=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_tree",box2d.Testbed.DynamicTreeTest.prototype.m_tree);box2d.Testbed.DynamicTreeTest.prototype.m_queryAABB=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_queryAABB",box2d.Testbed.DynamicTreeTest.prototype.m_queryAABB);box2d.Testbed.DynamicTreeTest.prototype.m_rayCastInput=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_rayCastInput",box2d.Testbed.DynamicTreeTest.prototype.m_rayCastInput);
box2d.Testbed.DynamicTreeTest.prototype.m_rayCastOutput=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_rayCastOutput",box2d.Testbed.DynamicTreeTest.prototype.m_rayCastOutput);box2d.Testbed.DynamicTreeTest.prototype.m_actor=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_actor",box2d.Testbed.DynamicTreeTest.prototype.m_actor);box2d.Testbed.DynamicTreeTest.prototype.m_actors=null;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_actors",box2d.Testbed.DynamicTreeTest.prototype.m_actors);
box2d.Testbed.DynamicTreeTest.prototype.m_stepCount=0;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_stepCount",box2d.Testbed.DynamicTreeTest.prototype.m_stepCount);box2d.Testbed.DynamicTreeTest.prototype.m_automated=!1;goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"m_automated",box2d.Testbed.DynamicTreeTest.prototype.m_automated);
box2d.Testbed.DynamicTreeTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_rayActor=null;for(a=0;a<box2d.Testbed.DynamicTreeTest.e_actorCount;++a)this.m_actors[a].fraction=1,this.m_actors[a].overlap=!1;if(this.m_automated){var c=box2d.b2Max(1,box2d.Testbed.DynamicTreeTest.e_actorCount>>2);for(a=0;a<c;++a)this.Action()}this.Query();this.RayCast();for(a=0;a<box2d.Testbed.DynamicTreeTest.e_actorCount;++a)if(c=this.m_actors[a],null!==c.proxyId){var b=new box2d.b2Color(.9,
.9,.9);c===this.m_rayActor&&c.overlap?b.SetRGB(.9,.6,.6):c===this.m_rayActor?b.SetRGB(.6,.9,.6):c.overlap&&b.SetRGB(.6,.6,.9);this.m_debugDraw.DrawAABB(c.aabb,b)}b=new box2d.b2Color(.7,.7,.7);this.m_debugDraw.DrawAABB(this.m_queryAABB,b);this.m_debugDraw.DrawSegment(this.m_rayCastInput.p1,this.m_rayCastInput.p2,b);a=new box2d.b2Color(.2,.9,.2);c=new box2d.b2Color(.9,.2,.2);this.m_debugDraw.DrawPoint(this.m_rayCastInput.p1,6,a);this.m_debugDraw.DrawPoint(this.m_rayCastInput.p2,6,c);this.m_rayActor&&
(a=new box2d.b2Color(.2,.2,.9),c=box2d.b2Add_V2_V2(this.m_rayCastInput.p1,box2d.b2Mul_S_V2(this.m_rayActor.fraction,box2d.b2Sub_V2_V2(this.m_rayCastInput.p2,this.m_rayCastInput.p1,new box2d.b2Vec2),new box2d.b2Vec2),new box2d.b2Vec2),this.m_debugDraw.DrawPoint(c,6,a));a=this.m_tree.GetHeight();this.m_debugDraw.DrawString(5,this.m_textLine,"dynamic tree height = %d",a);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;++this.m_stepCount};
goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"Step",box2d.Testbed.DynamicTreeTest.prototype.Step);box2d.Testbed.DynamicTreeTest.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_automated=!this.m_automated;break;case goog.events.KeyCodes.C:this.CreateProxy();break;case goog.events.KeyCodes.D:this.DestroyProxy();break;case goog.events.KeyCodes.M:this.MoveProxy()}};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"Keyboard",box2d.Testbed.DynamicTreeTest.prototype.Keyboard);
box2d.Testbed.DynamicTreeTest.prototype.GetRandomAABB=function(a){var c=new box2d.b2Vec2;c.Set(2*this.m_proxyExtent,2*this.m_proxyExtent);a.lowerBound.x=box2d.b2RandomRange(-this.m_worldExtent,this.m_worldExtent);a.lowerBound.y=box2d.b2RandomRange(0,2*this.m_worldExtent);a.upperBound.Copy(a.lowerBound);a.upperBound.SelfAdd(c)};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"GetRandomAABB",box2d.Testbed.DynamicTreeTest.prototype.GetRandomAABB);
box2d.Testbed.DynamicTreeTest.prototype.MoveAABB=function(a){var c=new box2d.b2Vec2;c.x=box2d.b2RandomRange(-.5,.5);c.y=box2d.b2RandomRange(-.5,.5);a.lowerBound.SelfAdd(c);a.upperBound.SelfAdd(c);var c=box2d.b2Mul_S_V2(.5,box2d.b2Add_V2_V2(a.lowerBound,a.upperBound,box2d.b2Vec2.s_t0),new box2d.b2Vec2),b=new box2d.b2Vec2(-this.m_worldExtent,0),d=new box2d.b2Vec2(this.m_worldExtent,2*this.m_worldExtent),b=box2d.b2Clamp_V2_V2_V2(c,b,d,new box2d.b2Vec2);a.lowerBound.SelfAdd(box2d.b2Sub_V2_V2(b,c,new box2d.b2Vec2));
a.upperBound.SelfAdd(box2d.b2Sub_V2_V2(b,c,new box2d.b2Vec2))};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"MoveAABB",box2d.Testbed.DynamicTreeTest.prototype.MoveAABB);box2d.Testbed.DynamicTreeTest.prototype.CreateProxy=function(){for(var a=0;a<box2d.Testbed.DynamicTreeTest.e_actorCount;++a){var c=0|box2d.b2RandomRange(0,box2d.Testbed.DynamicTreeTest.e_actorCount),c=this.m_actors[c];if(null===c.proxyId){this.GetRandomAABB(c.aabb);c.proxyId=this.m_tree.CreateProxy(c.aabb,c);break}}};
goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"CreateProxy",box2d.Testbed.DynamicTreeTest.prototype.CreateProxy);box2d.Testbed.DynamicTreeTest.prototype.DestroyProxy=function(){for(var a=0;a<box2d.Testbed.DynamicTreeTest.e_actorCount;++a){var c=0|box2d.b2RandomRange(0,box2d.Testbed.DynamicTreeTest.e_actorCount),c=this.m_actors[c];if(null!==c.proxyId){this.m_tree.DestroyProxy(c.proxyId);c.proxyId=null;break}}};
goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"DestroyProxy",box2d.Testbed.DynamicTreeTest.prototype.DestroyProxy);
box2d.Testbed.DynamicTreeTest.prototype.MoveProxy=function(){for(var a=0;a<box2d.Testbed.DynamicTreeTest.e_actorCount;++a){var c=0|box2d.b2RandomRange(0,box2d.Testbed.DynamicTreeTest.e_actorCount),c=this.m_actors[c];if(null!==c.proxyId){a=new box2d.b2AABB;a.Copy(c.aabb);this.MoveAABB(c.aabb);a=box2d.b2Sub_V2_V2(c.aabb.GetCenter(),a.GetCenter(),new box2d.b2Vec2);this.m_tree.MoveProxy(c.proxyId,c.aabb,a);break}}};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"MoveProxy",box2d.Testbed.DynamicTreeTest.prototype.MoveProxy);
box2d.Testbed.DynamicTreeTest.prototype.Action=function(){switch(0|box2d.b2RandomRange(0,20)){case 0:this.CreateProxy();break;case 1:this.DestroyProxy();break;default:this.MoveProxy()}};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"Action",box2d.Testbed.DynamicTreeTest.prototype.Action);
box2d.Testbed.DynamicTreeTest.prototype.Query=function(){var a=this;this.m_tree.Query(function(b){b=a.m_tree.GetUserData(b);b.overlap=box2d.b2TestOverlapAABB(a.m_queryAABB,b.aabb);return!0},this.m_queryAABB);for(var c=0;c<box2d.Testbed.DynamicTreeTest.e_actorCount;++c)if(null!==this.m_actors[c].proxyId){var b=box2d.b2TestOverlapAABB(this.m_queryAABB,this.m_actors[c].aabb);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b===this.m_actors[c].overlap)}};
goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"Query",box2d.Testbed.DynamicTreeTest.prototype.Query);
box2d.Testbed.DynamicTreeTest.prototype.RayCast=function(){var a=this;this.m_rayActor=null;var c=new box2d.b2RayCastInput;c.Copy(this.m_rayCastInput);this.m_tree.RayCast(function(b,c){var d=a.m_tree.GetUserData(c),h=new box2d.b2RayCastOutput;return d.aabb.RayCast(h,b)?(a.m_rayCastOutput=h,a.m_rayActor=d,a.m_rayActor.fraction=h.fraction):b.maxFraction},c);new box2d.b2RayCastOutput;for(var b=0;b<box2d.Testbed.DynamicTreeTest.e_actorCount;++b)if(null!==this.m_actors[b].proxyId){var d=new box2d.b2RayCastOutput;
this.m_actors[b].aabb.RayCast(d,c)&&(c.maxFraction=d.fraction)}};goog.exportProperty(box2d.Testbed.DynamicTreeTest.prototype,"RayCast",box2d.Testbed.DynamicTreeTest.prototype.RayCast);box2d.Testbed.DynamicTreeTest.Create=function(a,c){return new box2d.Testbed.DynamicTreeTest(a,c)};goog.exportProperty(box2d.Testbed.DynamicTreeTest,"Create",box2d.Testbed.DynamicTreeTest.Create);box2d.Testbed.EdgeShapesCallback=function(){box2d.b2RayCastCallback.call(this);this.m_point=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2};goog.inherits(box2d.Testbed.EdgeShapesCallback,box2d.b2RayCastCallback);goog.exportSymbol("box2d.Testbed.EdgeShapesCallback",box2d.Testbed.EdgeShapesCallback);box2d.Testbed.EdgeShapesCallback.prototype.m_fixture=null;goog.exportProperty(box2d.Testbed.EdgeShapesCallback.prototype,"m_fixture",box2d.Testbed.EdgeShapesCallback.prototype.m_fixture);
box2d.Testbed.EdgeShapesCallback.prototype.m_point=null;goog.exportProperty(box2d.Testbed.EdgeShapesCallback.prototype,"m_point",box2d.Testbed.EdgeShapesCallback.prototype.m_point);box2d.Testbed.EdgeShapesCallback.prototype.m_normal=null;goog.exportProperty(box2d.Testbed.EdgeShapesCallback.prototype,"m_normal",box2d.Testbed.EdgeShapesCallback.prototype.m_normal);box2d.Testbed.EdgeShapesCallback.prototype.ReportFixture=function(a,c,b,d){this.m_fixture=a;this.m_point.Copy(c);this.m_normal.Copy(b);return d};
goog.exportProperty(box2d.Testbed.EdgeShapesCallback.prototype,"ReportFixture",box2d.Testbed.EdgeShapesCallback.prototype.ReportFixture);
box2d.Testbed.EdgeShapes=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodyIndex=0;this.m_bodies=Array(box2d.Testbed.EdgeShapes.e_maxBodies);this.m_polygons=Array(4);for(var b=0;4>b;++b)this.m_polygons[b]=new box2d.b2PolygonShape;this.m_circle=new box2d.b2CircleShape;this.m_angle=0;for(var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=-20,f=2*box2d.b2Cos(e/10*box2d.b2_pi),b=0;80>b;++b){var g=e+.5,h=2*box2d.b2Cos(g/10*box2d.b2_pi),k=new box2d.b2EdgeShape;k.SetAsEdge(new box2d.b2Vec2(e,
f),new box2d.b2Vec2(g,h));d.CreateFixture(k,0);e=g;f=h}b=Array(3);b[0]=new box2d.b2Vec2(-.5,0);b[1]=new box2d.b2Vec2(.5,0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[0].Set(b,3);b=Array(3);b[0]=new box2d.b2Vec2(-.1,0);b[1]=new box2d.b2Vec2(.1,0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[1].Set(b,3);d=1/(2+box2d.b2Sqrt(2));e=box2d.b2Sqrt(2)*d;b=Array(8);b[0]=new box2d.b2Vec2(.5*e,0);b[1]=new box2d.b2Vec2(.5,d);b[2]=new box2d.b2Vec2(.5,d+e);b[3]=new box2d.b2Vec2(.5*e,1);b[4]=new box2d.b2Vec2(-.5*
e,1);b[5]=new box2d.b2Vec2(-.5,d+e);b[6]=new box2d.b2Vec2(-.5,d);b[7]=new box2d.b2Vec2(-.5*e,0);this.m_polygons[2].Set(b,8);this.m_polygons[3].SetAsBox(.5,.5);this.m_circle.m_radius=.5;for(b=0;b<box2d.Testbed.EdgeShapes.e_maxBodies;++b)this.m_bodies[b]=null};goog.inherits(box2d.Testbed.EdgeShapes,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.EdgeShapes",box2d.Testbed.EdgeShapes);box2d.Testbed.EdgeShapes.e_maxBodies=256;goog.exportProperty(box2d.Testbed.EdgeShapes,"e_maxBodies",box2d.Testbed.EdgeShapes.e_maxBodies);
box2d.Testbed.EdgeShapes.prototype.m_bodyIndex=0;goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"m_bodyIndex",box2d.Testbed.EdgeShapes.prototype.m_bodyIndex);box2d.Testbed.EdgeShapes.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"m_bodies",box2d.Testbed.EdgeShapes.prototype.m_bodies);box2d.Testbed.EdgeShapes.prototype.m_polygons=null;goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"m_polygons",box2d.Testbed.EdgeShapes.prototype.m_polygons);
box2d.Testbed.EdgeShapes.prototype.m_circle=null;goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"m_circle",box2d.Testbed.EdgeShapes.prototype.m_circle);box2d.Testbed.EdgeShapes.prototype.m_angle=0;goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"m_angle",box2d.Testbed.EdgeShapes.prototype.m_angle);
box2d.Testbed.EdgeShapes.prototype.CreateBody=function(a){null!==this.m_bodies[this.m_bodyIndex]&&(this.m_world.DestroyBody(this.m_bodies[this.m_bodyIndex]),this.m_bodies[this.m_bodyIndex]=null);var c=new box2d.b2BodyDef,b=box2d.b2RandomRange(-10,10),d=box2d.b2RandomRange(10,20);c.position.Set(b,d);c.angle=box2d.b2RandomRange(-box2d.b2_pi,box2d.b2_pi);c.type=box2d.b2BodyType.b2_dynamicBody;4===a&&(c.angularDamping=.02);this.m_bodies[this.m_bodyIndex]=this.m_world.CreateBody(c);4>a?(c=new box2d.b2FixtureDef,
c.shape=this.m_polygons[a]):(c=new box2d.b2FixtureDef,c.shape=this.m_circle);c.friction=.3;c.density=20;this.m_bodies[this.m_bodyIndex].CreateFixture(c);this.m_bodyIndex=(this.m_bodyIndex+1)%box2d.Testbed.EdgeShapes.e_maxBodies};goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"CreateBody",box2d.Testbed.EdgeShapes.prototype.CreateBody);
box2d.Testbed.EdgeShapes.prototype.DestroyBody=function(){for(var a=0;a<box2d.Testbed.EdgeShapes.e_maxBodies;++a)if(null!==this.m_bodies[a]){this.m_world.DestroyBody(this.m_bodies[a]);this.m_bodies[a]=null;break}};goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"DestroyBody",box2d.Testbed.EdgeShapes.prototype.DestroyBody);
box2d.Testbed.EdgeShapes.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.ONE:case goog.events.KeyCodes.TWO:case goog.events.KeyCodes.THREE:case goog.events.KeyCodes.FOUR:case goog.events.KeyCodes.FIVE:this.CreateBody(a-goog.events.KeyCodes.ONE);break;case goog.events.KeyCodes.D:this.DestroyBody()}};goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"Keyboard",box2d.Testbed.EdgeShapes.prototype.Keyboard);
box2d.Testbed.EdgeShapes.prototype.Step=function(a){var c=!a.pause||a.singleStep;box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press 1-5 to drop stuff, m to change the mode");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=new box2d.b2Vec2(0,10);var b=new box2d.b2Vec2(25*box2d.b2Cos(this.m_angle),-25*box2d.b2Abs(box2d.b2Sin(this.m_angle))),d=box2d.b2Add_V2_V2(a,b,new box2d.b2Vec2),b=new box2d.Testbed.EdgeShapesCallback;this.m_world.RayCast(b,a,
d);b.m_fixture?(this.m_debugDraw.DrawPoint(b.m_point,5,new box2d.b2Color(.4,.9,.4)),this.m_debugDraw.DrawSegment(a,b.m_point,new box2d.b2Color(.8,.8,.8)),a=box2d.b2Add_V2_V2(b.m_point,box2d.b2Mul_S_V2(.5,b.m_normal,box2d.b2Vec2.s_t0),new box2d.b2Vec2),this.m_debugDraw.DrawSegment(b.m_point,a,new box2d.b2Color(.9,.9,.4))):this.m_debugDraw.DrawSegment(a,d,new box2d.b2Color(.8,.8,.8));c&&(this.m_angle+=.25*box2d.b2_pi/180)};goog.exportProperty(box2d.Testbed.EdgeShapes.prototype,"Step",box2d.Testbed.EdgeShapes.prototype.Step);
box2d.Testbed.EdgeShapes.Create=function(a,c){return new box2d.Testbed.EdgeShapes(a,c)};goog.exportProperty(box2d.Testbed.EdgeShapes,"Create",box2d.Testbed.EdgeShapes.Create);box2d.Testbed.EdgeTest=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=new box2d.b2Vec2(-10,0),f=new box2d.b2Vec2(-7,-2),g=new box2d.b2Vec2(-4,0),h=new box2d.b2Vec2(0,0),k=new box2d.b2Vec2(4,0),l=new box2d.b2Vec2(7,2),m=new box2d.b2Vec2(10,0),b=new box2d.b2EdgeShape;b.SetAsEdge(e,f);b.m_hasVertex3=!0;b.m_vertex3.Copy(g);d.CreateFixture(b,0);b.SetAsEdge(f,g);b.m_hasVertex0=!0;b.m_hasVertex3=!0;b.m_vertex0.Copy(e);b.m_vertex3.Copy(h);d.CreateFixture(b,
0);b.SetAsEdge(g,h);b.m_hasVertex0=!0;b.m_hasVertex3=!0;b.m_vertex0.Copy(f);b.m_vertex3.Copy(k);d.CreateFixture(b,0);b.SetAsEdge(h,k);b.m_hasVertex0=!0;b.m_hasVertex3=!0;b.m_vertex0.Copy(g);b.m_vertex3.Copy(l);d.CreateFixture(b,0);b.SetAsEdge(k,l);b.m_hasVertex0=!0;b.m_hasVertex3=!0;b.m_vertex0.Copy(h);b.m_vertex3.Copy(m);d.CreateFixture(b,0);b.SetAsEdge(l,m);b.m_hasVertex0=!0;b.m_vertex0.Copy(k);d.CreateFixture(b,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(-.5,
.6);b.allowSleep=!1;d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_radius=.5;d.CreateFixture(b,1);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(1,.6);b.allowSleep=!1;d=this.m_world.CreateBody(b);b=new box2d.b2PolygonShape;b.SetAsBox(.5,.5);d.CreateFixture(b,1)};goog.inherits(box2d.Testbed.EdgeTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.EdgeTest",box2d.Testbed.EdgeTest);
box2d.Testbed.EdgeTest.Create=function(a,c){return new box2d.Testbed.EdgeTest(a,c)};goog.exportProperty(box2d.Testbed.EdgeTest,"Create",box2d.Testbed.EdgeTest.Create);box2d.Testbed.ElasticParticles=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-4,-1),new box2d.b2Vec2(4,-1),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,-.1),new box2d.b2Vec2(-2,-.1),new box2d.b2Vec2(-2,2),new box2d.b2Vec2(-4,2)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(2,-.1),
new box2d.b2Vec2(4,-.1),new box2d.b2Vec2(4,2),new box2d.b2Vec2(2,2)];b.Set(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.035*3);b=new box2d.b2CircleShape;b.m_p.Set(0,3);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_springParticle;d.groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.shape=b;d.color.Set(255,0,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2CircleShape;b.m_p.Set(-1,3);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;
d.flags=box2d.b2ParticleFlag.b2_elasticParticle;d.groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.shape=b;d.color.Set(0,255,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2PolygonShape;b.SetAsBox(1,.5);d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_elasticParticle;d.groupFlags=box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.position.Set(1,4);d.angle=-.5;d.angularVelocity=2;d.shape=b;d.color.Set(0,0,255,255);this.m_particleSystem.CreateParticleGroup(d);
b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_p.Set(0,8);b.m_radius=.5;d.CreateFixture(b,.5)};goog.inherits(box2d.Testbed.ElasticParticles,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ElasticParticles",box2d.Testbed.ElasticParticles);box2d.Testbed.ElasticParticles.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.ElasticParticles.prototype,"GetDefaultViewZoom",box2d.Testbed.ElasticParticles.prototype.GetDefaultViewZoom);
box2d.Testbed.ElasticParticles.Create=function(a,c){return new box2d.Testbed.ElasticParticles(a,c)};goog.exportProperty(box2d.Testbed.ElasticParticles,"Create",box2d.Testbed.ElasticParticles.Create);box2d.Testbed.Empty=function(a,c){box2d.Testbed.Test.call(this,a,c)};goog.inherits(box2d.Testbed.Empty,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Empty",box2d.Testbed.Empty);box2d.Testbed.Empty.prototype.JointDestroyed=function(a){box2d.Testbed.Test.prototype.JointDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"JointDestroyed",box2d.Testbed.Empty.prototype.JointDestroyed);
box2d.Testbed.Empty.prototype.ParticleGroupDestroyed=function(a){box2d.Testbed.Test.prototype.ParticleGroupDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"ParticleGroupDestroyed",box2d.Testbed.Empty.prototype.ParticleGroupDestroyed);box2d.Testbed.Empty.prototype.BeginContact=function(a){box2d.Testbed.Test.prototype.BeginContact.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"BeginContact",box2d.Testbed.Empty.prototype.BeginContact);
box2d.Testbed.Empty.prototype.EndContact=function(a){box2d.Testbed.Test.prototype.EndContact.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"EndContact",box2d.Testbed.Empty.prototype.EndContact);box2d.Testbed.Empty.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Empty.prototype,"PreSolve",box2d.Testbed.Empty.prototype.PreSolve);
box2d.Testbed.Empty.prototype.PostSolve=function(a,c){box2d.Testbed.Test.prototype.PostSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Empty.prototype,"PostSolve",box2d.Testbed.Empty.prototype.PostSolve);box2d.Testbed.Empty.prototype.Keyboard=function(a){box2d.Testbed.Test.prototype.Keyboard.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"Keyboard",box2d.Testbed.Empty.prototype.Keyboard);
box2d.Testbed.Empty.prototype.KeyboardUp=function(a){box2d.Testbed.Test.prototype.KeyboardUp.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"KeyboardUp",box2d.Testbed.Empty.prototype.KeyboardUp);box2d.Testbed.Empty.prototype.MouseDown=function(a){box2d.Testbed.Test.prototype.MouseDown.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"MouseDown",box2d.Testbed.Empty.prototype.MouseDown);
box2d.Testbed.Empty.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"MouseUp",box2d.Testbed.Empty.prototype.MouseUp);box2d.Testbed.Empty.prototype.MouseMove=function(a){box2d.Testbed.Test.prototype.MouseMove.call(this,a)};goog.exportProperty(box2d.Testbed.Empty.prototype,"MouseMove",box2d.Testbed.Empty.prototype.MouseMove);box2d.Testbed.Empty.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};
goog.exportProperty(box2d.Testbed.Empty.prototype,"Step",box2d.Testbed.Empty.prototype.Step);box2d.Testbed.Empty.prototype.GetDefaultViewZoom=function(){return box2d.Testbed.Test.prototype.GetDefaultViewZoom.call(this)};goog.exportProperty(box2d.Testbed.Empty.prototype,"GetDefaultViewZoom",box2d.Testbed.Empty.prototype.GetDefaultViewZoom);box2d.Testbed.Empty.Create=function(a,c){return new box2d.Testbed.Empty(a,c)};goog.exportProperty(box2d.Testbed.Empty,"Create",box2d.Testbed.Empty.Create);box2d.Testbed.EyeCandy=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_particleSystem.SetDamping(.2);this.m_particleSystem.SetRadius(.6);this.m_particleSystem.SetGravityScale(.4);this.m_particleSystem.SetDensity(1.2);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_staticBody;d.allowSleep=!1;d.position.Set(0,0);var e=this.m_world.CreateBody(d),f=new box2d.b2PolygonShape;f.SetAsBox(.5,10,new box2d.b2Vec2(20,0),0);e.CreateFixture(f,5);f.SetAsBox(.5,
10,new box2d.b2Vec2(-20,0),0);e.CreateFixture(f,5);f.SetAsBox(.5,20,new box2d.b2Vec2(0,10),Math.PI/2);e.CreateFixture(f,5);f.SetAsBox(.5,20,new box2d.b2Vec2(0,-10),Math.PI/2);e.CreateFixture(f,5);d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,0);this.m_mover=this.m_world.CreateBody(d);f.SetAsBox(1,5,new box2d.b2Vec2(0,2),0);this.m_mover.CreateFixture(f,5);d=new box2d.b2RevoluteJointDef;d.bodyA=b;d.bodyB=this.m_mover;d.localAnchorA.Set(0,0);d.localAnchorB.Set(0,5);d.referenceAngle=0;d.motorSpeed=
0;d.maxMotorTorque=1E7;d.enableMotor=!0;this.m_joint=this.m_world.CreateJoint(d);b=new box2d.b2ParticleGroupDef;b.flags=box2d.b2ParticleFlag.b2_waterParticle;d=new box2d.b2PolygonShape;d.SetAsBox(9,9,new box2d.b2Vec2(0,0),0);b.shape=d;this.m_particleSystem.CreateParticleGroup(b)};goog.inherits(box2d.Testbed.EyeCandy,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.EyeCandy",box2d.Testbed.EyeCandy);
box2d.Testbed.EyeCandy.prototype.JointDestroyed=function(a){box2d.Testbed.Test.prototype.JointDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"JointDestroyed",box2d.Testbed.EyeCandy.prototype.JointDestroyed);box2d.Testbed.EyeCandy.prototype.ParticleGroupDestroyed=function(a){box2d.Testbed.Test.prototype.ParticleGroupDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"ParticleGroupDestroyed",box2d.Testbed.EyeCandy.prototype.ParticleGroupDestroyed);
box2d.Testbed.EyeCandy.prototype.BeginContact=function(a){box2d.Testbed.Test.prototype.BeginContact.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"BeginContact",box2d.Testbed.EyeCandy.prototype.BeginContact);box2d.Testbed.EyeCandy.prototype.EndContact=function(a){box2d.Testbed.Test.prototype.EndContact.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"EndContact",box2d.Testbed.EyeCandy.prototype.EndContact);
box2d.Testbed.EyeCandy.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"PreSolve",box2d.Testbed.EyeCandy.prototype.PreSolve);box2d.Testbed.EyeCandy.prototype.PostSolve=function(a,c){box2d.Testbed.Test.prototype.PostSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"PostSolve",box2d.Testbed.EyeCandy.prototype.PostSolve);
box2d.Testbed.EyeCandy.prototype.Keyboard=function(a){box2d.Testbed.Test.prototype.Keyboard.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"Keyboard",box2d.Testbed.EyeCandy.prototype.Keyboard);box2d.Testbed.EyeCandy.prototype.KeyboardUp=function(a){box2d.Testbed.Test.prototype.KeyboardUp.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"KeyboardUp",box2d.Testbed.EyeCandy.prototype.KeyboardUp);
box2d.Testbed.EyeCandy.prototype.MouseDown=function(a){box2d.Testbed.Test.prototype.MouseDown.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"MouseDown",box2d.Testbed.EyeCandy.prototype.MouseDown);box2d.Testbed.EyeCandy.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"MouseUp",box2d.Testbed.EyeCandy.prototype.MouseUp);
box2d.Testbed.EyeCandy.prototype.MouseMove=function(a){box2d.Testbed.Test.prototype.MouseMove.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"MouseMove",box2d.Testbed.EyeCandy.prototype.MouseMove);box2d.Testbed.EyeCandy.prototype.Step=function(a){var c=(new Date).getTime();this.m_joint.SetMotorSpeed(.7*Math.cos(c/1E3));box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"Step",box2d.Testbed.EyeCandy.prototype.Step);
box2d.Testbed.EyeCandy.prototype.GetDefaultViewZoom=function(){return box2d.Testbed.Test.prototype.GetDefaultViewZoom.call(this)};goog.exportProperty(box2d.Testbed.EyeCandy.prototype,"GetDefaultViewZoom",box2d.Testbed.EyeCandy.prototype.GetDefaultViewZoom);box2d.Testbed.EyeCandy.Create=function(a,c){return new box2d.Testbed.EyeCandy(a,c)};goog.exportProperty(box2d.Testbed.EyeCandy,"Create",box2d.Testbed.EyeCandy.Create);box2d.Testbed.Faucet=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_emitter=new box2d.Testbed.RadialEmitter;this.m_lifetimeRandomizer=new box2d.Testbed.Faucet.ParticleLifetimeRandomizer(box2d.Testbed.Faucet.k_particleLifetimeMin,box2d.Testbed.Faucet.k_particleLifetimeMax);this.m_particleSystem.SetRadius(.035);this.m_particleSystem.SetMaxParticleCount(box2d.Testbed.Faucet.k_maxParticleCount);this.m_particleSystem.SetDestructionByAge(!0);var b=null,b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),
d=new box2d.b2PolygonShape,e=box2d.Testbed.Faucet.k_containerHeight+box2d.Testbed.Faucet.k_containerThickness;d.SetAsBox(box2d.Testbed.Faucet.k_containerWidth-box2d.Testbed.Faucet.k_containerThickness,box2d.Testbed.Faucet.k_containerThickness,new box2d.b2Vec2(0,0),0);b.CreateFixture(d,0);d.SetAsBox(box2d.Testbed.Faucet.k_containerThickness,e,new box2d.b2Vec2(-box2d.Testbed.Faucet.k_containerWidth,box2d.Testbed.Faucet.k_containerHeight),0);b.CreateFixture(d,0);d.SetAsBox(box2d.Testbed.Faucet.k_containerThickness,
e,new box2d.b2Vec2(box2d.Testbed.Faucet.k_containerWidth,box2d.Testbed.Faucet.k_containerHeight),0);b.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(5*box2d.Testbed.Faucet.k_containerWidth,box2d.Testbed.Faucet.k_containerThickness,new box2d.b2Vec2(0,-2*box2d.Testbed.Faucet.k_containerThickness),0);b.CreateFixture(d,0);var d=new box2d.b2PolygonShape,f=2*this.m_particleSystem.GetRadius(),e=box2d.Testbed.Faucet.k_faucetLength*f,g=e*box2d.Testbed.Faucet.k_spoutLength,h=box2d.Testbed.Faucet.k_containerWidth*
box2d.Testbed.Faucet.k_faucetWidth*box2d.Testbed.Faucet.k_spoutWidth,e=box2d.Testbed.Faucet.k_containerHeight*box2d.Testbed.Faucet.k_faucetHeight+.5*g;d.SetAsBox(f,g,new box2d.b2Vec2(-h,e),0);b.CreateFixture(d,0);d.SetAsBox(f,g,new box2d.b2Vec2(h,e),0);b.CreateFixture(d,0);d.SetAsBox(h-f,f,new box2d.b2Vec2(0,e+g-f),0);b.CreateFixture(d,0);e=2*this.m_particleSystem.GetRadius()*box2d.Testbed.Faucet.k_faucetLength;this.m_emitter.SetParticleSystem(this.m_particleSystem);this.m_emitter.SetCallback(this.m_lifetimeRandomizer);
this.m_emitter.SetPosition(new box2d.b2Vec2(box2d.Testbed.Faucet.k_containerWidth*box2d.Testbed.Faucet.k_faucetWidth,box2d.Testbed.Faucet.k_containerHeight*box2d.Testbed.Faucet.k_faucetHeight+.5*e));this.m_emitter.SetVelocity(new box2d.b2Vec2(0,0));this.m_emitter.SetSize(new box2d.b2Vec2(0,e));this.m_emitter.SetColor(new box2d.b2ParticleColor(255,255,255,255));this.m_emitter.SetEmitRate(120);this.m_emitter.SetParticleFlags(box2d.Testbed.TestMain.GetParticleParameterValue());box2d.Testbed.TestMain.SetRestartOnParticleParameterChange(!1);
box2d.Testbed.TestMain.SetParticleParameters(box2d.Testbed.Faucet.k_paramDef,box2d.Testbed.Faucet.k_paramDefCount)};goog.inherits(box2d.Testbed.Faucet,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Faucet",box2d.Testbed.Faucet);box2d.Testbed.Faucet.prototype.m_particleColorOffset=0;box2d.Testbed.Faucet.k_particleLifetimeMin=30;box2d.Testbed.Faucet.k_particleLifetimeMax=50;box2d.Testbed.Faucet.k_containerHeight=.2;box2d.Testbed.Faucet.k_containerWidth=1;
box2d.Testbed.Faucet.k_containerThickness=.05;box2d.Testbed.Faucet.k_faucetWidth=.1;box2d.Testbed.Faucet.k_faucetHeight=15;box2d.Testbed.Faucet.k_faucetLength=2;box2d.Testbed.Faucet.k_spoutLength=2;box2d.Testbed.Faucet.k_spoutWidth=1.1;box2d.Testbed.Faucet.k_maxParticleCount=1E3;box2d.Testbed.Faucet.k_emitRateChangeFactor=1.05;box2d.Testbed.Faucet.k_emitRateMin=1;box2d.Testbed.Faucet.k_emitRateMax=240;
box2d.Testbed.Faucet.k_paramValues=[new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"water"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions|box2d.Testbed.ParticleParameter.Options.OptionStrictContacts,"water (strict)"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"viscous"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_tensileParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"tensile"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_colorMixingParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"color mixing"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_staticPressureParticle,
box2d.Testbed.ParticleParameter.k_DefaultOptions,"static pressure")];box2d.Testbed.Faucet.k_paramDef=[new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.Faucet.k_paramValues)];box2d.Testbed.Faucet.k_paramDefCount=box2d.Testbed.Faucet.k_paramDef.length;
box2d.Testbed.Faucet.prototype.Step=function(a){var c=1/a.hz;box2d.Testbed.Test.prototype.Step.call(this,a);this.m_particleColorOffset+=c;this.m_particleColorOffset>=box2d.Testbed.Test.k_ParticleColorsCount&&(this.m_particleColorOffset-=box2d.Testbed.Test.k_ParticleColorsCount);this.m_emitter.SetParticleFlags(box2d.Testbed.TestMain.GetParticleParameterValue());this.m_emitter.GetParticleFlags()&box2d.b2ParticleFlag.b2_colorMixingParticle?this.m_emitter.SetColor(box2d.Testbed.Test.k_ParticleColors[Math.floor(this.m_particleColorOffset)%
box2d.Testbed.Test.k_ParticleColorsCount]):this.m_emitter.SetColor(new box2d.b2ParticleColor(255,255,255,255));this.m_emitter.Step(c);a=["Keys: (w) water, (q) powder","      (t) tensile, (v) viscous","      (c) color mixing, (s) static pressure","      (+) increase flow, (-) decrease flow"];for(c=0;c<a.length;++c)this.m_debugDraw.DrawString(5,this.m_textLine,a[c]),this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Faucet.prototype,"Step",box2d.Testbed.Faucet.prototype.Step);
box2d.Testbed.Faucet.prototype.Keyboard=function(a){var c=0;switch(a){case goog.events.KeyCodes.W:c=box2d.b2ParticleFlag.b2_waterParticle;break;case goog.events.KeyCodes.Q:c=box2d.b2ParticleFlag.b2_powderParticle;break;case goog.events.KeyCodes.T:c=box2d.b2ParticleFlag.b2_tensileParticle;break;case goog.events.KeyCodes.V:c=box2d.b2ParticleFlag.b2_viscousParticle;break;case goog.events.KeyCodes.C:c=box2d.b2ParticleFlag.b2_colorMixingParticle;break;case goog.events.KeyCodes.S:c=box2d.b2ParticleFlag.b2_staticPressureParticle;
break;case goog.events.KeyCodes.EQUALS:a=this.m_emitter.GetEmitRate();a*=box2d.Testbed.Faucet.k_emitRateChangeFactor;a=box2d.b2Max(a,box2d.Testbed.Faucet.k_emitRateMin);this.m_emitter.SetEmitRate(a);break;case goog.events.KeyCodes.DASH:a=this.m_emitter.GetEmitRate();a*=1/box2d.Testbed.Faucet.k_emitRateChangeFactor;a=box2d.b2Min(a,box2d.Testbed.Faucet.k_emitRateMax);this.m_emitter.SetEmitRate(a);break;default:return}box2d.Testbed.TestMain.SetParticleParameterValue(c)};
goog.exportProperty(box2d.Testbed.Faucet.prototype,"Keyboard",box2d.Testbed.Faucet.prototype.Keyboard);box2d.Testbed.Faucet.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.Faucet.prototype,"GetDefaultViewZoom",box2d.Testbed.Faucet.prototype.GetDefaultViewZoom);box2d.Testbed.Faucet.ParticleLifetimeRandomizer=function(a,c){this.m_minLifetime=a;this.m_maxLifetime=c};goog.inherits(box2d.Testbed.Faucet.ParticleLifetimeRandomizer,box2d.Testbed.EmittedParticleCallback);
box2d.Testbed.Faucet.ParticleLifetimeRandomizer.prototype.m_minLifetime=0;box2d.Testbed.Faucet.ParticleLifetimeRandomizer.prototype.m_maxLifetime=0;box2d.Testbed.Faucet.ParticleLifetimeRandomizer.prototype.ParticleCreated=function(a,c){a.SetParticleLifetime(c,Math.random()*(this.m_maxLifetime-this.m_minLifetime)+this.m_minLifetime)};box2d.Testbed.Faucet.Create=function(a,c){return new box2d.Testbed.Faucet(a,c)};goog.exportProperty(box2d.Testbed.Faucet,"Create",box2d.Testbed.Faucet.Create);box2d.Testbed.EmitterTracker=function(){this.m_emitterLifetime=[]};box2d.Testbed.EmitterTracker.prototype.m_emitterLifetime=null;box2d.Testbed.EmitterTracker.prototype.__dtor__=function(){for(var a=0;a<this.m_emitterLifetime.length;++a)this.m_emitterLifetime[a].emitter.__dtor__()};box2d.Testbed.EmitterTracker.prototype.Add=function(a,c){this.m_emitterLifetime.push({emitter:a,lifetime:c})};
box2d.Testbed.EmitterTracker.prototype.Step=function(a){for(var c=[],b=0;b<this.m_emitterLifetime.length;++b){var d=this.m_emitterLifetime[b].emitter,e=this.m_emitterLifetime[b].lifetime-a;0>=e&&c.push(d);this.m_emitterLifetime[b].lifetime=e;d.Step(a)}for(b=0;b<c.length;++b)d=c[b],d.__dtor__(),this.m_emitterLifetime=this.m_emitterLifetime.filter(function(a){return a.emitter!==d})};box2d.Testbed.ParticleGroupTracker=function(){box2d.b2DestructionListener.call(this);this.m_particleGroups=[]};
goog.inherits(box2d.Testbed.ParticleGroupTracker,box2d.b2DestructionListener);box2d.Testbed.ParticleGroupTracker.prototype.m_particleGroups=null;box2d.Testbed.ParticleGroupTracker.prototype.SayGoodbyeParticleGroup=function(a){this.RemoveParticleGroup(a)};box2d.Testbed.ParticleGroupTracker.prototype.AddParticleGroup=function(a){this.m_particleGroups.push(a)};box2d.Testbed.ParticleGroupTracker.prototype.RemoveParticleGroup=function(a){this.m_particleGroups.splice(this.m_particleGroups.indexOf(a),1)};
box2d.Testbed.ParticleGroupTracker.prototype.GetParticleGroups=function(){return this.m_particleGroups};box2d.Testbed.FrackerSettings={};box2d.Testbed.FrackerSettings.k_worldWidthTiles=24;box2d.Testbed.FrackerSettings.k_worldHeightTiles=16;box2d.Testbed.FrackerSettings.k_worldTiles=box2d.Testbed.FrackerSettings.k_worldWidthTiles*box2d.Testbed.FrackerSettings.k_worldHeightTiles;box2d.Testbed.FrackerSettings.k_worldCenterX=0;box2d.Testbed.FrackerSettings.k_worldCenterY=2;
box2d.Testbed.FrackerSettings.k_tileWidth=.2;box2d.Testbed.FrackerSettings.k_tileHeight=.2;box2d.Testbed.FrackerSettings.k_tileHalfWidth=.5*box2d.Testbed.FrackerSettings.k_tileWidth;box2d.Testbed.FrackerSettings.k_tileHalfHeight=.5*box2d.Testbed.FrackerSettings.k_tileHeight;box2d.Testbed.FrackerSettings.k_worldHalfWidth=box2d.Testbed.FrackerSettings.k_worldWidthTiles*box2d.Testbed.FrackerSettings.k_tileWidth*.5;
box2d.Testbed.FrackerSettings.k_worldHalfHeight=box2d.Testbed.FrackerSettings.k_worldHeightTiles*box2d.Testbed.FrackerSettings.k_tileHeight*.5;box2d.Testbed.FrackerSettings.k_playerColor=new box2d.b2Color(1,1,1);box2d.Testbed.FrackerSettings.k_playerFrackColor=new box2d.b2Color(1,.5,.5);box2d.Testbed.FrackerSettings.k_wellColor=new box2d.b2Color(.5,.5,.5);box2d.Testbed.FrackerSettings.k_oilColor=new box2d.b2ParticleColor(new box2d.b2Color(1,0,0));
box2d.Testbed.FrackerSettings.k_waterColor=new box2d.b2ParticleColor(new box2d.b2Color(0,.2,1));box2d.Testbed.FrackerSettings.k_frackingFluidColor=new box2d.b2ParticleColor(new box2d.b2Color(.8,.4,0));box2d.Testbed.FrackerSettings.k_density=.1;box2d.Testbed.FrackerSettings.k_particleRadius=.1*(box2d.Testbed.FrackerSettings.k_tileWidth+box2d.Testbed.FrackerSettings.k_tileHeight);box2d.Testbed.FrackerSettings.k_dirtProbability=80;box2d.Testbed.FrackerSettings.k_emptyProbability=10;
box2d.Testbed.FrackerSettings.k_oilProbability=7;box2d.Testbed.FrackerSettings.k_waterProbability=3;box2d.Testbed.FrackerSettings.k_frackingFluidEmitterLifetime=5;box2d.Testbed.FrackerSettings.k_wellSuckSpeedInside=5*box2d.Testbed.FrackerSettings.k_tileHeight;box2d.Testbed.FrackerSettings.k_wellSuckSpeedOutside=1*box2d.Testbed.FrackerSettings.k_tileWidth;box2d.Testbed.FrackerSettings.k_frackingFluidChargeTime=1;box2d.Testbed.FrackerSettings.k_scorePerOilParticle=1;
box2d.Testbed.FrackerSettings.k_scorePerWaterParticle=-1;box2d.Testbed.FrackerSettings.k_scorePerFrackingParticle=0;box2d.Testbed.FrackerSettings.k_scorePerFrackingDeployment=-10;box2d.Testbed.Fracker=function(a,c){box2d.Testbed.Test.call(this,a,c);this.__ctor__()};goog.inherits(box2d.Testbed.Fracker,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Fracker",box2d.Testbed.Fracker);box2d.Testbed.Fracker.Material={EMPTY:0,DIRT:1,ROCK:2,OIL:3,WATER:4,WELL:5,PUMP:6};
box2d.Testbed.Fracker.DestructionListener=function(){box2d.Testbed.ParticleGroupTracker.call(this);this.__ctor__()};goog.inherits(box2d.Testbed.Fracker.DestructionListener,box2d.Testbed.ParticleGroupTracker);box2d.Testbed.Fracker.DestructionListener.prototype.m_score=0;box2d.Testbed.Fracker.DestructionListener.prototype.m_oil=0;box2d.Testbed.Fracker.DestructionListener.prototype.m_world=null;box2d.Testbed.Fracker.DestructionListener.prototype.m_previousListener=null;
box2d.Testbed.Fracker.DestructionListener.prototype.__ctor__=function(){};box2d.Testbed.Fracker.DestructionListener.prototype.__dtor__=function(){this.m_world&&this.m_world.SetDestructionListener(this.m_previousListener)};box2d.Testbed.Fracker.DestructionListener.prototype.Initialize=function(a){box2d.b2Assert(null!==a);this.m_world=a;this.m_world.SetDestructionListener(this)};box2d.Testbed.Fracker.DestructionListener.prototype.AddScore=function(a){this.m_score+=a};
box2d.Testbed.Fracker.DestructionListener.prototype.GetScore=function(){return this.m_score};box2d.Testbed.Fracker.DestructionListener.prototype.AddOil=function(a){this.m_oil+=a};box2d.Testbed.Fracker.DestructionListener.prototype.GetOil=function(){return this.m_oil};
box2d.Testbed.Fracker.DestructionListener.prototype.SayGoodbyeParticle=function(a,c){box2d.b2Assert(null!==a);var b=a.GetUserDataBuffer()[c];if(b)switch(b){case box2d.Testbed.Fracker.Material.OIL:this.AddScore(box2d.Testbed.FrackerSettings.k_scorePerOilParticle);this.AddOil(-1);break;case box2d.Testbed.Fracker.Material.WATER:this.AddScore(box2d.Testbed.FrackerSettings.k_scorePerWaterParticle)}};box2d.Testbed.Fracker.prototype.m_player=null;
box2d.Testbed.Fracker.prototype.m_wellX=box2d.Testbed.FrackerSettings.k_worldWidthTiles-box2d.Testbed.FrackerSettings.k_worldWidthTiles/4;box2d.Testbed.Fracker.prototype.m_wellTop=box2d.Testbed.FrackerSettings.k_worldHeightTiles-1;box2d.Testbed.Fracker.prototype.m_wellBottom=box2d.Testbed.FrackerSettings.k_worldHeightTiles/8;box2d.Testbed.Fracker.prototype.m_tracker=null;box2d.Testbed.Fracker.prototype.m_allowInput=!1;box2d.Testbed.Fracker.prototype.m_frackingFluidChargeTime=-1;
box2d.Testbed.Fracker.prototype.m_material=null;box2d.Testbed.Fracker.prototype.m_bodies=null;box2d.Testbed.Fracker.prototype.m_listener=null;
box2d.Testbed.Fracker.prototype.__ctor__=function(){this.m_tracker=new box2d.Testbed.EmitterTracker;this.m_material=[];this.m_bodies=[];this.m_listener=new box2d.Testbed.Fracker.DestructionListener;this.m_listener.Initialize(this.m_world);this.m_particleSystem.SetRadius(box2d.Testbed.FrackerSettings.k_particleRadius);this.InitializeLayout();this.CreateGround();this.CreateWell();this.CreateGeo();this.CreatePlayer()};box2d.Testbed.Fracker.prototype.__dtor__=function(){this.m_listener.__dtor__()};
box2d.Testbed.Fracker.prototype.InitializeLayout=function(){for(var a=0;a<box2d.Testbed.FrackerSettings.k_worldTiles;++a)this.m_material[a]=box2d.Testbed.Fracker.Material.EMPTY,this.m_bodies[a]=null};box2d.Testbed.Fracker.prototype.GetMaterial=function(a,c){return this.m_material[box2d.Testbed.Fracker.TileToArrayOffset(a,c)]};box2d.Testbed.Fracker.prototype.SetMaterial=function(a,c,b){this.m_material[box2d.Testbed.Fracker.TileToArrayOffset(a,c)]=b};
box2d.Testbed.Fracker.prototype.GetBody=function(a,c){return this.m_bodies[box2d.Testbed.Fracker.TileToArrayOffset(a,c)]};box2d.Testbed.Fracker.prototype.SetBody=function(a,c,b){var d=this.m_bodies[box2d.Testbed.Fracker.TileToArrayOffset(a,c)];d&&this.m_world.DestroyBody(d);this.m_bodies[box2d.Testbed.Fracker.TileToArrayOffset(a,c)]=b};
box2d.Testbed.Fracker.prototype.CreatePlayer=function(){var a=new box2d.b2BodyDef;a.type=box2d.b2BodyType.b2_kinematicBody;this.m_player=this.m_world.CreateBody(a);a=new box2d.b2PolygonShape;a.SetAsBox(box2d.Testbed.FrackerSettings.k_tileHalfWidth,box2d.Testbed.FrackerSettings.k_tileHalfHeight,new box2d.b2Vec2(box2d.Testbed.FrackerSettings.k_tileHalfWidth,box2d.Testbed.FrackerSettings.k_tileHalfHeight),0);this.m_player.CreateFixture(a,box2d.Testbed.FrackerSettings.k_density);this.m_player.SetTransform(box2d.Testbed.Fracker.TileToWorld(box2d.Testbed.FrackerSettings.k_worldWidthTiles/
2,box2d.Testbed.FrackerSettings.k_worldHeightTiles/2),0)};
box2d.Testbed.Fracker.prototype.CreateGeo=function(){box2d.b2Assert(100===box2d.Testbed.FrackerSettings.k_dirtProbability+box2d.Testbed.FrackerSettings.k_emptyProbability+box2d.Testbed.FrackerSettings.k_oilProbability+box2d.Testbed.FrackerSettings.k_waterProbability);for(var a=0;a<box2d.Testbed.FrackerSettings.k_worldWidthTiles;a++)for(var c=0;c<box2d.Testbed.FrackerSettings.k_worldHeightTiles;c++)if(this.GetMaterial(a,c)===box2d.Testbed.Fracker.Material.EMPTY){var b=100*Math.random();b<box2d.Testbed.FrackerSettings.k_dirtProbability||
0===c?this.CreateDirtBlock(a,c):b<box2d.Testbed.FrackerSettings.k_dirtProbability+box2d.Testbed.FrackerSettings.k_emptyProbability?this.SetMaterial(a,c,box2d.Testbed.Fracker.Material.EMPTY):b<box2d.Testbed.FrackerSettings.k_dirtProbability+box2d.Testbed.FrackerSettings.k_emptyProbability+box2d.Testbed.FrackerSettings.k_oilProbability?this.CreateReservoirBlock(a,c,box2d.Testbed.Fracker.Material.OIL):this.CreateReservoirBlock(a,c,box2d.Testbed.Fracker.Material.WATER)}};
box2d.Testbed.Fracker.prototype.CreateGround=function(){var a=new box2d.b2BodyDef,a=this.m_world.CreateBody(a),c=new box2d.b2ChainShape,b=new box2d.b2Vec2,d=new box2d.b2Vec2;box2d.Testbed.Fracker.GetExtents(b,d);b=[new box2d.b2Vec2(b.x,b.y),new box2d.b2Vec2(d.x,b.y),new box2d.b2Vec2(d.x,d.y),new box2d.b2Vec2(b.x,d.y)];c.CreateLoop(b,4);a.CreateFixture(c,0)};
box2d.Testbed.Fracker.prototype.CreateDirtBlock=function(a,c){var b=box2d.Testbed.Fracker.TileToWorld(a,c),d=new box2d.b2BodyDef,d=this.m_world.CreateBody(d),e=new box2d.b2PolygonShape;e.SetAsBox(box2d.Testbed.FrackerSettings.k_tileHalfWidth,box2d.Testbed.FrackerSettings.k_tileHalfHeight,box2d.Testbed.Fracker.CenteredPosition(b),0);d.CreateFixture(e,box2d.Testbed.FrackerSettings.k_density);this.SetBody(a,c,d);this.SetMaterial(a,c,box2d.Testbed.Fracker.Material.DIRT)};
box2d.Testbed.Fracker.prototype.CreateReservoirBlock=function(a,c,b){var d=box2d.Testbed.Fracker.TileToWorld(a,c),e=new box2d.b2PolygonShape;this.SetMaterial(a,c,b);e.SetAsBox(box2d.Testbed.FrackerSettings.k_tileHalfWidth,box2d.Testbed.FrackerSettings.k_tileHalfHeight,box2d.Testbed.Fracker.CenteredPosition(d),0);d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_viscousParticle|box2d.b2ParticleFlag.b2_destructionListenerParticle;d.shape=e;d.color.Copy(b===
box2d.Testbed.Fracker.Material.OIL?box2d.Testbed.FrackerSettings.k_oilColor:box2d.Testbed.FrackerSettings.k_waterColor);var f=this.m_particleSystem.CreateParticleGroup(d);this.m_listener.AddParticleGroup(f);for(var e=f.GetParticleCount(),d=this.m_particleSystem.GetUserDataBuffer(),f=f.GetBufferIndex(),g=0;g<e;++g)d[f+g]=this.m_material[box2d.Testbed.Fracker.TileToArrayOffset(a,c)];b===box2d.Testbed.Fracker.Material.OIL&&this.m_listener.AddOil(e)};
box2d.Testbed.Fracker.prototype.CreateWell=function(){for(var a=this.m_wellBottom;a<=this.m_wellTop;a++)this.SetMaterial(this.m_wellX,a,box2d.Testbed.Fracker.Material.WELL)};
box2d.Testbed.Fracker.prototype.CreateFrackingFluidEmitter=function(a){var c=new box2d.b2ParticleGroupDef,c=this.m_particleSystem.CreateParticleGroup(c);this.m_listener.AddParticleGroup(c);var b=new box2d.Testbed.RadialEmitter;b.SetGroup(c);b.SetParticleSystem(this.m_particleSystem);b.SetPosition(box2d.Testbed.Fracker.CenteredPosition(a));b.SetVelocity(new box2d.b2Vec2(0,-box2d.Testbed.FrackerSettings.k_tileHalfHeight));b.SetSpeed(.1*box2d.Testbed.FrackerSettings.k_tileHalfWidth);b.SetSize(new box2d.b2Vec2(box2d.Testbed.FrackerSettings.k_tileHalfWidth,
box2d.Testbed.FrackerSettings.k_tileHalfHeight));b.SetEmitRate(20);b.SetColor(box2d.Testbed.FrackerSettings.k_frackingFluidColor);b.SetParticleFlags(box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_viscousParticle);this.m_tracker.Add(b,box2d.Testbed.FrackerSettings.k_frackingFluidEmitterLifetime);this.m_listener.AddScore(box2d.Testbed.FrackerSettings.k_scorePerFrackingDeployment)};
box2d.Testbed.Fracker.prototype.SetPlayerPosition=function(a,c){var b=this.m_player.GetTransform().p,d=[0],e=[0];box2d.Testbed.Fracker.WorldToTile(b,d,e);a=box2d.b2Clamp(a,0,box2d.Testbed.FrackerSettings.k_worldWidthTiles-1);c=box2d.b2Clamp(c,0,box2d.Testbed.FrackerSettings.k_worldHeightTiles-1);this.GetMaterial(a,c)===box2d.Testbed.Fracker.Material.WELL||d[0]===a&&e[0]===c||(this.DeployFrackingFluid(),this.m_player.SetTransform(box2d.Testbed.Fracker.TileToWorld(a,c),0))};
box2d.Testbed.Fracker.prototype.DeployFrackingFluid=function(){var a=!1,c=this.m_player.GetTransform().p;this.m_frackingFluidChargeTime>box2d.Testbed.FrackerSettings.k_frackingFluidChargeTime&&(this.CreateFrackingFluidEmitter(c),a=!0);this.m_frackingFluidChargeTime=-1;return a};
box2d.Testbed.Fracker.prototype.DestroyParticlesInTiles=function(a,c,b,d){var e=new box2d.b2PolygonShape;b=b-a+1;d=d-c+1;a+=b/2;c+=d/2;e.SetAsBox(box2d.Testbed.FrackerSettings.k_tileHalfWidth*b,box2d.Testbed.FrackerSettings.k_tileHalfHeight*d);b=new box2d.b2Transform;b.Set(box2d.Testbed.Fracker.CenteredPosition(box2d.Testbed.Fracker.TileToWorld(a,c)),0);this.m_particleSystem.DestroyParticlesInShape(e,b)};
box2d.Testbed.Fracker.prototype.JointDestroyed=function(a){box2d.Testbed.Test.prototype.JointDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"JointDestroyed",box2d.Testbed.Fracker.prototype.JointDestroyed);box2d.Testbed.Fracker.prototype.ParticleGroupDestroyed=function(a){box2d.Testbed.Test.prototype.ParticleGroupDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"ParticleGroupDestroyed",box2d.Testbed.Fracker.prototype.ParticleGroupDestroyed);
box2d.Testbed.Fracker.prototype.BeginContact=function(a){box2d.Testbed.Test.prototype.BeginContact.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"BeginContact",box2d.Testbed.Fracker.prototype.BeginContact);box2d.Testbed.Fracker.prototype.EndContact=function(a){box2d.Testbed.Test.prototype.EndContact.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"EndContact",box2d.Testbed.Fracker.prototype.EndContact);
box2d.Testbed.Fracker.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"PreSolve",box2d.Testbed.Fracker.prototype.PreSolve);box2d.Testbed.Fracker.prototype.PostSolve=function(a,c){box2d.Testbed.Test.prototype.PostSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"PostSolve",box2d.Testbed.Fracker.prototype.PostSolve);
box2d.Testbed.Fracker.prototype.Keyboard=function(a){if(this.m_allowInput){var c=this.m_player.GetTransform().p,b=[0],d=[0];box2d.Testbed.Fracker.WorldToTile(c,b,d);switch(a){case goog.events.KeyCodes.A:b[0]--;break;case goog.events.KeyCodes.S:d[0]--;break;case goog.events.KeyCodes.D:b[0]++;break;case goog.events.KeyCodes.W:d[0]++;break;case goog.events.KeyCodes.E:0>this.m_frackingFluidChargeTime?this.m_frackingFluidChargeTime=0:this.DeployFrackingFluid();break;default:box2d.Testbed.Test.prototype.Keyboard.call(this,
a)}this.SetPlayerPosition(b[0],d[0]);this.m_allowInput=!1}};goog.exportProperty(box2d.Testbed.Fracker.prototype,"Keyboard",box2d.Testbed.Fracker.prototype.Keyboard);box2d.Testbed.Fracker.prototype.KeyboardUp=function(a){box2d.Testbed.Test.prototype.KeyboardUp.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"KeyboardUp",box2d.Testbed.Fracker.prototype.KeyboardUp);
box2d.Testbed.Fracker.prototype.MouseDown=function(a){box2d.Testbed.Test.prototype.MouseDown.call(this,a);this.m_frackingFluidChargeTime=0};goog.exportProperty(box2d.Testbed.Fracker.prototype,"MouseDown",box2d.Testbed.Fracker.prototype.MouseDown);
box2d.Testbed.Fracker.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a);if(this.m_allowInput){if(!this.DeployFrackingFluid()){var c=this.m_player.GetTransform().p,b=[0],d=[0];box2d.Testbed.Fracker.WorldToTile(c,b,d);a=box2d.b2Sub_V2_V2(a,box2d.Testbed.Fracker.CenteredPosition(c),new box2d.b2Vec2);var c=Math.abs(a.x),e=Math.abs(a.y);c>e&&c>=box2d.Testbed.FrackerSettings.k_tileHalfWidth?b[0]+=0<a.x?1:-1:e>=box2d.Testbed.FrackerSettings.k_tileHalfWidth&&(d[0]+=0<a.y?1:-1);
this.SetPlayerPosition(b[0],d[0])}this.m_allowInput=!1}};goog.exportProperty(box2d.Testbed.Fracker.prototype,"MouseUp",box2d.Testbed.Fracker.prototype.MouseUp);box2d.Testbed.Fracker.prototype.MouseMove=function(a){box2d.Testbed.Test.prototype.MouseMove.call(this,a)};goog.exportProperty(box2d.Testbed.Fracker.prototype,"MouseMove",box2d.Testbed.Fracker.prototype.MouseMove);
box2d.Testbed.Fracker.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);a=1/a.hz;this.m_tracker.Step(a);this.m_allowInput=!0;0<=this.m_frackingFluidChargeTime&&(this.m_frackingFluidChargeTime+=a);a=this.m_player.GetTransform().p;var c=[0],b=[0];box2d.Testbed.Fracker.WorldToTile(a,c,b);this.GetMaterial(c[0],b[0])===box2d.Testbed.Fracker.Material.DIRT&&(this.SetMaterial(c[0],b[0],box2d.Testbed.Fracker.Material.EMPTY),this.SetBody(c[0],b[0],null));this.DestroyParticlesInTiles(this.m_wellX,
this.m_wellTop,this.m_wellX,this.m_wellTop);a=this.m_listener.GetParticleGroups();for(c=0;c<a.length;++c)for(var d=a[c],b=d.GetBufferIndex(),e=this.m_particleSystem.GetPositionBuffer(),f=this.m_particleSystem.GetVelocityBuffer(),d=d.GetParticleCount(),g=0;g<d;++g){var h=box2d.Testbed.Fracker.CenteredPosition(box2d.Testbed.Fracker.TileToWorld(this.m_wellX,this.m_wellBottom-2)),k=e[b+g],l=box2d.b2Sub_V2_V2(k,h,new box2d.b2Vec2),m=Math.abs(l.x);m<box2d.Testbed.FrackerSettings.k_tileWidth&&l.y>-2*box2d.Testbed.FrackerSettings.k_tileWidth&&
0>l.y?(h=box2d.b2Sub_V2_V2(h,k,new box2d.b2Vec2),h.Normalize(),f[b+g].Copy(h.SelfMul(box2d.Testbed.FrackerSettings.k_wellSuckSpeedOutside))):m<=box2d.Testbed.FrackerSettings.k_tileHalfWidth&&0<l.y&&(h=Math.random()*box2d.Testbed.FrackerSettings.k_tileHalfWidth-l.x,h=new box2d.b2Vec2(h,box2d.Testbed.FrackerSettings.k_tileHeight),h.Normalize(),f[b+g].Copy(h.SelfMul(box2d.Testbed.FrackerSettings.k_wellSuckSpeedInside)))}this.DrawPlayer();this.DrawWell();this.DrawScore()};
goog.exportProperty(box2d.Testbed.Fracker.prototype,"Step",box2d.Testbed.Fracker.prototype.Step);box2d.Testbed.Fracker.prototype.DrawWell=function(){for(var a=this.m_wellBottom;a<=this.m_wellTop;++a)this.DrawQuad(box2d.Testbed.Fracker.TileToWorld(this.m_wellX,a),box2d.Testbed.FrackerSettings.k_wellColor)};
box2d.Testbed.Fracker.prototype.DrawPlayer=function(){this.DrawQuad(this.m_player.GetTransform().p,box2d.Testbed.Fracker.LerpColor(box2d.Testbed.FrackerSettings.k_playerColor,box2d.Testbed.FrackerSettings.k_playerFrackColor,box2d.b2Max(this.m_frackingFluidChargeTime/box2d.Testbed.FrackerSettings.k_frackingFluidChargeTime,0)),!0)};
box2d.Testbed.Fracker.prototype.DrawScore=function(){this.m_debugDraw.DrawString(5,this.m_textLine,"Score: %d, Remaining Oil %d",this.m_listener.GetScore(),this.m_listener.GetOil());this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Move: a,s,d,w   Fracking Fluid: e");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
box2d.Testbed.Fracker.prototype.DrawQuad=function(a,c,b){b=b||!1;var d=box2d.b2Vec2.MakeArray(4),e=a.x+box2d.Testbed.FrackerSettings.k_tileWidth,f=a.y+box2d.Testbed.FrackerSettings.k_tileHeight;d[0].Set(a.x,f);d[1].Set(a.x,a.y);d[2].Set(e,a.y);d[3].Set(e,f);b?this.m_debugDraw.DrawPolygon(d,4,c):this.m_debugDraw.DrawSolidPolygon(d,4,c)};box2d.Testbed.Fracker.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.Fracker.prototype,"GetDefaultViewZoom",box2d.Testbed.Fracker.prototype.GetDefaultViewZoom);
box2d.Testbed.Fracker.Create=function(a,c){return new box2d.Testbed.Fracker(a,c)};goog.exportProperty(box2d.Testbed.Fracker,"Create",box2d.Testbed.Fracker.Create);box2d.Testbed.Fracker.GetBottomLeft=function(a){a.Set(box2d.Testbed.FrackerSettings.k_worldCenterX-box2d.Testbed.FrackerSettings.k_worldHalfWidth,box2d.Testbed.FrackerSettings.k_worldCenterY-box2d.Testbed.FrackerSettings.k_worldHalfHeight)};
box2d.Testbed.Fracker.GetExtents=function(a,c){box2d.Testbed.Fracker.GetBottomLeft(a);c.Set(box2d.Testbed.FrackerSettings.k_worldCenterX+box2d.Testbed.FrackerSettings.k_worldHalfWidth,box2d.Testbed.FrackerSettings.k_worldCenterY+box2d.Testbed.FrackerSettings.k_worldHalfHeight)};
box2d.Testbed.Fracker.WorldToTile=function(a,c,b){var d=new box2d.b2Vec2;box2d.Testbed.Fracker.GetBottomLeft(d);c[0]=Math.floor((a.x-d.x)/box2d.Testbed.FrackerSettings.k_tileWidth+box2d.Testbed.FrackerSettings.k_tileHalfWidth);b[0]=Math.floor((a.y-d.y)/box2d.Testbed.FrackerSettings.k_tileHeight+box2d.Testbed.FrackerSettings.k_tileHalfHeight)};
box2d.Testbed.Fracker.TileToWorld=function(a,c,b){b=b||new box2d.b2Vec2;var d=new box2d.b2Vec2;box2d.Testbed.Fracker.GetBottomLeft(d);return b.Set(a*box2d.Testbed.FrackerSettings.k_tileWidth+d.x,c*box2d.Testbed.FrackerSettings.k_tileHeight+d.y)};box2d.Testbed.Fracker.TileToArrayOffset=function(a,c){box2d.b2Assert(0<=a);box2d.b2Assert(a<box2d.Testbed.FrackerSettings.k_worldWidthTiles);box2d.b2Assert(0<=c);box2d.b2Assert(c<box2d.Testbed.FrackerSettings.k_worldHeightTiles);return a+c*box2d.Testbed.FrackerSettings.k_worldWidthTiles};
box2d.Testbed.Fracker.CenteredPosition=function(a,c){c=c||new box2d.b2Vec2;return c.Set(a.x+box2d.Testbed.FrackerSettings.k_tileHalfWidth,a.y+box2d.Testbed.FrackerSettings.k_tileHalfHeight)};box2d.Testbed.Fracker.LerpColor=function(a,c,b){return new box2d.b2Color(box2d.Testbed.Fracker.Lerp(a.r,c.r,b),box2d.Testbed.Fracker.Lerp(a.g,c.g,b),box2d.Testbed.Fracker.Lerp(a.b,c.b,b))};box2d.Testbed.Fracker.Lerp=function(a,c,b){return a*(1-b)+c*b};box2d.Testbed.Gears=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-50,0),new box2d.b2Vec2(50,0));b.CreateFixture(d,0);var e=new box2d.b2CircleShape;e.m_radius=1;var f=new box2d.b2PolygonShape;f.SetAsBox(.5,5);d=new box2d.b2CircleShape;d.m_radius=2;var g=new box2d.b2BodyDef;g.type=box2d.b2BodyType.b2_staticBody;g.position.Set(10,9);var h=this.m_world.CreateBody(g);h.CreateFixture(e,
5);var k=new box2d.b2BodyDef;k.type=box2d.b2BodyType.b2_dynamicBody;k.position.Set(10,8);var l=this.m_world.CreateBody(k);l.CreateFixture(f,5);var m=new box2d.b2BodyDef;m.type=box2d.b2BodyType.b2_dynamicBody;m.position.Set(10,6);k=this.m_world.CreateBody(m);k.CreateFixture(d,5);var n=new box2d.b2RevoluteJointDef;n.Initialize(l,h,g.position);f=this.m_world.CreateJoint(n);g=new box2d.b2RevoluteJointDef;g.Initialize(l,k,m.position);l=this.m_world.CreateJoint(g);m=new box2d.b2GearJointDef;m.bodyA=h;m.bodyB=
k;m.joint1=f;m.joint2=l;m.ratio=d.m_radius/e.m_radius;this.m_world.CreateJoint(m);e=new box2d.b2CircleShape;e.m_radius=1;d=new box2d.b2CircleShape;d.m_radius=2;f=new box2d.b2PolygonShape;f.SetAsBox(.5,5);g=new box2d.b2BodyDef;g.type=box2d.b2BodyType.b2_dynamicBody;g.position.Set(-3,12);h=this.m_world.CreateBody(g);h.CreateFixture(e,5);n=new box2d.b2RevoluteJointDef;n.bodyA=b;n.bodyB=h;b.GetLocalPoint(g.position,n.localAnchorA);h.GetLocalPoint(g.position,n.localAnchorB);n.referenceAngle=h.GetAngle()-
b.GetAngle();this.m_joint1=this.m_world.CreateJoint(n);k=new box2d.b2BodyDef;k.type=box2d.b2BodyType.b2_dynamicBody;k.position.Set(0,12);l=this.m_world.CreateBody(k);l.CreateFixture(d,5);g=new box2d.b2RevoluteJointDef;g.Initialize(b,l,k.position);this.m_joint2=this.m_world.CreateJoint(g);m=new box2d.b2BodyDef;m.type=box2d.b2BodyType.b2_dynamicBody;m.position.Set(2.5,12);k=this.m_world.CreateBody(m);k.CreateFixture(f,5);f=new box2d.b2PrismaticJointDef;f.Initialize(b,k,m.position,new box2d.b2Vec2(0,
1));f.lowerTranslation=-5;f.upperTranslation=5;f.enableLimit=!0;this.m_joint3=this.m_world.CreateJoint(f);m=new box2d.b2GearJointDef;m.bodyA=h;m.bodyB=l;m.joint1=this.m_joint1;m.joint2=this.m_joint2;m.ratio=d.m_radius/e.m_radius;this.m_joint4=this.m_world.CreateJoint(m);b=new box2d.b2GearJointDef;b.bodyA=l;b.bodyB=k;b.joint1=this.m_joint2;b.joint2=this.m_joint3;b.ratio=-1/d.m_radius;this.m_joint5=this.m_world.CreateJoint(b)};goog.inherits(box2d.Testbed.Gears,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.Gears",box2d.Testbed.Gears);box2d.Testbed.Gears.prototype.m_joint1=null;goog.exportProperty(box2d.Testbed.Gears.prototype,"m_joint1",box2d.Testbed.Gears.prototype.m_joint1);box2d.Testbed.Gears.prototype.m_joint2=null;goog.exportProperty(box2d.Testbed.Gears.prototype,"m_joint2",box2d.Testbed.Gears.prototype.m_joint2);box2d.Testbed.Gears.prototype.m_joint3=null;goog.exportProperty(box2d.Testbed.Gears.prototype,"m_joint3",box2d.Testbed.Gears.prototype.m_joint3);
box2d.Testbed.Gears.prototype.m_joint4=null;goog.exportProperty(box2d.Testbed.Gears.prototype,"m_joint4",box2d.Testbed.Gears.prototype.m_joint4);box2d.Testbed.Gears.prototype.m_joint5=null;goog.exportProperty(box2d.Testbed.Gears.prototype,"m_joint5",box2d.Testbed.Gears.prototype.m_joint5);box2d.Testbed.Gears.prototype.Keyboard=function(a){};goog.exportProperty(box2d.Testbed.Gears.prototype,"Keyboard",box2d.Testbed.Gears.prototype.Keyboard);
box2d.Testbed.Gears.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);var c;a=this.m_joint4.GetRatio();c=this.m_joint1.GetJointAngle()+a*this.m_joint2.GetJointAngle();this.m_debugDraw.DrawString(5,this.m_textLine,"theta1 + %4.2f * theta2 = %4.2f",a,c);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=this.m_joint5.GetRatio();c=this.m_joint2.GetJointAngle()+a*this.m_joint3.GetJointTranslation();this.m_debugDraw.DrawString(5,this.m_textLine,"theta2 + %4.2f * delta = %4.2f",
a,c);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Gears.prototype,"Step",box2d.Testbed.Gears.prototype.Step);box2d.Testbed.Gears.Create=function(a,c){return new box2d.Testbed.Gears(a,c)};goog.exportProperty(box2d.Testbed.Gears,"Create",box2d.Testbed.Gears.Create);box2d.Testbed.Impulse=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_useLinearImpulse=!1;var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=[new box2d.b2Vec2(box2d.Testbed.Impulse.kBoxLeft,box2d.Testbed.Impulse.kBoxBottom),new box2d.b2Vec2(box2d.Testbed.Impulse.kBoxRight,box2d.Testbed.Impulse.kBoxBottom),new box2d.b2Vec2(box2d.Testbed.Impulse.kBoxRight,box2d.Testbed.Impulse.kBoxTop),new box2d.b2Vec2(box2d.Testbed.Impulse.kBoxLeft,box2d.Testbed.Impulse.kBoxTop)],b=new box2d.b2ChainShape;
b.CreateLoop(e,e.length);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.025*3);this.m_particleSystem.SetDamping(.2);b=new box2d.b2PolygonShape;b.SetAsBox(.8,1,new box2d.b2Vec2(0,1.01),0);d=new box2d.b2ParticleGroupDef;d.flags=box2d.Testbed.TestMain.GetParticleParameterValue();d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(b,0)};goog.inherits(box2d.Testbed.Impulse,box2d.Testbed.Test);
goog.exportSymbol("box2d.Testbed.Impulse",box2d.Testbed.Impulse);box2d.Testbed.Impulse.kBoxLeft=-2;box2d.Testbed.Impulse.kBoxRight=2;box2d.Testbed.Impulse.kBoxBottom=0;box2d.Testbed.Impulse.kBoxTop=4;
box2d.Testbed.Impulse.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a);if(box2d.Testbed.Impulse.kBoxLeft<=a.x&&a.x<=box2d.Testbed.Impulse.kBoxRight&&box2d.Testbed.Impulse.kBoxBottom<=a.y&&a.y<=box2d.Testbed.Impulse.kBoxTop){var c=new box2d.b2Vec2(.5*(box2d.Testbed.Impulse.kBoxLeft+box2d.Testbed.Impulse.kBoxRight),.5*(box2d.Testbed.Impulse.kBoxBottom+box2d.Testbed.Impulse.kBoxTop));a=box2d.b2Sub_V2_V2(a,c,new box2d.b2Vec2);a.Normalize();this.ApplyImpulseOrForce(a)}};
goog.exportProperty(box2d.Testbed.Impulse.prototype,"MouseUp",box2d.Testbed.Impulse.prototype.MouseUp);box2d.Testbed.Impulse.prototype.Keyboard=function(a){box2d.Testbed.Test.prototype.Keyboard.call(this,a);switch(a){case goog.events.KeyCodes.L:this.m_useLinearImpulse=!0;break;case goog.events.KeyCodes.F:this.m_useLinearImpulse=!1}};goog.exportProperty(box2d.Testbed.Impulse.prototype,"Keyboard",box2d.Testbed.Impulse.prototype.Keyboard);
box2d.Testbed.Impulse.prototype.ApplyImpulseOrForce=function(a){var c=this.m_world.GetParticleSystemList().GetParticleGroupList(),b=c.GetParticleCount();this.m_useLinearImpulse?(a=box2d.b2Mul_S_V2(.005*b,a,new box2d.b2Vec2),c.ApplyLinearImpulse(a)):(a=box2d.b2Mul_S_V2(1*b,a,new box2d.b2Vec2),c.ApplyForce(a))};goog.exportProperty(box2d.Testbed.Impulse.prototype,"ApplyImpulseOrForce",box2d.Testbed.Impulse.prototype.ApplyImpulseOrForce);box2d.Testbed.Impulse.prototype.GetDefaultViewZoom=function(){return.1};
goog.exportProperty(box2d.Testbed.Impulse.prototype,"GetDefaultViewZoom",box2d.Testbed.Impulse.prototype.GetDefaultViewZoom);box2d.Testbed.Impulse.Create=function(a,c){return new box2d.Testbed.Impulse(a,c)};goog.exportProperty(box2d.Testbed.Impulse,"Create",box2d.Testbed.Impulse.Create);box2d.Testbed.LiquidTimer=function(a,c){box2d.Testbed.Test.call(this,a,c);box2d.Testbed.TestMain.SetParticleParameters(box2d.Testbed.LiquidTimer.k_paramDef,box2d.Testbed.LiquidTimer.k_paramDefCount);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2ChainShape,e=[new box2d.b2Vec2(-2,0),new box2d.b2Vec2(2,0),new box2d.b2Vec2(2,4),new box2d.b2Vec2(-2,4)];b.CreateLoop(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.025);b=new box2d.b2PolygonShape;b.SetAsBox(2,.4,new box2d.b2Vec2(0,
3.6),0);d=new box2d.b2ParticleGroupDef;d.flags=box2d.Testbed.TestMain.GetParticleParameterValue();d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(b,0);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-2,3.2),new box2d.b2Vec2(-1.2,3.2));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-1.1,3.2),
new box2d.b2Vec2(2,3.2));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-1.2,3.2),new box2d.b2Vec2(-1.2,2.8));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-1.1,3.2),new box2d.b2Vec2(-1.1,2.8));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-1.6,2.4),new box2d.b2Vec2(.8,2));d.CreateFixture(b,
.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(1.6,1.6),new box2d.b2Vec2(-.8,1.2));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-1.2,.8),new box2d.b2Vec2(-1.2,0));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-.4,.8),new box2d.b2Vec2(-.4,0));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);
b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(.4,.8),new box2d.b2Vec2(.4,0));d.CreateFixture(b,.1);b=new box2d.b2BodyDef;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(1.2,.8),new box2d.b2Vec2(1.2,0));d.CreateFixture(b,.1)};goog.inherits(box2d.Testbed.LiquidTimer,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.LiquidTimer",box2d.Testbed.LiquidTimer);
box2d.Testbed.LiquidTimer.k_paramValues=[new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_viscousParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"tensile + viscous")];box2d.Testbed.LiquidTimer.k_paramDef=[new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.LiquidTimer.k_paramValues),new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.ParticleParameter.k_particleTypes)];box2d.Testbed.LiquidTimer.k_paramDefCount=box2d.Testbed.LiquidTimer.k_paramDef.length;
box2d.Testbed.LiquidTimer.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.LiquidTimer.prototype,"GetDefaultViewZoom",box2d.Testbed.LiquidTimer.prototype.GetDefaultViewZoom);box2d.Testbed.LiquidTimer.Create=function(a,c){return new box2d.Testbed.LiquidTimer(a,c)};goog.exportProperty(box2d.Testbed.LiquidTimer,"Create",box2d.Testbed.LiquidTimer.Create);box2d.Testbed.Maxwell=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_density=box2d.Testbed.Maxwell.k_densityDefault;this.m_position=box2d.Testbed.Maxwell.k_containerHalfHeight;this.m_particleGroup=null;this.m_temperature=box2d.Testbed.Maxwell.k_temperatureDefault;this.m_barrierBody=null;this.m_world.SetGravity(new box2d.b2Vec2(0,0));var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2ChainShape,e=[new box2d.b2Vec2(-box2d.Testbed.Maxwell.k_containerHalfWidth,0),new box2d.b2Vec2(box2d.Testbed.Maxwell.k_containerHalfWidth,
0),new box2d.b2Vec2(box2d.Testbed.Maxwell.k_containerHalfWidth,box2d.Testbed.Maxwell.k_containerHeight),new box2d.b2Vec2(-box2d.Testbed.Maxwell.k_containerHalfWidth,box2d.Testbed.Maxwell.k_containerHeight)];d.CreateLoop(e,4);e=new box2d.b2FixtureDef;e.shape=d;e.density=0;e.restitution=1;b.CreateFixture(e);this.EnableBarrier();this.ResetParticles()};goog.inherits(box2d.Testbed.Maxwell,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Maxwell",box2d.Testbed.Maxwell);
box2d.Testbed.Maxwell.prototype.m_density=0;box2d.Testbed.Maxwell.prototype.m_position=0;box2d.Testbed.Maxwell.prototype.m_temperature=0;box2d.Testbed.Maxwell.prototype.m_barrierBody=null;box2d.Testbed.Maxwell.prototype.m_particleGroup=null;box2d.Testbed.Maxwell.k_containerWidth=2;box2d.Testbed.Maxwell.k_containerHeight=4;box2d.Testbed.Maxwell.k_containerHalfWidth=box2d.Testbed.Maxwell.k_containerWidth/2;box2d.Testbed.Maxwell.k_containerHalfHeight=box2d.Testbed.Maxwell.k_containerHeight/2;
box2d.Testbed.Maxwell.k_barrierHeight=box2d.Testbed.Maxwell.k_containerHalfHeight/100;box2d.Testbed.Maxwell.k_barrierMovementIncrement=.1*box2d.Testbed.Maxwell.k_containerHalfHeight;box2d.Testbed.Maxwell.k_densityStep=1.25;box2d.Testbed.Maxwell.k_densityMin=.01;box2d.Testbed.Maxwell.k_densityMax=.8;box2d.Testbed.Maxwell.k_densityDefault=.25;box2d.Testbed.Maxwell.k_temperatureStep=.2;box2d.Testbed.Maxwell.k_temperatureMin=.4;box2d.Testbed.Maxwell.k_temperatureMax=10;
box2d.Testbed.Maxwell.k_temperatureDefault=5;box2d.Testbed.Maxwell.prototype.DisableBarrier=function(){this.m_barrierBody&&(this.m_world.DestroyBody(this.m_barrierBody),this.m_barrierBody=null)};
box2d.Testbed.Maxwell.prototype.EnableBarrier=function(){if(!this.m_barrierBody){var a=new box2d.b2BodyDef;this.m_barrierBody=this.m_world.CreateBody(a);a=new box2d.b2PolygonShape;a.SetAsBox(box2d.Testbed.Maxwell.k_containerHalfWidth,box2d.Testbed.Maxwell.k_barrierHeight,new box2d.b2Vec2(0,this.m_position),0);var c=new box2d.b2FixtureDef;c.shape=a;c.density=0;c.restitution=1;this.m_barrierBody.CreateFixture(c)}};
box2d.Testbed.Maxwell.prototype.ToggleBarrier=function(){this.m_barrierBody?this.DisableBarrier():this.EnableBarrier()};
box2d.Testbed.Maxwell.prototype.ResetParticles=function(){null!==this.m_particleGroup&&(this.m_particleGroup.DestroyParticles(),this.m_particleGroup=null);this.m_particleSystem.SetRadius(box2d.Testbed.Maxwell.k_containerHalfWidth/20);var a=new box2d.b2PolygonShape;a.SetAsBox(this.m_density*box2d.Testbed.Maxwell.k_containerHalfWidth,this.m_density*box2d.Testbed.Maxwell.k_containerHalfHeight,new box2d.b2Vec2(0,box2d.Testbed.Maxwell.k_containerHalfHeight),0);var c=new box2d.b2ParticleGroupDef;c.flags=
box2d.b2ParticleFlag.b2_powderParticle;c.shape=a;this.m_particleGroup=this.m_particleSystem.CreateParticleGroup(c);for(var a=this.m_particleSystem.GetVelocityBuffer(),c=this.m_particleGroup.GetBufferIndex(),b=0;b<this.m_particleGroup.GetParticleCount();++b){var d=a[c+b];d.Set(box2d.Testbed.RandomFloat()+1,box2d.Testbed.RandomFloat()+1);d.Normalize();d.SelfMul(this.m_temperature)}};
box2d.Testbed.Maxwell.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.ToggleBarrier();break;case goog.events.KeyCodes.EQUALS:this.m_density=box2d.b2Min(this.m_density*box2d.Testbed.Maxwell.k_densityStep,box2d.Testbed.Maxwell.k_densityMax);this.Reset();break;case goog.events.KeyCodes.DASH:this.m_density=box2d.b2Max(this.m_density/box2d.Testbed.Maxwell.k_densityStep,box2d.Testbed.Maxwell.k_densityMin);this.Reset();break;case goog.events.KeyCodes.PERIOD:this.MoveDivider(this.m_position+
box2d.Testbed.Maxwell.k_barrierMovementIncrement);break;case goog.events.KeyCodes.COMMA:this.MoveDivider(this.m_position-box2d.Testbed.Maxwell.k_barrierMovementIncrement);break;case goog.events.KeyCodes.SEMICOLON:this.m_temperature=box2d.b2Max(this.m_temperature-box2d.Testbed.Maxwell.k_temperatureStep,box2d.Testbed.Maxwell.k_temperatureMin);this.Reset();break;case goog.events.KeyCodes.SINGLE_QUOTE:this.m_temperature=box2d.b2Min(this.m_temperature+box2d.Testbed.Maxwell.k_temperatureStep,box2d.Testbed.Maxwell.k_temperatureMax);
this.Reset();break;default:box2d.Testbed.Test.prototype.Keyboard.call(this,a)}};goog.exportProperty(box2d.Testbed.Maxwell.prototype,"Keyboard",box2d.Testbed.Maxwell.prototype.Keyboard);box2d.Testbed.Maxwell.prototype.InContainer=function(a){return a.x>=-box2d.Testbed.Maxwell.k_containerHalfWidth&&a.x<=box2d.Testbed.Maxwell.k_containerHalfWidth&&0<=a.y&&a.y<=2*box2d.Testbed.Maxwell.k_containerHalfHeight};
box2d.Testbed.Maxwell.prototype.MouseDown=function(a){this.InContainer(a)||box2d.Testbed.Test.prototype.MouseDown.call(this,a)};goog.exportProperty(box2d.Testbed.Maxwell.prototype,"MouseDown",box2d.Testbed.Maxwell.prototype.MouseDown);box2d.Testbed.Maxwell.prototype.MouseUp=function(a){this.InContainer(a)?this.ToggleBarrier():(this.MoveDivider(a.y),box2d.Testbed.Test.prototype.MouseUp.call(this,a))};goog.exportProperty(box2d.Testbed.Maxwell.prototype,"MouseUp",box2d.Testbed.Maxwell.prototype.MouseUp);
box2d.Testbed.Maxwell.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);var c=0;a=0;for(var b=this.m_particleGroup.GetBufferIndex(),d=this.m_particleSystem.GetVelocityBuffer(),e=this.m_particleSystem.GetPositionBuffer(),f=0;f<this.m_particleGroup.GetParticleCount();f++){var g=d[b+f];g.Normalize();g.SelfMul(this.m_temperature);e[b+f].y>this.m_position?c++:a++}c/=box2d.Testbed.Maxwell.k_containerHeight-this.m_position;a/=this.m_position;this.m_debugDraw.DrawString(10,75,"Score: %f",
0<c?a/c-1:0)};goog.exportProperty(box2d.Testbed.Maxwell.prototype,"Step",box2d.Testbed.Maxwell.prototype.Step);box2d.Testbed.Maxwell.prototype.Reset=function(){this.DisableBarrier();this.ResetParticles();this.EnableBarrier()};box2d.Testbed.Maxwell.prototype.MoveDivider=function(a){this.m_position=box2d.b2Clamp(a,box2d.Testbed.Maxwell.k_barrierMovementIncrement,box2d.Testbed.Maxwell.k_containerHeight-box2d.Testbed.Maxwell.k_barrierMovementIncrement);this.Reset()};
box2d.Testbed.Maxwell.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.Maxwell.prototype,"GetDefaultViewZoom",box2d.Testbed.Maxwell.prototype.GetDefaultViewZoom);box2d.Testbed.Maxwell.Create=function(a,c){return new box2d.Testbed.Maxwell(a,c)};goog.exportProperty(box2d.Testbed.Maxwell,"Create",box2d.Testbed.Maxwell.Create);box2d.Testbed.Mobile=function(a,c){box2d.Testbed.Test.call(this,a,c);var b;b=new box2d.b2BodyDef;b.position.Set(0,20);b=this.m_world.CreateBody(b);var d=new box2d.b2Vec2(0,.5),e=this.AddNode(b,box2d.b2Vec2_zero,0,3,.5),f=new box2d.b2RevoluteJointDef;f.bodyA=b;f.bodyB=e;f.localAnchorA.SetZero();f.localAnchorB.Copy(d);this.m_world.CreateJoint(f)};goog.inherits(box2d.Testbed.Mobile,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Mobile",box2d.Testbed.Mobile);box2d.Testbed.Mobile.e_depth=4;
goog.exportProperty(box2d.Testbed.Mobile,"e_depth",box2d.Testbed.Mobile.e_depth);
box2d.Testbed.Mobile.prototype.AddNode=function(a,c,b,d,e){var f=new box2d.b2Vec2(0,e);a=a.GetPosition().Clone().SelfAdd(c).SelfSub(f);c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;c.position.Copy(a);a=this.m_world.CreateBody(c);c=new box2d.b2PolygonShape;c.SetAsBox(.25*e,e);a.CreateFixture(c,20);if(b===box2d.Testbed.Mobile.e_depth)return a;c=new box2d.b2Vec2(d,-e);var g=new box2d.b2Vec2(-d,-e),h=this.AddNode(a,c,b+1,.5*d,e);b=this.AddNode(a,g,b+1,.5*d,e);d=new box2d.b2RevoluteJointDef;
d.bodyA=a;d.localAnchorB.Copy(f);d.localAnchorA.Copy(c);d.bodyB=h;this.m_world.CreateJoint(d);d.localAnchorA.Copy(g);d.bodyB=b;this.m_world.CreateJoint(d);return a};box2d.Testbed.Mobile.Create=function(a,c){return new box2d.Testbed.Mobile(a,c)};goog.exportProperty(box2d.Testbed.Mobile,"Create",box2d.Testbed.Mobile.Create);box2d.Testbed.MobileBalanced=function(a,c){box2d.Testbed.Test.call(this,a,c);var b;b=new box2d.b2BodyDef;b.position.Set(0,20);b=this.m_world.CreateBody(b);var d=new box2d.b2Vec2(0,.5),e=this.AddNode(b,box2d.b2Vec2_zero,0,3,.5),f=new box2d.b2RevoluteJointDef;f.bodyA=b;f.bodyB=e;f.localAnchorA.SetZero();f.localAnchorB.Copy(d);this.m_world.CreateJoint(f)};goog.inherits(box2d.Testbed.MobileBalanced,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.MobileBalanced",box2d.Testbed.MobileBalanced);
box2d.Testbed.MobileBalanced.e_depth=4;goog.exportProperty(box2d.Testbed.MobileBalanced,"e_depth",box2d.Testbed.MobileBalanced.e_depth);
box2d.Testbed.MobileBalanced.prototype.AddNode=function(a,c,b,d,e){var f=new box2d.b2Vec2(0,e);a=a.GetPosition().Clone().SelfAdd(c).SelfSub(f);c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;c.position.Copy(a);a=this.m_world.CreateBody(c);c=new box2d.b2PolygonShape;c.SetAsBox(.25*e,e);a.CreateFixture(c,20);if(b===box2d.Testbed.MobileBalanced.e_depth)return a;c.SetAsBox(d,.25*e,new box2d.b2Vec2(0,-e),0);a.CreateFixture(c,20);c=new box2d.b2Vec2(d,-e);var g=new box2d.b2Vec2(-d,-e),h=this.AddNode(a,
c,b+1,.5*d,e);b=this.AddNode(a,g,b+1,.5*d,e);d=new box2d.b2RevoluteJointDef;d.bodyA=a;d.localAnchorB.Copy(f);d.localAnchorA.Copy(c);d.bodyB=h;this.m_world.CreateJoint(d);d.localAnchorA.Copy(g);d.bodyB=b;this.m_world.CreateJoint(d);return a};box2d.Testbed.MobileBalanced.Create=function(a,c){return new box2d.Testbed.MobileBalanced(a,c)};goog.exportProperty(box2d.Testbed.MobileBalanced,"Create",box2d.Testbed.MobileBalanced.Create);box2d.Testbed.MotorJoint=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-20,0),new box2d.b2Vec2(20,0));var f=new box2d.b2FixtureDef;f.shape=e;b.CreateFixture(f);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,8);d=this.m_world.CreateBody(d);e=new box2d.b2PolygonShape;e.SetAsBox(2,.5);f=new box2d.b2FixtureDef;f.shape=e;f.friction=.6;f.density=2;d.CreateFixture(f);
e=new box2d.b2MotorJointDef;e.Initialize(b,d);e.maxForce=1E3;e.maxTorque=1E3;this.m_joint=this.m_world.CreateJoint(e);this.m_go=!1;this.m_time=0};goog.inherits(box2d.Testbed.MotorJoint,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.MotorJoint",box2d.Testbed.MotorJoint);box2d.Testbed.MotorJoint.prototype.m_joint=null;goog.exportProperty(box2d.Testbed.MotorJoint.prototype,"m_joint",box2d.Testbed.MotorJoint.prototype.m_joint);box2d.Testbed.MotorJoint.prototype.m_time=0;
goog.exportProperty(box2d.Testbed.MotorJoint.prototype,"m_time",box2d.Testbed.MotorJoint.prototype.m_time);box2d.Testbed.MotorJoint.prototype.m_go=!1;goog.exportProperty(box2d.Testbed.MotorJoint.prototype,"m_go",box2d.Testbed.MotorJoint.prototype.m_go);box2d.Testbed.MotorJoint.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.S:this.m_go=!this.m_go}};goog.exportProperty(box2d.Testbed.MotorJoint.prototype,"Keyboard",box2d.Testbed.MotorJoint.prototype.Keyboard);
box2d.Testbed.MotorJoint.prototype.Step=function(a){this.m_go&&0<a.hz&&(this.m_time+=1/a.hz);var c=new box2d.b2Vec2;c.x=6*box2d.b2Sin(2*this.m_time);c.y=8+4*box2d.b2Sin(1*this.m_time);var b=4*this.m_time;this.m_joint.SetLinearOffset(c);this.m_joint.SetAngularOffset(b);this.m_debugDraw.DrawPoint(c,4,new box2d.b2Color(.9,.9,.9));box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (s) pause");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.MotorJoint.prototype,"Step",box2d.Testbed.MotorJoint.prototype.Step);box2d.Testbed.MotorJoint.Create=function(a,c){return new box2d.Testbed.MotorJoint(a,c)};goog.exportProperty(box2d.Testbed.MotorJoint,"Create",box2d.Testbed.MotorJoint.Create);box2d.Testbed.MultipleParticleSystems=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_emitters=[new box2d.Testbed.RadialEmitter,new box2d.Testbed.RadialEmitter];this.m_particleSystem.SetRadius(.05);this.m_particleSystem.SetMaxParticleCount(box2d.Testbed.MultipleParticleSystems.k_maxParticleCount);this.m_particleSystem.SetDestructionByAge(!0);var b=new box2d.b2ParticleSystemDef;b.radius=this.m_particleSystem.GetRadius();b.destroyByAge=!0;this.m_particleSystem2=this.m_world.CreateParticleSystem(b);
this.m_particleSystem2.SetMaxParticleCount(box2d.Testbed.MultipleParticleSystems.k_maxParticleCount);box2d.Testbed.TestMain.SetRestartOnParticleParameterChange(!1);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape;b.SetAsBox(5,.1);d.CreateFixture(b,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;var d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=new box2d.b2Vec2(0,1.2);b.SetAsBox(box2d.Testbed.MultipleParticleSystems.k_dynamicBoxSize.x,box2d.Testbed.MultipleParticleSystems.k_dynamicBoxSize.y,
e,0);d.CreateFixture(b,0);b=new box2d.b2MassData;b.mass=box2d.Testbed.MultipleParticleSystems.k_boxMass;b.center.Copy(e);b.I=0;d.SetMassData(b);for(b=0;b<this.m_emitters.length;++b)d=b&1?-1:1,e=this.m_emitters[b],e.SetPosition(new box2d.b2Vec2(box2d.Testbed.MultipleParticleSystems.k_emitterPosition.x*d,box2d.Testbed.MultipleParticleSystems.k_emitterPosition.y)),e.SetSize(box2d.Testbed.MultipleParticleSystems.k_emitterSize),e.SetVelocity(new box2d.b2Vec2(box2d.Testbed.MultipleParticleSystems.k_emitterVelocity.x*
d,box2d.Testbed.MultipleParticleSystems.k_emitterVelocity.y)),e.SetEmitRate(box2d.Testbed.MultipleParticleSystems.k_emitRate),e.SetColor(b&1?box2d.Testbed.MultipleParticleSystems.k_rightEmitterColor:box2d.Testbed.MultipleParticleSystems.k_leftEmitterColor),e.SetParticleSystem(b&1?this.m_particleSystem2:this.m_particleSystem)};goog.inherits(box2d.Testbed.MultipleParticleSystems,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.MultipleParticleSystems",box2d.Testbed.MultipleParticleSystems);
box2d.Testbed.MultipleParticleSystems.prototype.m_particleSystem2=null;box2d.Testbed.MultipleParticleSystems.prototype.m_emitters=null;box2d.Testbed.MultipleParticleSystems.k_maxParticleCount=500;box2d.Testbed.MultipleParticleSystems.k_dynamicBoxSize=new box2d.b2Vec2(.5,.5);box2d.Testbed.MultipleParticleSystems.k_boxMass=1;box2d.Testbed.MultipleParticleSystems.k_emitRate=100;box2d.Testbed.MultipleParticleSystems.k_emitterPosition=new box2d.b2Vec2(-5,4);
box2d.Testbed.MultipleParticleSystems.k_emitterVelocity=new box2d.b2Vec2(7,-4);box2d.Testbed.MultipleParticleSystems.k_emitterSize=new box2d.b2Vec2(1,1);box2d.Testbed.MultipleParticleSystems.k_leftEmitterColor=new box2d.b2ParticleColor(34,51,255,255);box2d.Testbed.MultipleParticleSystems.k_rightEmitterColor=new box2d.b2ParticleColor(255,34,17,255);box2d.Testbed.MultipleParticleSystems.prototype.Step=function(a){var c=1/a.hz;box2d.Testbed.Test.prototype.Step.call(this,a);for(a=0;a<this.m_emitters.length;++a)this.m_emitters[a].Step(c)};
goog.exportProperty(box2d.Testbed.MultipleParticleSystems.prototype,"Step",box2d.Testbed.MultipleParticleSystems.prototype.Step);box2d.Testbed.MultipleParticleSystems.prototype.GetDefaultViewZoom=function(){return.2};goog.exportProperty(box2d.Testbed.MultipleParticleSystems.prototype,"GetDefaultViewZoom",box2d.Testbed.MultipleParticleSystems.prototype.GetDefaultViewZoom);box2d.Testbed.MultipleParticleSystems.Create=function(a,c){return new box2d.Testbed.MultipleParticleSystems(a,c)};
goog.exportProperty(box2d.Testbed.MultipleParticleSystems,"Create",box2d.Testbed.MultipleParticleSystems.Create);box2d.Testbed.OneSidedPlatform=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d.CreateFixture(b,0);b=new box2d.b2BodyDef;b.position.Set(0,10);d=this.m_world.CreateBody(b);b=new box2d.b2PolygonShape;b.SetAsBox(3,.5);this.m_platform=d.CreateFixture(b,0);this.m_bottom=9.5;this.m_top=10.5;b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,
12);d=this.m_world.CreateBody(b);this.m_radius=.5;b=new box2d.b2CircleShape;b.m_radius=this.m_radius;this.m_character=d.CreateFixture(b,20);d.SetLinearVelocity(new box2d.b2Vec2(0,-50));this.m_state=box2d.Testbed.OneSidedPlatform.e_unknown};goog.inherits(box2d.Testbed.OneSidedPlatform,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.OneSidedPlatform",box2d.Testbed.OneSidedPlatform);box2d.Testbed.OneSidedPlatform.e_unknown=0;goog.exportProperty(box2d.Testbed.OneSidedPlatform,"e_unknown",box2d.Testbed.OneSidedPlatform.e_unknown);
box2d.Testbed.OneSidedPlatform.e_above=1;goog.exportProperty(box2d.Testbed.OneSidedPlatform,"e_above",box2d.Testbed.OneSidedPlatform.e_above);box2d.Testbed.OneSidedPlatform.e_below=2;goog.exportProperty(box2d.Testbed.OneSidedPlatform,"e_below",box2d.Testbed.OneSidedPlatform.e_below);box2d.Testbed.OneSidedPlatform.prototype.m_radius=0;goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_radius",box2d.Testbed.OneSidedPlatform.prototype.m_radius);
box2d.Testbed.OneSidedPlatform.prototype.m_top=0;goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_top",box2d.Testbed.OneSidedPlatform.prototype.m_top);box2d.Testbed.OneSidedPlatform.prototype.m_bottom=0;goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_bottom",box2d.Testbed.OneSidedPlatform.prototype.m_bottom);box2d.Testbed.OneSidedPlatform.prototype.m_state=box2d.Testbed.OneSidedPlatform.e_unknown;
goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_state",box2d.Testbed.OneSidedPlatform.prototype.m_state);box2d.Testbed.OneSidedPlatform.prototype.m_platform=null;goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_platform",box2d.Testbed.OneSidedPlatform.prototype.m_platform);box2d.Testbed.OneSidedPlatform.prototype.m_character=null;goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"m_character",box2d.Testbed.OneSidedPlatform.prototype.m_character);
box2d.Testbed.OneSidedPlatform.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c);var b=a.GetFixtureA(),d=a.GetFixtureB();b!==this.m_platform&&b!==this.m_character||d!==this.m_platform&&d!==this.m_character||this.m_character.GetBody().GetPosition().y<this.m_top+this.m_radius-3*box2d.b2_linearSlop&&a.SetEnabled(!1)};goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"PreSolve",box2d.Testbed.OneSidedPlatform.prototype.PreSolve);
box2d.Testbed.OneSidedPlatform.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press: (c) create a shape, (d) destroy a shape.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=this.m_character.GetBody().GetLinearVelocity();this.m_debugDraw.DrawString(5,this.m_textLine,"Character Linear Velocity: %f",a.y);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.OneSidedPlatform.prototype,"Step",box2d.Testbed.OneSidedPlatform.prototype.Step);box2d.Testbed.OneSidedPlatform.Create=function(a,c){return new box2d.Testbed.OneSidedPlatform(a,c)};goog.exportProperty(box2d.Testbed.OneSidedPlatform,"Create",box2d.Testbed.OneSidedPlatform.Create);box2d.Testbed.Particles=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-4,-1),new box2d.b2Vec2(4,-1),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,-.1),new box2d.b2Vec2(-2,-.1),new box2d.b2Vec2(-2,2),new box2d.b2Vec2(-4,3)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(2,-.1),new box2d.b2Vec2(4,
-.1),new box2d.b2Vec2(4,3),new box2d.b2Vec2(2,2)];b.Set(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.035*3);e=box2d.Testbed.TestMain.GetParticleParameterValue();this.m_particleSystem.SetDamping(.2);b=new box2d.b2CircleShape;b.m_p.Set(0,3);b.m_radius=2;d=new box2d.b2ParticleGroupDef;d.flags=e;d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(b,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;
d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_p.Set(0,8);b.m_radius=.5;d.CreateFixture(b,.5)};goog.inherits(box2d.Testbed.Particles,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Particles",box2d.Testbed.Particles);box2d.Testbed.Particles.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.Particles.prototype,"GetDefaultViewZoom",box2d.Testbed.Particles.prototype.GetDefaultViewZoom);
box2d.Testbed.Particles.Create=function(a,c){return new box2d.Testbed.Particles(a,c)};goog.exportProperty(box2d.Testbed.Particles,"Create",box2d.Testbed.Particles.Create);box2d.Testbed.ParticlesSurfaceTension=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-4,-1),new box2d.b2Vec2(4,-1),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,-.1),new box2d.b2Vec2(-2,-.1),new box2d.b2Vec2(-2,2),new box2d.b2Vec2(-4,2)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(2,
-.1),new box2d.b2Vec2(4,-.1),new box2d.b2Vec2(4,2),new box2d.b2Vec2(2,2)];b.Set(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.035*3);b=new box2d.b2CircleShape;b.m_p.Set(0,2);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_colorMixingParticle;d.shape=b;d.color.Set(255,0,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2CircleShape;b.m_p.Set(-1,2);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_tensileParticle|
box2d.b2ParticleFlag.b2_colorMixingParticle;d.shape=b;d.color.Set(0,255,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(0,3),new box2d.b2Vec2(2,3),new box2d.b2Vec2(2,3.5),new box2d.b2Vec2(0,3.5)];b.Set(e,4);d=new box2d.b2ParticleGroupDef;d.flags=box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_colorMixingParticle;d.shape=b;d.color.Set(0,0,255,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;
d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_p.Set(0,8);b.m_radius=.5;d.CreateFixture(b,.5)};goog.inherits(box2d.Testbed.ParticlesSurfaceTension,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ParticlesSurfaceTension",box2d.Testbed.ParticlesSurfaceTension);box2d.Testbed.ParticlesSurfaceTension.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.ParticlesSurfaceTension.prototype,"GetDefaultViewZoom",box2d.Testbed.ParticlesSurfaceTension.prototype.GetDefaultViewZoom);
box2d.Testbed.ParticlesSurfaceTension.Create=function(a,c){return new box2d.Testbed.ParticlesSurfaceTension(a,c)};goog.exportProperty(box2d.Testbed.ParticlesSurfaceTension,"Create",box2d.Testbed.ParticlesSurfaceTension.Create);box2d.Testbed.Pinball=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),d=box2d.b2Vec2.MakeArray(5);d[0].Set(0,-2);d[1].Set(8,6);d[2].Set(8,20);d[3].Set(-8,20);d[4].Set(-8,6);var e=new box2d.b2ChainShape;e.CreateLoop(d,5);d=new box2d.b2FixtureDef;d.shape=e;d.density=0;b.CreateFixture(d);var e=new box2d.b2Vec2(-2,0),f=new box2d.b2Vec2(2,0),d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position=e;var g=this.m_world.CreateBody(d);
d.position=f;var h=this.m_world.CreateBody(d),k=new box2d.b2PolygonShape;k.SetAsBox(1.75,.1);d=new box2d.b2FixtureDef;d.shape=k;d.density=1;g.CreateFixture(d);h.CreateFixture(d);d=new box2d.b2RevoluteJointDef;d.bodyA=b;d.localAnchorB.SetZero();d.enableMotor=!0;d.maxMotorTorque=1E3;d.enableLimit=!0;d.motorSpeed=0;d.localAnchorA.Copy(e);d.bodyB=g;d.lowerAngle=-30*box2d.b2_pi/180;d.upperAngle=5*box2d.b2_pi/180;this.m_leftJoint=this.m_world.CreateJoint(d);d.motorSpeed=0;d.localAnchorA.Copy(f);d.bodyB=
h;d.lowerAngle=-5*box2d.b2_pi/180;d.upperAngle=30*box2d.b2_pi/180;this.m_rightJoint=this.m_world.CreateJoint(d);d=new box2d.b2BodyDef;d.position.Set(1,15);d.type=box2d.b2BodyType.b2_dynamicBody;d.bullet=!0;this.m_ball=this.m_world.CreateBody(d);b=new box2d.b2CircleShape;b.m_radius=.2;d=new box2d.b2FixtureDef;d.shape=b;d.density=1;this.m_ball.CreateFixture(d);this.m_button=!1};goog.inherits(box2d.Testbed.Pinball,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Pinball",box2d.Testbed.Pinball);
box2d.Testbed.Pinball.prototype.m_leftJoint=null;goog.exportProperty(box2d.Testbed.Pinball.prototype,"m_leftJoint",box2d.Testbed.Pinball.prototype.m_leftJoint);box2d.Testbed.Pinball.prototype.m_rightJoint=null;goog.exportProperty(box2d.Testbed.Pinball.prototype,"m_rightJoint",box2d.Testbed.Pinball.prototype.m_rightJoint);box2d.Testbed.Pinball.prototype.m_ball=null;goog.exportProperty(box2d.Testbed.Pinball.prototype,"m_ball",box2d.Testbed.Pinball.prototype.m_ball);
box2d.Testbed.Pinball.prototype.m_button=!1;goog.exportProperty(box2d.Testbed.Pinball.prototype,"m_button",box2d.Testbed.Pinball.prototype.m_button);
box2d.Testbed.Pinball.prototype.Step=function(a){this.m_button?(this.m_leftJoint.SetMotorSpeed(20),this.m_rightJoint.SetMotorSpeed(-20)):(this.m_leftJoint.SetMotorSpeed(-10),this.m_rightJoint.SetMotorSpeed(10));box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press 'a' to control the flippers");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Pinball.prototype,"Step",box2d.Testbed.Pinball.prototype.Step);
box2d.Testbed.Pinball.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_button=!0}};goog.exportProperty(box2d.Testbed.Pinball.prototype,"Keyboard",box2d.Testbed.Pinball.prototype.Keyboard);box2d.Testbed.Pinball.prototype.KeyboardUp=function(a){switch(a){case goog.events.KeyCodes.A:this.m_button=!1}};goog.exportProperty(box2d.Testbed.Pinball.prototype,"KeyboardUp",box2d.Testbed.Pinball.prototype.KeyboardUp);
box2d.Testbed.Pinball.Create=function(a,c){return new box2d.Testbed.Pinball(a,c)};goog.exportProperty(box2d.Testbed.Pinball,"Create",box2d.Testbed.Pinball.Create);box2d.Testbed.Pointy=function(a,c){box2d.Testbed.Test.call(this,a,c);for(var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=-10;10>d;d+=1){var e=new box2d.b2PolygonShape,f=[new box2d.b2Vec2(d,-10),new box2d.b2Vec2(d+1,-10),new box2d.b2Vec2(0,25)];e.Set(f,3);b.CreateFixture(e,0)}this.m_particleSystem.SetRadius(.75);box2d.Testbed.TestMain.GetParticleParameterValue()===box2d.b2ParticleFlag.b2_waterParticle&&this.m_particleSystem.SetDamping(.2);this.m_killfieldShape=new box2d.b2PolygonShape;this.m_killfieldShape.SetAsBox(50,
1);this.m_killfieldTransform=new box2d.b2Transform;b=new box2d.b2Vec2(-25,1);this.m_killfieldTransform.Set(b,0)};goog.inherits(box2d.Testbed.Pointy,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Pointy",box2d.Testbed.Pointy);box2d.Testbed.Pointy.prototype.m_killfieldShape=null;box2d.Testbed.Pointy.prototype.m_killfieldTransform=null;
box2d.Testbed.Pointy.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);var c=box2d.Testbed.TestMain.GetParticleParameterValue();a=new box2d.b2ParticleDef;a.position.Set(0,33);a.velocity.Set(0,-1);a.flags=c;c&(box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_elasticParticle)&&(c=this.m_particleSystem.GetParticleCount(),a.velocity.Set(c&1?-1:1,-5),a.flags|=box2d.b2ParticleFlag.b2_reactiveParticle);this.m_particleSystem.CreateParticle(a);this.m_particleSystem.DestroyParticlesInShape(this.m_killfieldShape,
this.m_killfieldTransform)};goog.exportProperty(box2d.Testbed.Pointy.prototype,"Step",box2d.Testbed.Pointy.prototype.Step);box2d.Testbed.Pointy.Create=function(a,c){return new box2d.Testbed.Pointy(a,c)};goog.exportProperty(box2d.Testbed.Pointy,"Create",box2d.Testbed.Pointy.Create);box2d.Testbed.PolyCollision=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_polygonA=new box2d.b2PolygonShape;this.m_polygonB=new box2d.b2PolygonShape;this.m_transformA=new box2d.b2Transform;this.m_transformB=new box2d.b2Transform;this.m_positionB=new box2d.b2Vec2;this.m_polygonA.SetAsBox(.2,.4);this.m_transformA.SetPositionRotationAngle(new box2d.b2Vec2(0,0),0);this.m_polygonB.SetAsBox(.5,.5);this.m_positionB.Set(19.345284,1.5632932);this.m_angleB=1.9160721;this.m_transformB.SetPositionRotationAngle(this.m_positionB,
this.m_angleB)};goog.inherits(box2d.Testbed.PolyCollision,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.PolyCollision",box2d.Testbed.PolyCollision);box2d.Testbed.PolyCollision.prototype.m_polygonA=null;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_polygonA",box2d.Testbed.PolyCollision.prototype.m_polygonA);box2d.Testbed.PolyCollision.prototype.m_polygonB=null;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_polygonB",box2d.Testbed.PolyCollision.prototype.m_polygonB);
box2d.Testbed.PolyCollision.prototype.m_transformA=null;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_transformA",box2d.Testbed.PolyCollision.prototype.m_transformA);box2d.Testbed.PolyCollision.prototype.m_transformB=null;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_transformB",box2d.Testbed.PolyCollision.prototype.m_transformB);box2d.Testbed.PolyCollision.prototype.m_positionB=null;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_positionB",box2d.Testbed.PolyCollision.prototype.m_positionB);
box2d.Testbed.PolyCollision.prototype.m_angleB=0;goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"m_angleB",box2d.Testbed.PolyCollision.prototype.m_angleB);
box2d.Testbed.PolyCollision.prototype.Step=function(a){a=new box2d.b2Manifold;box2d.b2CollidePolygons(a,this.m_polygonA,this.m_transformA,this.m_polygonB,this.m_transformB);var c=new box2d.b2WorldManifold;c.Initialize(a,this.m_transformA,this.m_polygonA.m_radius,this.m_transformB,this.m_polygonB.m_radius);this.m_debugDraw.DrawString(5,this.m_textLine,"point count = %d",a.pointCount);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;for(var b=new box2d.b2Color(.9,.9,.9),d=Array(box2d.b2_maxPolygonVertices),
e=0;e<this.m_polygonA.m_count;++e)d[e]=box2d.b2Mul_X_V2(this.m_transformA,this.m_polygonA.m_vertices[e],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(d,this.m_polygonA.m_count,b);for(e=0;e<this.m_polygonB.m_count;++e)d[e]=box2d.b2Mul_X_V2(this.m_transformB,this.m_polygonB.m_vertices[e],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(d,this.m_polygonB.m_count,b);for(e=0;e<a.pointCount;++e)this.m_debugDraw.DrawPoint(c.points[e],4,new box2d.b2Color(.9,.3,.3))};
goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"Step",box2d.Testbed.PolyCollision.prototype.Step);
box2d.Testbed.PolyCollision.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_positionB.x-=.1;break;case goog.events.KeyCodes.D:this.m_positionB.x+=.1;break;case goog.events.KeyCodes.S:this.m_positionB.y-=.1;break;case goog.events.KeyCodes.W:this.m_positionB.y+=.1;break;case goog.events.KeyCodes.Q:this.m_angleB+=.1*box2d.b2_pi;break;case goog.events.KeyCodes.E:this.m_angleB-=.1*box2d.b2_pi}this.m_transformB.SetPositionRotationAngle(this.m_positionB,this.m_angleB)};
goog.exportProperty(box2d.Testbed.PolyCollision.prototype,"Keyboard",box2d.Testbed.PolyCollision.prototype.Keyboard);box2d.Testbed.PolyCollision.Create=function(a,c){return new box2d.Testbed.PolyCollision(a,c)};goog.exportProperty(box2d.Testbed.PolyCollision,"Create",box2d.Testbed.PolyCollision.Create);box2d.Testbed.PolyShapesCallback=function(){this.m_circle=new box2d.b2CircleShape;this.m_transform=new box2d.b2Transform};goog.inherits(box2d.Testbed.PolyShapesCallback,box2d.b2QueryCallback);goog.exportSymbol("box2d.Testbed.PolyShapesCallback",box2d.Testbed.PolyShapesCallback);box2d.Testbed.PolyShapesCallback.e_maxCount=4;goog.exportProperty(box2d.Testbed.PolyShapesCallback,"e_maxCount",box2d.Testbed.PolyShapesCallback.e_maxCount);box2d.Testbed.PolyShapesCallback.prototype.m_circle=null;
goog.exportProperty(box2d.Testbed.PolyShapesCallback.prototype,"m_circle",box2d.Testbed.PolyShapesCallback.prototype.m_circle);box2d.Testbed.PolyShapesCallback.prototype.m_transform=null;goog.exportProperty(box2d.Testbed.PolyShapesCallback.prototype,"m_transform",box2d.Testbed.PolyShapesCallback.prototype.m_transform);box2d.Testbed.PolyShapesCallback.prototype.m_debug_draw=null;goog.exportProperty(box2d.Testbed.PolyShapesCallback.prototype,"m_debug_draw",box2d.Testbed.PolyShapesCallback.prototype.m_debug_draw);
box2d.Testbed.PolyShapesCallback.prototype.m_count=0;goog.exportProperty(box2d.Testbed.PolyShapesCallback.prototype,"m_count",box2d.Testbed.PolyShapesCallback.prototype.m_count);
box2d.Testbed.PolyShapesCallback.prototype.DrawFixture=function(a){var c=new box2d.b2Color(.95,.95,.6),b=a.GetBody().GetTransform();switch(a.GetType()){case box2d.b2ShapeType.e_circleShape:a=a.GetShape();b=box2d.b2Mul_X_V2(b,a.m_p,new box2d.b2Vec2);this.m_debugDraw.DrawCircle(b,a.m_radius,c);break;case box2d.b2ShapeType.e_polygonShape:a=a.GetShape();var d=box2d.b2ParseInt(a.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(d<=box2d.b2_maxPolygonVertices);for(var e=Array(box2d.b2_maxPolygonVertices),f=
0;f<d;++f)e[f]=box2d.b2Mul_X_V2(b,a.m_vertices[f],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(e,d,c)}};box2d.Testbed.PolyShapesCallback.prototype.ReportFixture=function(a){if(this.m_count===box2d.Testbed.PolyShapesCallback.e_maxCount)return!1;var c=a.GetBody(),b=a.GetShape();box2d.b2TestOverlapShape(b,0,this.m_circle,0,c.GetTransform(),this.m_transform)&&(this.DrawFixture(a),++this.m_count);return!0};
box2d.Testbed.PolyShapes=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodyIndex=0;this.m_bodies=Array(box2d.Testbed.PolyShapes.e_maxBodies);this.m_polygons=Array(4);for(var b=0;4>b;++b)this.m_polygons[b]=new box2d.b2PolygonShape;this.m_circle=new box2d.b2CircleShape;var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=Array(3);b[0]=new box2d.b2Vec2(-.5,0);b[1]=new box2d.b2Vec2(.5,
0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[0].Set(b,3);b=Array(3);b[0]=new box2d.b2Vec2(-.1,0);b[1]=new box2d.b2Vec2(.1,0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[1].Set(b,3);var d=1/(2+box2d.b2Sqrt(2)),e=box2d.b2Sqrt(2)*d,b=Array(8);b[0]=new box2d.b2Vec2(.5*e,0);b[1]=new box2d.b2Vec2(.5,d);b[2]=new box2d.b2Vec2(.5,d+e);b[3]=new box2d.b2Vec2(.5*e,1);b[4]=new box2d.b2Vec2(-.5*e,1);b[5]=new box2d.b2Vec2(-.5,d+e);b[6]=new box2d.b2Vec2(-.5,d);b[7]=new box2d.b2Vec2(-.5*e,0);this.m_polygons[2].Set(b,
8);this.m_polygons[3].SetAsBox(.5,.5);this.m_circle.m_radius=.5;for(b=0;b<box2d.Testbed.PolyShapes.e_maxBodies;++b)this.m_bodies[b]=null};goog.inherits(box2d.Testbed.PolyShapes,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.PolyShapes",box2d.Testbed.PolyShapes);box2d.Testbed.PolyShapes.e_maxBodies=256;goog.exportProperty(box2d.Testbed.PolyShapes,"e_maxBodies",box2d.Testbed.PolyShapes.e_maxBodies);
box2d.Testbed.PolyShapes.prototype.CreateBody=function(a){null!==this.m_bodies[this.m_bodyIndex]&&(this.m_world.DestroyBody(this.m_bodies[this.m_bodyIndex]),this.m_bodies[this.m_bodyIndex]=null);var c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;var b=box2d.b2RandomRange(-2,2);c.position.Set(b,10);c.angle=box2d.b2RandomRange(-box2d.b2_pi,box2d.b2_pi);4===a&&(c.angularDamping=.02);this.m_bodies[this.m_bodyIndex]=this.m_world.CreateBody(c);4>a?(c=new box2d.b2FixtureDef,c.shape=this.m_polygons[a]):
(c=new box2d.b2FixtureDef,c.shape=this.m_circle);c.density=1;c.friction=.3;this.m_bodies[this.m_bodyIndex].CreateFixture(c);this.m_bodyIndex=(this.m_bodyIndex+1)%box2d.Testbed.PolyShapes.e_maxBodies};goog.exportProperty(box2d.Testbed.PolyShapes.prototype,"CreateBody",box2d.Testbed.PolyShapes.prototype.CreateBody);
box2d.Testbed.PolyShapes.prototype.DestroyBody=function(){for(var a=0;a<box2d.Testbed.PolyShapes.e_maxBodies;++a)if(null!==this.m_bodies[a]){this.m_world.DestroyBody(this.m_bodies[a]);this.m_bodies[a]=null;break}};goog.exportProperty(box2d.Testbed.PolyShapes.prototype,"DestroyBody",box2d.Testbed.PolyShapes.prototype.DestroyBody);
box2d.Testbed.PolyShapes.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.ONE:case goog.events.KeyCodes.TWO:case goog.events.KeyCodes.THREE:case goog.events.KeyCodes.FOUR:case goog.events.KeyCodes.FIVE:this.CreateBody(a-goog.events.KeyCodes.ONE);break;case goog.events.KeyCodes.A:for(a=0;a<box2d.Testbed.PolyShapes.e_maxBodies;a+=2)if(this.m_bodies[a]){var c=this.m_bodies[a].IsActive();this.m_bodies[a].SetActive(!c)}break;case goog.events.KeyCodes.D:this.DestroyBody()}};
goog.exportProperty(box2d.Testbed.PolyShapes.prototype,"Keyboard",box2d.Testbed.PolyShapes.prototype.Keyboard);
box2d.Testbed.PolyShapes.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);a=new box2d.Testbed.PolyShapesCallback;a.m_circle.m_radius=2;a.m_circle.m_p.Set(0,1.1);a.m_transform.SetIdentity();a.m_debugDraw=this.m_debugDraw;var c=new box2d.b2AABB;a.m_circle.ComputeAABB(c,a.m_transform,0);this.m_world.QueryAABB(a,c);c=new box2d.b2Color(.4,.7,.8);this.m_debugDraw.DrawCircle(a.m_circle.m_p,a.m_circle.m_radius,c);this.m_debugDraw.DrawString(5,this.m_textLine,"Press 1-5 to drop stuff");
this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Press 'a' to (de)activate some bodies");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Press 'd' to destroy a body");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.PolyShapes.prototype,"Step",box2d.Testbed.PolyShapes.prototype.Step);
box2d.Testbed.PolyShapes.Create=function(a,c){return new box2d.Testbed.PolyShapes(a,c)};goog.exportProperty(box2d.Testbed.PolyShapes,"Create",box2d.Testbed.PolyShapes.Create);box2d.Testbed.Prismatic=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(2,.5);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-10,10);d.angle=.5*box2d.b2_pi;d.allowSleep=!1;d=this.m_world.CreateBody(d);d.CreateFixture(e,5);var e=new box2d.b2PrismaticJointDef,f=new box2d.b2Vec2(2,
1);f.Normalize();e.Initialize(b,d,new box2d.b2Vec2(0,0),f);e.motorSpeed=10;e.maxMotorForce=1E4;e.enableMotor=!0;e.lowerTranslation=0;e.upperTranslation=20;e.enableLimit=!0;this.m_joint=this.m_world.CreateJoint(e)};goog.inherits(box2d.Testbed.Prismatic,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Prismatic",box2d.Testbed.Prismatic);box2d.Testbed.Prismatic.prototype.m_joint=null;goog.exportProperty(box2d.Testbed.Prismatic.prototype,"m_joint",box2d.Testbed.Prismatic.prototype.m_joint);
box2d.Testbed.Prismatic.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.L:this.m_joint.EnableLimit(!this.m_joint.IsLimitEnabled());break;case goog.events.KeyCodes.M:this.m_joint.EnableMotor(!this.m_joint.IsMotorEnabled());break;case goog.events.KeyCodes.S:this.m_joint.SetMotorSpeed(-this.m_joint.GetMotorSpeed())}};goog.exportProperty(box2d.Testbed.Prismatic.prototype,"Keyboard",box2d.Testbed.Prismatic.prototype.Keyboard);
box2d.Testbed.Prismatic.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (l) limits, (m) motors, (s) speed");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=this.m_joint.GetMotorForce(a.hz);this.m_debugDraw.DrawString(5,this.m_textLine,"Motor Force = %4.0f",a);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Prismatic.prototype,"Step",box2d.Testbed.Prismatic.prototype.Step);
box2d.Testbed.Prismatic.Create=function(a,c){return new box2d.Testbed.Prismatic(a,c)};goog.exportProperty(box2d.Testbed.Prismatic,"Create",box2d.Testbed.Prismatic.Create);box2d.Testbed.Pulleys=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d);(new box2d.b2EdgeShape).SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d=new box2d.b2CircleShape;d.m_radius=2;d.m_p.Set(-10,30);b.CreateFixture(d,0);d.m_p.Set(10,30);b.CreateFixture(d,0);var e=new box2d.b2PolygonShape;e.SetAsBox(1,2);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-10,16);b=this.m_world.CreateBody(d);b.CreateFixture(e,
5);d.position.Set(10,16);d=this.m_world.CreateBody(d);d.CreateFixture(e,5);var e=new box2d.b2PulleyJointDef,f=new box2d.b2Vec2(-10,18),g=new box2d.b2Vec2(10,18),h=new box2d.b2Vec2(-10,30),k=new box2d.b2Vec2(10,30);e.Initialize(b,d,h,k,f,g,1.5);this.m_joint1=this.m_world.CreateJoint(e)};goog.inherits(box2d.Testbed.Pulleys,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Pulleys",box2d.Testbed.Pulleys);box2d.Testbed.Pulleys.prototype.m_joint1=null;
goog.exportProperty(box2d.Testbed.Pulleys.prototype,"m_joint1",box2d.Testbed.Pulleys.prototype.m_joint1);box2d.Testbed.Pulleys.prototype.Keyboard=function(a){};goog.exportProperty(box2d.Testbed.Pulleys.prototype,"Keyboard",box2d.Testbed.Pulleys.prototype.Keyboard);
box2d.Testbed.Pulleys.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);a=this.m_joint1.GetRatio();var c=this.m_joint1.GetCurrentLengthA()+a*this.m_joint1.GetCurrentLengthB();this.m_debugDraw.DrawString(5,this.m_textLine,"L1 + %4.2f * L2 = %4.2f",a,c);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Pulleys.prototype,"Step",box2d.Testbed.Pulleys.prototype.Step);
box2d.Testbed.Pulleys.Create=function(a,c){return new box2d.Testbed.Pulleys(a,c)};goog.exportProperty(box2d.Testbed.Pulleys,"Create",box2d.Testbed.Pulleys.Create);box2d.Testbed.Pyramid=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);d=new box2d.b2PolygonShape;d.SetAsBox(.5,.5);for(var e=new box2d.b2Vec2(-7,.75),f=new box2d.b2Vec2(0,0),g=new box2d.b2Vec2(.5625,1.25),h=new box2d.b2Vec2(1.125,0),k=0;k<box2d.Testbed.Pyramid.e_count;++k){f.Copy(e);for(var l=k;l<box2d.Testbed.Pyramid.e_count;++l)b=new box2d.b2BodyDef,
b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Copy(f),this.m_world.CreateBody(b).CreateFixture(d,5),f.SelfAdd(h);e.SelfAdd(g)}};goog.inherits(box2d.Testbed.Pyramid,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Pyramid",box2d.Testbed.Pyramid);box2d.Testbed.Pyramid.e_count=20;goog.exportProperty(box2d.Testbed.Pyramid,"e_count",box2d.Testbed.Pyramid.e_count);box2d.Testbed.Pyramid.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};
goog.exportProperty(box2d.Testbed.Pyramid.prototype,"Step",box2d.Testbed.Pyramid.prototype.Step);box2d.Testbed.Pyramid.Create=function(a,c){return new box2d.Testbed.Pyramid(a,c)};goog.exportProperty(box2d.Testbed.Pyramid,"Create",box2d.Testbed.Pyramid.Create);box2d.Testbed.PyramidTopple=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=function(a,b,c){var d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Copy(b);a=a.CreateBody(d);b=new box2d.b2PolygonShape;c?b.SetAsBox(15,2):b.SetAsBox(2,15);c=new box2d.b2FixtureDef;c.shape=b;c.density=1/120;c.friction=.6;c.restitution=0;a.CreateFixture(c)},d=this.m_world,e=new box2d.b2BodyDef,e=d.CreateBody(e),f=new box2d.b2EdgeShape;f.SetAsEdge(new box2d.b2Vec2(-600,-240),new box2d.b2Vec2(600,
-240));var g=new box2d.b2FixtureDef;g.shape=f;g.friction=1;g.restitution=1;e.CreateFixture(g);for(e=0;12>e;e++)for(f=0;f<12-e;f++)g=new box2d.b2Vec2(45*(f-.5*(11-e)),38*(e+.5)-4-240),b(d,g,!1),b(d,box2d.b2Add_V2_V2(g,new box2d.b2Vec2(0,17),new box2d.b2Vec2),!0),0===f&&b(d,box2d.b2Add_V2_V2(g,new box2d.b2Vec2(-13,34),new box2d.b2Vec2),!1),f!=12-e-1?b(d,box2d.b2Add_V2_V2(g,new box2d.b2Vec2(22.5,21),new box2d.b2Vec2),!0):b(d,box2d.b2Add_V2_V2(g,new box2d.b2Vec2(13,34),new box2d.b2Vec2),!1)};
goog.inherits(box2d.Testbed.PyramidTopple,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.PyramidTopple",box2d.Testbed.PyramidTopple);box2d.Testbed.PyramidTopple.prototype.GetDefaultViewZoom=function(){return 10};goog.exportProperty(box2d.Testbed.PyramidTopple.prototype,"GetDefaultViewZoom",box2d.Testbed.PyramidTopple.prototype.GetDefaultViewZoom);box2d.Testbed.PyramidTopple.Create=function(a,c){return new box2d.Testbed.PyramidTopple(a,c)};
goog.exportProperty(box2d.Testbed.PyramidTopple,"Create",box2d.Testbed.PyramidTopple.Create);box2d.Testbed.Ramp=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e;for(e=30;0<e;e-=5){var b=new box2d.b2PolygonShape,f=[new box2d.b2Vec2(-25,e),new box2d.b2Vec2(-25,e-5),new box2d.b2Vec2(0,15)];b.Set(f,3);d.CreateFixture(b,0)}for(e=-25;25>e;e+=5)b=new box2d.b2PolygonShape,f=[new box2d.b2Vec2(e,0),new box2d.b2Vec2(e+5,0),new box2d.b2Vec2(0,15)],b.Set(f,3),d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.25);f=box2d.Testbed.TestMain.GetParticleParameterValue();
f===box2d.b2ParticleFlag.b2_waterParticle&&this.m_particleSystem.SetDamping(.2);b=new box2d.b2CircleShape;b.m_p.Set(-20,33);b.m_radius=3;d=new box2d.b2ParticleGroupDef;d.flags=f;d.shape=b;b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(b,0)};goog.inherits(box2d.Testbed.Ramp,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Ramp",box2d.Testbed.Ramp);
box2d.Testbed.Ramp.Create=function(a,c){return new box2d.Testbed.Ramp(a,c)};goog.exportProperty(box2d.Testbed.Ramp,"Create",box2d.Testbed.Ramp.Create);box2d.Testbed.RayCastClosestCallback=function(){box2d.b2RayCastCallback.call(this);this.m_point=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2};goog.inherits(box2d.Testbed.RayCastClosestCallback,box2d.b2RayCastCallback);goog.exportSymbol("box2d.Testbed.RayCastClosestCallback",box2d.Testbed.RayCastClosestCallback);box2d.Testbed.RayCastClosestCallback.prototype.m_hit=!1;goog.exportProperty(box2d.Testbed.RayCastClosestCallback.prototype,"m_hit",box2d.Testbed.RayCastClosestCallback.prototype.m_hit);
box2d.Testbed.RayCastClosestCallback.prototype.m_point=null;goog.exportProperty(box2d.Testbed.RayCastClosestCallback.prototype,"m_point",box2d.Testbed.RayCastClosestCallback.prototype.m_point);box2d.Testbed.RayCastClosestCallback.prototype.m_normal=null;goog.exportProperty(box2d.Testbed.RayCastClosestCallback.prototype,"m_normal",box2d.Testbed.RayCastClosestCallback.prototype.m_normal);
box2d.Testbed.RayCastClosestCallback.prototype.ReportFixture=function(a,c,b,d){if((a=a.GetBody().GetUserData())&&0===a.index)return-1;this.m_hit=!0;this.m_point.Copy(c);this.m_normal.Copy(b);return d};goog.exportProperty(box2d.Testbed.RayCastClosestCallback.prototype,"ReportFixture",box2d.Testbed.RayCastClosestCallback.prototype.ReportFixture);box2d.Testbed.RayCastAnyCallback=function(){box2d.b2RayCastCallback.call(this);this.m_point=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2};
goog.inherits(box2d.Testbed.RayCastAnyCallback,box2d.b2RayCastCallback);goog.exportSymbol("box2d.Testbed.RayCastAnyCallback",box2d.Testbed.RayCastAnyCallback);box2d.Testbed.RayCastAnyCallback.prototype.m_hit=!1;goog.exportProperty(box2d.Testbed.RayCastAnyCallback.prototype,"m_hit",box2d.Testbed.RayCastAnyCallback.prototype.m_hit);box2d.Testbed.RayCastAnyCallback.prototype.m_point=null;goog.exportProperty(box2d.Testbed.RayCastAnyCallback.prototype,"m_point",box2d.Testbed.RayCastAnyCallback.prototype.m_point);
box2d.Testbed.RayCastAnyCallback.prototype.m_normal=null;goog.exportProperty(box2d.Testbed.RayCastAnyCallback.prototype,"m_normal",box2d.Testbed.RayCastAnyCallback.prototype.m_normal);box2d.Testbed.RayCastAnyCallback.prototype.ReportFixture=function(a,c,b,d){if((a=a.GetBody().GetUserData())&&0===a.index)return-1;this.m_hit=!0;this.m_point.Copy(c);this.m_normal.Copy(b);return 0};goog.exportProperty(box2d.Testbed.RayCastAnyCallback.prototype,"ReportFixture",box2d.Testbed.RayCastAnyCallback.prototype.ReportFixture);
box2d.Testbed.RayCastMultipleCallback=function(){box2d.b2RayCastCallback.call(this);this.m_points=box2d.b2Vec2.MakeArray(box2d.Testbed.RayCastMultipleCallback.e_maxCount);this.m_normals=box2d.b2Vec2.MakeArray(box2d.Testbed.RayCastMultipleCallback.e_maxCount)};goog.inherits(box2d.Testbed.RayCastMultipleCallback,box2d.b2RayCastCallback);goog.exportSymbol("box2d.Testbed.RayCastMultipleCallback",box2d.Testbed.RayCastMultipleCallback);box2d.Testbed.RayCastMultipleCallback.e_maxCount=3;
goog.exportProperty(box2d.Testbed.RayCastMultipleCallback,"e_maxCount",box2d.Testbed.RayCastMultipleCallback.e_maxCount);box2d.Testbed.RayCastMultipleCallback.prototype.m_points=null;goog.exportProperty(box2d.Testbed.RayCastMultipleCallback.prototype,"m_points",box2d.Testbed.RayCastMultipleCallback.prototype.m_points);box2d.Testbed.RayCastMultipleCallback.prototype.m_normals=null;goog.exportProperty(box2d.Testbed.RayCastMultipleCallback.prototype,"m_normals",box2d.Testbed.RayCastMultipleCallback.prototype.m_normals);
box2d.Testbed.RayCastMultipleCallback.prototype.m_count=0;goog.exportProperty(box2d.Testbed.RayCastMultipleCallback.prototype,"m_count",box2d.Testbed.RayCastMultipleCallback.prototype.m_count);
box2d.Testbed.RayCastMultipleCallback.prototype.ReportFixture=function(a,c,b,d){if((a=a.GetBody().GetUserData())&&0===a.index)return-1;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_count<box2d.Testbed.RayCastMultipleCallback.e_maxCount);this.m_points[this.m_count].Copy(c);this.m_normals[this.m_count].Copy(b);++this.m_count;return this.m_count===box2d.Testbed.RayCastMultipleCallback.e_maxCount?0:1};goog.exportProperty(box2d.Testbed.RayCastMultipleCallback.prototype,"ReportFixture",box2d.Testbed.RayCastMultipleCallback.prototype.ReportFixture);
box2d.Testbed.RayCastMode={e_closest:0,e_any:1,e_multiple:2};goog.exportSymbol("box2d.Testbed.RayCastMode",box2d.Testbed.RayCastMode);goog.exportProperty(box2d.Testbed.RayCastMode,"e_closest",box2d.Testbed.RayCastMode.e_closest);goog.exportProperty(box2d.Testbed.RayCastMode,"e_any",box2d.Testbed.RayCastMode.e_any);goog.exportProperty(box2d.Testbed.RayCastMode,"e_multiple",box2d.Testbed.RayCastMode.e_multiple);
box2d.Testbed.RayCast=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodyIndex=0;this.m_bodies=Array(box2d.Testbed.RayCast.e_maxBodies);this.m_polygons=Array(4);for(var b=0;4>b;++b)this.m_polygons[b]=new box2d.b2PolygonShape;this.m_circle=new box2d.b2CircleShape;this.m_edge=new box2d.b2EdgeShape;var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=Array(3);b[0]=new box2d.b2Vec2(-.5,
0);b[1]=new box2d.b2Vec2(.5,0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[0].Set(b,3);b=Array(3);b[0]=new box2d.b2Vec2(-.1,0);b[1]=new box2d.b2Vec2(.1,0);b[2]=new box2d.b2Vec2(0,1.5);this.m_polygons[1].Set(b,3);var d=1/(2+box2d.b2Sqrt(2)),e=box2d.b2Sqrt(2)*d,b=Array(8);b[0]=new box2d.b2Vec2(.5*e,0);b[1]=new box2d.b2Vec2(.5,d);b[2]=new box2d.b2Vec2(.5,d+e);b[3]=new box2d.b2Vec2(.5*e,1);b[4]=new box2d.b2Vec2(-.5*e,1);b[5]=new box2d.b2Vec2(-.5,d+e);b[6]=new box2d.b2Vec2(-.5,d);b[7]=new box2d.b2Vec2(-.5*
e,0);this.m_polygons[2].Set(b,8);this.m_polygons[3].SetAsBox(.5,.5);this.m_circle.m_radius=.5;this.m_edge.SetAsEdge(new box2d.b2Vec2(-1,0),new box2d.b2Vec2(1,0));for(b=0;b<box2d.Testbed.RayCast.e_maxBodies;++b)this.m_bodies[b]=null;this.m_angle=0;this.m_mode=box2d.Testbed.RayCastMode.e_closest};goog.inherits(box2d.Testbed.RayCast,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.RayCast",box2d.Testbed.RayCast);box2d.Testbed.RayCast.e_maxBodies=256;
goog.exportProperty(box2d.Testbed.RayCast,"e_maxBodies",box2d.Testbed.RayCast.e_maxBodies);box2d.Testbed.RayCast.prototype.m_bodyIndex=0;goog.exportProperty(box2d.Testbed.RayCast.prototype,"m_bodyIndex",box2d.Testbed.RayCast.prototype.m_bodyIndex);box2d.Testbed.RayCast.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.RayCast.prototype,"m_bodies",box2d.Testbed.RayCast.prototype.m_bodies);box2d.Testbed.RayCast.prototype.m_polygons=null;
goog.exportProperty(box2d.Testbed.RayCast.prototype,"m_polygons",box2d.Testbed.RayCast.prototype.m_polygons);box2d.Testbed.RayCast.prototype.m_circle=null;goog.exportProperty(box2d.Testbed.RayCast.prototype,"m_circle",box2d.Testbed.RayCast.prototype.m_circle);box2d.Testbed.RayCast.prototype.m_edge=null;goog.exportProperty(box2d.Testbed.RayCast.prototype,"m_edge",box2d.Testbed.RayCast.prototype.m_edge);
box2d.Testbed.RayCast.prototype.CreateBody=function(a){null!==this.m_bodies[this.m_bodyIndex]&&(this.m_world.DestroyBody(this.m_bodies[this.m_bodyIndex]),this.m_bodies[this.m_bodyIndex]=null);var c=new box2d.b2BodyDef,b=box2d.b2RandomRange(-10,10),d=box2d.b2RandomRange(0,20);c.position.Set(b,d);c.angle=box2d.b2RandomRange(-box2d.b2_pi,box2d.b2_pi);c.userData={};c.userData.index=a;4===a&&(c.angularDamping=.02);this.m_bodies[this.m_bodyIndex]=this.m_world.CreateBody(c);4>a?(c=new box2d.b2FixtureDef,
c.shape=this.m_polygons[a]):5>a?(c=new box2d.b2FixtureDef,c.shape=this.m_circle):(c=new box2d.b2FixtureDef,c.shape=this.m_edge);c.friction=.3;this.m_bodies[this.m_bodyIndex].CreateFixture(c);this.m_bodyIndex=(this.m_bodyIndex+1)%box2d.Testbed.RayCast.e_maxBodies};goog.exportProperty(box2d.Testbed.RayCast.prototype,"CreateBody",box2d.Testbed.RayCast.prototype.CreateBody);
box2d.Testbed.RayCast.prototype.DestroyBody=function(){for(var a=0;a<box2d.Testbed.RayCast.e_maxBodies;++a)if(null!==this.m_bodies[a]){this.m_world.DestroyBody(this.m_bodies[a]);this.m_bodies[a]=null;break}};goog.exportProperty(box2d.Testbed.RayCast.prototype,"DestroyBody",box2d.Testbed.RayCast.prototype.DestroyBody);
box2d.Testbed.RayCast.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.ONE:case goog.events.KeyCodes.TWO:case goog.events.KeyCodes.THREE:case goog.events.KeyCodes.FOUR:case goog.events.KeyCodes.FIVE:case goog.events.KeyCodes.SIX:this.CreateBody(a-goog.events.KeyCodes.ONE);break;case goog.events.KeyCodes.D:this.DestroyBody();break;case goog.events.KeyCodes.M:this.m_mode===box2d.Testbed.RayCastMode.e_closest?this.m_mode=box2d.Testbed.RayCastMode.e_any:this.m_mode===box2d.Testbed.RayCastMode.e_any?
this.m_mode=box2d.Testbed.RayCastMode.e_multiple:this.m_mode===box2d.Testbed.RayCastMode.e_multiple&&(this.m_mode=box2d.Testbed.RayCastMode.e_closest)}};goog.exportProperty(box2d.Testbed.RayCast.prototype,"Keyboard",box2d.Testbed.RayCast.prototype.Keyboard);
box2d.Testbed.RayCast.prototype.Step=function(a){var c=!a.pause||a.singleStep;box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press 1-6 to drop stuff, m to change the mode");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;switch(this.m_mode){case box2d.Testbed.RayCastMode.e_closest:this.m_debugDraw.DrawString(5,this.m_textLine,"Ray-cast mode: closest - find closest fixture along the ray");break;case box2d.Testbed.RayCastMode.e_any:this.m_debugDraw.DrawString(5,
this.m_textLine,"Ray-cast mode: any - check for obstruction");break;case box2d.Testbed.RayCastMode.e_multiple:this.m_debugDraw.DrawString(5,this.m_textLine,"Ray-cast mode: multiple - gather multiple fixtures")}this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=new box2d.b2Vec2(0,10);var b=new box2d.b2Vec2(11*box2d.b2Cos(this.m_angle),11*box2d.b2Sin(this.m_angle)),d=box2d.b2Add_V2_V2(a,b,new box2d.b2Vec2);if(this.m_mode===box2d.Testbed.RayCastMode.e_closest)if(b=new box2d.Testbed.RayCastClosestCallback,
this.m_world.RayCast(b,a,d),b.m_hit){this.m_debugDraw.DrawPoint(b.m_point,5,new box2d.b2Color(.4,.9,.4));this.m_debugDraw.DrawSegment(a,b.m_point,new box2d.b2Color(.8,.8,.8));var e=box2d.b2Add_V2_V2(b.m_point,box2d.b2Mul_S_V2(.5,b.m_normal,box2d.b2Vec2.s_t0),new box2d.b2Vec2);this.m_debugDraw.DrawSegment(b.m_point,e,new box2d.b2Color(.9,.9,.4))}else this.m_debugDraw.DrawSegment(a,d,new box2d.b2Color(.8,.8,.8));else if(this.m_mode===box2d.Testbed.RayCastMode.e_any)b=new box2d.Testbed.RayCastAnyCallback,
this.m_world.RayCast(b,a,d),b.m_hit?(this.m_debugDraw.DrawPoint(b.m_point,5,new box2d.b2Color(.4,.9,.4)),this.m_debugDraw.DrawSegment(a,b.m_point,new box2d.b2Color(.8,.8,.8)),e=box2d.b2Add_V2_V2(b.m_point,box2d.b2Mul_S_V2(.5,b.m_normal,box2d.b2Vec2.s_t0),new box2d.b2Vec2),this.m_debugDraw.DrawSegment(b.m_point,e,new box2d.b2Color(.9,.9,.4))):this.m_debugDraw.DrawSegment(a,d,new box2d.b2Color(.8,.8,.8));else if(this.m_mode===box2d.Testbed.RayCastMode.e_multiple)for(b=new box2d.Testbed.RayCastMultipleCallback,
this.m_world.RayCast(b,a,d),this.m_debugDraw.DrawSegment(a,d,new box2d.b2Color(.8,.8,.8)),d=0;d<b.m_count;++d){var f=b.m_points[d],e=b.m_normals[d];this.m_debugDraw.DrawPoint(f,5,new box2d.b2Color(.4,.9,.4));this.m_debugDraw.DrawSegment(a,f,new box2d.b2Color(.8,.8,.8));e=box2d.b2Add_V2_V2(f,box2d.b2Mul_S_V2(.5,e,box2d.b2Vec2.s_t0),new box2d.b2Vec2);this.m_debugDraw.DrawSegment(f,e,new box2d.b2Color(.9,.9,.4))}c&&(this.m_angle+=.25*box2d.b2_pi/180)};
goog.exportProperty(box2d.Testbed.RayCast.prototype,"Step",box2d.Testbed.RayCast.prototype.Step);box2d.Testbed.RayCast.Create=function(a,c){return new box2d.Testbed.RayCast(a,c)};goog.exportProperty(box2d.Testbed.RayCast,"Create",box2d.Testbed.RayCast.Create);box2d.Testbed.Revolute=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d=new box2d.b2FixtureDef;d.shape=e;b.CreateFixture(d);e=new box2d.b2CircleShape;e.m_radius=.5;d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;var f=new box2d.b2RevoluteJointDef;d.position.Set(-10,20);d=this.m_world.CreateBody(d);d.CreateFixture(e,5);d.SetAngularVelocity(100);
d.SetLinearVelocity(new box2d.b2Vec2(-800,0));f.Initialize(b,d,new box2d.b2Vec2(-10,12));f.motorSpeed=1*box2d.b2_pi;f.maxMotorTorque=1E4;f.enableMotor=!1;f.lowerAngle=-.25*box2d.b2_pi;f.upperAngle=.5*box2d.b2_pi;f.enableLimit=!0;f.collideConnected=!0;this.m_joint=this.m_world.CreateJoint(f);e=new box2d.b2CircleShape;e.m_radius=3;f=new box2d.b2BodyDef;f.type=box2d.b2BodyType.b2_dynamicBody;f.position.Set(5,30);d=new box2d.b2FixtureDef;d.density=5;d.filter.maskBits=1;d.shape=e;this.m_ball=this.m_world.CreateBody(f);
this.m_ball.CreateFixture(d);d=new box2d.b2PolygonShape;d.SetAsBox(10,.2,new box2d.b2Vec2(-10,0),0);e=new box2d.b2BodyDef;e.position.Set(20,10);e.type=box2d.b2BodyType.b2_dynamicBody;e.bullet=!0;e=this.m_world.CreateBody(e);e.CreateFixture(d,2);f=new box2d.b2RevoluteJointDef;f.Initialize(b,e,new box2d.b2Vec2(20,10));f.lowerAngle=-.25*box2d.b2_pi;f.upperAngle=0*box2d.b2_pi;f.enableLimit=!0;this.m_world.CreateJoint(f);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);
b=new box2d.b2PolygonShape;e=box2d.b2Vec2.MakeArray(3);e[0].Set(17.63,36.31);e[1].Set(17.52,36.69);e[2].Set(17.19,36.36);b.Set(e,3);e=new box2d.b2FixtureDef;e.shape=b;e.density=1;d.CreateFixture(e)};goog.inherits(box2d.Testbed.Revolute,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Revolute",box2d.Testbed.Revolute);box2d.Testbed.Revolute.prototype.m_ball=null;goog.exportProperty(box2d.Testbed.Revolute.prototype,"m_ball",box2d.Testbed.Revolute.prototype.m_ball);
box2d.Testbed.Revolute.prototype.m_joint=null;goog.exportProperty(box2d.Testbed.Revolute.prototype,"m_joint",box2d.Testbed.Revolute.prototype.m_joint);box2d.Testbed.Revolute.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.L:this.m_joint.EnableLimit(!this.m_joint.IsLimitEnabled());break;case goog.events.KeyCodes.M:this.m_joint.EnableMotor(!this.m_joint.IsMotorEnabled())}};goog.exportProperty(box2d.Testbed.Revolute.prototype,"Keyboard",box2d.Testbed.Revolute.prototype.Keyboard);
box2d.Testbed.Revolute.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (l) limits, (m) motor");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Revolute.prototype,"Step",box2d.Testbed.Revolute.prototype.Step);box2d.Testbed.Revolute.Create=function(a,c){return new box2d.Testbed.Revolute(a,c)};goog.exportProperty(box2d.Testbed.Revolute,"Create",box2d.Testbed.Revolute.Create);box2d.Testbed.RigidParticles=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=new box2d.b2PolygonShape,e=[new box2d.b2Vec2(-4,-1),new box2d.b2Vec2(4,-1),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(-4,-.1),new box2d.b2Vec2(-2,-.1),new box2d.b2Vec2(-2,2),new box2d.b2Vec2(-4,2)];b.Set(e,4);d.CreateFixture(b,0);b=new box2d.b2PolygonShape;e=[new box2d.b2Vec2(2,-.1),new box2d.b2Vec2(4,
-.1),new box2d.b2Vec2(4,2),new box2d.b2Vec2(2,2)];b.Set(e,4);d.CreateFixture(b,0);this.m_particleSystem.SetRadius(.035*3);b=new box2d.b2CircleShape;b.m_p.Set(0,3);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;d.groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.shape=b;d.color.Set(255,0,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2CircleShape;b.m_p.Set(-1,3);b.m_radius=.5;d=new box2d.b2ParticleGroupDef;d.groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|
box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.shape=b;d.color.Set(0,255,0,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2PolygonShape;b.SetAsBox(1,.5);d=new box2d.b2ParticleGroupDef;d.groupFlags=box2d.b2ParticleGroupFlag.b2_rigidParticleGroup|box2d.b2ParticleGroupFlag.b2_solidParticleGroup;d.position.Set(1,4);d.angle=-.5;d.angularVelocity=2;d.shape=b;d.color.Set(0,0,255,255);this.m_particleSystem.CreateParticleGroup(d);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;
d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_p.Set(0,8);b.m_radius=.5;d.CreateFixture(b,.5)};goog.inherits(box2d.Testbed.RigidParticles,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.RigidParticles",box2d.Testbed.RigidParticles);box2d.Testbed.RigidParticles.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.RigidParticles.prototype,"GetDefaultViewZoom",box2d.Testbed.RigidParticles.prototype.GetDefaultViewZoom);
box2d.Testbed.RigidParticles.Create=function(a,c){return new box2d.Testbed.RigidParticles(a,c)};goog.exportProperty(box2d.Testbed.RigidParticles,"Create",box2d.Testbed.RigidParticles.Create);box2d.Testbed.Rope=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_rope=new box2d.b2Rope;for(var b=box2d.b2Vec2.MakeArray(40),d=box2d.b2MakeNumberArray(40),e=0;40>e;++e)b[e].Set(0,20-.25*e),d[e]=1;d[0]=0;d[1]=0;e=new box2d.b2RopeDef;e.vertices=b;e.count=40;e.gravity.Set(0,-10);e.masses=d;e.damping=.1;e.k2=1;e.k3=.5;this.m_rope.Initialize(e);this.m_angle=0;this.m_rope.SetAngle(this.m_angle)};goog.inherits(box2d.Testbed.Rope,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Rope",box2d.Testbed.Rope);
box2d.Testbed.Rope.prototype.m_rope=null;goog.exportProperty(box2d.Testbed.Rope.prototype,"m_rope",box2d.Testbed.Rope.prototype.m_rope);box2d.Testbed.Rope.prototype.m_angle=0;goog.exportProperty(box2d.Testbed.Rope.prototype,"m_angle",box2d.Testbed.Rope.prototype.m_angle);
box2d.Testbed.Rope.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.Q:this.m_angle=box2d.b2Max(-box2d.b2_pi,this.m_angle-.05*box2d.b2_pi);this.m_rope.SetAngle(this.m_angle);break;case goog.events.KeyCodes.E:this.m_angle=box2d.b2Min(box2d.b2_pi,this.m_angle+.05*box2d.b2_pi),this.m_rope.SetAngle(this.m_angle)}};goog.exportProperty(box2d.Testbed.Rope.prototype,"Keyboard",box2d.Testbed.Rope.prototype.Keyboard);
box2d.Testbed.Rope.prototype.Step=function(a){var c=0<a.hz?1/a.hz:0;a.pause&&!a.singleStep&&(c=0);this.m_rope.Step(c,1);box2d.Testbed.Test.prototype.Step.call(this,a);this.m_rope.Draw(this.m_debugDraw);this.m_debugDraw.DrawString(5,this.m_textLine,"Press (q,e) to adjust target angle");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Target angle = %4.2f degrees",180*this.m_angle/box2d.b2_pi);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.Rope.prototype,"Step",box2d.Testbed.Rope.prototype.Step);box2d.Testbed.Rope.Create=function(a,c){return new box2d.Testbed.Rope(a,c)};goog.exportProperty(box2d.Testbed.Rope,"Create",box2d.Testbed.Rope.Create);box2d.Testbed.RopeJoint=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_ropeDef=new box2d.b2RopeJointDef;var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.125);var f=new box2d.b2FixtureDef;f.shape=e;f.density=20;f.friction=.2;f.filter.categoryBits=1;f.filter.maskBits=65533;var g=new box2d.b2RevoluteJointDef;g.collideConnected=!1;this.m_ropeDef.localAnchorA.Set(0,
15);for(var h=b,k=0;10>k;++k){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(.5+1*k,15);9===k&&(e.SetAsBox(1.5,1.5),f.density=100,f.filter.categoryBits=2,d.position.Set(1*k,15),d.angularDamping=.4);d=this.m_world.CreateBody(d);d.CreateFixture(f);var l=new box2d.b2Vec2(k,15);g.Initialize(h,d,l);this.m_world.CreateJoint(g);h=d}this.m_ropeDef.localAnchorB.SetZero();this.m_ropeDef.maxLength=9.01;this.m_ropeDef.bodyB=h;this.m_ropeDef.bodyA=b;this.m_rope=this.m_world.CreateJoint(this.m_ropeDef)};
goog.inherits(box2d.Testbed.RopeJoint,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.RopeJoint",box2d.Testbed.RopeJoint);box2d.Testbed.RopeJoint.prototype.m_ropeDef=null;goog.exportProperty(box2d.Testbed.RopeJoint.prototype,"m_ropeDef",box2d.Testbed.RopeJoint.prototype.m_ropeDef);box2d.Testbed.RopeJoint.prototype.m_rope=null;goog.exportProperty(box2d.Testbed.RopeJoint.prototype,"m_rope",box2d.Testbed.RopeJoint.prototype.m_rope);
box2d.Testbed.RopeJoint.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.J:this.m_rope?(this.m_world.DestroyJoint(this.m_rope),this.m_rope=null):this.m_rope=this.m_world.CreateJoint(this.m_ropeDef)}};goog.exportProperty(box2d.Testbed.RopeJoint.prototype,"Keyboard",box2d.Testbed.RopeJoint.prototype.Keyboard);
box2d.Testbed.RopeJoint.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press (j) to toggle the rope joint.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_rope?this.m_debugDraw.DrawString(5,this.m_textLine,"Rope ON"):this.m_debugDraw.DrawString(5,this.m_textLine,"Rope OFF");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.RopeJoint.prototype,"Step",box2d.Testbed.RopeJoint.prototype.Step);
box2d.Testbed.RopeJoint.Create=function(a,c){return new box2d.Testbed.RopeJoint(a,c)};goog.exportProperty(box2d.Testbed.RopeJoint,"Create",box2d.Testbed.RopeJoint.Create);box2d.Testbed.SandboxParams={};box2d.Testbed.SandboxParams.k_maxPumps=5;box2d.Testbed.SandboxParams.k_maxEmitters=5;box2d.Testbed.SandboxParams.k_flipTime=6;box2d.Testbed.SandboxParams.k_tileRadius=2;box2d.Testbed.SandboxParams.k_tileDiameter=4;box2d.Testbed.SandboxParams.k_pumpRadius=1.95;box2d.Testbed.SandboxParams.k_playfieldLeftEdge=-20;box2d.Testbed.SandboxParams.k_playfieldRightEdge=20;box2d.Testbed.SandboxParams.k_playfieldBottomEdge=40;box2d.Testbed.SandboxParams.k_tileWidth=10;
box2d.Testbed.SandboxParams.k_tileHeight=11;box2d.Testbed.SandboxParams.k_defaultEmitterRate=30;box2d.Testbed.SandboxParams.k_defaultEmitterSize=3;box2d.Testbed.SandboxParams.k_particleExitSpeedY=-9.8;box2d.Testbed.SandboxParams.k_pumpForce=600;box2d.Testbed.SandboxParams.k_numberOfSpecialParticles=256;box2d.Testbed.SpecialParticleTracker=function(){box2d.b2DestructionListener.call(this);this.__ctor__()};goog.inherits(box2d.Testbed.SpecialParticleTracker,box2d.b2DestructionListener);
box2d.Testbed.SpecialParticleTracker.prototype.m_particles=null;box2d.Testbed.SpecialParticleTracker.prototype.m_world=null;box2d.Testbed.SpecialParticleTracker.prototype.m_particleSystem=null;box2d.Testbed.SpecialParticleTracker.prototype.m_colorOscillationTime=0;box2d.Testbed.SpecialParticleTracker.prototype.m_colorOscillationPeriod=2;box2d.Testbed.SpecialParticleTracker.prototype.__ctor__=function(){this.m_particles=[]};box2d.Testbed.SpecialParticleTracker.prototype.__dtor__=function(){this.m_world.SetDestructionListener(null)};
box2d.Testbed.SpecialParticleTracker.prototype.Init=function(a,c){box2d.b2Assert(null!==a);box2d.b2Assert(null!==c);this.m_world=a;this.m_particleSystem=c;this.m_world.SetDestructionListener(this)};
box2d.Testbed.SpecialParticleTracker.prototype.Add=function(a,c){box2d.b2Assert(null!==this.m_particleSystem);for(var b=0;b<c&&this.m_particles.length<box2d.Testbed.SandboxParams.k_numberOfSpecialParticles;++b){var d=a[b];this.m_particleSystem.SetParticleFlags(d,this.m_particleSystem.GetFlagsBuffer()[d]|box2d.b2ParticleFlag.b2_destructionListenerParticle);this.m_particles.push(this.m_particleSystem.GetParticleHandleFromIndex(d))}};
box2d.Testbed.SpecialParticleTracker.prototype.Step=function(a){a=this.m_colorOscillationTime+a;var c=this.m_colorOscillationPeriod;this.m_colorOscillationTime=a-Math.floor(a/c)*c;a=2*Math.abs(this.m_colorOscillationTime/this.m_colorOscillationPeriod-.5);a=new box2d.b2ParticleColor(128+128*(1-a),128+256*Math.abs(.5-a),128+128*a,255);for(c=0;c<this.m_particles.length;++c)this.m_particleSystem.GetColorBuffer()[this.m_particles[c].GetIndex()].Copy(a)};
box2d.Testbed.SpecialParticleTracker.prototype.SayGoodbyeJoint=function(a){};box2d.Testbed.SpecialParticleTracker.prototype.SayGoodbyeFixture=function(a){};box2d.Testbed.SpecialParticleTracker.prototype.SayGoodbyeParticleGroup=function(a){};box2d.Testbed.SpecialParticleTracker.prototype.SayGoodbyeParticle=function(a,c){if(a===this.m_particleSystem){var b=this.m_particles.length;this.m_particles=this.m_particles.filter(function(a){return a.GetIndex()!==c});box2d.b2Assert(1===b-this.m_particles.length)}};
box2d.Testbed.Sandbox=function(a,c){box2d.Testbed.Test.call(this,a,c);this.__ctor__()};goog.inherits(box2d.Testbed.Sandbox,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Sandbox",box2d.Testbed.Sandbox);box2d.Testbed.Sandbox.prototype.m_faucetEmitterIndex=0;box2d.Testbed.Sandbox.prototype.m_pumpIndex=0;box2d.Testbed.Sandbox.prototype.m_pumpTimer=0;box2d.Testbed.Sandbox.prototype.m_particleFlags=0;box2d.Testbed.Sandbox.prototype.m_pumpForce=null;
box2d.Testbed.Sandbox.prototype.m_killFieldShape=null;box2d.Testbed.Sandbox.prototype.m_killFieldTransform=null;box2d.Testbed.Sandbox.prototype.m_pumps=null;box2d.Testbed.Sandbox.prototype.m_emitters=null;box2d.Testbed.Sandbox.prototype.m_specialTracker=null;
box2d.Testbed.Sandbox.k_paramValues=[new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"water"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_waterParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions|box2d.Testbed.ParticleParameter.Options.OptionStrictContacts,"water (strict)"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_tensileParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"tensile"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"viscous"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"tensile powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle|
box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"viscous powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle|box2d.b2ParticleFlag.b2_tensileParticle|box2d.b2ParticleFlag.b2_powderParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,"viscous tensile powder"),new box2d.Testbed.ParticleParameter.Value(box2d.b2ParticleFlag.b2_viscousParticle|box2d.b2ParticleFlag.b2_tensileParticle,box2d.Testbed.ParticleParameter.k_DefaultOptions,
"tensile viscous water")];box2d.Testbed.Sandbox.k_paramDef=[new box2d.Testbed.ParticleParameter.Definition(box2d.Testbed.Sandbox.k_paramValues)];box2d.Testbed.Sandbox.k_paramDefCount=box2d.Testbed.Sandbox.k_paramDef.length;
box2d.Testbed.Sandbox.prototype.__ctor__=function(){var a=new box2d.b2BodyDef,a=this.m_world.CreateBody(a);this.m_emitters=[];for(var c=0;c<box2d.Testbed.SandboxParams.k_maxEmitters;c++)this.m_emitters[c]=null;this.m_pumps=[];for(c=0;c<box2d.Testbed.SandboxParams.k_maxPumps;c++)this.m_pumps[c]=null;this.m_world.SetGravity(new box2d.b2Vec2(0,-20));var c=new box2d.b2PolygonShape,b=[new box2d.b2Vec2(-40,-10),new box2d.b2Vec2(40,-10),new box2d.b2Vec2(40,0),new box2d.b2Vec2(-40,0)];c.Set(b,4);a.CreateFixture(c,
0);c=new box2d.b2PolygonShape;b=[new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldLeftEdge-20,-1),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldLeftEdge,-1),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldLeftEdge,50),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldLeftEdge-20,50)];c.Set(b,4);a.CreateFixture(c,0);c=new box2d.b2PolygonShape;b=[new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldRightEdge,-1),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldRightEdge+
20,-1),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldRightEdge+20,50),new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldRightEdge,50)];c.Set(b,4);a.CreateFixture(c,0);this.m_particleSystem.SetRadius(.25);this.m_specialTracker=new box2d.Testbed.SpecialParticleTracker;this.m_specialTracker.Init(this.m_world,this.m_particleSystem);this.m_pumpTimer=0;this.SetupMaze();this.m_killFieldShape=new box2d.b2PolygonShape;this.m_killFieldShape.SetAsBox(box2d.Testbed.SandboxParams.k_playfieldRightEdge-
box2d.Testbed.SandboxParams.k_playfieldLeftEdge,1);this.m_killFieldTransform=new box2d.b2Transform;a=new box2d.b2Vec2(-20,1);this.m_killFieldTransform.Set(a,0);box2d.Testbed.TestMain.SetParticleParameters(box2d.Testbed.Sandbox.k_paramDef,box2d.Testbed.Sandbox.k_paramDefCount);this.m_particleFlags=box2d.Testbed.TestMain.GetParticleParameterValue();box2d.Testbed.TestMain.SetRestartOnParticleParameterChange(!1)};
box2d.Testbed.Sandbox.prototype.__dtor__=function(){for(var a=0;a<this.m_faucetEmitterIndex;a++)this.m_emitters[a]=null};
box2d.Testbed.Sandbox.prototype.SetupMaze=function(){box2d.b2Assert(110==box2d.Testbed.SandboxParams.k_tileWidth*box2d.Testbed.SandboxParams.k_tileHeight);this.m_pumpIndex=this.m_faucetEmitterIndex=0;var a=new box2d.b2PolygonShape;a.SetAsBox(box2d.Testbed.SandboxParams.k_tileRadius,box2d.Testbed.SandboxParams.k_tileRadius);var c=box2d.b2Vec2.MakeArray(3);c[0].Set(-box2d.Testbed.SandboxParams.k_tileRadius,-box2d.Testbed.SandboxParams.k_tileRadius);c[1].Set(box2d.Testbed.SandboxParams.k_tileRadius,
box2d.Testbed.SandboxParams.k_tileRadius);c[2].Set(box2d.Testbed.SandboxParams.k_tileRadius,-box2d.Testbed.SandboxParams.k_tileRadius);var b=new box2d.b2PolygonShape;b.Set(c,3);c[1].Set(-box2d.Testbed.SandboxParams.k_tileRadius,box2d.Testbed.SandboxParams.k_tileRadius);var d=new box2d.b2PolygonShape;d.Set(c,3);c=new box2d.b2CircleShape;c.m_radius=.7*box2d.Testbed.SandboxParams.k_tileRadius;var e=new box2d.b2ParticleColor(255,128,128,255),f=new box2d.b2ParticleColor(128,255,128,255),g=new box2d.b2ParticleColor(128,
128,255,255);this.m_pumpForce=new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_pumpForce,0);for(var h=0;h<box2d.Testbed.SandboxParams.k_tileWidth;h++)for(var k=0;k<box2d.Testbed.SandboxParams.k_tileHeight;k++){var l="# r#g #r##  /#  #  # ###     pA  #  /##### # /#  C  /# #   # ### # / # ## p /#   #  ####  A        /#####KK###"[k*box2d.Testbed.SandboxParams.k_tileWidth+h],m=new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_playfieldLeftEdge+2*box2d.Testbed.SandboxParams.k_tileRadius*h+box2d.Testbed.SandboxParams.k_tileRadius,
box2d.Testbed.SandboxParams.k_playfieldBottomEdge-2*box2d.Testbed.SandboxParams.k_tileRadius*k+box2d.Testbed.SandboxParams.k_tileRadius);switch(l){case "#":this.CreateBody(m,a,box2d.b2BodyType.b2_staticBody);break;case "A":this.CreateBody(m,d,box2d.b2BodyType.b2_staticBody);break;case "/":this.CreateBody(m,b,box2d.b2BodyType.b2_staticBody);break;case "C":this.CreateBody(m,c,box2d.b2BodyType.b2_dynamicBody);break;case "p":this.AddPump(m);break;case "b":this.AddFaucetEmitter(m,g);break;case "r":this.AddFaucetEmitter(m,
e);break;case "g":this.AddFaucetEmitter(m,f)}}};box2d.Testbed.Sandbox.prototype.CreateBody=function(a,c,b){var d=new box2d.b2BodyDef;d.position.Copy(a);d.type=b;this.m_world.CreateBody(d).CreateFixture(c,10)};
box2d.Testbed.Sandbox.prototype.AddPump=function(a){box2d.b2Assert(this.m_pumpIndex<box2d.Testbed.SandboxParams.k_maxPumps);var c=new box2d.b2PolygonShape;c.SetAsBox(box2d.Testbed.SandboxParams.k_pumpRadius,box2d.Testbed.SandboxParams.k_pumpRadius);var b=new box2d.b2BodyDef;b.position.Copy(a);b.type=box2d.b2BodyType.b2_dynamicBody;b.angle=0;b=this.m_world.CreateBody(b);b.CreateFixture(c,5);c=new box2d.b2PrismaticJointDef;c.bodyA=this.m_groundBody;c.bodyB=b;c.collideConnected=!1;c.localAxisA.Set(1,
0);c.localAnchorA.Copy(a);this.m_world.CreateJoint(c);this.m_pumps[this.m_pumpIndex]=b;this.m_pumpIndex++};
box2d.Testbed.Sandbox.prototype.AddFaucetEmitter=function(a,c){box2d.b2Assert(this.m_faucetEmitterIndex<box2d.Testbed.SandboxParams.k_maxPumps);var b=new box2d.b2Vec2(0,box2d.Testbed.SandboxParams.k_particleExitSpeedY),d=new box2d.Testbed.RadialEmitter;d.SetParticleSystem(this.m_particleSystem);d.SetPosition(a);d.SetVelocity(b);d.SetSize(new box2d.b2Vec2(box2d.Testbed.SandboxParams.k_defaultEmitterSize,0));d.SetEmitRate(box2d.Testbed.SandboxParams.k_defaultEmitterRate);d.SetColor(c);this.m_emitters[this.m_faucetEmitterIndex]=
d;this.m_faucetEmitterIndex++};box2d.Testbed.Sandbox.prototype.JointDestroyed=function(a){box2d.Testbed.Test.prototype.JointDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"JointDestroyed",box2d.Testbed.Sandbox.prototype.JointDestroyed);box2d.Testbed.Sandbox.prototype.ParticleGroupDestroyed=function(a){box2d.Testbed.Test.prototype.ParticleGroupDestroyed.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"ParticleGroupDestroyed",box2d.Testbed.Sandbox.prototype.ParticleGroupDestroyed);
box2d.Testbed.Sandbox.prototype.BeginContact=function(a){box2d.Testbed.Test.prototype.BeginContact.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"BeginContact",box2d.Testbed.Sandbox.prototype.BeginContact);box2d.Testbed.Sandbox.prototype.EndContact=function(a){box2d.Testbed.Test.prototype.EndContact.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"EndContact",box2d.Testbed.Sandbox.prototype.EndContact);
box2d.Testbed.Sandbox.prototype.PreSolve=function(a,c){box2d.Testbed.Test.prototype.PreSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"PreSolve",box2d.Testbed.Sandbox.prototype.PreSolve);box2d.Testbed.Sandbox.prototype.PostSolve=function(a,c){box2d.Testbed.Test.prototype.PostSolve.call(this,a,c)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"PostSolve",box2d.Testbed.Sandbox.prototype.PostSolve);
box2d.Testbed.Sandbox.prototype.Keyboard=function(a){box2d.Testbed.Test.prototype.Keyboard.call(this,a);var c=0;switch(a){case goog.events.KeyCodes.A:this.m_particleFlags=0;break;case goog.events.KeyCodes.Q:c=box2d.b2ParticleFlag.b2_powderParticle;break;case goog.events.KeyCodes.T:c=box2d.b2ParticleFlag.b2_tensileParticle;break;case goog.events.KeyCodes.V:c=box2d.b2ParticleFlag.b2_viscousParticle;break;case goog.events.KeyCodes.W:c=box2d.b2ParticleFlag.b2_wallParticle}c&&(this.m_particleFlags=this.m_particleFlags&
c?this.m_particleFlags&~c:this.m_particleFlags|c);box2d.Testbed.TestMain.SetParticleParameterValue(this.m_particleFlags)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"Keyboard",box2d.Testbed.Sandbox.prototype.Keyboard);box2d.Testbed.Sandbox.prototype.KeyboardUp=function(a){box2d.Testbed.Test.prototype.KeyboardUp.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"KeyboardUp",box2d.Testbed.Sandbox.prototype.KeyboardUp);
box2d.Testbed.Sandbox.prototype.MouseDown=function(a){box2d.Testbed.Test.prototype.MouseDown.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"MouseDown",box2d.Testbed.Sandbox.prototype.MouseDown);box2d.Testbed.Sandbox.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"MouseUp",box2d.Testbed.Sandbox.prototype.MouseUp);
box2d.Testbed.Sandbox.prototype.MouseMove=function(a){box2d.Testbed.Test.prototype.MouseMove.call(this,a)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"MouseMove",box2d.Testbed.Sandbox.prototype.MouseMove);
box2d.Testbed.Sandbox.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_particleFlags=box2d.Testbed.TestMain.GetParticleParameterValue();a=1/a.hz;for(var c=0;c<this.m_faucetEmitterIndex;c++){var b=[],d=this.m_emitters[c];d.SetParticleFlags(this.m_particleFlags);d=d.Step(a,b,box2d.Testbed.SandboxParams.k_numberOfSpecialParticles);this.m_specialTracker.Add(b,d)}this.m_specialTracker.Step(a);this.m_particleSystem.DestroyParticlesInShape(this.m_killFieldShape,this.m_killFieldTransform);
for(c=0;c<this.m_pumpIndex;c++)this.m_pumps[c].ApplyForceToCenter(this.m_pumpForce,!0),this.m_pumpTimer+=a,this.m_pumpTimer>box2d.Testbed.SandboxParams.k_flipTime&&(this.m_pumpTimer-=box2d.Testbed.SandboxParams.k_flipTime,this.m_pumpForce.x*=-1);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (a) zero out (water), (q) powder");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"      (t) tensile, (v) viscous");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.Sandbox.prototype,"Step",box2d.Testbed.Sandbox.prototype.Step);box2d.Testbed.Sandbox.prototype.GetDefaultViewZoom=function(){return box2d.Testbed.Test.prototype.GetDefaultViewZoom.call(this)};goog.exportProperty(box2d.Testbed.Sandbox.prototype,"GetDefaultViewZoom",box2d.Testbed.Sandbox.prototype.GetDefaultViewZoom);box2d.Testbed.Sandbox.Create=function(a,c){return new box2d.Testbed.Sandbox(a,c)};goog.exportProperty(box2d.Testbed.Sandbox,"Create",box2d.Testbed.Sandbox.Create);box2d.Testbed.SensorTest=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodies=Array(box2d.Testbed.SensorTest.e_count);this.m_touching=Array(box2d.Testbed.SensorTest.e_count);for(var b=0;b<box2d.Testbed.SensorTest.e_count;++b)this.m_touching[b]=Array(1);var d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2CircleShape;e.m_radius=5;e.m_p.Set(0,10);var f=new box2d.b2FixtureDef;
f.shape=e;f.isSensor=!0;this.m_sensor=b.CreateFixture(f);e=new box2d.b2CircleShape;e.m_radius=1;for(b=0;b<box2d.Testbed.SensorTest.e_count;++b)d.type=box2d.b2BodyType.b2_dynamicBody,d.position.Set(-10+3*b,20),d.userData=this.m_touching[b],this.m_touching[b][0]=!1,this.m_bodies[b]=this.m_world.CreateBody(d),this.m_bodies[b].CreateFixture(e,1)};goog.inherits(box2d.Testbed.SensorTest,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.SensorTest",box2d.Testbed.SensorTest);
box2d.Testbed.SensorTest.e_count=7;goog.exportProperty(box2d.Testbed.SensorTest,"e_count",box2d.Testbed.SensorTest.e_count);box2d.Testbed.SensorTest.prototype.m_sensor=null;goog.exportProperty(box2d.Testbed.SensorTest.prototype,"m_sensor",box2d.Testbed.SensorTest.prototype.m_sensor);box2d.Testbed.SensorTest.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.SensorTest.prototype,"m_bodies",box2d.Testbed.SensorTest.prototype.m_bodies);box2d.Testbed.SensorTest.prototype.m_touching=null;
goog.exportProperty(box2d.Testbed.SensorTest.prototype,"m_touching",box2d.Testbed.SensorTest.prototype.m_touching);box2d.Testbed.SensorTest.prototype.BeginContact=function(a){var c=a.GetFixtureA();a=a.GetFixtureB();if(c===this.m_sensor){var b=a.GetBody().GetUserData();b&&(b[0]=!0)}a===this.m_sensor&&(b=c.GetBody().GetUserData())&&(b[0]=!0)};goog.exportProperty(box2d.Testbed.SensorTest.prototype,"BeginContact",box2d.Testbed.SensorTest.prototype.BeginContact);
box2d.Testbed.SensorTest.prototype.EndContact=function(a){var c=a.GetFixtureA();a=a.GetFixtureB();if(c===this.m_sensor){var b=a.GetBody().GetUserData();b&&(b[0]=!1)}a===this.m_sensor&&(b=c.GetBody().GetUserData())&&(b[0]=!1)};goog.exportProperty(box2d.Testbed.SensorTest.prototype,"EndContact",box2d.Testbed.SensorTest.prototype.EndContact);
box2d.Testbed.SensorTest.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);for(a=0;a<box2d.Testbed.SensorTest.e_count;++a)if(this.m_touching[a][0]){var c=this.m_bodies[a],b=this.m_sensor.GetBody(),d=this.m_sensor.GetShape(),d=b.GetWorldPoint(d.m_p,new box2d.b2Vec2),b=c.GetPosition(),d=box2d.b2Sub_V2_V2(d,b,new box2d.b2Vec2);d.LengthSquared()<box2d.b2_epsilon_sq||(d.Normalize(),d=box2d.b2Mul_S_V2(100,d,new box2d.b2Vec2),c.ApplyForce(d,b))}};
goog.exportProperty(box2d.Testbed.SensorTest.prototype,"Step",box2d.Testbed.SensorTest.prototype.Step);box2d.Testbed.SensorTest.Create=function(a,c){return new box2d.Testbed.SensorTest(a,c)};goog.exportProperty(box2d.Testbed.SensorTest,"Create",box2d.Testbed.SensorTest.Create);box2d.Testbed.ShapeEditing=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,10);this.m_body=this.m_world.CreateBody(b);d=new box2d.b2PolygonShape;d.SetAsBox(4,4,new box2d.b2Vec2(0,0),0);this.m_fixture1=this.m_body.CreateFixture(d,10);this.m_fixture2=null;this.m_sensor=
!1};goog.inherits(box2d.Testbed.ShapeEditing,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ShapeEditing",box2d.Testbed.ShapeEditing);box2d.Testbed.ShapeEditing.prototype.m_body=null;goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"m_body",box2d.Testbed.ShapeEditing.prototype.m_body);box2d.Testbed.ShapeEditing.prototype.m_fixture1=null;goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"m_fixture1",box2d.Testbed.ShapeEditing.prototype.m_fixture1);
box2d.Testbed.ShapeEditing.prototype.m_fixture2=null;goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"m_fixture2",box2d.Testbed.ShapeEditing.prototype.m_fixture2);box2d.Testbed.ShapeEditing.prototype.m_sensor=!1;goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"m_sensor",box2d.Testbed.ShapeEditing.prototype.m_sensor);
box2d.Testbed.ShapeEditing.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.C:null===this.m_fixture2&&(a=new box2d.b2CircleShape,a.m_radius=3,a.m_p.Set(.5,-4),this.m_fixture2=this.m_body.CreateFixture(a,10),this.m_body.SetAwake(!0));break;case goog.events.KeyCodes.D:null!==this.m_fixture2&&(this.m_body.DestroyFixture(this.m_fixture2),this.m_fixture2=null,this.m_body.SetAwake(!0));break;case goog.events.KeyCodes.S:null!==this.m_fixture2&&(this.m_sensor=!this.m_sensor,this.m_fixture2.SetSensor(this.m_sensor))}};
goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"Keyboard",box2d.Testbed.ShapeEditing.prototype.Keyboard);box2d.Testbed.ShapeEditing.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press: (c) create a shape, (d) destroy a shape.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"sensor = %d",this.m_sensor?1:0);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.ShapeEditing.prototype,"Step",box2d.Testbed.ShapeEditing.prototype.Step);box2d.Testbed.ShapeEditing.Create=function(a,c){return new box2d.Testbed.ShapeEditing(a,c)};goog.exportProperty(box2d.Testbed.ShapeEditing,"Create",box2d.Testbed.ShapeEditing.Create);box2d.Testbed.SliderCrank=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);var f=b,e=new box2d.b2PolygonShape;e.SetAsBox(.5,2);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,7);d=this.m_world.CreateBody(d);d.CreateFixture(e,2);e=new box2d.b2RevoluteJointDef;e.Initialize(f,d,new box2d.b2Vec2(0,5));e.motorSpeed=
1*box2d.b2_pi;e.maxMotorTorque=1E4;e.enableMotor=!0;this.m_joint1=this.m_world.CreateJoint(e);f=d;e=new box2d.b2PolygonShape;e.SetAsBox(.5,4);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,13);d=this.m_world.CreateBody(d);d.CreateFixture(e,2);e=new box2d.b2RevoluteJointDef;e.Initialize(f,d,new box2d.b2Vec2(0,9));e.enableMotor=!1;this.m_world.CreateJoint(e);f=d;e=new box2d.b2PolygonShape;e.SetAsBox(1.5,1.5);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;
d.fixedRotation=!0;d.position.Set(0,17);d=this.m_world.CreateBody(d);d.CreateFixture(e,2);e=new box2d.b2RevoluteJointDef;e.Initialize(f,d,new box2d.b2Vec2(0,17));this.m_world.CreateJoint(e);f=new box2d.b2PrismaticJointDef;f.Initialize(b,d,new box2d.b2Vec2(0,17),new box2d.b2Vec2(0,1));f.maxMotorForce=1E3;f.enableMotor=!0;this.m_joint2=this.m_world.CreateJoint(f);e=new box2d.b2PolygonShape;e.SetAsBox(1.5,1.5);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,23);d=this.m_world.CreateBody(d);
d.CreateFixture(e,2)};goog.inherits(box2d.Testbed.SliderCrank,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.SliderCrank",box2d.Testbed.SliderCrank);box2d.Testbed.SliderCrank.e_count=30;goog.exportProperty(box2d.Testbed.SliderCrank,"e_count",box2d.Testbed.SliderCrank.e_count);box2d.Testbed.SliderCrank.prototype.m_joint1=null;goog.exportProperty(box2d.Testbed.SliderCrank.prototype,"m_joint1",box2d.Testbed.SliderCrank.prototype.m_joint1);box2d.Testbed.SliderCrank.prototype.m_joint2=null;
goog.exportProperty(box2d.Testbed.SliderCrank.prototype,"m_joint2",box2d.Testbed.SliderCrank.prototype.m_joint2);box2d.Testbed.SliderCrank.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.F:this.m_joint2.EnableMotor(!this.m_joint2.IsMotorEnabled());this.m_joint2.GetBodyB().SetAwake(!0);break;case goog.events.KeyCodes.M:this.m_joint1.EnableMotor(!this.m_joint1.IsMotorEnabled()),this.m_joint1.GetBodyB().SetAwake(!0)}};
goog.exportProperty(box2d.Testbed.SliderCrank.prototype,"Keyboard",box2d.Testbed.SliderCrank.prototype.Keyboard);box2d.Testbed.SliderCrank.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: (f) toggle friction, (m) toggle motor");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;a=this.m_joint1.GetMotorTorque(a.hz);this.m_debugDraw.DrawString(5,this.m_textLine,"Motor Torque = %5.0f",a);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};
goog.exportProperty(box2d.Testbed.SliderCrank.prototype,"Step",box2d.Testbed.SliderCrank.prototype.Step);box2d.Testbed.SliderCrank.Create=function(a,c){return new box2d.Testbed.SliderCrank(a,c)};goog.exportProperty(box2d.Testbed.SliderCrank,"Create",box2d.Testbed.SliderCrank.Create);box2d.Testbed.Soup=function(a,c){box2d.Testbed.Test.call(this,a,c);this.InitializeParticleParameters(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_barrierParticle);var b=new box2d.b2BodyDef;this.m_ground=this.m_world.CreateBody(b);var b=new box2d.b2PolygonShape,d=[new box2d.b2Vec2(-4,-1),new box2d.b2Vec2(4,-1),new box2d.b2Vec2(4,0),new box2d.b2Vec2(-4,0)];b.Set(d,4);this.m_ground.CreateFixture(b,0);b=new box2d.b2PolygonShape;d=[new box2d.b2Vec2(-4,-.1),new box2d.b2Vec2(-2,-.1),new box2d.b2Vec2(-2,
2),new box2d.b2Vec2(-4,3)];b.Set(d,4);this.m_ground.CreateFixture(b,0);b=new box2d.b2PolygonShape;d=[new box2d.b2Vec2(2,-.1),new box2d.b2Vec2(4,-.1),new box2d.b2Vec2(4,3),new box2d.b2Vec2(2,2)];b.Set(d,4);this.m_ground.CreateFixture(b,0);this.m_particleSystem.SetRadius(.035*3);b=new box2d.b2PolygonShape;b.SetAsBox(2,1,new box2d.b2Vec2(0,1),0);d=new box2d.b2ParticleGroupDef;d.shape=b;d.flags=box2d.Testbed.TestMain.GetParticleParameterValue();b=this.m_particleSystem.CreateParticleGroup(d);d.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&
this.ColorParticleGroup(b,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2CircleShape;b.m_p.Set(0,.5);b.m_radius=.1;d.CreateFixture(b,.1);this.m_particleSystem.DestroyParticlesInShape(b,d.GetTransform());b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2PolygonShape;b.SetAsBox(.1,.1,new box2d.b2Vec2(-1,.5),0);d.CreateFixture(b,.1);this.m_particleSystem.DestroyParticlesInShape(b,d.GetTransform());
b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2PolygonShape;b.SetAsBox(.1,.1,new box2d.b2Vec2(1,.5),.5);d.CreateFixture(b,.1);this.m_particleSystem.DestroyParticlesInShape(b,d.GetTransform());b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(0,2),new box2d.b2Vec2(.1,2.1));d.CreateFixture(b,1);var e=new box2d.b2MassData;e.mass=.1;e.center.x=.5*b.m_vertex1.x+
b.m_vertex2.x;e.center.y=.5*b.m_vertex1.y+b.m_vertex2.y;e.I=0;d.SetMassData(e);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(.3,2),new box2d.b2Vec2(.4,2.1));d.CreateFixture(b,1);e=new box2d.b2MassData;e.mass=.1;e.center.x=.5*b.m_vertex1.x+b.m_vertex2.x;e.center.y=.5*b.m_vertex1.y+b.m_vertex2.y;e.I=0;d.SetMassData(e);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;d=this.m_world.CreateBody(b);b=
new box2d.b2EdgeShape;b.Set(new box2d.b2Vec2(-.3,2.1),new box2d.b2Vec2(-.2,2));d.CreateFixture(b,1);e=new box2d.b2MassData;e.mass=.1;e.center.x=.5*b.m_vertex1.x+b.m_vertex2.x;e.center.y=.5*b.m_vertex1.y+b.m_vertex2.y;e.I=0;d.SetMassData(e)};goog.inherits(box2d.Testbed.Soup,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Soup",box2d.Testbed.Soup);box2d.Testbed.Soup.prototype.m_ground=null;box2d.Testbed.Soup.prototype.GetDefaultViewZoom=function(){return.1};
goog.exportProperty(box2d.Testbed.Soup.prototype,"GetDefaultViewZoom",box2d.Testbed.Soup.prototype.GetDefaultViewZoom);box2d.Testbed.Soup.Create=function(a,c){return new box2d.Testbed.Soup(a,c)};goog.exportProperty(box2d.Testbed.Soup,"Create",box2d.Testbed.Soup.Create);box2d.Testbed.SoupStirrer=function(a,c){box2d.Testbed.Soup.call(this,a,c);this.m_particleSystem.SetDamping(1);var b=new box2d.b2CircleShape;b.m_p.Set(0,.7);b.m_radius=.4;var d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;this.m_stirrer=this.m_world.CreateBody(d);this.m_stirrer.CreateFixture(b,1);d=new box2d.b2Transform;d.SetIdentity();this.m_particleSystem.DestroyParticlesInShape(b,d);this.CreateJoint()};goog.inherits(box2d.Testbed.SoupStirrer,box2d.Testbed.Soup);
goog.exportSymbol("box2d.Testbed.SoupStirrer",box2d.Testbed.SoupStirrer);box2d.Testbed.SoupStirrer.prototype.m_stirrer=null;box2d.Testbed.SoupStirrer.prototype.m_joint=null;box2d.Testbed.SoupStirrer.prototype.m_oscillationOffset=0;
box2d.Testbed.SoupStirrer.prototype.CreateJoint=function(){box2d.b2Assert(!this.m_joint);var a=new box2d.b2PrismaticJointDef;a.bodyA=this.m_ground;a.bodyB=this.m_stirrer;a.collideConnected=!0;a.localAxisA.Set(1,0);a.localAnchorA.Copy(this.m_stirrer.GetPosition());this.m_joint=this.m_world.CreateJoint(a)};box2d.Testbed.SoupStirrer.prototype.ToggleJoint=function(){this.m_joint?(this.m_world.DestroyJoint(this.m_joint),this.m_joint=null):this.CreateJoint()};
box2d.Testbed.SoupStirrer.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.T:this.ToggleJoint();break;default:box2d.Testbed.Test.prototype.Keyboard.call(this,a)}};goog.exportProperty(box2d.Testbed.SoupStirrer.prototype,"Keyboard",box2d.Testbed.SoupStirrer.prototype.Keyboard);box2d.Testbed.SoupStirrer.prototype.MouseUp=function(a){box2d.Testbed.Test.prototype.MouseUp.call(this,a);this.InSoup(a)&&this.ToggleJoint()};
goog.exportProperty(box2d.Testbed.SoupStirrer.prototype,"MouseUp",box2d.Testbed.SoupStirrer.prototype.MouseUp);box2d.Testbed.SoupStirrer.prototype.InSoup=function(a){return-1<a.y&&2>a.y&&-3<a.x&&3>a.x};
box2d.Testbed.SoupStirrer.prototype.Step=function(a){this.m_oscillationOffset+=1/a.hz;5<this.m_oscillationOffset&&(this.m_oscillationOffset-=5);var c=.4*this.m_oscillationOffset*box2d.b2_pi,c=(new box2d.b2Vec2(Math.sin(c),Math.cos(c))).SelfMul(10);this.InSoup(this.m_stirrer.GetPosition())&&2>this.m_stirrer.GetLinearVelocity().Length()&&this.m_stirrer.ApplyForceToCenter(c,!0);box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.SoupStirrer.prototype,"Step",box2d.Testbed.SoupStirrer.prototype.Step);
box2d.Testbed.SoupStirrer.Create=function(a,c){return new box2d.Testbed.SoupStirrer(a,c)};goog.exportProperty(box2d.Testbed.SoupStirrer,"Create",box2d.Testbed.SoupStirrer.Create);box2d.Testbed.ParticleVFX=function(a,c,b,d,e,f){this.m_origColor=new box2d.b2ParticleColor;var g=new box2d.b2CircleShape;g.m_p.Copy(c);g.m_radius=b;b=new box2d.b2ParticleGroupDef;b.flags=f;b.shape=g;this.m_origColor.Set(Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255);b.color.Copy(this.m_origColor);this.m_particleSystem=a;this.m_pg=this.m_particleSystem.CreateParticleGroup(b);this.m_initialLifetime=this.m_remainingLifetime=e;this.m_halfLifetime=.5*this.m_initialLifetime;
a=this.m_pg.GetBufferIndex();e=this.m_particleSystem.GetPositionBuffer();f=this.m_particleSystem.GetVelocityBuffer();for(g=a;g<a+this.m_pg.GetParticleCount();g++)box2d.b2Sub_V2_V2(e[g],c,f[g]),box2d.b2Mul_V2_S(f[g],d,f[g])};box2d.Testbed.ParticleVFX.prototype.m_initialLifetime=0;box2d.Testbed.ParticleVFX.prototype.m_remainingLifetime=0;box2d.Testbed.ParticleVFX.prototype.m_halfLifetime=0;box2d.Testbed.ParticleVFX.prototype.m_pg=null;box2d.Testbed.ParticleVFX.prototype.m_particleSystem=null;
box2d.Testbed.ParticleVFX.prototype.m_origColor=null;box2d.Testbed.ParticleVFX.prototype.Drop=function(){this.m_pg.DestroyParticles(!1);this.m_pg=null};box2d.Testbed.ParticleVFX.prototype.ColorCoeff=function(){return this.m_remainingLifetime>=this.m_halfLifetime?1:1-(this.m_halfLifetime-this.m_remainingLifetime)/this.m_halfLifetime};
box2d.Testbed.ParticleVFX.prototype.Step=function(a){if(0<this.m_remainingLifetime){this.m_remainingLifetime=Math.max(this.m_remainingLifetime-a,0);a=this.ColorCoeff();for(var c=this.m_particleSystem.GetColorBuffer(),b=this.m_pg.GetBufferIndex(),d=b;d<b+this.m_pg.GetParticleCount();d++){var e=c[d];e.SelfMul_0_1(a);e.a=this.m_origColor.a}}};box2d.Testbed.ParticleVFX.prototype.IsDone=function(){return 0>=this.m_remainingLifetime};
box2d.Testbed.Sparky=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_contactPoint=new box2d.b2Vec2;this.m_VFX=[];for(var b=this.m_VFXIndex=0;b<box2d.Testbed.Sparky.c_maxVFX;b++)this.m_VFX[b]=null;this.CreateWalls();this.m_particleSystem.SetRadius(.5);for(b=0;b<box2d.Testbed.Sparky.c_maxCircles;b++){var d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;var d=this.m_world.CreateBody(d),e=new box2d.b2CircleShape;e.m_p.Set(3*box2d.Testbed.RandomFloat(),box2d.Testbed.Sparky.SHAPE_HEIGHT_OFFSET+
box2d.Testbed.Sparky.SHAPE_OFFSET*b);e.m_radius=2;d.CreateFixture(e,.5).SetUserData({spark:!0})}box2d.Testbed.TestMain.SetRestartOnParticleParameterChange(!1);box2d.Testbed.TestMain.SetParticleParameterValue(box2d.b2ParticleFlag.b2_powderParticle)};goog.inherits(box2d.Testbed.Sparky,box2d.Testbed.Test);box2d.Testbed.Sparky.prototype.m_VFXIndex=0;box2d.Testbed.Sparky.c_maxCircles=3;box2d.Testbed.Sparky.c_maxVFX=20;box2d.Testbed.Sparky.SHAPE_HEIGHT_OFFSET=7;box2d.Testbed.Sparky.SHAPE_OFFSET=4.5;
box2d.Testbed.Sparky.prototype.m_VFX=null;box2d.Testbed.Sparky.prototype.m_contact=!1;box2d.Testbed.Sparky.prototype.m_contactPoint=null;box2d.Testbed.Sparky.prototype.BeginContact=function(a){box2d.Testbed.Test.prototype.BeginContact.call(this,a);var c=a.GetFixtureA().GetUserData(),b=a.GetFixtureB().GetUserData();if(c&&c.spark||b&&b.spark)c=new box2d.b2WorldManifold,a.GetWorldManifold(c),this.m_contactPoint.Copy(c.points[0]),this.m_contact=!0};
box2d.Testbed.Sparky.prototype.Step=function(a){var c=box2d.Testbed.TestMain.GetParticleParameterValue();box2d.Testbed.Test.prototype.Step.call(this,a);this.m_contact&&(this.AddVFX(this.m_contactPoint,c),this.m_contact=!1);for(c=0;c<box2d.Testbed.Sparky.c_maxVFX;c++){var b=this.m_VFX[c];null!==b&&(b.Step(1/a.hz),b.IsDone()&&(b.Drop(),this.m_VFX[c]=null))}};
box2d.Testbed.Sparky.prototype.AddVFX=function(a,c){var b=this.m_VFX[this.m_VFXIndex];null!==b&&(b.Drop(),this.m_VFX[this.m_VFXIndex]=null);this.m_VFX[this.m_VFXIndex]=new box2d.Testbed.ParticleVFX(this.m_particleSystem,a,box2d.Testbed.RandomFloat(1,2),box2d.Testbed.RandomFloat(10,20),box2d.Testbed.RandomFloat(.5,1),c);++this.m_VFXIndex>=box2d.Testbed.Sparky.c_maxVFX&&(this.m_VFXIndex=0)};
box2d.Testbed.Sparky.prototype.CreateWalls=function(){var a=new box2d.b2BodyDef,a=this.m_world.CreateBody(a),c=new box2d.b2PolygonShape,b=[new box2d.b2Vec2(-40,-10),new box2d.b2Vec2(40,-10),new box2d.b2Vec2(40,0),new box2d.b2Vec2(-40,0)];c.Set(b,4);a.CreateFixture(c,0);c=new box2d.b2PolygonShape;b=[new box2d.b2Vec2(-40,40),new box2d.b2Vec2(40,40),new box2d.b2Vec2(40,50),new box2d.b2Vec2(-40,50)];c.Set(b,4);a.CreateFixture(c,0);c=new box2d.b2PolygonShape;b=[new box2d.b2Vec2(-40,-1),new box2d.b2Vec2(-20,
-1),new box2d.b2Vec2(-20,40),new box2d.b2Vec2(-40,40)];c.Set(b,4);a.CreateFixture(c,0);c=new box2d.b2PolygonShape;b=[new box2d.b2Vec2(20,-1),new box2d.b2Vec2(40,-1),new box2d.b2Vec2(40,40),new box2d.b2Vec2(20,40)];c.Set(b,4);a.CreateFixture(c,0)};box2d.Testbed.Sparky.Create=function(a,c){return new box2d.Testbed.Sparky(a,c)};goog.exportSymbol("box2d.Testbed.Sparky.Create",box2d.Testbed.Sparky.Create);box2d.Testbed.SphereStack=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodies=Array(box2d.Testbed.SphereStack.e_count);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);d=new box2d.b2CircleShape;d.m_radius=1;for(var e=0;e<box2d.Testbed.SphereStack.e_count;++e)b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(0,4+3*e),this.m_bodies[e]=this.m_world.CreateBody(b),
this.m_bodies[e].CreateFixture(d,1),this.m_bodies[e].SetLinearVelocity(new box2d.b2Vec2(0,-50))};goog.inherits(box2d.Testbed.SphereStack,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.SphereStack",box2d.Testbed.SphereStack);box2d.Testbed.SphereStack.e_count=10;goog.exportProperty(box2d.Testbed.SphereStack,"e_count",box2d.Testbed.SphereStack.e_count);box2d.Testbed.SphereStack.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.SphereStack.prototype,"m_bodies",box2d.Testbed.SphereStack.prototype.m_bodies);
box2d.Testbed.SphereStack.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.SphereStack.prototype,"Step",box2d.Testbed.SphereStack.prototype.Step);box2d.Testbed.SphereStack.Create=function(a,c){return new box2d.Testbed.SphereStack(a,c)};goog.exportProperty(box2d.Testbed.SphereStack,"Create",box2d.Testbed.SphereStack.Create);box2d.Testbed.TheoJansen=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_offset=new box2d.b2Vec2;this.Construct()};goog.inherits(box2d.Testbed.TheoJansen,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TheoJansen",box2d.Testbed.TheoJansen);box2d.Testbed.TheoJansen.prototype.m_offset=null;goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_offset",box2d.Testbed.TheoJansen.prototype.m_offset);box2d.Testbed.TheoJansen.prototype.m_chassis=null;
goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_chassis",box2d.Testbed.TheoJansen.prototype.m_chassis);box2d.Testbed.TheoJansen.prototype.m_wheel=null;goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_wheel",box2d.Testbed.TheoJansen.prototype.m_wheel);box2d.Testbed.TheoJansen.prototype.m_motorJoint=null;goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_motorJoint",box2d.Testbed.TheoJansen.prototype.m_motorJoint);box2d.Testbed.TheoJansen.prototype.m_motorOn=!1;
goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_motorOn",box2d.Testbed.TheoJansen.prototype.m_motorOn);box2d.Testbed.TheoJansen.prototype.m_motorSpeed=0;goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"m_motorSpeed",box2d.Testbed.TheoJansen.prototype.m_motorSpeed);
box2d.Testbed.TheoJansen.prototype.CreateLeg=function(a,c){var b=new box2d.b2Vec2(5.4*a,-6.1),d=new box2d.b2Vec2(7.2*a,-1.2),e=new box2d.b2Vec2(4.3*a,-1.9),f=new box2d.b2Vec2(3.1*a,.8),g=new box2d.b2Vec2(6*a,1.5),h=new box2d.b2Vec2(2.5*a,3.7),k=new box2d.b2FixtureDef,l=new box2d.b2FixtureDef;k.filter.groupIndex=-1;l.filter.groupIndex=-1;k.density=1;l.density=1;var m=new box2d.b2PolygonShape,n=new box2d.b2PolygonShape;if(0<a){var p=[];p[0]=b;p[1]=d;p[2]=e;m.Set(p);p[0]=box2d.b2Vec2_zero;p[1]=box2d.b2Sub_V2_V2(g,
f,new box2d.b2Vec2);p[2]=box2d.b2Sub_V2_V2(h,f,new box2d.b2Vec2)}else p=[],p[0]=b,p[1]=e,p[2]=d,m.Set(p),p[0]=box2d.b2Vec2_zero,p[1]=box2d.b2Sub_V2_V2(h,f,new box2d.b2Vec2),p[2]=box2d.b2Sub_V2_V2(g,f,new box2d.b2Vec2);n.Set(p);k.shape=m;l.shape=n;b=new box2d.b2BodyDef;m=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;m.type=box2d.b2BodyType.b2_dynamicBody;b.position.Copy(this.m_offset);m.position.Copy(box2d.b2Add_V2_V2(f,this.m_offset,new box2d.b2Vec2));b.angularDamping=10;m.angularDamping=
10;b=this.m_world.CreateBody(b);m=this.m_world.CreateBody(m);b.CreateFixture(k);m.CreateFixture(l);k=new box2d.b2DistanceJointDef;k.dampingRatio=.5;k.frequencyHz=10;k.Initialize(b,m,box2d.b2Add_V2_V2(d,this.m_offset,new box2d.b2Vec2),box2d.b2Add_V2_V2(g,this.m_offset,new box2d.b2Vec2));this.m_world.CreateJoint(k);k.Initialize(b,m,box2d.b2Add_V2_V2(e,this.m_offset,new box2d.b2Vec2),box2d.b2Add_V2_V2(f,this.m_offset,new box2d.b2Vec2));this.m_world.CreateJoint(k);k.Initialize(b,this.m_wheel,box2d.b2Add_V2_V2(e,
this.m_offset,new box2d.b2Vec2),box2d.b2Add_V2_V2(c,this.m_offset,new box2d.b2Vec2));this.m_world.CreateJoint(k);k.Initialize(m,this.m_wheel,box2d.b2Add_V2_V2(h,this.m_offset,new box2d.b2Vec2),box2d.b2Add_V2_V2(c,this.m_offset,new box2d.b2Vec2));this.m_world.CreateJoint(k);d=new box2d.b2RevoluteJointDef;d.Initialize(m,this.m_chassis,box2d.b2Add_V2_V2(f,this.m_offset,new box2d.b2Vec2));this.m_world.CreateJoint(d)};goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"CreateLeg",box2d.Testbed.TheoJansen.prototype.CreateLeg);
box2d.Testbed.TheoJansen.prototype.Construct=function(){this.m_offset.Set(0,8);this.m_motorSpeed=2;this.m_motorOn=!0;var a=new box2d.b2Vec2(0,.8),c=new box2d.b2BodyDef,c=this.m_world.CreateBody(c),b=new box2d.b2EdgeShape;b.SetAsEdge(new box2d.b2Vec2(-50,0),new box2d.b2Vec2(50,0));c.CreateFixture(b,0);b.SetAsEdge(new box2d.b2Vec2(-50,0),new box2d.b2Vec2(-50,10));c.CreateFixture(b,0);b.SetAsEdge(new box2d.b2Vec2(50,0),new box2d.b2Vec2(50,10));c.CreateFixture(b,0);for(var d=0;40>d;++d)b=new box2d.b2CircleShape,
b.m_radius=.25,c=new box2d.b2BodyDef,c.type=box2d.b2BodyType.b2_dynamicBody,c.position.Set(-40+2*d,.5),this.m_world.CreateBody(c).CreateFixture(b,1);b=new box2d.b2PolygonShape;b.SetAsBox(2.5,1);d=new box2d.b2FixtureDef;d.density=1;d.shape=b;d.filter.groupIndex=-1;c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;c.position=box2d.b2Add_V2_V2(a,this.m_offset,new box2d.b2Vec2);this.m_chassis=this.m_world.CreateBody(c);this.m_chassis.CreateFixture(d);b=new box2d.b2CircleShape;b.m_radius=1.6;
d=new box2d.b2FixtureDef;d.density=1;d.shape=b;d.filter.groupIndex=-1;c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;c.position=box2d.b2Add_V2_V2(a,this.m_offset,new box2d.b2Vec2);this.m_wheel=this.m_world.CreateBody(c);this.m_wheel.CreateFixture(d);b=new box2d.b2RevoluteJointDef;b.Initialize(this.m_wheel,this.m_chassis,box2d.b2Add_V2_V2(a,this.m_offset,new box2d.b2Vec2));b.collideConnected=!1;b.motorSpeed=this.m_motorSpeed;b.maxMotorTorque=400;b.enableMotor=this.m_motorOn;this.m_motorJoint=
this.m_world.CreateJoint(b);a=box2d.b2Add_V2_V2(a,new box2d.b2Vec2(0,-.8),new box2d.b2Vec2);this.CreateLeg(-1,a);this.CreateLeg(1,a);this.m_wheel.SetTransform_V2_A(this.m_wheel.GetPosition(),120*box2d.b2_pi/180);this.CreateLeg(-1,a);this.CreateLeg(1,a);this.m_wheel.SetTransform_V2_A(this.m_wheel.GetPosition(),-120*box2d.b2_pi/180);this.CreateLeg(-1,a);this.CreateLeg(1,a)};goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"Construct",box2d.Testbed.TheoJansen.prototype.Construct);
box2d.Testbed.TheoJansen.prototype.Step=function(a){this.m_debugDraw.DrawString(5,this.m_textLine,"Keys: left = a, brake = s, right = d, toggle motor = m");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;box2d.Testbed.Test.prototype.Step.call(this,a)};goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"Step",box2d.Testbed.TheoJansen.prototype.Step);
box2d.Testbed.TheoJansen.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_motorJoint.SetMotorSpeed(-this.m_motorSpeed);break;case goog.events.KeyCodes.S:this.m_motorJoint.SetMotorSpeed(0);break;case goog.events.KeyCodes.D:this.m_motorJoint.SetMotorSpeed(this.m_motorSpeed);break;case goog.events.KeyCodes.M:this.m_motorJoint.EnableMotor(!this.m_motorJoint.IsMotorEnabled())}};goog.exportProperty(box2d.Testbed.TheoJansen.prototype,"Keyboard",box2d.Testbed.TheoJansen.prototype.Keyboard);
box2d.Testbed.TheoJansen.Create=function(a,c){return new box2d.Testbed.TheoJansen(a,c)};goog.exportProperty(box2d.Testbed.TheoJansen,"Create",box2d.Testbed.TheoJansen.Create);box2d.Testbed.Tiles=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_fixtureCount=0;var b=new box2d.b2Timer,d=.5,e=new box2d.b2BodyDef;e.position.y=-d;for(var e=this.m_world.CreateBody(e),f=new box2d.b2Vec2,g=f.y=0;10>g;++g){f.x=-200*d;for(var h=0;200>h;++h){var k=new box2d.b2PolygonShape;k.SetAsBox(d,d,f,0);e.CreateFixture(k,0);++this.m_fixtureCount;f.x+=2*d}f.y-=2*d}d=.5;k=new box2d.b2PolygonShape;k.SetAsBox(d,d);for(var d=new box2d.b2Vec2(-7,.75),f=new box2d.b2Vec2,l=new box2d.b2Vec2(.5625,
1.25),m=new box2d.b2Vec2(1.125,0),h=0;h<box2d.Testbed.Tiles.e_count;++h){f.Copy(d);for(g=h;g<box2d.Testbed.Tiles.e_count;++g)e=new box2d.b2BodyDef,e.type=box2d.b2BodyType.b2_dynamicBody,e.position.Copy(f),this.m_world.CreateBody(e).CreateFixture(k,5),++this.m_fixtureCount,f.SelfAdd(m);d.SelfAdd(l)}this.m_createTime=b.GetMilliseconds()};goog.inherits(box2d.Testbed.Tiles,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Tiles",box2d.Testbed.Tiles);box2d.Testbed.Tiles.e_count=20;
goog.exportProperty(box2d.Testbed.Tiles,"e_count",box2d.Testbed.Tiles.e_count);box2d.Testbed.Tiles.prototype.m_fixtureCount=0;goog.exportProperty(box2d.Testbed.Tiles.prototype,"m_fixtureCount",box2d.Testbed.Tiles.prototype.m_fixtureCount);box2d.Testbed.Tiles.prototype.m_createTime=0;goog.exportProperty(box2d.Testbed.Tiles.prototype,"m_createTime",box2d.Testbed.Tiles.prototype.m_createTime);
box2d.Testbed.Tiles.prototype.Step=function(a){var c=this.m_world.GetContactManager(),b=c.m_broadPhase.GetTreeHeight(),c=2*c.m_broadPhase.GetProxyCount()-1,c=Math.ceil(Math.log(c)/Math.log(2));this.m_debugDraw.DrawString(5,this.m_textLine,"dynamic tree height = %d, min = %d",b,c);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"create time = %6.2f ms, fixture count = %d",this.m_createTime,this.m_fixtureCount);
this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Tiles.prototype,"Step",box2d.Testbed.Tiles.prototype.Step);box2d.Testbed.Tiles.Create=function(a,c){return new box2d.Testbed.Tiles(a,c)};goog.exportProperty(box2d.Testbed.Tiles,"Create",box2d.Testbed.Tiles.Create);box2d.Testbed.TimeOfImpact=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_shapeA=new box2d.b2PolygonShape;this.m_shapeB=new box2d.b2PolygonShape;this.m_shapeA.SetAsBox(25,5);this.m_shapeB.SetAsBox(2.5,2.5)};goog.inherits(box2d.Testbed.TimeOfImpact,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TimeOfImpact",box2d.Testbed.TimeOfImpact);box2d.Testbed.TimeOfImpact.prototype.m_shapeA=null;goog.exportProperty(box2d.Testbed.TimeOfImpact.prototype,"m_shapeA",box2d.Testbed.TimeOfImpact.prototype.m_shapeA);
box2d.Testbed.TimeOfImpact.prototype.m_shapeB=null;goog.exportProperty(box2d.Testbed.TimeOfImpact.prototype,"m_shapeB",box2d.Testbed.TimeOfImpact.prototype.m_shapeB);
box2d.Testbed.TimeOfImpact.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);var c=new box2d.b2Sweep;c.c0.Set(24,-60);c.a0=2.95;c.c=c.c0;c.a=c.a0;c.localCenter.SetZero();a=new box2d.b2Sweep;a.c0.Set(53.474274,-50.252514);a.a0=513.36676;a.c.Set(54.595478,-51.083473);a.a=513.62781;a.localCenter.SetZero();var b=new box2d.b2TOIInput;b.proxyA.SetShape(this.m_shapeA,0);b.proxyB.SetShape(this.m_shapeB,0);b.sweepA.Copy(c);b.sweepB.Copy(a);b.tMax=1;var d=new box2d.b2TOIOutput;box2d.b2TimeOfImpact(d,
b);this.m_debugDraw.DrawString(5,this.m_textLine,"toi = %4.2f",d.t);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"max toi iters = %d, max root iters = %d",box2d.b2_toiMaxIters,box2d.b2_toiMaxRootIters);this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;var b=Array(box2d.b2_maxPolygonVertices),e=new box2d.b2Transform;c.GetTransform(e,0);for(c=0;c<this.m_shapeA.m_count;++c)b[c]=box2d.b2Mul_X_V2(e,this.m_shapeA.m_vertices[c],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(b,
this.m_shapeA.m_count,new box2d.b2Color(.9,.9,.9));e=new box2d.b2Transform;a.GetTransform(e,0);for(c=0;c<this.m_shapeB.m_count;++c)b[c]=box2d.b2Mul_X_V2(e,this.m_shapeB.m_vertices[c],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(b,this.m_shapeB.m_count,new box2d.b2Color(.5,.9,.5));a.GetTransform(e,d.t);for(c=0;c<this.m_shapeB.m_count;++c)b[c]=box2d.b2Mul_X_V2(e,this.m_shapeB.m_vertices[c],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(b,this.m_shapeB.m_count,new box2d.b2Color(.5,.7,.9));a.GetTransform(e,
1);for(c=0;c<this.m_shapeB.m_count;++c)b[c]=box2d.b2Mul_X_V2(e,this.m_shapeB.m_vertices[c],new box2d.b2Vec2);this.m_debugDraw.DrawPolygon(b,this.m_shapeB.m_count,new box2d.b2Color(.9,.5,.5))};goog.exportProperty(box2d.Testbed.TimeOfImpact.prototype,"Step",box2d.Testbed.TimeOfImpact.prototype.Step);box2d.Testbed.TimeOfImpact.Create=function(a,c){return new box2d.Testbed.TimeOfImpact(a,c)};goog.exportProperty(box2d.Testbed.TimeOfImpact,"Create",box2d.Testbed.TimeOfImpact.Create);var DEGTORAD=.017453292519943295,RADTODEG=57.29577951308232,TDC_LEFT=1,TDC_RIGHT=2,TDC_UP=4,TDC_DOWN=8,FUD_CAR_TIRE=0,FUD_GROUND_AREA=1,FixtureUserData=function(a){this.m_type=a};FixtureUserData.prototype.getType=function(){return this.m_type};var CarTireFUD=function(){FixtureUserData.call(this,FUD_CAR_TIRE)};goog.inherits(CarTireFUD,FixtureUserData);var GroundAreaFUD=function(a,c){FixtureUserData.call(this,FUD_GROUND_AREA);this.frictionModifier=a;this.outOfCourse=c};goog.inherits(GroundAreaFUD,FixtureUserData);
var TDTire=function(a){this.m_groundAreas=[];var c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;this.m_body=a.CreateBody(c);a=new box2d.b2PolygonShape;a.SetAsBox(.5,1.25);this.m_body.CreateFixture(a,1).SetUserData(new CarTireFUD);this.m_body.SetUserData(this);this.m_currentTraction=1};TDTire.prototype.setCharacteristics=function(a,c,b,d){this.m_maxForwardSpeed=a;this.m_maxBackwardSpeed=c;this.m_maxDriveForce=b;this.m_maxLateralImpulse=d};
TDTire.prototype.addGroundArea=function(a){this.m_groundAreas.push(a);this.updateTraction()};TDTire.prototype.removeGroundArea=function(a){this.m_groundAreas.splice(this.m_groundAreas.indexOf(a));this.updateTraction()};TDTire.prototype.updateTraction=function(){0===this.m_groundAreas.length?this.m_currentTraction=1:(this.m_currentTraction=0,this.m_groundAreas.forEach(function(a){a.frictionModifier>this.m_currentTraction&&(this.m_currentTraction=a.frictionModifier)}))};
TDTire.prototype.getLateralVelocity=function(){var a=this.m_body.GetWorldVector(new box2d.b2Vec2(1,0),new box2d.b2Vec2);return a.SelfMul(box2d.b2Dot_V2_V2(a,this.m_body.GetLinearVelocity()))};TDTire.prototype.getForwardVelocity=function(){var a=this.m_body.GetWorldVector(new box2d.b2Vec2(0,1),new box2d.b2Vec2);return a.SelfMul(box2d.b2Dot_V2_V2(a,this.m_body.GetLinearVelocity()))};
TDTire.prototype.updateFriction=function(){var a=this.getLateralVelocity().SelfMul(-1*this.m_body.GetMass());a.Length()>this.m_maxLateralImpulse&&a.SelfMul(this.m_maxLateralImpulse/a.Length());this.m_body.ApplyLinearImpulse(a.SelfMul(this.m_currentTraction),this.m_body.GetWorldCenter());this.m_body.ApplyAngularImpulse(.1*this.m_currentTraction*this.m_body.GetInertia()*-this.m_body.GetAngularVelocity());var a=this.getForwardVelocity(),c=-2*a.Normalize();this.m_body.ApplyForce(a.SelfMul(this.m_currentTraction*
c),this.m_body.GetWorldCenter())};TDTire.prototype.updateDrive=function(a){var c=0;switch(a&(TDC_UP|TDC_DOWN)){case TDC_UP:c=this.m_maxForwardSpeed;break;case TDC_DOWN:c=this.m_maxBackwardSpeed;break;default:return}a=this.m_body.GetWorldVector(new box2d.b2Vec2(0,1),new box2d.b2Vec2);var b=box2d.b2Dot_V2_V2(this.getForwardVelocity(),a),d=0;if(c>b)d=this.m_maxDriveForce;else if(c<b)d=-this.m_maxDriveForce;else return;this.m_body.ApplyForce(a.SelfMul(this.m_currentTraction*d),this.m_body.GetWorldCenter())};
TDTire.prototype.updateTurn=function(a){var c=0;switch(a&(TDC_LEFT|TDC_RIGHT)){case TDC_LEFT:c=15;break;case TDC_RIGHT:c=-15}this.m_body.ApplyTorque(c)};
var TDCar=function(a){this.m_tires=[];var c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;this.m_body=a.CreateBody(c);this.m_body.SetAngularDamping(3);c=[];c[0]=new box2d.b2Vec2(1.5,0);c[1]=new box2d.b2Vec2(3,2.5);c[2]=new box2d.b2Vec2(2.8,5.5);c[3]=new box2d.b2Vec2(1,10);c[4]=new box2d.b2Vec2(-1,10);c[5]=new box2d.b2Vec2(-2.8,5.5);c[6]=new box2d.b2Vec2(-3,2.5);c[7]=new box2d.b2Vec2(-1.5,0);var b=new box2d.b2PolygonShape;b.Set(c,8);this.m_body.CreateFixture(b,.1);c=new box2d.b2RevoluteJointDef;
c.bodyA=this.m_body;c.enableLimit=!0;c.lowerAngle=0;c.upperAngle=0;c.localAnchorB.SetZero();b=new TDTire(a);b.setCharacteristics(250,-40,300,8.5);c.bodyB=b.m_body;c.localAnchorA.Set(-3,.75);a.CreateJoint(c);this.m_tires.push(b);b=new TDTire(a);b.setCharacteristics(250,-40,300,8.5);c.bodyB=b.m_body;c.localAnchorA.Set(3,.75);a.CreateJoint(c);this.m_tires.push(b);b=new TDTire(a);b.setCharacteristics(250,-40,500,7.5);c.bodyB=b.m_body;c.localAnchorA.Set(-3,8.5);this.flJoint=a.CreateJoint(c);this.m_tires.push(b);
b=new TDTire(a);b.setCharacteristics(250,-40,500,7.5);c.bodyB=b.m_body;c.localAnchorA.Set(3,8.5);this.frJoint=a.CreateJoint(c);this.m_tires.push(b)};
TDCar.prototype.update=function(a){this.m_tires.forEach(function(a){a.updateFriction()});this.m_tires.forEach(function(b){b.updateDrive(a)});var c=35*DEGTORAD,b=160*DEGTORAD/60,d=0;switch(a&(TDC_LEFT|TDC_RIGHT)){case TDC_LEFT:d=c;break;case TDC_RIGHT:d=-c}c=this.flJoint.GetJointAngle();b=box2d.b2Clamp(d-c,-b,b);b=c+b;this.flJoint.SetLimits(b,b);this.frJoint.SetLimits(b,b)};var MyDestructionListener=function(a){box2d.Testbed.DestructionListener.call(this,a)};goog.inherits(MyDestructionListener,box2d.Testbed.DestructionListener);
MyDestructionListener.prototype.SayGoodbyeFixture=function(a){box2d.Testbed.DestructionListener.prototype.SayGoodbyeFixture.call(this,a)};MyDestructionListener.prototype.SayGoodbyeJoint=function(a){box2d.Testbed.DestructionListener.prototype.SayGoodbyeJoint.call(this,a)};
box2d.Testbed.TopdownCar=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_world.SetGravity(new box2d.b2Vec2(0,0));this.m_world.SetDestructionListener(this.m_destructionListener);var b=new box2d.b2BodyDef;this.m_groundBody=this.m_world.CreateBody(b);var b=new box2d.b2PolygonShape,d=new box2d.b2FixtureDef;d.shape=b;d.isSensor=!0;b.SetAsBox(9,7,new box2d.b2Vec2(-10,15),20*DEGTORAD);var e=this.m_groundBody.CreateFixture(d);e.SetUserData(new GroundAreaFUD(.5,!1));b.SetAsBox(9,5,new box2d.b2Vec2(5,
20),-40*DEGTORAD);e=this.m_groundBody.CreateFixture(d);e.SetUserData(new GroundAreaFUD(.2,!1));this.m_car=new TDCar(this.m_world);this.m_controlState=0};goog.inherits(box2d.Testbed.TopdownCar,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TopdownCar",box2d.Testbed.TopdownCar);
box2d.Testbed.TopdownCar.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.A:this.m_controlState|=TDC_LEFT;break;case goog.events.KeyCodes.D:this.m_controlState|=TDC_RIGHT;break;case goog.events.KeyCodes.W:this.m_controlState|=TDC_UP;break;case goog.events.KeyCodes.S:this.m_controlState|=TDC_DOWN;break;default:box2d.Testbed.Test.prototype.Keyboard.call(this,a)}};goog.exportProperty(box2d.Testbed.TopdownCar.prototype,"Keyboard",box2d.Testbed.TopdownCar.prototype.Keyboard);
box2d.Testbed.TopdownCar.prototype.KeyboardUp=function(a){switch(a){case goog.events.KeyCodes.A:this.m_controlState&=~TDC_LEFT;break;case goog.events.KeyCodes.D:this.m_controlState&=~TDC_RIGHT;break;case goog.events.KeyCodes.W:this.m_controlState&=~TDC_UP;break;case goog.events.KeyCodes.S:this.m_controlState&=~TDC_DOWN;break;default:box2d.Testbed.Test.prototype.KeyboardUp.call(this,a)}};goog.exportProperty(box2d.Testbed.TopdownCar.prototype,"KeyboardUp",box2d.Testbed.TopdownCar.prototype.KeyboardUp);
box2d.Testbed.TopdownCar.handleContact=function(a,c){var b=a.GetFixtureA(),d=a.GetFixtureB(),e=b.GetUserData(),f=d.GetUserData();e&&f&&(e.getType()==FUD_CAR_TIRE||f.getType()==FUD_GROUND_AREA?box2d.Testbed.TopdownCar.tire_vs_groundArea(b,d,c):e.getType()!=FUD_GROUND_AREA&&f.getType()!=FUD_CAR_TIRE||box2d.Testbed.TopdownCar.tire_vs_groundArea(d,b,c))};box2d.Testbed.TopdownCar.prototype.BeginContact=function(a){box2d.Testbed.TopdownCar.handleContact(a,!0)};
goog.exportProperty(box2d.Testbed.TopdownCar.prototype,"BeginContact",box2d.Testbed.TopdownCar.prototype.BeginContact);box2d.Testbed.TopdownCar.prototype.EndContact=function(a){box2d.Testbed.TopdownCar.handleContact(a,!1)};goog.exportProperty(box2d.Testbed.TopdownCar.prototype,"EndContact",box2d.Testbed.TopdownCar.prototype.EndContact);box2d.Testbed.TopdownCar.tire_vs_groundArea=function(a,c,b){a=a.GetBody().GetUserData();c=c.GetUserData();b?a.addGroundArea(c):a.removeGroundArea(c)};
box2d.Testbed.TopdownCar.prototype.Step=function(a){this.m_car.update(this.m_controlState);box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press w/a/s/d to control the car");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.TopdownCar.prototype,"Step",box2d.Testbed.TopdownCar.prototype.Step);box2d.Testbed.TopdownCar.Create=function(a,c){return new box2d.Testbed.TopdownCar(a,c)};
goog.exportProperty(box2d.Testbed.TopdownCar,"Create",box2d.Testbed.TopdownCar.Create);box2d.Testbed.Tumbler=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.allowSleep=!1;d.position.Set(0,10);var d=this.m_world.CreateBody(d),e=new box2d.b2PolygonShape;e.SetAsBox(.5,10,new box2d.b2Vec2(10,0),0);d.CreateFixture(e,5);e.SetAsBox(.5,10,new box2d.b2Vec2(-10,0),0);d.CreateFixture(e,5);e.SetAsBox(10,.5,new box2d.b2Vec2(0,10),0);d.CreateFixture(e,5);e.SetAsBox(10,.5,new box2d.b2Vec2(0,
-10),0);d.CreateFixture(e,5);e=new box2d.b2RevoluteJointDef;e.bodyA=b;e.bodyB=d;e.localAnchorA.Set(0,10);e.localAnchorB.Set(0,0);e.referenceAngle=0;e.motorSpeed=.05*box2d.b2_pi;e.maxMotorTorque=1E8;e.enableMotor=!0;this.m_joint=this.m_world.CreateJoint(e);this.m_count=0};goog.inherits(box2d.Testbed.Tumbler,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Tumbler",box2d.Testbed.Tumbler);box2d.Testbed.Tumbler.e_count=800;goog.exportProperty(box2d.Testbed.Tumbler,"e_count",box2d.Testbed.Tumbler.e_count);
box2d.Testbed.Tumbler.prototype.m_joint=null;goog.exportProperty(box2d.Testbed.Tumbler.prototype,"m_joint",box2d.Testbed.Tumbler.prototype.m_joint);box2d.Testbed.Tumbler.prototype.m_count=0;goog.exportProperty(box2d.Testbed.Tumbler.prototype,"m_count",box2d.Testbed.Tumbler.prototype.m_count);
box2d.Testbed.Tumbler.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);if(this.m_count<box2d.Testbed.Tumbler.e_count){a=new box2d.b2BodyDef;a.type=box2d.b2BodyType.b2_dynamicBody;a.position.Set(0,10);a=this.m_world.CreateBody(a);var c=new box2d.b2PolygonShape;c.SetAsBox(.125,.125);a.CreateFixture(c,1);++this.m_count}};goog.exportProperty(box2d.Testbed.Tumbler.prototype,"Step",box2d.Testbed.Tumbler.prototype.Step);
box2d.Testbed.Tumbler.Create=function(a,c){return new box2d.Testbed.Tumbler(a,c)};goog.exportProperty(box2d.Testbed.Tumbler,"Create",box2d.Testbed.Tumbler.Create);box2d.Testbed.VaryingFriction=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(13,.25);b=new box2d.b2BodyDef;b.position.Set(-4,22);b.angle=-.25;d=this.m_world.CreateBody(b);d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.25,1);b=new box2d.b2BodyDef;b.position.Set(10.5,19);d=this.m_world.CreateBody(b);
d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(13,.25);b=new box2d.b2BodyDef;b.position.Set(4,14);b.angle=.25;d=this.m_world.CreateBody(b);d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.25,1);b=new box2d.b2BodyDef;b.position.Set(-10.5,11);d=this.m_world.CreateBody(b);d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(13,.25);b=new box2d.b2BodyDef;b.position.Set(-4,6);b.angle=-.25;d=this.m_world.CreateBody(b);d.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.5,
.5);d=new box2d.b2FixtureDef;d.shape=e;d.density=25;for(var e=[.75,.5,.35,.1,0],f=0;5>f;++f)b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(-15+4*f,28),b=this.m_world.CreateBody(b),d.friction=e[f],b.CreateFixture(d)};goog.inherits(box2d.Testbed.VaryingFriction,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.VaryingFriction",box2d.Testbed.VaryingFriction);box2d.Testbed.VaryingFriction.Create=function(a,c){return new box2d.Testbed.VaryingFriction(a,c)};
goog.exportProperty(box2d.Testbed.VaryingFriction,"Create",box2d.Testbed.VaryingFriction.Create);box2d.Testbed.VaryingRestitution=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d.CreateFixture(e,0);e=new box2d.b2CircleShape;e.m_radius=1;d=new box2d.b2FixtureDef;d.shape=e;d.density=1;for(var e=[0,.1,.3,.5,.75,.9,1],f=0;7>f;++f)b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.position.Set(-10+3*f,20),b=this.m_world.CreateBody(b),d.restitution=
e[f],b.CreateFixture(d)};goog.inherits(box2d.Testbed.VaryingRestitution,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.VaryingRestitution",box2d.Testbed.VaryingRestitution);box2d.Testbed.VaryingRestitution.Create=function(a,c){return new box2d.Testbed.VaryingRestitution(a,c)};goog.exportProperty(box2d.Testbed.VaryingRestitution,"Create",box2d.Testbed.VaryingRestitution.Create);box2d.Testbed.VerticalStack=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bullet=null;this.m_bodies=Array(box2d.Testbed.VerticalStack.e_rowCount*box2d.Testbed.VerticalStack.e_columnCount);this.m_indices=Array(box2d.Testbed.VerticalStack.e_rowCount*box2d.Testbed.VerticalStack.e_columnCount);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));d.CreateFixture(e,0);e.SetAsEdge(new box2d.b2Vec2(20,0),new box2d.b2Vec2(20,
20));d.CreateFixture(e,0);for(var d=[0,-10,-5,5,10],f=0;f<box2d.Testbed.VerticalStack.e_columnCount;++f){e=new box2d.b2PolygonShape;e.SetAsBox(.5,.5);var g=new box2d.b2FixtureDef;g.shape=e;g.density=1;g.friction=.3;for(e=0;e<box2d.Testbed.VerticalStack.e_rowCount;++e){b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;var h=f*box2d.Testbed.VerticalStack.e_rowCount+e;box2d.ENABLE_ASSERTS&&box2d.b2Assert(h<box2d.Testbed.VerticalStack.e_rowCount*box2d.Testbed.VerticalStack.e_columnCount);this.m_indices[h]=
h;b.userData=this.m_indices[h];b.position.Set(d[f]+0,.55+1.1*e);b=this.m_world.CreateBody(b);this.m_bodies[h]=b;b.CreateFixture(g)}}};goog.inherits(box2d.Testbed.VerticalStack,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.VerticalStack",box2d.Testbed.VerticalStack);box2d.Testbed.VerticalStack.e_columnCount=1;goog.exportProperty(box2d.Testbed.VerticalStack,"e_columnCount",box2d.Testbed.VerticalStack.e_columnCount);box2d.Testbed.VerticalStack.e_rowCount=15;
goog.exportProperty(box2d.Testbed.VerticalStack,"e_rowCount",box2d.Testbed.VerticalStack.e_rowCount);box2d.Testbed.VerticalStack.prototype.m_bullet=null;goog.exportProperty(box2d.Testbed.VerticalStack.prototype,"m_bullet",box2d.Testbed.VerticalStack.prototype.m_bullet);box2d.Testbed.VerticalStack.prototype.m_bodies=null;goog.exportProperty(box2d.Testbed.VerticalStack.prototype,"m_bodies",box2d.Testbed.VerticalStack.prototype.m_bodies);box2d.Testbed.VerticalStack.prototype.m_indices=null;
goog.exportProperty(box2d.Testbed.VerticalStack.prototype,"m_indices",box2d.Testbed.VerticalStack.prototype.m_indices);
box2d.Testbed.VerticalStack.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.COMMA:this.m_bullet&&(this.m_world.DestroyBody(this.m_bullet),this.m_bullet=null);var c=new box2d.b2CircleShape;c.m_radius=.25;a=new box2d.b2FixtureDef;a.shape=c;a.density=20;a.restitution=.05;c=new box2d.b2BodyDef;c.type=box2d.b2BodyType.b2_dynamicBody;c.bullet=!0;c.position.Set(-31,5);this.m_bullet=this.m_world.CreateBody(c);this.m_bullet.CreateFixture(a);this.m_bullet.SetLinearVelocity(new box2d.b2Vec2(400,
0));break;case goog.events.KeyCodes.B:box2d.g_blockSolve=!box2d.g_blockSolve}};goog.exportProperty(box2d.Testbed.VerticalStack.prototype,"Keyboard",box2d.Testbed.VerticalStack.prototype.Keyboard);
box2d.Testbed.VerticalStack.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"Press: (,) to launch a bullet.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Blocksolve = %d",box2d.g_blockSolve?1:0)};goog.exportProperty(box2d.Testbed.VerticalStack.prototype,"Step",box2d.Testbed.VerticalStack.prototype.Step);
box2d.Testbed.VerticalStack.Create=function(a,c){return new box2d.Testbed.VerticalStack(a,c)};goog.exportProperty(box2d.Testbed.VerticalStack,"Create",box2d.Testbed.VerticalStack.Create);box2d.Testbed.WaveMachine=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.allowSleep=!1;d.position.Set(0,1);var d=this.m_world.CreateBody(d),e=new box2d.b2PolygonShape;e.SetAsBox(.05,1,new box2d.b2Vec2(2,0),0);d.CreateFixture(e,5);e.SetAsBox(.05,1,new box2d.b2Vec2(-2,0),0);d.CreateFixture(e,5);e.SetAsBox(2,.05,new box2d.b2Vec2(0,1),0);d.CreateFixture(e,5);e.SetAsBox(2,.05,new box2d.b2Vec2(0,
-1),0);d.CreateFixture(e,5);e=new box2d.b2RevoluteJointDef;e.bodyA=b;e.bodyB=d;e.localAnchorA.Set(0,1);e.localAnchorB.Set(0,0);e.referenceAngle=0;e.motorSpeed=.05*box2d.b2_pi;e.maxMotorTorque=1E7;e.enableMotor=!0;this.m_joint=this.m_world.CreateJoint(e);this.m_particleSystem.SetRadius(.025*3);d=box2d.Testbed.TestMain.GetParticleParameterValue();this.m_particleSystem.SetDamping(.2);b=new box2d.b2ParticleGroupDef;b.flags=d;e=new box2d.b2PolygonShape;e.SetAsBox(.9,.9,new box2d.b2Vec2(0,1),0);b.shape=
e;d=this.m_particleSystem.CreateParticleGroup(b);b.flags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(d,0);this.m_time=0};goog.inherits(box2d.Testbed.WaveMachine,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.WaveMachine",box2d.Testbed.WaveMachine);box2d.Testbed.WaveMachine.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);0<a.hz&&(this.m_time+=1/a.hz);this.m_joint.SetMotorSpeed(.05*Math.cos(this.m_time)*box2d.b2_pi)};
goog.exportProperty(box2d.Testbed.WaveMachine.prototype,"Step",box2d.Testbed.WaveMachine.prototype.Step);box2d.Testbed.WaveMachine.prototype.GetDefaultViewZoom=function(){return.1};goog.exportProperty(box2d.Testbed.WaveMachine.prototype,"GetDefaultViewZoom",box2d.Testbed.WaveMachine.prototype.GetDefaultViewZoom);box2d.Testbed.WaveMachine.Create=function(a,c){return new box2d.Testbed.WaveMachine(a,c)};goog.exportProperty(box2d.Testbed.WaveMachine,"Create",box2d.Testbed.WaveMachine.Create);box2d.Testbed.Web=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_bodies=Array(4);this.m_joints=Array(8);var b=null,d=new box2d.b2BodyDef,b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape;e.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(e,0);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.5);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-5,5);this.m_bodies[0]=this.m_world.CreateBody(d);this.m_bodies[0].CreateFixture(e,5);d.position.Set(5,
5);this.m_bodies[1]=this.m_world.CreateBody(d);this.m_bodies[1].CreateFixture(e,5);d.position.Set(5,15);this.m_bodies[2]=this.m_world.CreateBody(d);this.m_bodies[2].CreateFixture(e,5);d.position.Set(-5,15);this.m_bodies[3]=this.m_world.CreateBody(d);this.m_bodies[3].CreateFixture(e,5);var d=new box2d.b2DistanceJointDef,f;d.frequencyHz=2;d.dampingRatio=0;d.bodyA=b;d.bodyB=this.m_bodies[0];d.localAnchorA.Set(-10,0);d.localAnchorB.Set(-.5,-.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);
f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[0]=this.m_world.CreateJoint(d);d.bodyA=b;d.bodyB=this.m_bodies[1];d.localAnchorA.Set(10,0);d.localAnchorB.Set(.5,-.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[1]=this.m_world.CreateJoint(d);d.bodyA=b;d.bodyB=this.m_bodies[2];
d.localAnchorA.Set(10,20);d.localAnchorB.Set(.5,.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[2]=this.m_world.CreateJoint(d);d.bodyA=b;d.bodyB=this.m_bodies[3];d.localAnchorA.Set(-10,20);d.localAnchorB.Set(-.5,.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);
d.length=e.Length();this.m_joints[3]=this.m_world.CreateJoint(d);d.bodyA=this.m_bodies[0];d.bodyB=this.m_bodies[1];d.localAnchorA.Set(.5,0);d.localAnchorB.Set(-.5,0);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[4]=this.m_world.CreateJoint(d);d.bodyA=this.m_bodies[1];d.bodyB=this.m_bodies[2];d.localAnchorA.Set(0,.5);d.localAnchorB.Set(0,-.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,
new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[5]=this.m_world.CreateJoint(d);d.bodyA=this.m_bodies[2];d.bodyB=this.m_bodies[3];d.localAnchorA.Set(-.5,0);d.localAnchorB.Set(.5,0);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[6]=this.m_world.CreateJoint(d);
d.bodyA=this.m_bodies[3];d.bodyB=this.m_bodies[0];d.localAnchorA.Set(0,-.5);d.localAnchorB.Set(0,.5);e=d.bodyA.GetWorldPoint(d.localAnchorA,new box2d.b2Vec2);f=d.bodyB.GetWorldPoint(d.localAnchorB,new box2d.b2Vec2);e=box2d.b2Sub_V2_V2(f,e,new box2d.b2Vec2);d.length=e.Length();this.m_joints[7]=this.m_world.CreateJoint(d)};goog.inherits(box2d.Testbed.Web,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.Web",box2d.Testbed.Web);box2d.Testbed.Web.prototype.m_bodies=null;
goog.exportProperty(box2d.Testbed.Web.prototype,"m_bodies",box2d.Testbed.Web.prototype.m_bodies);box2d.Testbed.Web.prototype.m_joints=null;goog.exportProperty(box2d.Testbed.Web.prototype,"m_joints",box2d.Testbed.Web.prototype.m_joints);
box2d.Testbed.Web.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.B:for(a=0;4>a;++a)if(this.m_bodies[a]){this.m_world.DestroyBody(this.m_bodies[a]);this.m_bodies[a]=null;break}break;case goog.events.KeyCodes.J:for(a=0;8>a;++a)if(this.m_joints[a]){this.m_world.DestroyJoint(this.m_joints[a]);this.m_joints[a]=null;break}}};goog.exportProperty(box2d.Testbed.Web.prototype,"Keyboard",box2d.Testbed.Web.prototype.Keyboard);
box2d.Testbed.Web.prototype.Step=function(a){box2d.Testbed.Test.prototype.Step.call(this,a);this.m_debugDraw.DrawString(5,this.m_textLine,"This demonstrates a soft distance joint.");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE;this.m_debugDraw.DrawString(5,this.m_textLine,"Press: (b) to delete a body, (j) to delete a joint");this.m_textLine+=box2d.Testbed.DRAW_STRING_NEW_LINE};goog.exportProperty(box2d.Testbed.Web.prototype,"Step",box2d.Testbed.Web.prototype.Step);
box2d.Testbed.Web.prototype.JointDestroyed=function(a){for(var c=0;8>c;++c)if(this.m_joints[c]===a){this.m_joints[c]=null;break}};goog.exportProperty(box2d.Testbed.Web.prototype,"JointDestroyed",box2d.Testbed.Web.prototype.JointDestroyed);box2d.Testbed.Web.Create=function(a,c){return new box2d.Testbed.Web(a,c)};goog.exportProperty(box2d.Testbed.Web,"Create",box2d.Testbed.Web.Create);goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};
goog.userAgent.getNavigator=function(){return goog.global.navigator||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();
goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;
goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();
goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var a=goog.userAgent.getNavigator();return!!a&&goog.string.contains(a.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();
goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();
goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera){var a=goog.global.opera.version;return goog.isFunction(a)?a():a}var a="",c=goog.userAgent.getVersionRegexResult_();c&&(a=c?c[1]:"");return goog.userAgent.IE&&!goog.labs.userAgent.engine.isEdge()&&(c=goog.userAgent.getDocumentMode_(),c>parseFloat(a))?String(c):a};
goog.userAgent.getVersionRegexResult_=function(){var a=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv\:([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.IE&&goog.labs.userAgent.engine.isEdge())return/Edge\/([\d\.]+)/.exec(a);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(a)};goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();
goog.userAgent.compare=function(a,c){return goog.string.compareVersions(a,c)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[a]||(goog.userAgent.isVersionOrHigherCache_[a]=0<=goog.string.compareVersions(goog.userAgent.VERSION,a))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;
goog.userAgent.isDocumentModeOrHigher=function(a){return goog.userAgent.IE&&(goog.labs.userAgent.engine.isEdge()||goog.userAgent.DOCUMENT_MODE>=a)};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var a=goog.global.document,c=goog.userAgent.getDocumentMode_();return!a||!goog.userAgent.IE||!c&&goog.labs.userAgent.engine.isEdge()?void 0:c||("CSS1Compat"==a.compatMode?parseInt(goog.userAgent.VERSION,10):5)}();goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.events.getVendorPrefixedName_=function(a){return goog.userAgent.WEBKIT?"webkit"+a:goog.userAgent.OPERA?"o"+a.toLowerCase():a.toLowerCase()};
goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",
SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",
READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),
TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",
MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",
EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",
DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified"};goog.events.BrowserEvent=function(a,c){goog.events.Event.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.platformModifierKey=!1;this.event_=null;a&&this.init(a,c)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);
goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];
goog.events.BrowserEvent.prototype.init=function(a,c){var b=this.type=a.type,d=null;if(b==goog.events.EventType.TOUCHSTART||b==goog.events.EventType.TOUCHMOVE)d=a.targetTouches[0];else if(b==goog.events.EventType.TOUCHEND||b==goog.events.EventType.TOUCHCANCEL)d=a.changedTouches[0];this.target=goog.isNull(d)?a.target||a.srcElement:d.target;this.currentTarget=c;var e=a.relatedTarget;e?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(e,"nodeName")||(e=null)):b==goog.events.EventType.MOUSEOVER?e=
a.fromElement:b==goog.events.EventType.MOUSEOUT&&(e=a.toElement);this.relatedTarget=e;goog.isNull(d)?(this.offsetX=goog.userAgent.WEBKIT||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,
this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==b?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.state=a.state;this.event_=a;a.defaultPrevented&&this.preventDefault()};
goog.events.BrowserEvent.prototype.isButton=function(a){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==a:"click"==this.type?a==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[a])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,
V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,
TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,c,b,d,e){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&e)return goog.events.KeyCodes.isCharacterKey(a);if(e&&!d)return!1;goog.isNumber(c)&&(c=goog.events.KeyCodes.normalizeKeyCode(c));if(!b&&(c==goog.events.KeyCodes.CTRL||c==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&c==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&d&&b)switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
d&&c==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return!0;case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;default:return!1}};
goog.events.KeyCodes.normalizeKeyCode=function(a){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(a):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(a):a};
goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};
goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(a){switch(a){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return a}};box2d.Testbed.ApplyForce=function(a,c){box2d.Testbed.Test.call(this,a,c);this.m_body=null;this.m_world.SetGravity(new box2d.b2Vec2(0,0));var b=null,d=new box2d.b2BodyDef;d.position.Set(0,20);var b=this.m_world.CreateBody(d),e=new box2d.b2EdgeShape,f=new box2d.b2FixtureDef;f.shape=e;f.density=0;f.restitution=.4;e.SetAsEdge(new box2d.b2Vec2(-20,-20),new box2d.b2Vec2(-20,20));b.CreateFixture(f);e.SetAsEdge(new box2d.b2Vec2(20,-20),new box2d.b2Vec2(20,20));b.CreateFixture(f);e.SetAsEdge(new box2d.b2Vec2(-20,
20),new box2d.b2Vec2(20,20));b.CreateFixture(f);e.SetAsEdge(new box2d.b2Vec2(-20,-20),new box2d.b2Vec2(20,-20));b.CreateFixture(f);f=new box2d.b2Transform;f.q.SetAngle(.3524*box2d.b2_pi);f.p.Copy(box2d.b2Mul_R_V2(f.q,new box2d.b2Vec2(1,0),new box2d.b2Vec2));e=[];e[0]=box2d.b2Mul_X_V2(f,new box2d.b2Vec2(-1,0),new box2d.b2Vec2);e[1]=box2d.b2Mul_X_V2(f,new box2d.b2Vec2(1,0),new box2d.b2Vec2);e[2]=box2d.b2Mul_X_V2(f,new box2d.b2Vec2(0,.5),new box2d.b2Vec2);d=new box2d.b2PolygonShape;d.Set(e,3);f=new box2d.b2FixtureDef;
f.shape=d;f.density=4;d=new box2d.b2Transform;d.q.SetAngle(-.3524*box2d.b2_pi);d.p.Copy(box2d.b2Mul_R_V2(d.q,new box2d.b2Vec2(-1,0),new box2d.b2Vec2));e[0]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(-1,0),new box2d.b2Vec2);e[1]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(1,0),new box2d.b2Vec2);e[2]=box2d.b2Mul_X_V2(d,new box2d.b2Vec2(0,.5),new box2d.b2Vec2);d=new box2d.b2PolygonShape;d.Set(e,3);e=new box2d.b2FixtureDef;e.shape=d;e.density=2;d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.angularDamping=
2;d.linearDamping=.5;d.position.Set(0,2);d.angle=box2d.b2_pi;d.allowSleep=!1;this.m_body=this.m_world.CreateBody(d);this.m_body.CreateFixture(f);this.m_body.CreateFixture(e);e=new box2d.b2PolygonShape;e.SetAsBox(.5,.5);f=new box2d.b2FixtureDef;f.shape=e;f.density=1;f.friction=.3;for(e=0;10>e;++e){d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(0,5+1.54*e);d=this.m_world.CreateBody(d);d.CreateFixture(f);var g=d.GetInertia(),h=d.GetMass(),g=box2d.b2Sqrt(2*g/h),k=new box2d.b2FrictionJointDef;
k.localAnchorA.SetZero();k.localAnchorB.SetZero();k.bodyA=b;k.bodyB=d;k.collideConnected=!0;k.maxForce=10*h;k.maxTorque=h*g*10;this.m_world.CreateJoint(k)}};goog.inherits(box2d.Testbed.ApplyForce,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.ApplyForce",box2d.Testbed.ApplyForce);box2d.Testbed.ApplyForce.prototype.m_body=null;goog.exportProperty(box2d.Testbed.ApplyForce.prototype,"m_body",box2d.Testbed.ApplyForce.prototype.m_body);
box2d.Testbed.ApplyForce.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.W:var c=this.m_body.GetWorldVector(new box2d.b2Vec2(0,-200),new box2d.b2Vec2),b=this.m_body.GetWorldPoint(new box2d.b2Vec2(0,2),new box2d.b2Vec2);this.m_body.ApplyForce(c,b);break;case goog.events.KeyCodes.A:this.m_body.ApplyTorque(50);break;case goog.events.KeyCodes.D:this.m_body.ApplyTorque(-50)}box2d.Testbed.Test.prototype.Keyboard.call(this,a)};
goog.exportProperty(box2d.Testbed.ApplyForce.prototype,"Keyboard",box2d.Testbed.ApplyForce.prototype.Keyboard);box2d.Testbed.ApplyForce.Create=function(a,c){return new box2d.Testbed.ApplyForce(a,c)};goog.exportProperty(box2d.Testbed.ApplyForce,"Create",box2d.Testbed.ApplyForce.Create);box2d.Testbed.BasicSliderCrank=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=null,d=new box2d.b2BodyDef;d.position.Set(0,17);var e=b=this.m_world.CreateBody(d),f=new box2d.b2PolygonShape;f.SetAsBox(4,1);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(-8,20);d=this.m_world.CreateBody(d);d.CreateFixture(f,2);f=new box2d.b2RevoluteJointDef;f.Initialize(e,d,new box2d.b2Vec2(-12,20));this.m_world.CreateJoint(f);e=d;f=new box2d.b2PolygonShape;f.SetAsBox(8,1);d=new box2d.b2BodyDef;
d.type=box2d.b2BodyType.b2_dynamicBody;d.position.Set(4,20);d=this.m_world.CreateBody(d);d.CreateFixture(f,2);f=new box2d.b2RevoluteJointDef;f.Initialize(e,d,new box2d.b2Vec2(-4,20));this.m_world.CreateJoint(f);e=d;f=new box2d.b2PolygonShape;f.SetAsBox(3,3);d=new box2d.b2BodyDef;d.type=box2d.b2BodyType.b2_dynamicBody;d.fixedRotation=!0;d.position.Set(12,20);d=this.m_world.CreateBody(d);d.CreateFixture(f,2);f=new box2d.b2RevoluteJointDef;f.Initialize(e,d,new box2d.b2Vec2(12,20));this.m_world.CreateJoint(f);
e=new box2d.b2PrismaticJointDef;e.Initialize(b,d,new box2d.b2Vec2(12,17),new box2d.b2Vec2(1,0));this.m_world.CreateJoint(e)};goog.inherits(box2d.Testbed.BasicSliderCrank,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.BasicSliderCrank",box2d.Testbed.BasicSliderCrank);box2d.Testbed.BasicSliderCrank.Create=function(a,c){return new box2d.Testbed.BasicSliderCrank(a,c)};goog.exportProperty(box2d.Testbed.BasicSliderCrank,"Create",box2d.Testbed.BasicSliderCrank.Create);box2d.Testbed.HeavyOnLight=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,.5);var e=this.m_world.CreateBody(b),d=new box2d.b2CircleShape;d.m_radius=.5;e.CreateFixture(d,10);b.position.Set(0,6);e=this.m_world.CreateBody(b);d.m_radius=5;e.CreateFixture(d,10)};
goog.inherits(box2d.Testbed.HeavyOnLight,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.HeavyOnLight",box2d.Testbed.HeavyOnLight);box2d.Testbed.HeavyOnLight.Create=function(a,c){return new box2d.Testbed.HeavyOnLight(a,c)};goog.exportProperty(box2d.Testbed.HeavyOnLight,"Create",box2d.Testbed.HeavyOnLight.Create);box2d.Testbed.HeavyOnLightTwo=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=new box2d.b2EdgeShape;d.SetAsEdge(new box2d.b2Vec2(-40,0),new box2d.b2Vec2(40,0));b.CreateFixture(d,0);b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(0,2.5);var e=this.m_world.CreateBody(b),d=new box2d.b2CircleShape;d.m_radius=.5;e.CreateFixture(d,10);b.position.Set(0,3.5);e=this.m_world.CreateBody(b);e.CreateFixture(d,10);this.m_heavy=
null};goog.inherits(box2d.Testbed.HeavyOnLightTwo,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.HeavyOnLightTwo",box2d.Testbed.HeavyOnLightTwo);box2d.Testbed.HeavyOnLightTwo.prototype.m_heavy=null;goog.exportProperty(box2d.Testbed.HeavyOnLightTwo.prototype,"m_heavy",box2d.Testbed.HeavyOnLightTwo.prototype.m_heavy);
box2d.Testbed.HeavyOnLightTwo.prototype.ToggleHeavy=function(){if(null!==this.m_heavy)this.m_world.DestroyBody(this.m_heavy),this.m_heavy=null;else{var a=new box2d.b2BodyDef;a.type=box2d.b2BodyType.b2_dynamicBody;a.position.Set(0,9);this.m_heavy=this.m_world.CreateBody(a);a=new box2d.b2CircleShape;a.m_radius=5;this.m_heavy.CreateFixture(a,10)}};goog.exportProperty(box2d.Testbed.HeavyOnLightTwo.prototype,"ToggleHeavy",box2d.Testbed.HeavyOnLightTwo.prototype.ToggleHeavy);
box2d.Testbed.HeavyOnLightTwo.prototype.Keyboard=function(a){switch(a){case goog.events.KeyCodes.H:this.ToggleHeavy()}box2d.Testbed.Test.prototype.Keyboard.call(this,a)};goog.exportProperty(box2d.Testbed.HeavyOnLightTwo.prototype,"Keyboard",box2d.Testbed.HeavyOnLightTwo.prototype.Keyboard);box2d.Testbed.HeavyOnLightTwo.Create=function(a,c){return new box2d.Testbed.HeavyOnLightTwo(a,c)};goog.exportProperty(box2d.Testbed.HeavyOnLightTwo,"Create",box2d.Testbed.HeavyOnLightTwo.Create);box2d.Testbed.TestCCD=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,d=this.m_world.CreateBody(b),b=[];b[0]=new box2d.b2Vec2(-30,0);b[1]=new box2d.b2Vec2(30,0);b[2]=new box2d.b2Vec2(30,40);b[3]=new box2d.b2Vec2(-30,40);var e=new box2d.b2ChainShape;e.CreateLoop(b);d.CreateFixture(e,0);this.m_world.SetContinuousPhysics(!0);d=new box2d.b2FixtureDef;d.density=4;d.restitution=1.4;b=new box2d.b2BodyDef;b.type=box2d.b2BodyType.b2_dynamicBody;b.bullet=!0;b.position.Set(15,5);b=
this.m_world.CreateBody(b);e=new box2d.b2PolygonShape;e.SetAsBox(4.5,.45);d.shape=e;b.CreateFixture(d);e=new box2d.b2PolygonShape;e.SetAsBox(.45,8.1,new box2d.b2Vec2(-4.35,7.05),.2);d.shape=e;b.CreateFixture(d);e=new box2d.b2PolygonShape;e.SetAsBox(.45,8.1,new box2d.b2Vec2(4.35,7.05),-.2);d.shape=e;b.CreateFixture(d);for(e=0;5>e;e++)b=new box2d.b2CircleShape(1*Math.random()+.5),d.shape=b,d.friction=.3,d.density=1,d.restitution=1.1,b=new box2d.b2BodyDef,b.type=box2d.b2BodyType.b2_dynamicBody,b.bullet=
!0,b.position.Set(30*Math.random()-25,32*Math.random()+2),b=this.m_world.CreateBody(b),b.CreateFixture(d)};goog.inherits(box2d.Testbed.TestCCD,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TestCCD",box2d.Testbed.TestCCD);box2d.Testbed.TestCCD.Create=function(a,c){return new box2d.Testbed.TestCCD(a,c)};goog.exportProperty(box2d.Testbed.TestCCD,"Create",box2d.Testbed.TestCCD.Create);box2d.Testbed.TestRagdoll=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=[];d[0]=new box2d.b2Vec2(-30,0);d[1]=new box2d.b2Vec2(30,0);d[2]=new box2d.b2Vec2(30,40);d[3]=new box2d.b2Vec2(-30,40);var e=new box2d.b2ChainShape;e.CreateLoop(d);b.CreateFixture(e,0);for(var b=new box2d.b2BodyDef,d=new box2d.b2FixtureDef,e=new box2d.b2RevoluteJointDef,f=0;2>f;++f){var g=-20+2*Math.random()+40*f,h=30+5*Math.random();b.type=box2d.b2BodyType.b2_dynamicBody;
d.shape=new box2d.b2CircleShape(1.25);d.density=1;d.friction=.4;d.restitution=.3;b.position.Set(g,h);var k=this.m_world.CreateBody(b);k.CreateFixture(d);k.ApplyLinearImpulse(new box2d.b2Vec2(1E3*Math.random()-500,1E3*Math.random()-500),k.GetWorldCenter());d.shape=new box2d.b2PolygonShape;d.shape.SetAsBox(1.5,1);d.density=1;d.friction=.4;d.restitution=.1;b.position.Set(g,h-2.8);var l=this.m_world.CreateBody(b);l.CreateFixture(d);d.shape.SetAsBox(1.5,1);b.position.Set(g,h-4.3);var m=this.m_world.CreateBody(b);
m.CreateFixture(d);d.shape.SetAsBox(1.5,1);b.position.Set(g,h-5.8);var n=this.m_world.CreateBody(b);n.CreateFixture(d);d.density=1;d.friction=.4;d.restitution=.1;d.shape.SetAsBox(1.8,.65);b.position.Set(g-3,h-2);var p=this.m_world.CreateBody(b);p.CreateFixture(d);d.shape.SetAsBox(1.8,.65);b.position.Set(g+3,h-2);var q=this.m_world.CreateBody(b);q.CreateFixture(d);d.density=1;d.friction=.4;d.restitution=.1;d.shape.SetAsBox(1.7,.6);b.position.Set(g-5.7,h-2);var r=this.m_world.CreateBody(b);r.CreateFixture(d);
d.shape.SetAsBox(1.7,.6);b.position.Set(g+5.7,h-2);var u=this.m_world.CreateBody(b);u.CreateFixture(d);d.density=1;d.friction=.4;d.restitution=.1;d.shape.SetAsBox(.75,2.2);b.position.Set(g-.8,h-8.5);var t=this.m_world.CreateBody(b);t.CreateFixture(d);d.shape.SetAsBox(.75,2.2);b.position.Set(g+.8,h-8.5);var w=this.m_world.CreateBody(b);w.CreateFixture(d);d.density=1;d.friction=.4;d.restitution=.1;d.shape.SetAsBox(.6,2);b.position.Set(g-.8,h-12);var x=this.m_world.CreateBody(b);x.CreateFixture(d);d.shape.SetAsBox(.6,
2);b.position.Set(g+.8,h-12);var v=this.m_world.CreateBody(b);v.CreateFixture(d);e.enableLimit=!0;e.lowerAngle=box2d.b2DegToRad(-40);e.upperAngle=box2d.b2DegToRad(40);e.Initialize(l,k,new box2d.b2Vec2(g,h-1.5));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-85);e.upperAngle=box2d.b2DegToRad(130);e.Initialize(l,p,new box2d.b2Vec2(g-1.8,h-2));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-130);e.upperAngle=box2d.b2DegToRad(85);e.Initialize(l,q,new box2d.b2Vec2(g+1.8,h-2));this.m_world.CreateJoint(e);
e.lowerAngle=box2d.b2DegToRad(-130);e.upperAngle=box2d.b2DegToRad(10);e.Initialize(p,r,new box2d.b2Vec2(g-4.5,h-2));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-10);e.upperAngle=box2d.b2DegToRad(130);e.Initialize(q,u,new box2d.b2Vec2(g+4.5,h-2));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-15);e.upperAngle=box2d.b2DegToRad(15);e.Initialize(l,m,new box2d.b2Vec2(g,h-3.5));this.m_world.CreateJoint(e);e.Initialize(m,n,new box2d.b2Vec2(g,h-5));this.m_world.CreateJoint(e);e.lowerAngle=
box2d.b2DegToRad(-25);e.upperAngle=box2d.b2DegToRad(45);e.Initialize(n,t,new box2d.b2Vec2(g-.8,h-7.2));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-45);e.upperAngle=box2d.b2DegToRad(25);e.Initialize(n,w,new box2d.b2Vec2(g+.8,h-7.2));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-25);e.upperAngle=box2d.b2DegToRad(115);e.Initialize(t,x,new box2d.b2Vec2(g-.8,h-10.5));this.m_world.CreateJoint(e);e.lowerAngle=box2d.b2DegToRad(-115);e.upperAngle=box2d.b2DegToRad(25);e.Initialize(w,
v,new box2d.b2Vec2(g+.8,h-10.5));this.m_world.CreateJoint(e)}b.type=box2d.b2BodyType.b2_staticBody;d.shape=new box2d.b2PolygonShape;d.density=0;d.friction=.4;d.restitution=.3;for(e=1;10>=e;++e)d.shape.SetAsBox(1*e,1),b.position.Set(1*e-30,21-2*e),this.m_world.CreateBody(b).CreateFixture(d);for(e=1;10>=e;++e)d.shape.SetAsBox(1*e,1),b.position.Set(30-1*e,21-2*e),this.m_world.CreateBody(b).CreateFixture(d);d.shape.SetAsBox(3,4);b.position.Set(0,4);this.m_world.CreateBody(b).CreateFixture(d)};
goog.inherits(box2d.Testbed.TestRagdoll,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TestRagdoll",box2d.Testbed.TestRagdoll);box2d.Testbed.TestRagdoll.Create=function(a,c){return new box2d.Testbed.TestRagdoll(a,c)};goog.exportProperty(box2d.Testbed.TestRagdoll,"Create",box2d.Testbed.TestRagdoll.Create);box2d.Testbed.TestStack=function(a,c){box2d.Testbed.Test.call(this,a,c);var b=new box2d.b2BodyDef,b=this.m_world.CreateBody(b),d=[];d[0]=new box2d.b2Vec2(-30,0);d[1]=new box2d.b2Vec2(30,0);d[2]=new box2d.b2Vec2(30,40);d[3]=new box2d.b2Vec2(-30,40);var e=new box2d.b2ChainShape;e.CreateLoop(d);b.CreateFixture(e,0);b=new box2d.b2BodyDef;d=new box2d.b2FixtureDef;b.type=box2d.b2BodyType.b2_dynamicBody;d.shape=new box2d.b2PolygonShape;d.density=1;d.friction=.5;d.restitution=.1;d.shape.SetAsBox(1,1);for(e=
0;10>e;++e)b.position.Set(0+.2*Math.random()-.1,30-2.5*e),this.m_world.CreateBody(b).CreateFixture(d);for(e=0;10>e;++e)b.position.Set(10+.2*Math.random()-.1,30-2.5*e),this.m_world.CreateBody(b).CreateFixture(d);for(e=0;10>e;++e)b.position.Set(20+.2*Math.random()-.1,30-2.5*e),this.m_world.CreateBody(b).CreateFixture(d);b.type=box2d.b2BodyType.b2_staticBody;b.position.Set(0,0);e=[new box2d.b2Vec2(-30,0),new box2d.b2Vec2(-10,0),new box2d.b2Vec2(-30,10)];d.shape.Set(e,e.length);d.density=0;this.m_world.CreateBody(b).CreateFixture(d);
b.type=box2d.b2BodyType.b2_dynamicBody;b.position.Set(-25,20);d.shape=new box2d.b2CircleShape(4);d.density=2;d.restitution=.2;d.friction=.5;this.m_world.CreateBody(b).CreateFixture(d)};goog.inherits(box2d.Testbed.TestStack,box2d.Testbed.Test);goog.exportSymbol("box2d.Testbed.TestStack",box2d.Testbed.TestStack);box2d.Testbed.TestStack.Create=function(a,c){return new box2d.Testbed.TestStack(a,c)};goog.exportProperty(box2d.Testbed.TestStack,"Create",box2d.Testbed.TestStack.Create);box2d.Testbed.TestEntries={};
box2d.Testbed.GetTestEntries=function(a){a.push(new box2d.Testbed.TestEntry("Sparky",box2d.Testbed.Sparky.Create));a.push(new box2d.Testbed.TestEntry("Ragdolls",box2d.Testbed.TestRagdoll.Create));a.push(new box2d.Testbed.TestEntry("Topdown Car",box2d.Testbed.TopdownCar.Create));a.push(new box2d.Testbed.TestEntry("Tiles",box2d.Testbed.Tiles.Create));a.push(new box2d.Testbed.TestEntry("Heavy on Light",box2d.Testbed.HeavyOnLight.Create));a.push(new box2d.Testbed.TestEntry("Heavy on Light Two",box2d.Testbed.HeavyOnLightTwo.Create));
a.push(new box2d.Testbed.TestEntry("Vertical Stack",box2d.Testbed.VerticalStack.Create));a.push(new box2d.Testbed.TestEntry("Basic Slider Crank",box2d.Testbed.BasicSliderCrank.Create));a.push(new box2d.Testbed.TestEntry("Slider Crank",box2d.Testbed.SliderCrank.Create));a.push(new box2d.Testbed.TestEntry("Sphere Stack",box2d.Testbed.SphereStack.Create));a.push(new box2d.Testbed.TestEntry("Convex Hull",box2d.Testbed.ConvexHull.Create));a.push(new box2d.Testbed.TestEntry("Tumbler",box2d.Testbed.Tumbler.Create));
a.push(new box2d.Testbed.TestEntry("Ray-Cast",box2d.Testbed.RayCast.Create));a.push(new box2d.Testbed.TestEntry("Dump Shell",box2d.Testbed.DumpShell.Create));a.push(new box2d.Testbed.TestEntry("Apply Force",box2d.Testbed.ApplyForce.Create));a.push(new box2d.Testbed.TestEntry("Continuous Test",box2d.Testbed.ContinuousTest.Create));a.push(new box2d.Testbed.TestEntry("Time of Impact",box2d.Testbed.TimeOfImpact.Create));a.push(new box2d.Testbed.TestEntry("Motor Joint",box2d.Testbed.MotorJoint.Create));
a.push(new box2d.Testbed.TestEntry("One-Sided Platform",box2d.Testbed.OneSidedPlatform.Create));a.push(new box2d.Testbed.TestEntry("Mobile",box2d.Testbed.Mobile.Create));a.push(new box2d.Testbed.TestEntry("MobileBalanced",box2d.Testbed.MobileBalanced.Create));a.push(new box2d.Testbed.TestEntry("Conveyor Belt",box2d.Testbed.ConveyorBelt.Create));a.push(new box2d.Testbed.TestEntry("Gears",box2d.Testbed.Gears.Create));a.push(new box2d.Testbed.TestEntry("Varying Restitution",box2d.Testbed.VaryingRestitution.Create));
a.push(new box2d.Testbed.TestEntry("Cantilever",box2d.Testbed.Cantilever.Create));a.push(new box2d.Testbed.TestEntry("Character Collision",box2d.Testbed.CharacterCollision.Create));a.push(new box2d.Testbed.TestEntry("Edge Test",box2d.Testbed.EdgeTest.Create));a.push(new box2d.Testbed.TestEntry("Body Types",box2d.Testbed.BodyTypes.Create));a.push(new box2d.Testbed.TestEntry("Shape Editing",box2d.Testbed.ShapeEditing.Create));a.push(new box2d.Testbed.TestEntry("Car",box2d.Testbed.Car.Create));a.push(new box2d.Testbed.TestEntry("Prismatic",
box2d.Testbed.Prismatic.Create));a.push(new box2d.Testbed.TestEntry("Revolute",box2d.Testbed.Revolute.Create));a.push(new box2d.Testbed.TestEntry("Pulleys",box2d.Testbed.Pulleys.Create));a.push(new box2d.Testbed.TestEntry("Polygon Shapes",box2d.Testbed.PolyShapes.Create));a.push(new box2d.Testbed.TestEntry("Web",box2d.Testbed.Web.Create));a.push(new box2d.Testbed.TestEntry("RopeJoint",box2d.Testbed.RopeJoint.Create));a.push(new box2d.Testbed.TestEntry("Pinball",box2d.Testbed.Pinball.Create));a.push(new box2d.Testbed.TestEntry("Bullet Test",
box2d.Testbed.BulletTest.Create));a.push(new box2d.Testbed.TestEntry("Confined",box2d.Testbed.Confined.Create));a.push(new box2d.Testbed.TestEntry("Pyramid",box2d.Testbed.Pyramid.Create));a.push(new box2d.Testbed.TestEntry("Theo Jansen's Walker",box2d.Testbed.TheoJansen.Create));a.push(new box2d.Testbed.TestEntry("Edge Shapes",box2d.Testbed.EdgeShapes.Create));a.push(new box2d.Testbed.TestEntry("PolyCollision",box2d.Testbed.PolyCollision.Create));a.push(new box2d.Testbed.TestEntry("Bridge",box2d.Testbed.Bridge.Create));
a.push(new box2d.Testbed.TestEntry("Breakable",box2d.Testbed.Breakable.Create));a.push(new box2d.Testbed.TestEntry("Chain",box2d.Testbed.Chain.Create));a.push(new box2d.Testbed.TestEntry("Collision Filtering",box2d.Testbed.CollisionFiltering.Create));a.push(new box2d.Testbed.TestEntry("Collision Processing",box2d.Testbed.CollisionProcessing.Create));a.push(new box2d.Testbed.TestEntry("Compound Shapes",box2d.Testbed.CompoundShapes.Create));a.push(new box2d.Testbed.TestEntry("Distance Test",box2d.Testbed.DistanceTest.Create));
a.push(new box2d.Testbed.TestEntry("Dominos",box2d.Testbed.Dominos.Create));a.push(new box2d.Testbed.TestEntry("Dynamic Tree",box2d.Testbed.DynamicTreeTest.Create));a.push(new box2d.Testbed.TestEntry("Sensor Test",box2d.Testbed.SensorTest.Create));a.push(new box2d.Testbed.TestEntry("Varying Friction",box2d.Testbed.VaryingFriction.Create));a.push(new box2d.Testbed.TestEntry("Add Pair Stress Test",box2d.Testbed.AddPair.Create));a.push(new box2d.Testbed.TestEntry("Rope",box2d.Testbed.Rope.Create));a.push(new box2d.Testbed.TestEntry("Blob Test",
box2d.Testbed.BlobTest.Create));a.push(new box2d.Testbed.TestEntry("Buoyancy Test",box2d.Testbed.BuoyancyTest.Create));a.push(new box2d.Testbed.TestEntry("Continuous Collision",box2d.Testbed.TestCCD.Create));a.push(new box2d.Testbed.TestEntry("Stacked Boxes",box2d.Testbed.TestStack.Create));a.push(new box2d.Testbed.TestEntry("Domino Tower",box2d.Testbed.DominoTower.Create));a.push(new box2d.Testbed.TestEntry("Pyramid Topple",box2d.Testbed.PyramidTopple.Create));a.push(new box2d.Testbed.TestEntry("Sandbox",
box2d.Testbed.Sandbox.Create));a.push(new box2d.Testbed.TestEntry("Dam Break",box2d.Testbed.DamBreak.Create));a.push(new box2d.Testbed.TestEntry("Liquid Timer",box2d.Testbed.LiquidTimer.Create));a.push(new box2d.Testbed.TestEntry("Wave Machine",box2d.Testbed.WaveMachine.Create));a.push(new box2d.Testbed.TestEntry("Particles",box2d.Testbed.Particles.Create));a.push(new box2d.Testbed.TestEntry("Faucet",box2d.Testbed.Faucet.Create));a.push(new box2d.Testbed.TestEntry("Particle Drawing",box2d.Testbed.DrawingParticles.Create));
a.push(new box2d.Testbed.TestEntry("Soup",box2d.Testbed.Soup.Create));a.push(new box2d.Testbed.TestEntry("Surface Tension",box2d.Testbed.ParticlesSurfaceTension.Create));a.push(new box2d.Testbed.TestEntry("Elastic Particles",box2d.Testbed.ElasticParticles.Create));a.push(new box2d.Testbed.TestEntry("Rigid Particles",box2d.Testbed.RigidParticles.Create));a.push(new box2d.Testbed.TestEntry("Multiple Systems",box2d.Testbed.MultipleParticleSystems.Create));a.push(new box2d.Testbed.TestEntry("Impulse",
box2d.Testbed.Impulse.Create));a.push(new box2d.Testbed.TestEntry("Soup Stirrer",box2d.Testbed.SoupStirrer.Create));a.push(new box2d.Testbed.TestEntry("Fracker",box2d.Testbed.Fracker.Create));a.push(new box2d.Testbed.TestEntry("Maxwell",box2d.Testbed.Maxwell.Create));a.push(new box2d.Testbed.TestEntry("Ramp",box2d.Testbed.Ramp.Create));a.push(new box2d.Testbed.TestEntry("Pointy",box2d.Testbed.Pointy.Create));a.push(new box2d.Testbed.TestEntry("AntiPointy",box2d.Testbed.AntiPointy.Create));a.push(new box2d.Testbed.TestEntry("Corner Case",
box2d.Testbed.CornerCase.Create));a.push(new box2d.Testbed.TestEntry("Eye Candy",box2d.Testbed.EyeCandy.Create));return a};goog.exportSymbol("box2d.Testbed.GetTestEntries",box2d.Testbed.GetTestEntries);box2d.Testbed.TestMain={};box2d.Testbed.TestMain.fullscreenUI=new box2d.Testbed.FullScreenUI;box2d.Testbed.TestMain.particleParameter=new box2d.Testbed.ParticleParameter;
box2d.Testbed.Main=function(){var a=this,c=this.m_fps_div=document.body.appendChild(document.createElement("div"));c.style.position="absolute";c.style.left="0px";c.style.bottom="0px";c.style.backgroundColor="rgba(0,0,255,0.75)";c.style.color="white";c.style.font="10pt Courier New";c.style.zIndex=256;c.innerHTML="FPS";c=this.m_debug_div=document.body.appendChild(document.createElement("div"));c.style.position="absolute";c.style.left="0px";c.style.bottom="0px";c.style.backgroundColor="rgba(0,0,255,0.75)";
c.style.color="white";c.style.font="10pt Courier New";c.style.zIndex=256;c.innerHTML="";this.m_settings=new box2d.Testbed.Settings;this.m_test_entries=box2d.Testbed.GetTestEntries([]);this.m_projection0=new box2d.b2Vec2;this.m_viewCenter0=new box2d.b2Vec2;document.body.style.backgroundColor="black";var b=document.body.appendChild(document.createElement("div"));b.style.position="absolute";b.style.left="0px";b.style.top="0px";var d=function(){b.style.width=window.innerWidth+"px";b.style.height=window.innerHeight+
"px"};window.addEventListener("resize",function(a){d()},!1);window.addEventListener("orientationchange",function(a){d()},!1);d();c=b.appendChild(document.createElement("div"));c.style.textAlign="center";c.style.color="grey";c.innerHTML="Box2D Testbed version "+box2d.b2_version+" (revision "+box2d.b2_changelist+")";var e=b.appendChild(document.createElement("div")),c=this.m_canvas_div=e.appendChild(document.createElement("div"));c.style.position="absolute";c.style.left="0px";c.style.right="0px";c.style.top=
"0px";c.style.bottom="0px";var f=this.m_canvas=c.appendChild(document.createElement("canvas")),g=function(){f.width!==f.parentNode.clientWidth&&(f.width=f.parentNode.clientWidth);f.height!==f.parentNode.clientHeight&&(f.height=f.parentNode.clientHeight)};window.addEventListener("resize",function(a){g()},!1);window.addEventListener("orientationchange",function(a){g()},!1);g();this.m_ctx=this.m_canvas.getContext("2d");e=e.appendChild(document.createElement("div"));e.style.position="absolute";e.style.backgroundColor=
"rgba(255,255,255,0.5)";e.style.padding="8px";e.style.right="0px";e.style.top="0px";e.style.bottom="0px";e.style.overflowY="scroll";e.appendChild(document.createTextNode("Tests"));e.appendChild(document.createElement("br"));var h=document.createElement("select");h.id="testEntries";for(var k=0;k<this.m_test_entries.length;++k){var l=document.createElement("option");l.text=this.m_test_entries[k].name;l.value=k;h.add(l,null)}h.selectedIndex=this.m_test_index;h.addEventListener("change",function(b){a.m_test_index=
this.selectedIndex;a.LoadTest()},!1);e.appendChild(h);e.appendChild(document.createElement("br"));e.appendChild(document.createElement("hr"));h=function(a,b,c,d,e,f,g){a=a.appendChild(document.createElement("tr"));var h=a.appendChild(document.createElement("td"));h.align="right";h.appendChild(document.createTextNode(b));b=a.appendChild(document.createElement("td"));a=document.createElement("input");goog.userAgent.IE||(a.type="number");a.size=8;a.min=d||1;a.max=e||100;a.step=f||1;a.value=c;a.addEventListener("change",
function(a){g(parseInt(this.value,10))},!1);b.appendChild(a);return a};k=e.appendChild(document.createElement("table"));h(k,"Vel Iters",a.m_settings.velocityIterations,1,20,1,function(b){a.m_settings.velocityIterations=b});h(k,"Pos Iters",a.m_settings.positionIterations,1,20,1,function(b){a.m_settings.positionIterations=b});h(k,"Pcl Iters",a.m_settings.particleIterations,1,100,1,function(b){a.m_settings.particleIterations=b});h(k,"Hertz",a.m_settings.hz,10,120,1,function(b){a.m_settings.hz=b});h=
function(a,b,c,d){var e=document.createElement("input");e.type="checkbox";e.checked=c;e.addEventListener("click",function(a){d(this.checked)},!1);a.appendChild(e);a.appendChild(document.createTextNode(b));a.appendChild(document.createElement("br"));return e};h(e,"Sleep",a.m_settings.enableSleep,function(b){a.m_settings.enableSleep=b});h(e,"Warm Starting",a.m_settings.enableWarmStarting,function(b){a.m_settings.enableWarmStarting=b});h(e,"Time of Impact",a.m_settings.enableContinuous,function(b){a.m_settings.enableContinuous=
b});h(e,"Sub-Stepping",a.m_settings.enableSubStepping,function(b){a.m_settings.enableSubStepping=b});h(e,"Strict Particle/Body Contacts",a.m_settings.strictContacts,function(b){a.m_settings.strictContacts=b});k=e.appendChild(document.createElement("fieldset"));k.appendChild(document.createElement("legend")).appendChild(document.createTextNode("Draw"));h(k,"Shapes",a.m_settings.drawShapes,function(b){a.m_settings.drawShapes=b});h(k,"Particles",a.m_settings.drawParticles,function(b){a.m_settings.drawParticles=
b});h(k,"Joints",a.m_settings.drawJoints,function(b){a.m_settings.drawJoints=b});h(k,"AABBs",a.m_settings.drawAABBs,function(b){a.m_settings.drawAABBs=b});h(k,"Contact Points",a.m_settings.drawContactPoints,function(b){a.m_settings.drawContactPoints=b});h(k,"Contact Normals",a.m_settings.drawContactNormals,function(b){a.m_settings.drawContactNormals=b});h(k,"Contact Impulses",a.m_settings.drawContactImpulse,function(b){a.m_settings.drawContactImpulse=b});h(k,"Friction Impulses",a.m_settings.drawFrictionImpulse,
function(b){a.m_settings.drawFrictionImpulse=b});h(k,"Center of Masses",a.m_settings.drawCOMs,function(b){a.m_settings.drawCOMs=b});h(k,"Statistics",a.m_settings.drawStats,function(b){a.m_settings.drawStats=b});h(k,"Profile",a.m_settings.drawProfile,function(b){a.m_settings.drawProfile=b});h=function(a,b,c){var d=document.createElement("input");d.type="button";d.style.width=100;d.value=b;d.addEventListener("click",c,!1);a.appendChild(d);a.appendChild(document.createElement("br"));return d};e=e.appendChild(document.createElement("div"));
e.align="center";k=h(e,"Pause",function(b){a.Pause()});k=h(e,"Step",function(b){a.SingleStep()});k=h(e,"Restart",function(b){a.LoadTest(!0)});this.m_demo_button=k=h(e,"Demo",function(b){a.ToggleDemo()});window.addEventListener("contextmenu",function(a){a.preventDefault()},!0);c.addEventListener("mousemove",function(b){a.HandleMouseMove(b)},!1);c.addEventListener("mousedown",function(b){a.HandleMouseDown(b)},!1);c.addEventListener("mouseup",function(b){a.HandleMouseUp(b)},!1);c.addEventListener("mousewheel",
function(b){a.HandleMouseWheel(b)},!1);c.addEventListener("touchmove",function(b){a.HandleTouchMove(b)},!1);c.addEventListener("touchstart",function(b){a.HandleTouchStart(b)},!1);c.addEventListener("touchend",function(b){a.HandleTouchEnd(b)},!1);window.addEventListener("keydown",function(b){a.HandleKeyDown(b)},!1);window.addEventListener("keyup",function(b){a.HandleKeyUp(b)},!1);this.LoadTest();this.m_time_last=(new Date).getTime()};goog.exportSymbol("box2d.Testbed.Main",box2d.Testbed.Main);
box2d.Testbed.Main.prototype.m_time_last=0;goog.exportProperty(box2d.Testbed.Main.prototype,"m_time_last",box2d.Testbed.Main.prototype.m_time_last);box2d.Testbed.Main.prototype.m_fps_time=0;goog.exportProperty(box2d.Testbed.Main.prototype,"m_fps_time",box2d.Testbed.Main.prototype.m_fps_time);box2d.Testbed.Main.prototype.m_fps_frames=0;goog.exportProperty(box2d.Testbed.Main.prototype,"m_fps_frames",box2d.Testbed.Main.prototype.m_fps_frames);box2d.Testbed.Main.prototype.m_fps=0;
goog.exportProperty(box2d.Testbed.Main.prototype,"m_fps",box2d.Testbed.Main.prototype.m_fps);box2d.Testbed.Main.prototype.m_fps_div=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_fps_div",box2d.Testbed.Main.prototype.m_fps_div);box2d.Testbed.Main.prototype.m_debug_div=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_debug_div",box2d.Testbed.Main.prototype.m_debug_div);box2d.Testbed.Main.prototype.m_settings=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_settings",box2d.Testbed.Main.prototype.m_settings);
box2d.Testbed.Main.prototype.m_test=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_test",box2d.Testbed.Main.prototype.m_test);box2d.Testbed.Main.prototype.m_test_index=0;goog.exportProperty(box2d.Testbed.Main.prototype,"m_test_index",box2d.Testbed.Main.prototype.m_test_index);box2d.Testbed.Main.prototype.m_test_entries=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_test_entries",box2d.Testbed.Main.prototype.m_test_entries);box2d.Testbed.Main.prototype.m_shift=!1;
goog.exportProperty(box2d.Testbed.Main.prototype,"m_shift",box2d.Testbed.Main.prototype.m_shift);box2d.Testbed.Main.prototype.m_ctrl=!1;goog.exportProperty(box2d.Testbed.Main.prototype,"m_ctrl",box2d.Testbed.Main.prototype.m_ctrl);box2d.Testbed.Main.prototype.m_lMouseDown=!1;goog.exportProperty(box2d.Testbed.Main.prototype,"m_lMouseDown",box2d.Testbed.Main.prototype.m_lMouseDown);box2d.Testbed.Main.prototype.m_rMouseDown=!1;goog.exportProperty(box2d.Testbed.Main.prototype,"m_rMouseDown",box2d.Testbed.Main.prototype.m_rMouseDown);
box2d.Testbed.Main.prototype.m_projection0=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_projection0",box2d.Testbed.Main.prototype.m_projection0);box2d.Testbed.Main.prototype.m_viewCenter0=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_viewCenter0",box2d.Testbed.Main.prototype.m_viewCenter0);box2d.Testbed.Main.prototype.m_demo_mode=!1;goog.exportProperty(box2d.Testbed.Main.prototype,"m_demo_mode",box2d.Testbed.Main.prototype.m_demo_mode);
box2d.Testbed.Main.prototype.m_demo_time=0;goog.exportProperty(box2d.Testbed.Main.prototype,"m_demo_time",box2d.Testbed.Main.prototype.m_demo_time);box2d.Testbed.Main.prototype.m_max_demo_time=1E4;goog.exportProperty(box2d.Testbed.Main.prototype,"m_max_demo_time",box2d.Testbed.Main.prototype.m_max_demo_time);box2d.Testbed.Main.prototype.m_canvas_div=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_canvas_div",box2d.Testbed.Main.prototype.m_canvas_div);
box2d.Testbed.Main.prototype.m_canvas=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_canvas",box2d.Testbed.Main.prototype.m_canvas);box2d.Testbed.Main.prototype.m_ctx=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_ctx",box2d.Testbed.Main.prototype.m_ctx);box2d.Testbed.Main.prototype.m_demo_button=null;goog.exportProperty(box2d.Testbed.Main.prototype,"m_demo_button",box2d.Testbed.Main.prototype.m_demo_button);
box2d.Testbed.Main.prototype.ConvertViewportToElement=function(a,c){var b=this.m_canvas_div.getBoundingClientRect();return c.Set(+a.x+b.left+.5*b.width,-a.y+b.top+.5*b.height)};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertViewportToElement",box2d.Testbed.Main.prototype.ConvertViewportToElement);box2d.Testbed.Main.prototype.ConvertElementToViewport=function(a,c){var b=this.m_canvas_div.getBoundingClientRect();return c.Set(+(a.x-b.left-.5*b.width),-(a.y-b.top-.5*b.height))};
goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertElementToViewport",box2d.Testbed.Main.prototype.ConvertElementToViewport);box2d.Testbed.Main.prototype.ConvertProjectionToViewport=function(a,c){var b=c.Copy(a);box2d.b2Mul_S_V2(1/this.m_settings.viewZoom,b,b);box2d.b2Mul_S_V2(this.m_settings.canvasScale,b,b);return b};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertProjectionToViewport",box2d.Testbed.Main.prototype.ConvertProjectionToViewport);
box2d.Testbed.Main.prototype.ConvertViewportToProjection=function(a,c){var b=c.Copy(a);box2d.b2Mul_S_V2(1/this.m_settings.canvasScale,b,b);box2d.b2Mul_S_V2(this.m_settings.viewZoom,b,b);return b};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertViewportToProjection",box2d.Testbed.Main.prototype.ConvertViewportToProjection);
box2d.Testbed.Main.prototype.ConvertWorldToProjection=function(a,c){var b=c.Copy(a);box2d.b2Sub_V2_V2(b,this.m_settings.viewCenter,b);box2d.b2MulT_R_V2(this.m_settings.viewRotation,b,b);return b};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertWorldToProjection",box2d.Testbed.Main.prototype.ConvertWorldToProjection);
box2d.Testbed.Main.prototype.ConvertProjectionToWorld=function(a,c){var b=c.Copy(a);box2d.b2Mul_R_V2(this.m_settings.viewRotation,b,b);box2d.b2Add_V2_V2(this.m_settings.viewCenter,b,b);return b};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertProjectionToWorld",box2d.Testbed.Main.prototype.ConvertProjectionToWorld);
box2d.Testbed.Main.prototype.ConvertElementToWorld=function(a,c){var b=this.ConvertElementToViewport(a,c),b=this.ConvertViewportToProjection(b,c);return this.ConvertProjectionToWorld(b,c)};goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertElementToWorld",box2d.Testbed.Main.prototype.ConvertElementToWorld);box2d.Testbed.Main.prototype.ConvertElementToProjection=function(a,c){var b=this.ConvertElementToViewport(a,c);return this.ConvertViewportToProjection(b,c)};
goog.exportProperty(box2d.Testbed.Main.prototype,"ConvertElementToProjection",box2d.Testbed.Main.prototype.ConvertElementToProjection);box2d.Testbed.Main.prototype.MoveCamera=function(a){var c=this.m_settings.viewCenter.Clone(),b=this.m_settings.viewRotation.Clone();a.SelfRotateAngle(b.GetAngle());c.SelfAdd(a);this.m_settings.viewCenter.Copy(c)};goog.exportProperty(box2d.Testbed.Main.prototype,"MoveCamera",box2d.Testbed.Main.prototype.MoveCamera);
box2d.Testbed.Main.prototype.RollCamera=function(a){var c=this.m_settings.viewRotation.GetAngle();this.m_settings.viewRotation.SetAngle(c+a)};goog.exportProperty(box2d.Testbed.Main.prototype,"RollCamera",box2d.Testbed.Main.prototype.RollCamera);box2d.Testbed.Main.prototype.ZoomCamera=function(a){this.m_settings.viewZoom*=a;this.m_settings.viewZoom=box2d.b2Clamp(this.m_settings.viewZoom,.02,200)};goog.exportProperty(box2d.Testbed.Main.prototype,"ZoomCamera",box2d.Testbed.Main.prototype.ZoomCamera);
box2d.Testbed.Main.prototype.HomeCamera=function(){this.m_settings.viewZoom=this.m_test?this.m_test.GetDefaultViewZoom():1;this.m_settings.viewCenter.Set(0,20*this.m_settings.viewZoom);this.m_settings.viewRotation.SetAngle(box2d.b2DegToRad(0))};goog.exportProperty(box2d.Testbed.Main.prototype,"HomeCamera",box2d.Testbed.Main.prototype.HomeCamera);
box2d.Testbed.Main.prototype.HandleMouseMove=function(a){a=new box2d.b2Vec2(a.clientX,a.clientY);var c=this.ConvertElementToWorld(a,new box2d.b2Vec2);this.m_lMouseDown&&this.m_test.MouseMove(c);this.m_rMouseDown&&(a=this.ConvertElementToProjection(a,new box2d.b2Vec2),a=box2d.b2Sub_V2_V2(a,this.m_projection0,new box2d.b2Vec2),a=box2d.b2Sub_V2_V2(this.m_viewCenter0,a,new box2d.b2Vec2),this.m_settings.viewCenter.Copy(a))};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleMouseMove",box2d.Testbed.Main.prototype.HandleMouseMove);
box2d.Testbed.Main.prototype.HandleMouseDown=function(a){var c=new box2d.b2Vec2(a.clientX,a.clientY),b=this.ConvertElementToWorld(c,new box2d.b2Vec2);switch(a.which){case 1:this.m_lMouseDown=!0;this.m_shift?this.m_test.ShiftMouseDown(b):this.m_test.MouseDown(b);break;case 3:a=this.ConvertElementToProjection(c,new box2d.b2Vec2),this.m_projection0.Copy(a),this.m_viewCenter0.Copy(this.m_settings.viewCenter),this.m_rMouseDown=!0}};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleMouseDown",box2d.Testbed.Main.prototype.HandleMouseDown);
box2d.Testbed.Main.prototype.HandleMouseUp=function(a){var c=new box2d.b2Vec2(a.clientX,a.clientY),c=this.ConvertElementToWorld(c,new box2d.b2Vec2);switch(a.which){case 1:this.m_test.MouseUp(c);this.m_lMouseDown=!1;break;case 3:this.m_rMouseDown=!1}};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleMouseUp",box2d.Testbed.Main.prototype.HandleMouseUp);
box2d.Testbed.Main.prototype.HandleTouchMove=function(a){var c=new box2d.b2Vec2(a.touches[0].clientX,a.touches[0].clientY),c=this.ConvertElementToWorld(c,new box2d.b2Vec2);this.m_test.MouseMove(c);a.preventDefault()};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleTouchMove",box2d.Testbed.Main.prototype.HandleTouchMove);
box2d.Testbed.Main.prototype.HandleTouchStart=function(a){var c=new box2d.b2Vec2(a.touches[0].clientX,a.touches[0].clientY),c=this.ConvertElementToWorld(c,new box2d.b2Vec2);this.m_test.MouseDown(c);a.preventDefault()};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleTouchStart",box2d.Testbed.Main.prototype.HandleTouchStart);box2d.Testbed.Main.prototype.HandleTouchEnd=function(a){this.m_test.MouseUp(this.m_test.m_mouseWorld);a.preventDefault()};
goog.exportProperty(box2d.Testbed.Main.prototype,"HandleTouchEnd",box2d.Testbed.Main.prototype.HandleTouchEnd);box2d.Testbed.Main.prototype.HandleMouseWheel=function(a){0<a.wheelDelta?this.ZoomCamera(1/1.1):0>a.wheelDelta&&this.ZoomCamera(1.1);a.preventDefault()};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleMouseWheel",box2d.Testbed.Main.prototype.HandleMouseWheel);
box2d.Testbed.Main.prototype.HandleKeyDown=function(a){switch(a.keyCode){case goog.events.KeyCodes.CTRL:this.m_ctrl=!0;break;case goog.events.KeyCodes.SHIFT:this.m_shift=!0;break;case goog.events.KeyCodes.LEFT:this.m_ctrl?this.m_test&&this.m_test.ShiftOrigin(new box2d.b2Vec2(2,0)):this.MoveCamera(new box2d.b2Vec2(-.5,0));break;case goog.events.KeyCodes.RIGHT:this.m_ctrl?this.m_test&&this.m_test.ShiftOrigin(new box2d.b2Vec2(-2,0)):this.MoveCamera(new box2d.b2Vec2(.5,0));break;case goog.events.KeyCodes.DOWN:this.m_ctrl?
this.m_test&&this.m_test.ShiftOrigin(new box2d.b2Vec2(0,2)):this.MoveCamera(new box2d.b2Vec2(0,-.5));break;case goog.events.KeyCodes.UP:this.m_ctrl?this.m_test&&this.m_test.ShiftOrigin(new box2d.b2Vec2(0,-2)):this.MoveCamera(new box2d.b2Vec2(0,.5));break;case goog.events.KeyCodes.PAGE_DOWN:this.RollCamera(box2d.b2DegToRad(-1));break;case goog.events.KeyCodes.PAGE_UP:this.RollCamera(box2d.b2DegToRad(1));break;case goog.events.KeyCodes.Z:this.ZoomCamera(1/1.1);break;case goog.events.KeyCodes.X:this.ZoomCamera(1.1);
break;case goog.events.KeyCodes.HOME:this.HomeCamera();break;case goog.events.KeyCodes.R:this.LoadTest(!0);break;case goog.events.KeyCodes.SPACE:this.m_test&&this.m_test.LaunchBomb();break;case goog.events.KeyCodes.P:this.Pause();break;case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:this.DecrementTest();break;case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:this.IncrementTest();break;case goog.events.KeyCodes.COMMA:this.m_shift&&box2d.Testbed.TestMain.particleParameter.Decrement();break;case goog.events.KeyCodes.PERIOD:this.m_shift&&
box2d.Testbed.TestMain.particleParameter.Increment();break;case goog.events.KeyCodes.SLASH:this.SingleStep()}this.m_test&&this.m_test.Keyboard(a.keyCode)};goog.exportProperty(box2d.Testbed.Main.prototype,"HandleKeyDown",box2d.Testbed.Main.prototype.HandleKeyDown);box2d.Testbed.Main.prototype.HandleKeyUp=function(a){switch(a.keyCode){case goog.events.KeyCodes.CTRL:this.m_ctrl=!1;break;case goog.events.KeyCodes.SHIFT:this.m_shift=!1}this.m_test&&this.m_test.KeyboardUp(a.keyCode)};
goog.exportProperty(box2d.Testbed.Main.prototype,"HandleKeyUp",box2d.Testbed.Main.prototype.HandleKeyUp);box2d.Testbed.Main.prototype.UpdateTest=function(a){this.m_demo_mode?(this.m_demo_time+=a,this.m_demo_time>this.m_max_demo_time&&this.IncrementTest(),a=((500+this.m_max_demo_time-this.m_demo_time)/1E3).toFixed(0).toString(),this.m_demo_button.value=a):this.m_demo_button.value="Demo"};goog.exportProperty(box2d.Testbed.Main.prototype,"UpdateTest",box2d.Testbed.Main.prototype.UpdateTest);
box2d.Testbed.Main.prototype.DecrementTest=function(){0>=this.m_test_index&&(this.m_test_index=this.m_test_entries.length);this.m_test_index--;document.getElementById("testEntries").selectedIndex=this.m_test_index;this.LoadTest()};goog.exportProperty(box2d.Testbed.Main.prototype,"DecrementTest",box2d.Testbed.Main.prototype.DecrementTest);
box2d.Testbed.Main.prototype.IncrementTest=function(){this.m_test_index++;this.m_test_index>=this.m_test_entries.length&&(this.m_test_index=0);document.getElementById("testEntries").selectedIndex=this.m_test_index;this.LoadTest()};goog.exportProperty(box2d.Testbed.Main.prototype,"IncrementTest",box2d.Testbed.Main.prototype.IncrementTest);
box2d.Testbed.Main.prototype.LoadTest=function(a){box2d.Testbed.TestMain.fullscreenUI.Reset();a||box2d.Testbed.TestMain.particleParameter.Reset();this.m_demo_time=0;this.m_test&&this.m_test.RestoreParticleParameters();this.m_test=this.m_test_entries[this.m_test_index].createFcn(this.m_canvas,this.m_settings);a||this.HomeCamera()};goog.exportProperty(box2d.Testbed.Main.prototype,"LoadTest",box2d.Testbed.Main.prototype.LoadTest);box2d.Testbed.Main.prototype.Pause=function(){this.m_settings.pause=!this.m_settings.pause};
goog.exportProperty(box2d.Testbed.Main.prototype,"Pause",box2d.Testbed.Main.prototype.Pause);box2d.Testbed.Main.prototype.SingleStep=function(){this.m_settings.pause=!0;this.m_settings.singleStep=!0};goog.exportProperty(box2d.Testbed.Main.prototype,"SingleStep",box2d.Testbed.Main.prototype.SingleStep);box2d.Testbed.Main.prototype.ToggleDemo=function(){this.m_demo_mode=!this.m_demo_mode};goog.exportProperty(box2d.Testbed.Main.prototype,"ToggleDemo",box2d.Testbed.Main.prototype.ToggleDemo);
box2d.Testbed.Main.prototype.SimulationLoop=function(){var a=(new Date).getTime();this.m_time_last=this.m_time_last||a;var c=a-this.m_time_last;this.m_time_last=a;1E3<c&&(c=1E3);this.m_fps_time+=c;this.m_fps_frames++;500<=this.m_fps_time&&(this.m_fps=1E3*this.m_fps_frames/this.m_fps_time,this.m_fps_time=this.m_fps_frames=0,this.m_fps_div.innerHTML=this.m_fps.toFixed(1).toString());if(0<c){var a=this.m_ctx,b=this.m_canvas.width,d=this.m_canvas.height;a.clearRect(0,0,b,d);a.save();a.translate(.5*b,
.5*d);a.scale(1,-1);a.scale(this.m_settings.canvasScale,this.m_settings.canvasScale);a.lineWidth/=this.m_settings.canvasScale;a.scale(1/this.m_settings.viewZoom,1/this.m_settings.viewZoom);a.lineWidth*=this.m_settings.viewZoom;a.rotate(-this.m_settings.viewRotation.GetAngle());a.translate(-this.m_settings.viewCenter.x,-this.m_settings.viewCenter.y);this.m_test.Step(this.m_settings);b=[!1];box2d.Testbed.TestMain.particleParameter.Changed(b);d=this.m_test_entries[this.m_test_index].name;box2d.Testbed.TestMain.fullscreenUI.GetParticleParameterSelectionEnabled()&&
(d=d+" : "+box2d.Testbed.TestMain.particleParameter.GetName());this.m_test.DrawTitle(d);a.restore();b[0]&&this.LoadTest(!0);this.UpdateTest(c)}};goog.exportProperty(box2d.Testbed.Main.prototype,"SimulationLoop",box2d.Testbed.Main.prototype.SimulationLoop);box2d.Testbed.TestMain.SetRestartOnParticleParameterChange=function(a){box2d.Testbed.TestMain.particleParameter.SetRestartOnChange(a)};goog.exportSymbol("box2d.Testbed.TestMain.SetRestartOnParticleParameterChange",box2d.Testbed.TestMain.SetRestartOnParticleParameterChange);
box2d.Testbed.TestMain.SetParticleParameterValue=function(a){a=box2d.Testbed.TestMain.particleParameter.FindIndexByValue(a);box2d.Testbed.TestMain.particleParameter.Set(0<=a?a:0);return box2d.Testbed.TestMain.particleParameter.GetValue()};goog.exportSymbol("box2d.Testbed.TestMain.SetParticleParameterValue",box2d.Testbed.TestMain.SetParticleParameterValue);box2d.Testbed.TestMain.GetParticleParameterValue=function(){box2d.Testbed.TestMain.fullscreenUI.SetParticleParameterSelectionEnabled(!0);return box2d.Testbed.TestMain.particleParameter.GetValue()};
goog.exportSymbol("box2d.Testbed.TestMain.GetParticleParameterValue",box2d.Testbed.TestMain.GetParticleParameterValue);box2d.Testbed.TestMain.SetParticleParameters=function(a,c){box2d.Testbed.TestMain.particleParameter.SetDefinition(a,c)};goog.exportSymbol("box2d.Testbed.TestMain.SetParticleParameters",box2d.Testbed.TestMain.SetParticleParameters);var main={};goog.global.requestAnimFrame=function(){return goog.global.requestAnimationFrame||goog.global.webkitRequestAnimationFrame||goog.global.mozRequestAnimationFrame||goog.global.oRequestAnimationFrame||goog.global.msRequestAnimationFrame||function(a,c){goog.global.setTimeout(a,1E3/60)}}();main.m_app=null;goog.exportSymbol("main.m_app",main.m_app);main.start=function(){main.m_app=new box2d.Testbed.Main;main.loop()};goog.exportSymbol("main.start",main.start);
main.loop=function(){goog.global.requestAnimFrame(main.loop);main.m_app.SimulationLoop()};goog.exportSymbol("main.loop",main.loop);

//# sourceMappingURL=box2d-html5-testbed.map.json
